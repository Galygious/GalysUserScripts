
<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en" class="no-js">
<!--<![endif]-->
<head>
<title>Leads | Pixifi</title>
<meta charset="utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">


<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link rel="icon" type="image/png" href="/favicon.png?1" />
<link rel="apple-touch-icon" href="/admin/images/ios/touch-icon-iphone.png" />
<link rel="apple-touch-icon" sizes="72x72" href="/admin/images/ios/touch-icon-ipad.png" />
<link rel="apple-touch-icon" sizes="114x114" href="/admin/images/ios/touch-icon-iphone-retina.png" />
<link rel="apple-touch-icon" sizes="144x144" href="/admin/images/ios/touch-icon-ipad-retina.png" />
<script>
	window.dataLayer = window.dataLayer || [];
	dataLayer.push({
		event: 'user_info',
		'user_id': "26818",
		'studio_id': "12295",
		'plan_id': "7202",
		'plan_name': "Pro (2023)",
		'plan_price': "149.99",
	});
</script>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5LGM4THW');</script>
<script>  (function(g,u,i,d,e,s){g[e]=g[e]||[];var f=u.getElementsByTagName(i)[0];var k=u.createElement(i);k.async=true;k.src='https://static.userguiding.com/media/user-guiding-'+s+'-embedded.js';f.parentNode.insertBefore(k,f);if(g[d])return;var ug=g[d]={q:[]};ug.c=function(n){return function(){ug.q.push([n,arguments])};};var m=['previewGuide','finishPreview','track','identify','triggerNps','hideChecklist','launchChecklist'];for(var j=0;j<m.length;j+=1){ug[m[j]]=ug.c(m[j]);}})(window,document,'script','userGuiding','userGuidingLayer','625946695ID'); </script>
<script>
				window.userGuiding.identify(
				"26818",
				{"name":"1. Shawn","company_name":"Sweet Me Photography","email":"shawn@sweetmephotography.com","signed_up_at":"2016\/07\/19","isTrial":false,"role":"Staff","isLifetime":false}			);
	</script>

<!-- CSS Stylesheet-->

	<link type="text/css" rel="stylesheet" href="/admin/fonts/v2/simple.line.icons.pro.min2.css"/>

	<!-- <link type="text/css" rel="stylesheet" href="/admin/fonts/v2/simple.line.icons.pro.min.css"/> -->

<link type="text/css" rel="stylesheet" href="/admin/css/v4/bootstrap.min.css?__cb=20160413247" />
<link type="text/css" rel="stylesheet" href="/admin/css/v4/bootstrap-modal.css" />
<link type="text/css" rel="stylesheet" href="/admin/css/v4/bootstrap-modal-bs3patch.css" />
<!-- <link type="text/css" rel="stylesheet" href="/admin/css/v4/bootstrap.min.css" /> -->
<link href="//fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css" />



<!-- <link type="text/css" rel="stylesheet" href="/admin/js/new/plugins/simple-line-icons/simple-line-icons.min.css"/> -->

<link href="/admin/css/jquery-ui-1.10.0.custom.css" rel="stylesheet" type="text/css" />
<link href="/admin/css/jquery-ui-1.10.pixifi.css" rel="stylesheet" type="text/css" />

<!-- <link rel="stylesheet" href="/admin/css/navbar/transparent.buttons.css" type="text/css" media="screen">-->
<link href="/admin/css/jquery.ibutton.css" rel="stylesheet" type="text/css" />
<link href="/admin/css/jquery.timepicker-1.2.2.min.css" rel="stylesheet" type="text/css" />
<link href="/admin/css/tiptip.css" rel="stylesheet" type="text/css" />
<link href="/admin/css/jquery-fallr-2.0.css" rel="stylesheet" type="text/css" />

<link href="/admin/js/new/plugins/minicolors/jquery.minicolors.css" rel="stylesheet" type="text/css" />
<link href="/admin/js/new/plugins/timepicker/jquery.timepicker.css" rel="stylesheet" type="text/css" />
  <link href="/admin/js/new/plugins/fontpicker/jquery.fontpicker.css" rel="stylesheet" type="text/css"/>

<!-- <link href="/admin/css/flags.css" rel="stylesheet" type="text/css" /> -->
<link href="/admin/js/textboxlist/TextboxList.css" type="text/css" rel="stylesheet" />
<link href="/admin/js/textboxlist/TextboxList.Autocomplete.css" type="text/css" rel="stylesheet" />
<link href="/admin/css/jquery.multiselect.css" type="text/css" rel="stylesheet" />
<link href="/admin/css/jquery.pnotify.default.css?1702506046936" type="text/css" rel="stylesheet" media="all"  />

<script src="https://use.fontawesome.com/4a57556b7f.js" ></script>

<!--<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">-->
<link type="text/css" rel="stylesheet" href="/admin/js/new/plugins/bootstrap-toastr/toastr.min.css" />

<!-- <link type="text/css" rel="stylesheet" href="/admin/css/new/style.css" /> -->
<link type="text/css" rel="stylesheet" href="/admin/css/new/main.css?__cb=20160413247" />

<link type="text/css" rel="stylesheet" href="/admin/css/v4/components.2016.01.22.4.43.css?__cb=20160413247" />
<link type="text/css" rel="stylesheet" href="/admin/css/v4/layout.css?__cb=20160413247" />
<link type="text/css" rel="stylesheet" href="/admin/css/v4/default.css?__cb=20160413247" id="style_color" />
<link type="text/css" rel="stylesheet" href="//cdn.jsdelivr.net/qtip2/2.2.1/jquery.qtip.min.css" />

	<link type="text/css" rel="stylesheet" href="/admin/css/v5/new.skin.min50.css" />

	



<link type="text/css" rel="stylesheet" href="/admin/css/new/icons.css"  />
<link type="text/css" rel="stylesheet" href="/admin/js/new/v4/sweetalert2/sweet.alert.2.css" >
<link href="/admin/js/new/plugins/easyautocomplete/easy-autocomplete.min.css" rel="stylesheet"  />


<script src="/admin/js/new/jquery-1.11.2.min.js"></script>
<script src="/admin/js/new/jquery-migrate-1.2.1.min.js"></script>

<script type="text/javascript" src="/admin/js/jquery-ui-1.10.1.min.js"></script>

<script type="text/javascript" src="/admin/js/new/v4/bootstrap.min.js"></script>
<script type="text/javascript" src="/admin/js/new/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js" ></script>

<script type="text/javascript" src="/admin/js/new/v4/bootstrap-modal.js" ></script>
<script type="text/javascript" src="/admin/js/new/v4/bootstrap-modalmanager.js" ></script>

<script type="text/javascript" src="/admin/js/new/modernizr/modernizr.js"></script>
<script type="text/javascript" src="/admin/js/new/plugins/mmenu/jquery.mmenu.js" ></script>
<script type="text/javascript" src="/admin/js/new/plugins/holder/holder.js" ></script>

<script type="text/javascript" src="/admin/js/new/plugins/datetime/datetime.js" ></script>
<script type="text/javascript" src="/admin/js/jquery.tip.tip.js" ></script>
<script type="text/javascript"src="/admin/js/jquery.cookie.js"></script>
<script type="text/javascript"src="/admin/js/jquery.periodicalupdater.js" ></script>
<script type="text/javascript" src="/admin/js/jquery.pnotify.min.js" ></script>
<script type="text/javascript" src="/admin/js/jquery.ibutton.js" ></script>
<script type="text/javascript" src="/admin/js/jquery.metadata.js" ></script>

<script type="text/javascript" src="/admin/js/new/plugins/minicolors/jquery.minicolors.min.js" ></script>
<script type="text/javascript" src="/admin/js/new/plugins/bootstrap-toastr/toastr.min.js" ></script>

<script type="text/javascript" src="/admin/js/jquery.scrollTo-min.js" ></script>
<script type="text/javascript" src="/admin/js/jquery.raty.js" ></script>

<script type="text/javascript" src="/admin/js/multiselect/jquery.multiselect.js" ></script>
<script type="text/javascript" src="/admin/js/jquery.ui.combo.custom.js" ></script>
<script type="text/javascript" src="/admin/js/selectskin.js" ></script>

<script type="text/javascript" src="/admin/js/new/plugins/timepicker/jquery.timepicker.js" ></script>
<script>
	// Some usages rely on the default value in $.TimePicker.defaults.timeFormat, but in theory this _should_ be the
	// format used in most timepicker invocations:
	window.jqueryTimepickerDefaultTimeFormat = 'h:mm p';
	window.jqueryDatePickerDefaultDateFormat = 'mm/dd/YYYY';
	window.jqueryDatePickerDefaultStartOfWeek = 0;
</script>
<script type="text/javascript" src="/admin/js/jquery.date_input.js" ></script>
	<script type="text/javascript" src="/admin/js/new/plugins/fontpicker/jquery.fontpicker.js"></script>

<script src="/admin/js/textboxlist/GrowingInput.js" type="text/javascript" charset="utf-8" ></script>
<script src="/admin/js/textboxlist/TextboxList.js" type="text/javascript" charset="utf-8" ></script>
<script src="/admin/js/textboxlist/TextboxList.Autocomplete.js" type="text/javascript" charset="utf-8" ></script>
<script type="text/javascript" src="/admin/js/js_functions.js?__cb=20160413247" ></script>

<script type="text/javascript" src="/admin/js/jquery.leanModal.min.js" ></script>
<script src="/js/tinymce/tinymce.min.js"></script>

<link type="text/css" rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/2.4.0/fullcalendar.min.css" />
<link type="text/css" rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/2.4.0/fullcalendar.print.css" media='print' />

<script type='text/javascript' src='/admin/js/calendar/moment.min.js'></script>
<script src='//cdnjs.cloudflare.com/ajax/libs/fullcalendar/2.4.0/fullcalendar.min.js'></script>
<script type='text/javascript' src='/admin/js/base64.class.js'></script>
<script type='text/javascript' src='/admin/js/calendar/gcal.2.1.0.js'></script>
<script type='text/javascript' src='/admin/js/calendar/precise.range.js'></script>

<link type="text/css" rel="stylesheet" href="/admin/css/v6/index.css?1743792092322"/>

<script type="text/javascript" src="/admin/js/new/v4/pixifi.main.js?__cb=20200514232" ></script>
<script type="text/javascript" src="/admin/js/new/v4/layout.js" ></script>


<!--Script below provides sweetalert 2 version called by Swal.fire()-->
<script type="text/javascript" src="/admin/js/new/v4/sweetalert2/sweet.alert.2.updated.min.js" ></script>
<script type="text/javascript" src="/admin/js/new/v4/sweetalert2/sweet.alert.2.min.js" ></script>
<script type="text/javascript" src="/admin/js/new/v4/jquery.ddslick.min.js" ></script>


<script type="text/javascript" src="/admin/js/new/v4/jquery.popupoverlay.min.js" ></script>
<script type="text/javascript" src="//cdn.jsdelivr.net/qtip2/2.2.1/jquery.qtip.min.js" ></script>

<link type="text/css" rel="stylesheet" href="/admin/js/new/v4/selectize/selectize.bootstrap3.css" >
<script type="text/javascript" src="/admin/js/new/v4/selectize/selectize.min.js"  ></script>


<script type="text/javascript" src="/admin/js/new/plugins/easyautocomplete/jquery.easy-autocomplete.min.js"  ></script>
<script type="text/javascript" src="/admin/js/new/shiftSelectable.js" ></script>


<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCZsGGNSC4-WDr5f6VxvQjAF4vlFbVDpAU&libraries=places"></script>
<script>
		window.intercomSettings = {
		app_id: "dqhbukl0",
		alignment: "right",
		horizontal_padding: 20,
		vertical_padding: 20,
		user_id: "26818",
		email: "shawn@sweetmephotography.com",
		name: "1. Shawn Hughes",
		company: {
			company_id: "12295",
			name: "Sweet Me Photography",
			'Is Trialing': false,
					}
	};

	(function() {
		var w = window;
		var ic = w.Intercom;
		if (typeof ic === "function") {
			ic('reattach_activator');
			ic('update', window.intercomSettings); 
		} else {
			var d = document;
			var i = function() { i.c(arguments) };
			i.q = [];
			i.c = function(args) { i.q.push(args) };
			w.Intercom = i;
			function l() {
			var s = d.createElement('script');
			s.type = 'text/javascript';
			s.async = true;
			s.src = 'https://widget.intercom.io/widget/dqhbukl0';
			var x = d.getElementsByTagName('script')[0];
			x.parentNode.insertBefore(s, x);
			}
			if (w.attachEvent) {
				w.attachEvent('onload', l);
			} else {
				w.addEventListener('load', l, false);
			}
		}
	})();

	function openIntercomMessenger(event) {
		event.preventDefault(); 
		Intercom('show');
	}
</script>



<!--
<script type="text/javascript" src="//rawgit.com/mervick/emojionearea/master/dist/emojionearea.min.js" ></script>
<link href="//rawgit.com/mervick/emojionearea/master/dist/emojionearea.min.css" rel="stylesheet"  />
-->

<script type="text/javascript" src="/admin/js/new/v4/emojione/emojionearea.min.js" ></script>
<link href="/admin/js/new/v4/emojione/emojionearea.min.css" rel="stylesheet"  />

<script type="text/javascript" >
	
	function getCountryIDFromCountryName(country, callBackFn) {		//created on [02.28.20] : TH
		$.ajax({	type: "POST",	url: "/admin/fn/misc/getCountryIDFromCountryName/",
			data: {clientID: '12295', country: country},
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					if(typeof callBackFn === 'function') {
						callBackFn(results[1]);
					}
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function getStateIDFromStateName(state, callBackFn) {		//created on [02.28.20] : TH
		$.ajax({	type: "POST",	url: "/admin/fn/misc/getStateIDFromStateName/",
			data: {clientID: '12295', state: state},
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					if(typeof callBackFn === 'function') {
						callBackFn(results[1]);
					}
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}

	//This method will serialize a forms values but without the + symbols and such
	//added on [05.02.22] : TH
	$.fn.serializeAndEncode = function() {
		return $.map(this.serializeArray(), function(val) {
			return [val.name, encodeURIComponent(val.value)].join('=');
		}).join('&');
	};

	const REGEX_EMAIL = 	'([a-z0-9!#$%&\'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&\'*+/=?^_`{|}~-]+)*@' +
							'(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?)';


	function formatAMPM(date) {
		if(typeof date === 'object') {
			var hours = 	date.getHours(),
				minutes = 	date.getMinutes(),
				ampm = 		hours >= 12 ? 'PM' : 'AM',
				newTime = 	"";
				
				hours = 	hours % 12;
				hours = 	hours ? hours : 12; // the hour '0' should be '12'
				minutes = 	minutes < 10 ? '0'+minutes : minutes;
				newTime = 	hours + ':' + minutes + ':' + ampm;
			return newTime;
		} else {
			return '';
		}
	}
	
	
	function changeLayeredCalendar( newMonth , newYear , clientID , updateDIV, types, cssprefix, usePopup ) {
		$.ajax({	type: "POST",	url: "/admin/data/changeLayeredCalendar/",
			   data: {clientID: clientID,newMonth: newMonth, newYear: newYear, types: types,div: updateDIV,cssprefix: cssprefix,usePopup: usePopup},
			   success: function(   data   ){
			   		$("#" + updateDIV ).html(   data   );
			   		//if we're on the events availability page
			   		if($("#eventAvailability").length != 0) {
			   			
			   			$(".calendar_body .calendar_cell").bind('click', function(e) { 
					  		var month = 		$("#availability-calendars-month").val(),
					  			year = 			$("#availability-calendars-year").val(),
					  			day = 			$(this).find('.calender_day_number').html();
					  					  			
					  			changeAvailabileDate(month,day,year,'12295',$(this));
					  			
					  	});
			   			
			   		}
			   }
		 });
	}
	
	
	
	
	function getSystemVariable(key) {
		$.ajax({type: "POST",url: "/admin/data/getSystemVariableValue/", data: {clientID: '12295', key: key},
			success: function(   data   ){
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {}
			}
  		});
	}
	function setSystemVariable(key,value,successFn) {
		$.ajax({type: "POST",url: "/admin/data/saveSystemVariable/", data: {clientID: '12295', key: key, value: value},
			success: function(   data   ){
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					if(typeof successFn === 'function'){
						successFn();
					}
				}
			}
  		});
	}
	function clearSystemVariable(key) {
		$.ajax({type: "POST",url: "/admin/data/clearSystemVariable/", data: {clientID: '12295', key: key},
			success: function(   data   ){
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {}
			}
  		});
	}
	function strpad(num){
		if(parseInt(num)<10)	return "0"+parseInt(num);
		else	return parseInt(num);
	}
	function theDateToString(date_format,date) {
		switch (date_format){
			case "mm/dd/YYYY": 
				this.reg = new RegExp(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/); 
				this.date_decode = "new Date(matches[3], parseInt(matches[1]-1), matches[2]);";
				this.date_encode = 'strpad(date.getMonth()+1) + "/" + strpad(date.getDate()) + "/" + date.getFullYear();';
				this.date_encode_s = 'strpad(date.getMonth()+1) + "/" + strpad(date.getDate())';
			break;
			case "dd/mm/YYYY": 
				this.reg = new RegExp(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/); 
				this.date_decode = "new Date(matches[3], parseInt(matches[2]-1), matches[1]);";
				this.date_encode = 'strpad(date.getDate()) + "/" + strpad(date.getMonth()+1) + "/" + date.getFullYear();';
				this.date_encode_s = 'strpad(date.getDate()) + "/" + strpad(date.getMonth()+1)';
			break;
			case "YYYY-mm-dd":		
				this.reg = new RegExp(/^(\d{4})-(\d{1,2})-(\d{1,2})$/); 
				this.date_decode = "new Date(matches[1], parseInt(matches[2]-1), matches[3]);"; 
				this.date_encode = 'date.getFullYear() + "-" + strpad(date.getMonth()+1) + "-" + strpad(date.getDate());'; 
				this.date_encode_s = 'strpad(date.getMonth()+1) + "-" + strpad(date.getDate());'; 
			break;
	    }
	    return eval(this.date_encode);
	}
	
	
	
	function switchState(fieldName,country) {
		var countryID = 		$("#" + country).val(),
			value = 			$("#" + fieldName).val();
		$.ajax({	type: "GET", url: "/admin/data/displayStateProvinceField",
			data: "clientID=12295&class=styled&width=200&cc=" + escape(countryID) + "&fieldName=" + escape(fieldName)+ "&selected=" + escape(value),
			success: function(   data   ){			
				$("#" + fieldName).closest('.rightTitle').html(data);
				$("select.styled").select_skin();
			}
		});
	}
	
	
	function showWorkflowTaskNotes(taskID) {
		$("#task_notes_" + taskID).slideToggle();
	}
	
	function showWorkflowUpdateAssignedTo(taskID) {
		$.ajax({	type: "POST", url: "/admin/data/getWorkflowTaskUpdateAssignedToForm/",
			data: {clientID: '12295', taskID: taskID},
			success: function(   data   ) {
				var results = 				data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#assigned_to_" + taskID).html(results[1]);
					$("#assigned_to_" + taskID).slideDown();
				} else {
					alert("Error: " + results[1]);
				}
			}
		});
	}
	function cancelUpdateTaskAssignedTo(taskID) {
		$("#assigned_to_" + taskID).slideUp();
		$("#assigned_to_" + taskID).html('');
	}
	function updateTaskAssignedTo(taskID) {		
		var assignedTo = 			$("#" + taskID + "_staff_update").val();		
		$.ajax({	type: "POST", url: "/admin/data/updateWorkflowTaskAssignedTo/",
			data: {clientID: '12295', taskID: taskID, assignedTo: assignedTo},
			success: function(   data   ) {
				var results = 				data.split("{|}");
				if(results[0] == "SUCCESS") {
					cancelUpdateTaskAssignedTo(taskID);
					$("#assignedToName_" + taskID).html(results[1]);
				} else {
					alert("Error: " + results[1]);
				}
			}
		});
	}
	
	function deleteIndividualWorkflowTask(taskID,phaseID) {
		if(confirm("Are you sure you would like to delete this task?\n This action can NOT be undone!")) {
			$.ajax({	type: "POST", url: "/admin/data/deleteWorkflowTask/",
				data: {clientID: '12295', taskID: taskID, phaseID: phaseID},
				success: function(   data   ) {
					var results = 				data.split("{|}");
					if(results[0] == "SUCCESS") {
						$("#task_" + taskID).html('');
						$("#task_" + taskID).remove();
						
						//If this was the last task in the phase, then remove the phase
						if(results[1] == "delete") {
							$("#line_item_" + phaseID).html('');
							$("#line_item_" + phaseID).remove();
						}
					} else {
						
					}
				}
			});
		}
	}
	
	
	function showAndLaunchSearch() {		
		$('#searchbar').show();		
		$( "#search-query" ).autocomplete({
			minLength: 2,
			source: function(request, response) {
				$.ajax({
					url: "/admin/data/mainSearch",
					dataType: "json",
					data: {	clientID: '12295', term: request.term	},
					success: function(data) {
						var responseData = [];						
						response(data);						
					}
				});
			},
			focus: function( event, ui ) {
				$( "#search-query" ).val( ui.item.label );
				return false;
			},
			select: function( event, ui ) {
				location.href="/admin/" + ui.item.icon + "s/" + ui.item.value + "/";
				return false;
			}			
		})
		.data( "uiAutocomplete" )._renderItem = function( ul, item ) {
			
			//Reformat the data
			item.icon = 			item.objectType;
			item.label = 			item.objectName;
			item.value = 			item.objectID;
			
			var iconImg = "";
			var secondaryInfo = "";
			
			switch(item.icon) {
				case "lead":
					if( item.metaData.archived == "1") {
						iconImg = '<img src="/admin/icons/big/leads_off.png" align="left" title="This lead has been Archived" /><br /><span class="smallText"><strong>Lead</strong></span><br />';
						secondaryInfo = '<br /><div class="smallText" >' +
										'Date: <strong>' + item.metaData.date + '</strong><br />' +
										'<div class="roundedTag" style="color: #FFF; background-color: #5ad2fa;">Archived</div></div>';
					} else {
						iconImg = '<img src="/admin/icons/big/leads.png" align="left" /><br /><span class="smallText"><strong>Lead</strong></span><br />';
						secondaryInfo = '<br /><div class="smallText">' +
										'Date: <strong>' + item.metaData.date + '</strong><br />' +
										'</div>';
					}
					break;
				case "client":
					var eventInfoHTML = "";
					var projectInfoHTML = "";
					var date = "";
					
					if(item.metaData.events.length > 0) {
						eventInfoHTML += "Events: <br />";	
						$.each(item.metaData.events, function (indx, values) {							
							if(values.duedate != "") {
								date = ' on ' + values.date;
							} else {
								date = "";
							}
							eventInfoHTML += '<i class="icon-calendar"></i> <strong>' + values.eventName + '</strong>' + date + '<br />'; //</a>
						});				
					}
					if(item.metaData.projects.length > 0) {
						projectInfoHTML += "Projects: <br />";	
						$.each(item.metaData.projects, function (indx, values) {							
							if(values.duedate != "") {
								date = ' due on ' + values.duedate;
							} else {
								date = "";
							}					
							projectInfoHTML += '<i class="icon-windows-open"></i> <strong>' + values.projName + '</strong>' + date + '<br />'; //</a>
						});				
					}
					
					iconImg = '<span class="headerTitle"><i class="icon-users"></i></span><br /><span class="smallText"><strong>Client</strong></span><br />';
					secondaryInfo = '<br /><div class="smallText" >' +
									'' + eventInfoHTML + '' +
									'' + projectInfoHTML + '</div>';
					break;
				case "event":
					iconImg = '<span class="headerTitle"><i class="icon-calendar"></i></span><br /><span class="smallText"><strong>Event</strong></span><br />';
					secondaryInfo = '<br /><div class="smallText" >' +
									'Date: <strong>' + item.metaData.date + '</strong></div>';
									//'Start Time: <strong>' + item.metaData.timestart + '</strong><br />' +
									//'End Time: <strong>' + item.metaData.timeend + '</strong></span>';
					break;
				case "project":
					if(item.metaData.duedate != "") {
						date = ' due on <strong>' + item.metaData.duedate + '</strong>';
					} else {
						date = "";
					}	
				
					iconImg = '<span class="headerTitle"><i class="icon-windows-open"></i></span><br /><span class="smallText"><strong>Project</strong></span><br />';
					secondaryInfo = '<br /><div class="smallText" >' +
									'% Complete: <strong>' + item.metaData.percentcomplete + '%</strong>' +
									'' + date + '</div>';
					break;
				case "workshop":
					iconImg = '<span class="headerTitle"><i class="icon-list"></i></span><br /><span class="smallText"><strong>Attendee</strong></span><br />';
					secondaryInfo = '<br /><div class="smallText" style="text-align: left;" >' +
									'<strong><a href="/admin/workshops/' + item.metaData.workshopID + '/" target="_blank" class="smallText" ><img src="/admin/icons/workshops.png" align="absmiddle" /> ' + item.metaData.workshopName + '</a></strong><br />' +
									'Ticket: <strong>' + item.metaData.workshopTicketName + '</strong><br />' +
									'Phone: <strong>' + item.metaData.phone + '</strong><br />' +
									'E-mail: <strong>' + item.metaData.email + '</strong><br />' +
									'Type: <strong>' + item.metaData.status + '</strong><br />' +
									'Txn #/Coupon Code: <strong>' + item.metaData.workshopTicketTxn + '</strong><br />' +									
									'</div>';
					break;
				case "invoice":
					iconImg = '<span class="headerTitle"><i class="icon-doc"></i></span><br /><span class="smallText"><strong>Invoice</strong></span><br />';
					secondaryInfo = '<br /><div class="smallText" >' +
									'<strong>' + item.label + '</strong></div>';
									//'Start Time: <strong>' + item.metaData.timestart + '</strong><br />' +
									//'End Time: <strong>' + item.metaData.timeend + '</strong></span>';
					break;
				case "contract":
					if(item.metaData.accepted == "1") {
						accepted = ' <strong><i class="icon-check-circle font-green-jungle" title="Accepted"></i> Accepted</strong>';
					} else {
						accepted = "";
					}	
				
					iconImg = '<span class="headerTitle"><i class="icon-write-2"></i></span><br /><span class="smallText"><strong>Contract</strong></span><br />';
					secondaryInfo = '<br /><div class="smallText" >' +
									'' + accepted + '</div>';
					break;
			}
			
			return $( "<li></li>" )
				.data( "item.autocomplete", item )
				.append( "<a class='searchClick' ><div class='searchTypeIcon' >" + 
								iconImg + "</div>" + 
								"<div class='searchInfo'>" + item.label + "" + secondaryInfo + "</div><br style='clear: both;' /></a>")
				.appendTo( ul );
		};
	}
	
	
	$.fn.qtip.zindex = 200000;
	
	
	
	$(function() {		
		// Keyboard commands for adding a lead from anywhere in the system
		/*$(document).bind('keydown', 'Alt+Ctrl+l',function (evt){
			showQuickAddLead();
			return false; 
		});		
		*/
		
		//Safari backbutton hack to try and fix it from loading from the cache
		$(window).bind("pageshow", function(event) {
		    if (event.originalEvent.persisted) {
		        window.location.reload() 
		    }
		});
		
		
		
		
		//Widget full-screen
        $('body').on('click', '.portlet > .portlet-title .fullscreen', function(e) {
            e.preventDefault();
            var portlet = $(this).closest(".portlet");
            if (portlet.hasClass('portlet-fullscreen')) {
                $(this).removeClass('on');
                portlet.removeClass('portlet-fullscreen');
                $('body').removeClass('page-portlet-fullscreen');
                portlet.children('.portlet-body').css('height', 'auto');
                
                $(window).resize();	//added on [06.09.2k16] : TH to fix chart auto-resizing
                
            } else {
                var height = PixifiMain.getViewPort().height -
                    portlet.children('.portlet-title').outerHeight() - 
                    parseInt(portlet.children('.portlet-body').css('padding-top')) - 
                    parseInt(portlet.children('.portlet-body').css('padding-bottom'));
                
                $(this).addClass('on');
                portlet.addClass('portlet-fullscreen');
                $('body').addClass('page-portlet-fullscreen');                
                portlet.children('.portlet-body').css('height', height);
                
                $(window).resize();	//added on [06.09.2k16] : TH to fix chart auto-resizing
            }
        });
		
		
		
		$("time.timeago").timeago();
		$("#systemNotificationsTOTAL").hover(function() {
			getNotificationNumber();
			refreshTopNotifications();
		});
		
		
		//added on [04.27.2k16]
		$('a.helpTip').qtip({
			style: { classes: 'qtip-rounded qtip-dark qtip-pixifi' },
			content: {
				attr: 'data-tooltip'
			},
			position: {
		        viewport: $(window)
		    },
            hide: {
                fixed: true,
                delay: 300
            }
		});
		
		
		$("input[xclass=styled]:checkbox").iButton();//.trigger("change");
		$("input[xclass=styled]:radio").iButton();//.trigger("change");
		
		$("select.styled").select_skin();
		$('input.date_picker').jdPicker({
			date_format: 'mm/dd/YYYY',
			start_of_week: 0		});
		$('input.timepicker').timepicker({
			interval: 15,
			timeFormat: 'h:mm p',			scrollbar: true,
			change: function(time) {
	            var picker = $(this).timepicker({timeFormat: 'h:mm p'}),
	            	fieldID = 	$(this).attr('id').replace('_chooser','');
	            	$("#" + fieldID).val(formatAMPM(time));
	        }
		});
		
		$("#navbarContent img[title]:not(iframe)").tipTip({maxWidth: "auto", edgeOffset: 10, defaultPosition: "bottom", delay: 75, fadeIn: 75  });
		$("#content [title]:not(iframe)").tipTip({attribute: 'title', maxWidth: "auto", edgeOffset: 10, defaultPosition: "top", delay: 75, fadeIn: 75  });		
		$(".userProfileNav [title]:not(iframe)").tipTip({attribute: 'title', maxWidth: "auto", edgeOffset: 10, defaultPosition: "bottom", delay: 75, fadeIn: 75  });		
		
		
		getAllActiveTimers();

		checkForSMTPErrors();

		$('input.colorpickerField').minicolors({
			position: 'bottom right'
		});

		$('input.font-picker').fontpicker({
			lang: 'en',
			variants: false,
			lazyLoad: true,
			showClear: false,
			nrRecents: 3,
			googleFonts: 'Alegreya,Alegreya Sans,Archivo Narrow,Boogaloo,Cardo,Chivo,Coiny,DM Sans,Dosis,Emilys Candy,Faster One,Fira Sans,Galindo,Gilda Display,IBM Plex Sans,Inconsolata,Inter,Karla,Laila,Lato,Libre Franklin,Manrope,Montserrat,Open Sans,Overlock,Poppins,Proza Libre,PT Sans,Raleway,Roboto,Rubik,Source Sans 3,Space Grotesk,Space Mono,Syne,Work Sans'.split(','),
			localFonts: {
				"Arial": {
					"category": "sans-serif",
					"variants": "400,400i,600,600i"
				},
				"Georgia": {
					"category": "serif",
					"variants": "400,400i,600,600i"
				},
				"Times New Roman": {
					"category": "serif",
					"variants": "400,400i,600,600i"
				},
				"Verdana": {
					"category": "sans-serif",
					"variants": "400,400i,600,600i",
				},
			},
			localFontsUrl: 'fonts/' // End with a slash!
		});
		
		// Every time an ajax call is made, just refresh the tooltips for the new content
		$(document).ajaxSuccess(function() {
			//every time an ajax request is made, restyle the inputs
			$("select.styled").select_skin();
			$("#content [title]:not(iframe)").tipTip({maxWidth: "auto", edgeOffset: 10, defaultPosition: "top", delay: 75, fadeIn: 75  });
			
			//added on [04.27.2k16]
			$('a.helpTip').qtip({
				style: { classes: 'qtip-rounded qtip-dark qtip-pixifi' },
				content: {
					attr: 'data-tooltip'
				},
				position: {
			        viewport: $(window)
			    },
	            hide: {
	                fixed: true,
	                delay: 300
	            }
			});

      $('a.helpTip--custom').qtip({
        style: { classes: 'qtip-rounded qtip-dark qtip-pixifi qtip-custom' },
        content: {
          attr: 'data-tooltip'
        },
        position: {
          viewport: $(window)
        },
        hide: {
          fixed: true,
          delay: 300
        }
      });

			$('input.colorpickerField').minicolors({
				position: 'bottom right'
			});

			$('input.timepicker').timepicker({
				interval: 15,
				timeFormat: 'h:mm p',				scrollbar: true,
				change: function(time) {
		            var picker = $(this).timepicker({timeFormat: 'h:mm p'}),
		            	fieldID = 	$(this).attr('id').replace('_chooser','');
		            	$("#" + fieldID).val(formatAMPM(time));
		        }
			});
			
			/*$('input.date_picker').jdPicker({
				date_format: 'mm/dd/YYYY'
			});*/
		});
				
		//Submenu hookups
		$("#settingsMenuItem").bind('click', function(e) {
			$("#settingsSubMenu").css('left', e.layerX - 160);
			$("#settingsSubMenu").slideToggle();
			var topZIndex = 40;
			$(".Shell_Wrapper").each(function(){
				var thisZ = parseInt($(this).css('z-index'), 10);
				if (thisZ > topZIndex){
					topZIndex = thisZ;
				}
				
			});
			$("#settingsSubMenu").css('z-index', topZIndex+1);
			$("#settingsSubMenu").css('position', 'absolute');
		});
		
	});


	function quickAddLead(andNew) {
		var leadObjectType = 					$("#leadObjectType").val(),
			clientSubType = 					$("#clientSubType").val(),
			eventType = 						$("#eventType").val(),
			eventDate = 						'',
			notes = 							'',
			firstContact = 						'',
			leadBrideFirst = 					$("#leadBrideFirst").val(),
			
			leadBrideMiddle = 					$("#leadBrideMiddle").val(),
			leadBrideLast = 					$("#leadBrideLast").val(),
			leadBridePhone = 					$("#leadBridePhone").val(),
			leadBrideEmail = 					$("#leadBrideEmail").val(),
			leadGroomFirst = 					$("#leadGroomFirst").val(),
			leadGroomMiddle = 					$("#leadGroomMiddle").val(),
			leadGroomLast = 					$("#leadGroomLast").val(),
			leadGroomPhone = 					$("#leadGroomPhone").val(),
			leadGroomEmail = 					$("#leadGroomEmail").val(),
			
			leadFirst = 						$("#leadFirst").val(),
			leadLast = 							$("#leadLast").val(),
			leadCompany = 						$("#leadCompany").val(),
			leadURL = 							$("#leadURL").val(),
			leadPhone = 						$("#leadPhone").val(),
			leadEmail = 						$("#leadEmail").val(),
			
			nonFirstContact = 					$("#nonFirstContact").val(),
			nonNotes = 							$.URLEncode($("#nonNotes").val()),
			
			leadSignupDate = 					$("#leadSignupDate").val(),
			leadNotes = 						$.URLEncode($("#leadNotes").val());
						
		switch(leadObjectType) {
			case "event":
				eventDate = 				$("#eventDate_lead").val();
				break;
			case "project":
				eventDate = 				$("#eventDate_proj").val();
				break;
		}
		if(clientSubType == "1") {
			notes = 						leadNotes;
			firstContact = 					leadSignupDate;			
		} else {
			notes = 						nonNotes;
			firstContact = 					nonFirstContact;
		}			
		
		$.ajax({	type: "POST",	url: "/admin/data/addQuickLead/",
			data: {	
				clientID: '12295',	leadObjectType: leadObjectType,	clientSubType: clientSubType,	eventType: eventType,
				eventDate: eventDate,	leadBrideFirst: leadBrideFirst,	leadBrideMiddle: leadBrideMiddle,	leadBrideLast: leadBrideLast,
				leadBridePhone: leadBridePhone,	leadBrideEmail: leadBrideEmail,	leadGroomFirst: leadGroomFirst,	leadGroomMiddle: leadGroomMiddle,
				leadGroomLast: leadGroomLast,	leadGroomPhone: leadGroomPhone,	leadGroomEmail: leadGroomEmail,	leadFirst: leadFirst,	
				leadLast: leadLast,	leadCompany: leadCompany,	leadURL: leadURL,	leadPhone: leadPhone,	leadEmail: leadEmail,	
				notes: notes, 	firstContact: firstContact
			},
			success: function(   data   ){		
				var results = 				data.split("{|}");
				if(results[0] == "SUCCESS") {
					if(andNew) {
						resetQuickAddForm();
					} else {
						cancelQuickAddLead();
						if(confirm("Would you like to edit the new lead now?")) {
							location.href="/admin/leads/" + results[1] + "/";
						}
					}
				} else {
					alert("ERROR: " +  results[1]);
				}
			}
		 });
	}
	
	function resetQuickAddForm() {
		$("#leadObjectType").val('');$("#leadObjectType").change();$("#clientType").change();$("#clientSubType").val('');$("#eventType").val('');
		$("#leadBrideFirst").val('');$("#leadBrideMiddle").val('');$("#leadBrideLast").val('');$("#leadBridePhone").val('');$("#leadBrideEmail").val('');
		$("#leadGroomFirst").val('');$("#leadGroomMiddle").val('');$("#leadGroomLast").val('');$("#leadGroomPhone").val('');$("#leadGroomEmail").val('');
		$("#leadFirst").val('');$("#leadLast").val('');$("#leadCompany").val('');$("#leadURL").val('');$("#leadPhone").val('');$("#leadEmail").val('');
		$("#nonFirstContact").val('');$("#nonNotes").val('');$("#leadSignupDate").val('');$("#leadNotes").val('');$("#eventDate_lead").val('');$("#eventDate_proj").val('');
	}	
	
	function cancelQuickAddLead() {
		$("#QUICK_ADD_LEAD").slideUp();
		$("#quick_add_lead_body").html('');
	}
	
	function showQuickAddLead() {
		$("#QUICK_ADD_LEAD").slideDown();
		$.ajax({ url: "/admin/data/quickAddLeadForm", 
			data: {	clientID: '12295'},
			success: function(data) {
				var results = 	data.split("{|}");
				if(results[0].toLowerCase() == "success") {
					$("#quick_add_lead_body").html(results[1]);					
					$('input.date_picker').jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});					
				} else {
					alert("ERROR: " + results[1]);
				}
			}
		});
	}
	

	function getEditObjectTaskForm(clientID , taskID, objType, objID) {
		$.ajax({	type: "POST", url: "/admin/fn/tasks/getTaskEditForm/",
			data: {clientID: clientID, taskID: taskID, objType: objType, objID: objID}, 
			success: function(   data   ){
				var results = data.split("{|}");			
				if(results[0]=="SUCCESS") {
					
					modalContent = 			'<div class="modalBorderBox" style="width: 900px; ">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-clipboard-check"></i> <span id="addTaskTitle">Edit Task</span></div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);"  onclick="cancelUpdateTask();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
				   	$('input.date_picker').jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					
					var editor = tinymce.get('taskNotes_' + taskID);
					if(editor) {
						editor.destroy();
					}
					tinymce.init({
					    selector: "#taskNotes_"+taskID+":not(.NoEditor)",
					    plugins: [
					        "advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
			                "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
			                "table directionality emoticons template textcolor paste textcolor" //contextmenu
					    ],
					    height: 400,
					    contextmenu: false,
					    browser_spellcheck: true,
					    toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | forecolor backcolor",
					    toolbar2: "styleselect formatselect fontselect fontsizeselect",
	    				valid_children : '+body[style]'
	    							,setup: function (ed) {
				ed.on('init', function (e) {
					ed.execCommand("fontName", false, "Helvetica");
				});
			}
								});
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function cancelAddObjectTask() {
		modal.close();
	}
	function getNewObjectTaskForm(clientID , objType, objID, taskOrNote) {	
		$.ajax({	type: "POST", url: "/admin/fn/tasks/getNewObjectTaskForm/",
			data: {clientID: clientID, objectType: objType, objectID: objID, taskOrNote: taskOrNote}, 
			success: function(   data   ){
				var results = data.split("{|}");			
				if(results[0]=="SUCCESS") {
					
					modal.open({content: results[1]});
					
				   	$('#taskDueDate').jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					
				   	var editor = tinymce.get("taskNotes");
					if(editor) {
						editor.destroy();
					}
					$("textarea[name=taskNotes]").val('');
					tinymce.init({
					    selector: "#taskNotes:not(.NoEditor)",
					    plugins: [
					        "advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
			                "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
			                "table directionality emoticons template textcolor paste textcolor" //contextmenu
					    ],
					    contextmenu: false,
					    height: 400,
					    browser_spellcheck: true,
					    toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | forecolor backcolor",
					    toolbar2: "styleselect formatselect fontselect fontsizeselect",
	    				valid_children : '+body[style]'
	    							,setup: function (ed) {
				ed.on('init', function (e) {
					ed.execCommand("fontName", false, "Helvetica");
				});
			}
								});
					
					$('#modalContent [data-toggle="popover"]').popover({
						trigger: 'hover',
				        'placement': 'top',
				        'show': true,
				        container: 'body'
					});
					
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	
	
	function createObjectTask(   clientID , objType, objID    ) {
		
		var assnTo = 					$("#taskAssignedTo").val(), 
			dueDate = 					$("#taskDueDate").val(), 
			title = 					$("#taskTitle").val(), 
			notes = 					"", 
			complete = 					$("#taskComplete").val(), 
			fntPage = 					$("#taskPublishFrontPage").val(),
			type = 						$("#taskNote").val(), 
			category = 					$("#taskCategoryID").val(), 
			color = 					$("#taskColor").val();
			
		if(assnTo == "" && type == "0") {
			swal({
				type: 'error',
				title: 'Error',
				html: 'You must assign this task to someone.'
			});
		} else {
			//added on [10.04.2k16] : TH
			if(objType == 'general') {
				objType = 				$("#taskObjType").val();
				objID = 				$("#taskObjID").val();
			}
			
			tinymce.triggerSave();
			notes = 				$("textarea[name=taskNotes]").val();				
			
			$.ajax({	type: "POST", url: "/admin/fn/tasks/createObjectTask/",
				data: {clientID: clientID, objType: objType, objID: objID, assnTo: assnTo, dueDate: dueDate, title: title, notes: notes,
						complete: complete , fntPage: fntPage,type: type,cat: category,color: color}, 
				success: function(   data   ){
					var results = data.split("{|}");			
					if(results[0]=="SUCCESS") {
						$('#' + objType + '_tasks_container').html(results[1]);
						$('#no_tasks').html('');
						$('#newtask').slideUp();
						$('#newtask').html('');
						modal.close();
						$("#tasksuccess").slideDown();
						
						setTimeout(function(){
							$("#tasksuccess").fadeOut("fast", function () {
								$("#tasksuccess").hide();
							}); 
						}, 4000);
						
						if(window.changePage != undefined) {
							if(jQuery.isFunction(changePage)) {
								changePage('1');
							}
						}
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		}
	}
	
	function deleteObjectTask(   clientID , objType, objID, taskID   ) {
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you would like to delete this task? <br /> This action can NOT be undone!',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: true,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({	type: "POST", url: "/admin/fn/tasks/deleteObjectTask/",
					data: {clientID: clientID,taskID: taskID},
					success: function(   data   ) {
						var results = 	data.split("{|}");			
						if(results[0] == "SUCCESS") {
							$("#" + taskID + "_holder").html( "" );
							$("#" + taskID + "_holder").remove();
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
		    } 
		});
	}
	
	//Used for editing tasks
	function switchTaskOrNote(type,taskID) {
		var assignedTo = 		$("#taskAssignedTo_" + taskID + "_label"),
			dueDate = 			$("#taskDueDate_" + taskID + "_label"),
			completed = 		$("#taskComplete_" + taskID + "_label"),
			frontPage = 		$("#taskPublishFrontPage_" + taskID + "_label");
			
		switch(type) {
			case "1":
			
				$("#addTaskTitle").html('Edit Note');
			
				assignedTo.hide();
				dueDate.hide();
				completed.hide();
				frontPage.hide();
				break;
			case "0":
			default:
				$("#addTaskTitle").html('Edit Task');
				
				assignedTo.show();
				dueDate.show();
				completed.show();
				frontPage.show();
				break;
		}
	}
	function switchObjectTaskNote(value, label1 , label2 , label3 , label4) {
		if(value == "1") {
			
			$("#modal").addClass('greenBorderBoxNote');
			
			$("#addTaskTitle").html('Add Note');
			$("#saveTaskTitle").html('Note');
			
			$("#" + label1 + "_label").hide();
			$("#" + label2 + "_label").hide();
			$("#" + label3 + "_label").hide();
			$("#" + label4 + "_label").hide();
			
			$("#" + label1).hide();
			$("#" + label2).hide();
			$("#" + label3).hide();
			$("#" + label4).hide();
		} else {
			
			$("#modal").removeClass('greenBorderBoxNote');
			
			$("#addTaskTitle").html('Add Task');
			$("#saveTaskTitle").html('Task');
			
			$("#" + label1 + "_label").show();
			$("#" + label2 + "_label").show();
			$("#" + label3 + "_label").show();
			$("#" + label4 + "_label").show();
			
			$("#" + label1).show();
			$("#" + label2).show();
			$("#" + label3).show();
			$("#" + label4).show();
		}
	}
	
	
	function getPaymentEditForm(paymentID, objectType, objectID, clientID) {
		$.ajax({	type: "POST",	url: "/admin/data/getPaymentEditForm/",
			data: {	
				clientID: 		clientID,
				objectType: 	objectType,
				objectID: 		objectID,
				paymentID: 		paymentID
			},
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#payedit_" + paymentID).html(results[1]);
					$("#payedit_" + paymentID).slideDown();
	
					$('input.date_picker').jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: '0'
					});
						 		
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function cancelUpdatePaymentInfo(paymentID) {
		$("#payedit_" + paymentID).slideUp();
		$("#payedit_" + paymentID).html('');
	}
	
	function updatePaymentInfo(paymentID, objectType, objectID, clientID) {
		var paidStatus = 		$("#payPaid_" + paymentID).val(),
			type = 				$("#payType_" + paymentID).val(),
			amount = 			$("#payAmount_" + paymentID).val(),
			txnID = 			$("#payTxnID_" + paymentID).val(),
			fee = 				$("#payFee_" + paymentID).val(),
			dueDate = 			$("#payDueDate_" + paymentID).val(),
			datePaid = 			$("#payDate_" + paymentID).val(),
			error = 			"";
		$("#error_" + paymentID).hide();
		
		if(paidStatus == "0") {
			if(dueDate == ""){
				error += "Due date is required. <br />";
			}
		} else if(paidStatus == "1") {
			if(datePaid == ""){
				error += "Actual date paid is required. <br />";
			}
		} else {
			error += "Please choose a payment status. <br />";
		}
		
		if(!error) {
			$.ajax({	type: "GET",	url: "/admin/data/updatePaymentInfo/",
				data: {	
					clientID: 		clientID,
					objectType: 	objectType,
					objectID: 		objectID,
					type: 			type,
					amount: 		amount,
					datePaid: 		datePaid,
					dueDate: 		dueDate,
					paidStatus: 	paidStatus,
					fee: 			fee,
					txnID: 			txnID,
					paymentID: 		paymentID
				},
				success: function(   data   ){
					var results = data.split("{|}");
					if(results[0] == "SUCCESS") {
						cancelUpdatePaymentInfo(paymentID);
						$("#pay_" + paymentID).html(results[1]);
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		} else {
			swal({
				type: 'error',
				title: 'Error',
				html: error
			});
		}
	}
	
	function changeColor(field, taskID, color) {
		if(color != '') {
			$("#chooseLink_" + taskID).html('<img src="/admin/icons/square_' + color + '.png" /> Change Color ');
		} else {
			$("#chooseLink_" + taskID).html(' Change Color ');
		}
		$("#" + field).val(color);
		$('#allcolors_' + taskID).hide();
	}
	function changeColorField(field, color) {
		$("#" + field).val(color);
		$("#" + field + "_chooseLink").html('<img src="/admin/icons/square_' + color + '.png" /> Change Color ');
		$("#" + field + "_allcolors").hide();
	}
	function cancelUpdateTask(taskID) {
		$("#" + taskID + "_editform").slideUp();
		$("#" + taskID + "_editform").html('');
		modal.close();
	}
	function updateTask(clientID, taskID, objType, objID) {
		var assignedTo = 			$("#taskAssignedTo_" + taskID).val(),
			title = 				$("#taskTitle_" + taskID).val(),
			dueDate = 				$("#taskDueDate_" + taskID).val(),
			completed = 			$("#taskComplete_" + taskID).val(),
			onFrontPage = 			$("#taskPublishFrontPage_" + taskID).val(),
			type = 					$("#taskNote_" + taskID).val(),
			category = 				$("#taskCategoryID_" + taskID).val(),
			color = 				$("#taskColor_" + taskID).val(),
			details = 				"",
			error = 				"",
			errorField = 			$("#task_edit_error_" + taskID);
			errorField.hide();
			
			tinymce.triggerSave();
			details = 				$("textarea[name=taskNotes_" + taskID + "]").val();				
			
			
			error += 		(title == "") ? "Task Title is a required field <br />" : "";
		
			
		if(error == "") {
			
			$("#status_" + taskID).show();
			
			$.ajax({	type: "POST",	url: "/admin/fn/tasks/updateTask/",
				data: {clientID: clientID, taskID: taskID, objID: objID, objType: objType,
						assignedTo: assignedTo, title: title, dueDate: dueDate, completed: completed,
						onFrontPage: onFrontPage, type: type, category: category, color: color, details: details},
				success: function(   data   ){
					var results = data.split("{|}");
			   		$("#status_" + taskID).hide();
					if(results[0] == "SUCCESS") {		   			
			   			
						cancelUpdateTask(taskID);
						
						refreshObjectTasksListing(objType,objID);
						
						if(typeof refreshWholeWorkflow === 'function'){
							refreshWholeWorkflow();
						}
						
			   		} else {
			   			swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
			   		}
				}
			});
		} else {
			swal({
				type: 'error',
				title: 'Error',
				html: error
			});
		}
	}
	
	function completeObjectTaskDashboard(taskID) {
		$.ajax({	type: "POST",	url: "/admin/data/completeObjectTask/",
			data: {clientID: '12295', taskID: taskID},
			success: function(   data   ){
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			$("#dashboard_task_" + taskID).html( "" );
			 		$("#dashboard_task_" + taskID).remove();	
			 		
			 		
			 		changeDisplayAmount($("#ataglance_tasks_combo").val(),'ataglance_tasks','change_task_amount');
			 				 		
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	
	
	
	
	
	////////// SOCIAL //////////
	function showAddSocialAccount(objType, objID, objSubID) {
		var error = 				"",
			errorField = 			$("#socialError_" + objID + "_" + objSubID);
			
		$.ajax({type: 'POST',url: '/admin/data/getSocialAccountAddForm/',
			data: {clientID: '12295', objType: objType, objID: objID, objSubID: objSubID},
			success: function(data) {
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					modalContent = 			'<div class="modalBorderBox" style="width: 555px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-user-profile-2"></i> Add Social Account(s)</div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelSocialAccount();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					/*$("#addSocialNetworks_" + objType + "_" + objID + "_" + objSubID).html(results[1]);
					$("#addSocialNetworks_" + objType + "_" + objID + "_" + objSubID).slideDown();*/
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function updateSocialFieldClass(value,objID,objSubID) {
		var options = 				value.split("||"),
			field = 				$("#socialAccountName_" + objID + "_" + objSubID),
			valueField = 			$("#socialSocTypeID_" + objID + "_" + objSubID);
			
			valueField.val(options[0]);
			field.removeClass();
			field.addClass('textBlock').addClass('social_icon').addClass(options[1]);
	}
	function addSocialAccount(objType, objID, objSubID) {
		var accountName = 			$("#socialAccountName_" + objID + "_" + objSubID).val(),
			type = 					$("#socialSocTypeID_" + objID + "_" + objSubID).val(),
			error = 				"",
			errorField = 			$("#socialError_" + objID + "_" + objSubID);
			
			errorField.hide();
			
			error += 				(type == "") ? "Please choose the Social Network Type<br />" : "";
			error += 				(accountName == "") ? "Please enter the username<br />" : "";
			
			if(error == "") {
				$.ajax({type: 'POST',url: '/admin/data/addSocialAccountToObject/',
					data: {clientID: '12295', objType: objType, objID: objID, objSubID: objSubID, type: type, accountName: accountName},
					success: function(data) {
						var results = 			data.split("{|}");
						if(results[0] == "SUCCESS") {
							$("#social_listing_" + objID + "_" + objSubID).html(results[1]);
							$("#social_listing_" + objID + "_" + objSubID).removeClass('noneDIV');
							
							cancelSocialAccount(objType, objID, objSubID);
							
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
			} else {
				swal({
					type: 'error',
					title: 'Error',
					html: error
				});
			}
	}
	function cancelSocialAccount(objType, objID, objSubID) {
		/*$("#addSocialNetworks_" + objType + "_" + objID + "_" + objSubID).slideUp();
		$("#socialError_" + objID + "_" + objSubID).hide();	*/
		modal.close();		
	}
	function deleteSocialAccount(socID, objType,objID, objSubID) {
		var error = 				"",
			errorField = 			$("#socialError_" + objID + "_" + objSubID);
			
			errorField.hide();
		if(confirm("Are you sure you would like to delete this social network account?\n This action can NOT be undone!")) {
			$.ajax({	type: "POST",	url: "/admin/data/deleteSocialAccountFromObject/",
				data: {clientID: '12295', socID: socID, objType: objType, objID: objID, objSubID: objSubID},
				success: function(   data   ){			 
					var results = 			data.split("{|}");
					if(results[0] == "SUCCESS") {
						$("#social_" + socID).html('');
						$("#social_" + socID).remove();
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		}
	}
	
		
	function refreshTopNotifications() {
		$("#notificationsLoadingDIV").show();
		$.ajax({	type: "POST",	url: "/admin/fn/notif/refreshTopNotifications/",
			data: {clientID: '12295'},
			success: function(   data   ){
				$("#notificationsLoadingDIV").hide();
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#notificationsWrapper").html(results[1]);
					$("time.timeago").timeago();
				}
			}
		});
	}
	function refreshNotifications() {
		$.ajax({	type: "POST",	url: "/admin/fn/notif/refreshNotifications/",
			data: {clientID: '12295'},
			success: function(   data   ){
				$("#notificationsLoadingDIV").hide();
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#notificationListing").html(results[1]);
					$("time.timeago").timeago();
				}
			}
		});
	}
	function clearNotifications() {
		$.ajax({	type: "POST",	url: "/admin/fn/notif/markAllNotificationsAsRead/",
			data: {clientID: '12295'},
			success: function(   data   ){
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					refreshNotifications();
					refreshTopNotifications();
					getNotificationNumber();
				}
			}
		});
	}
	function getNotificationNumber() {
		$("#systemNotificationsTOTAL").html('<img src="/admin/icons/notification_loader_red.gif" align="absmiddle" style="margin-left: 4px;margin-bottom: 3px;" width="14" />');
		$("#systemNotificationsTOTAL").css('padding','0');
		
		$.ajax({	type: "POST",	url: "/admin/fn/notif/getSystemNotificationNumber/",
			data: {clientID: '12295'},
			success: function(   data   ){			 
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					if(results[1] == "0") {
						$("#systemNotificationsTOTAL").addClass('noNotificationsLeft');
					} else {
						$("#systemNotificationsTOTAL").html(results[1]);
						$("#systemNotificationsTOTAL").css('padding','1px 4px');
						$("#systemNotificationsTOTAL").removeClass('noNotificationsLeft');
					}
				}
			}
		});
	}
  function checkNotificationNumber() {
    $.ajax({	type: "POST",	url: "/admin/fn/notif/getSystemNotificationNumber/",
      data: {clientID: '12295'},
      success: function(   data   ){
        var results = 			data.split("{|}");
        if(results[0] == "SUCCESS") {
          if(results[1] != "0") {
            $("#header_notification_bar > a").append('<div class="indicator"></div>');
          }
        }
      }
    });
  }
	function removeAllNotifications() {
		if(confirm("Are you sure you would like to delete ALL notifications?\n This action can NOT be undone!")) {
			$.ajax({	type: "POST",	url: "/admin/fn/notif/deleteAllSystemNotifications/",
				data: {clientID: '12295'},
				success: function(   data   ){			 
					var results = 			data.split("{|}");
					if(results[0] == "SUCCESS") {
						getNotificationNumber();
						refreshTopNotifications();
						refreshNotifications();
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		}
	}
	function deleteNotification(notificationID,topNav) {
		if(topNav) {
			silentDeleteNotification(notificationID,topNav);
		} else {
			if(confirm("Are you sure you would like to delete this notification?\n This action can NOT be undone!")) {
				silentDeleteNotification(notificationID,topNav);
			}
		}
	}
	function silentDeleteNotification(notificationID,topNav) {
		
		$("#topNavNotificationIcon_" + notificationID).html('<img src="/admin/icons/white-loader.gif" class="tBoxIcon" align="absmiddle" />');
		
		$.ajax({	type: "POST",	url: "/admin/fn/notif/deleteSystemNotification/",
			data: {clientID: '12295', notificationID: notificationID},
			success: function(   data   ){			 
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					getNotificationNumber();
					if(topNav) {
						$("#notification_" + notificationID).html('');
						$("#notification_" + notificationID).remove();
						
						refreshTopNotifications();
						
					} else {
						$("#notification_list_" + notificationID).html('');
						$("#notification_list_" + notificationID).remove();
					}
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	var timeoutId5;
	function showAndLaunchNewSearch() {
		//$("#search-query").focus();
		$("#search-query").autocomplete({
			minLength: 2,
			source: function(request, response) {				
				$("#searchSpinner").css('display','inline-block');				
				$.ajax({
					url: "/admin/fn/misc/mainSearch",
					dataType: "json",
					data: {	clientID: '12295', term: request.term	},
					success: function(data) {						
						$("#searchSpinner").hide();						
						var responseData = [];						
						response(data);
					}
				});
			},			
			focus: function( event, ui ) {
				//$( "#search-query" ).val( ui.item.label );
				//Automatically CLOSE the search bar when you leave the search results container
				$("ul.ui-autocomplete").hover(function(e) {			        
					if (timeoutId5) {
			            window.clearTimeout(timeoutId5);
			            timeoutId5 = null;
			        }
			    },function (e) {
			        if (!timeoutId5) {
			            timeoutId5 = window.setTimeout(function(e) {
			            	timeoutId5 = null;
			                
			            	$(".navSearchBox").hide("slide", { direction: "right" }, 200);
			            	$("#search-query").blur();           	
			            	$("ul.ui-autocomplete").hide();
			                
			           }, 800);
			        }
			    });
				return false;
			},
			select: function( event, ui ) {
				
				if(ui.item.icon == "payment") {
					ui.item.icon = "money";
				} else if (ui.item.icon == "giftcard") {
					ui.item.icon = "settings/giftcards";
				} else {
					ui.item.icon = ui.item.icon + "s";
				}
				
				location.href="/admin/" + ui.item.icon + "/" + ui.item.value + "/";
				return false;
			}			
		})
		.data( "uiAutocomplete" )._renderItem = function( ul, item ) {
			
			if(!ul.hasClass('main-search')) {
				ul.addClass('main-search');
			}
			
			//Reformat the data
			item.icon = 			item.objectType;
			item.label = 			item.objectName;
			item.value = 			item.objectID;
			
			var iconImg = "";
			var secondaryInfo = "";
			
			switch(item.icon) {
				case "lead":
					if( item.metaData.archived == "1") {
						iconImg = '<span class="headerTitle"><img src="/admin/icons/svg/search/UserIcon.svg" alt="This lead has been Archived"></span><span class="smallText" style="color: #CCCCCC;">Lead</span>';
						secondaryInfo = '<div class="smallText" >' +
										'Date: <strong>' + item.metaData.date + '</strong><br />' +
										'<div class="roundedTag" style="color: #FFF; background-color: #5ad2fa;">Archived</div></div>';
					} else {
            iconImg = '<span class="headerTitle"><img src="/admin/icons/svg/search/UserIcon.svg" alt=""></span><span class="smallText" style="color: #CCCCCC;">Lead</span>';
						secondaryInfo = '<div class="smallText">' +
										'Date: <strong>' + item.metaData.date + '</strong><br />' +
										'</div>';
					}
					break;
				case "client":
					var eventInfoHTML = "";
					var projectInfoHTML = "";
					var date = "";
					
					if(item.metaData.events.length > 0) {
						eventInfoHTML += "Events: <br />";	
						$.each(item.metaData.events, function (indx, values) {							
							if(values.duedate != "") {
								date = ' on ' + values.date;
							} else {
								date = "";
							}
							eventInfoHTML += '<strong>' + values.eventName + '</strong>' + date + '<br />'; //</a>
						});				
					}
					if(item.metaData.projects.length > 0) {
						projectInfoHTML += "Projects: <br />";	
						$.each(item.metaData.projects, function (indx, values) {							
							if(values.duedate != "") {
								date = ' due on ' + values.duedate;
							} else {
								date = "";
							}					
							projectInfoHTML += '<strong>' + values.projName + '</strong>' + date + '<br />'; //</a>
						});				
					}
					
					
					if( item.metaData.archived == "1") {
						iconImg = '<span class="headerTitle"><img src="/admin/icons/svg/search/UsersIcon.svg" alt="This client has been Archived"></span><span class="smallText" style="color: #CCCCCC;">Client</span>';
						secondaryInfo = '<div class="smallText" >' +
										'' + eventInfoHTML + '' +
										'' + projectInfoHTML + 
										'<div class="roundedTag" style="color: #FFF; background-color: #5ad2fa;">Archived</div></div>';
					} else {
						iconImg = '<span class="headerTitle"><img src="/admin/icons/svg/search/UsersIcon.svg" alt=""></span><span class="smallText" style="color: #CCCCCC;">Client</span>';
						secondaryInfo = '<div class="smallText" >' +
										'' + eventInfoHTML + '' +
										'' + projectInfoHTML + '</div>';
					}
					
					
					break;
				case "event":
					iconImg = '<span class="headerTitle"><img src="/admin/icons/svg/search/CalendarIcon.svg" alt=""></span><span class="smallText" style="color: #CCCCCC;">Event</span>';

					secondaryInfo = '';
					//new event custom ID added on [10.07.22] : TH
					if(item.metaData.eventCustomID != "" && item.metaData.eventCustomID != null && item.metaData.eventCustomID != undefined) {
						secondaryInfo += '<span class="smallText" >' +
							'<strong>' + item.metaData.eventCustomID + '</strong></span>';
					}

					secondaryInfo += '<div class="smallText" >' +
									'Date: <strong>' + item.metaData.date + '</strong></div>';
									//'Start Time: <strong>' + item.metaData.timestart + '</strong><br />' +
									//'End Time: <strong>' + item.metaData.timeend + '</strong></span>';
					break;
				case "project":
					if(item.metaData.duedate != "") {
						date = ' due on <strong>' + item.metaData.duedate + '</strong>';
					} else {
						date = "";
					}	
				
					iconImg = '<span class="headerTitle"><img src="/admin/icons/svg/search/ProjectIcon.svg" alt=""></span><span class="smallText" style="color: #CCCCCC;">Project</span>';
					secondaryInfo = '<div class="smallText" >' +
									'Complete: <strong>' + item.metaData.percentcomplete + '%</strong>' +
									'' + date + '</div>';
					break;
				case "workshop":
					iconImg = '<span class="headerTitle"><img src="/admin/icons/svg/search/WorkshopIcon.svg" alt=""></span><span class="smallText" style="color: #CCCCCC;"><strong>Attendee</strong></span>';
					secondaryInfo = '<div class="smallText" style="text-align: left;" >' +
									'<strong><a href="/admin/workshops/' + item.metaData.workshopID + '/" target="_blank" class="smallText" > ' + item.metaData.workshopName + '</a></strong>' +
									'Ticket: <strong>' + item.metaData.workshopTicketName + '</strong>' +
									'Phone: <strong>' + item.metaData.phone + '</strong>' +
									'E-mail: <strong>' + item.metaData.email + '</strong>' +
									'Type: <strong>' + item.metaData.status + '</strong>' +
									'Txn #/Coupon Code: <strong>' + item.metaData.workshopTicketTxn + '</strong>' +
									'</div>';
					break;
				case "invoice":
					iconImg = '<span class="headerTitle"><img src="/admin/icons/svg/search/InvoiceIcon.svg" alt=""></span><span class="smallText" style="color: #CCCCCC;"><strong>Invoice</strong></span>';
					secondaryInfo = '';
					if(item.metaData.invoiceCustomID != "" && item.metaData.invoiceCustomID != null && item.metaData.invoiceCustomID != undefined) {
						secondaryInfo = '<div class="smallText" >' +
										'<strong>' + item.metaData.invoiceCustomID + '</strong></div>';
					}


									//
									//'Start Time: <strong>' + item.metaData.timestart + '</strong><br />' +
									//'End Time: <strong>' + item.metaData.timeend + '</strong></span>';
					break;
				case "payment":
				
					if(item.metaData.paid == true) {
						item.metaData.paid = 		'<i class="fa fa-check font-green-jungle"></i> paid';
					} else {
						item.metaData.paid = 		'<i class="fa fa-times font-red-flamingo"></i> not paid';
					}
				
					iconImg = '<span class="headerTitle"><img src="/admin/icons/svg/search/PaymentIcon.svg" alt=""></span><span class="smallText"><strong>Payment</strong></span>';
					secondaryInfo = '<div class="smallText" >' +
									'<strong>' + item.metaData.paid + '</strong></div>';
									//'Start Time: <strong>' + item.metaData.timestart + '</strong><br />' +
									//'End Time: <strong>' + item.metaData.timeend + '</strong></span>';
					break;
				case "contract":
					if(item.metaData.accepted == true) {
						accepted = ' <strong><i class="icon-check-circle font-green-jungle" title="Accepted"></i> Accepted</strong>';
					} else {
						accepted = "";
					}	
				
					iconImg = '<span class="headerTitle"><img src="/admin/icons/svg/search/ContractIcon.svg" alt=""></span><span class="smallText"><strong>Contract</strong></span>';
					secondaryInfo = '<div class="smallText" >' +
									'' + accepted + '</div>';
					break;
				case "giftcard":	//added on [04.04.22] : TH
					iconImg = '<span class="headerTitle"><img src="/admin/icons/svg/search/GiftcardIcon.svg" alt=""></span><span class="smallText"><strong>Gift Card</strong></span>';
					secondaryInfo = '<div class="smallText" >' +
									'code: ' + item.metaData.code + ' <br /> pin: ' + item.metaData.pin + '<br />' +
									'balance: <strong>' + item.metaData.balance + '</strong></div>';
					break;
				case "vendor":	//added on [09.30.22] : TH
					iconImg = '<span class="headerTitle"><img src="/admin/icons/svg/search/VendorIcon.svg" alt=""></span><span class="smallText"><strong>Vendor</strong></span>';
					secondaryInfo = '<div class="smallText" >' +
									'Type: ' + item.metaData.vendorType + ' <br /> Contact: ' + item.metaData.vendorContactName + '<br />' +
									'Email: <strong>' + item.metaData.vendorContactEmail + '</strong><br /> Phone: <strong>' + item.metaData.vendorContactPhone + '</strong></div>';
					break;
			}
			
			return $( "<li class='tBox' ></li>" )
				.data( "item.autocomplete", item )
				.append( "<a class='searchClick' ><div class='searchTypeIcon' >" + 
								iconImg + "</div>" + 
								"<div class='searchInfo'>" + item.label + "" + secondaryInfo + "</div><br style='clear: both;' /></a>")
				.appendTo( ul );
		};
		
		
		
		
	}
	
	
	
	function addManualCommunicationItem(objectType,objectID) {
		$.ajax({	type: "POST",	url: "/admin/fn/email/getLogCommunicationItemForm/",
			data: {	'clientID': '12295',objectType:objectType,objectID:objectID},
			success: function(   data   ){			 
				var results = 		data.split("{|}");
		   		if(results[0] == "SUCCESS") {	   		
		   			
		   			
		   			modalContent = 			'<div class="modalBorderBox" style="width: 700px; ">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-chat-2"></i> Log Communication </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);"  onclick="cancelManualCommunicationItem();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1] + "<br />";
					modalContent += 			'</div>';
					modal.open({content: modalContent});
		   			
		   			
					var editor = tinymce.get('commBody');
					if(editor) {
						editor.destroy();
					}
					tinymce.init({
					    selector: "#commBody",
					    plugins: [
					        "advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
			                "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
			                "table directionality emoticons template textcolor paste textcolor" //contextmenu
					    ],
					    height: 400,
					    contextmenu: false,
					    browser_spellcheck: true,
					    toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | forecolor backcolor",
					    toolbar2: "styleselect formatselect fontselect fontsizeselect",
	    				valid_children : '+body[style]'
	    							,setup: function (ed) {
				ed.on('init', function (e) {
					ed.execCommand("fontName", false, "Helvetica");
				});
			}
								});
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	
	function cancelManualCommunicationItem() {
		modal.close();
	}
	
	function saveManualCommunicationItem(clientID, objectName, objectID) {
		let recipients = 				$("#commRecipients").val(),
			subject = 					$("#commTitle").val(),
			commType = 					$("#commTypeID").val();
			
		tinymce.triggerSave();
		let message = 					$("textarea[name=commBody]").val();		
		
		$.ajax({ type: 'POST', url: '/admin/data/addCommunicationItemManually/',
			data: {clientID: '12295', objName: objectName, objID: objectID, to: recipients, subject: subject, message: message, commType: commType},
			success: function(data) {
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					cancelManualCommunicationItem();
					getCommunicationItems(objectName,objectID);		
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function editCommunicationItem(commID) {
		$.ajax({	type: "POST",	url: "/admin/fn/comm/getEditCommunicationItemForm/",
			data: {	'clientID': '12295', commID: commID},
			success: function(   data   ){			 
				var results = 		data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			
		   			
		   			modalContent = 			'<div class="modalBorderBox" style="width: 700px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-chat-2"></i> Edit Communication Item </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelManualCommunicationItem();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
		   			
					
					var editor = tinymce.get('commBody');
					if(editor) {
						editor.destroy();
					}
					tinymce.init({
					    selector: "#commBody",
					    plugins: [
					        "advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
			                "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
			                "table directionality emoticons template textcolor paste textcolor" //contextmenu
					    ],
					    height: 400,
					    contextmenu: false,
					    browser_spellcheck: true,
					    toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | forecolor backcolor",
					    toolbar2: "styleselect formatselect fontselect fontsizeselect",
	    				valid_children : '+body[style]'
	    							,setup: function (ed) {
				ed.on('init', function (e) {
					ed.execCommand("fontName", false, "Helvetica");
				});
			}
								});
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function updateManualCommunicationItem(commID,objectType,objectID) {
		let recipients = 				$("#commRecipients").val(),
			subject = 					$("#commTitle").val(),
			commType = 					$("#commTypeID").val();
			
		tinymce.triggerSave();
		let message = 					$("textarea[name=commBody]").val();		
		
		$.ajax({ type: 'POST', url: '/admin/fn/comm/updateCommunicationItem/',
			data: {clientID: '12295', commID: commID, objectType: objectType, objectID: objectID, to: recipients, subject: subject, message: message, commType: commType},
			success: function(data) {
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					cancelManualCommunicationItem();
					getCommunicationItems(objectType,objectID);		
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	
	function viewCommunicationItem(clientID, objectName, objectID, commID, readUnread) {
		var theDIV = $("#" + commID + "_commitem_fulltext");
		if( theDIV.is(':visible') ) {
			theDIV.slideUp();
			theDIV.html('');
		} else {		
			$.ajax({ type: "POST", url: "/admin/data/getCommunicationItem/",
				data: {clientID: clientID, objName: objectName, objID: objectID, commID: commID},
				success: function(   data   ){							
					var theData = data.split("{|}");
					if(theData[0] == "SUCCESS") {
						
						theDIV.html(theData[1]);
						
						theDIV.slideDown();
						if(readUnread == 0) {
							$.ajax({ type: "POST", url: "/admin/data/markAsReadCommunicationItem/",
								data: {clientID: clientID, objName: objectName, objID: objectID, commID: commID},
								success: function(   data   ){							
									var theData = data.split("{|}");
									if(theData[0]=="SUCCESS") {						
										$("#" + commID + "_commitem_status").remove();
									}
								}
							});
						}
					}
				}
			});
		}
	}
	
	function deleteCommunicationItem(clientID, objectName, objectID, commID) {
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you would like to delete this? <br /> This action can NOT be undone!',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: false,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({ type: "POST", url: "/admin/data/deleteCommunicationItem/",
					data: {clientID: clientID, objName: objectName, objID: objectID, commID: commID},
					success: function(   data   ){							
						var theData = data.split("{|}");
						if(theData[0]=="SUCCESS") {
							$("#" + commID + "_commitem").html('');
							$("#" + commID + "_commitem").remove();
							
							swal({
								type: 'success',
								title: 'Success!',
								html: "Your message has been successfully deleted",
								timer: 4000
							});
							
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
		    } 
		});
	}
	
	
	
	function populateMessageWithData(clientID, objectName, objectID, responseID, messageField, subObjectType,subObjectID) {	
		var theIDParam = "";	
		switch(objectName) {
			case "lead":		theIDParam = "&leadID=";		break;
			case "client":		theIDParam = "&customerID=";	break;
			case "event":		theIDParam = "&eventID=";		break;
			case "project":		theIDParam = "&projectID=";		break;
			case "payment":		theIDParam = "&paymentID=";		break;
			case "invoice":		theIDParam = "&invoiceID=";		break;
			case "deliverable":	theIDParam = "&deliverableID=";	break;
			case "workshop":	theIDParam = "&workshopID=";	break;
			case "contract":	theIDParam = "&contractID=";	break;
			case "questionnaire":theIDParam = "&questionnaireID=";	break;
			case "proposal":	theIDParam = "&proposalID=";	break;
			case "vendor":		theIDParam = "&vendorID=";		break;
			case "staff":		theIDParam = "&staffID=";		break;
			case "giftcard":	theIDParam = "&giftcardID=";	break;
		}	
		theIDParam = theIDParam + objectID;	
		$.ajax({ 
			type: 'GET',
			url: '/admin/data/populateDataForCommonResponse/',
			data: "clientID=" + clientID + "&type=" + objectName + "&subType=" + subObjectType + "&subID=" + subObjectID + "&responseID=" + escape(responseID) + theIDParam,
			success: function(data) {
				var results = data.split("{|}");
		   		var result = results[0];
		   		if(result == "SUCCESS") {
		   			
		   			var editor = tinymce.EditorManager.get(messageField);
	   				if(editor) {
						editor.setContent( results[1] );
	   				}
		   			
		   			if(results[2]) {
		   				$("#subject_" + objectName).val(results[2]);
		   			}
		   		}
			}
		});
	}
	
	
	function expandAllTasks() {
		
		$(".expandableTaskHolder").slideToggle();
		
	}
	
	/* Expenses */
	
	
	function showQuickAddObjectExpenseForm() {
		$.ajax({	type: "POST",	url: "/admin/fn/expenses/getAddObjectExpenseForm/",
			data: {	'clientID': '12295'},
			success: function(   data   ){			 
				var results = 		data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			
		   			
		   			modalContent = 			'<div class="modalBorderBox" style="width: 800px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="fa fa-tasks"></i> Add Expense </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelAddObjectExpense();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
		   			
					$('#expTimeStamp_').jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});	
		   			$("select.styled").select_skin();
		   			
		   							} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	
	
	
	function switchObjectExpenseTypeCombo(clientID, objType, expenseID, divToUpdate, comboToUpdate ) {
		if(objType != "general" && objType != "") {
			
			$("#expenseOwnerObjectLoader").show();
			$.ajax({	type: "POST",	url: "/admin/fn/expenses/getObjectExpenseTypeCombo/",
				data: {	'clientID': clientID, 'objType': objType, 'expenseID': expenseID },
				success: function(   data   ){
					$("#expenseOwnerObjectLoader").hide();
					var results = 		data.split("{|}");
			   		if(results[0] == "SUCCESS") {	   			
			   			$("#" + divToUpdate).slideDown();
			   			$("#" + comboToUpdate).html(results[1]);
			   			
			   			switch(objType) {
			   				case "project":
			   				case "client":
			   				case "event":
				   				var currentVal = 		$('#expObjectID_' + expenseID).val();
				   				$('#expObjectID_' + expenseID).combobox();
				   				$('#expObjectID_' + expenseID).combobox('value', currentVal);
			   					break;
			   			}
			   			
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		} else {
			$("#" + divToUpdate).slideUp();
			$("#" + comboToUpdate).html('');
		}
	}
	
	function cancelAddObjectExpense(divToUpdate) {
		$("#" + divToUpdate).slideUp();
		modal.close();
	}
	function cancelEditObjectExpense(divToUpdate) {
		$("#" + divToUpdate).slideUp()
		modal.close();
	}
	function addObjectExpense(clientID, expenseID, formPanel, divToUpdate, divToClose) {
		var formFields = 				$("#addexpenseform").find('input,select,textarea').serialize(),
			fields = 					{},
			fieldArray = 				formFields.split("&"),
			options = 					"",
			error = 					"";
		$("#error_expense").hide();	
		
		for(var i = 0; i < fieldArray.length; i++) {
			var data = fieldArray[i].split("=");
			data[0] = 					data[0].replace('_'+expenseID, '');
			switch(data[0]) {
				case "expAmount":
					if(data[1] == "") {
						error += 		"Please enter in an expense amount.<br />";
					}
					break;
				case "expTimeStamp":
					if(data[1] == "") {
						error += 		"Please enter in the date it was paid out.<br />";
					}
					break;			
			}
			fields[data[0]] = 			data[1];
		}	
		options = 						$.JSON.encode(fields);
		
		if(error == "") {	
			$.ajax({	type: "POST",	url: "/admin/fn/expenses/addObjectExpense/",
				data: {	'clientID': clientID,'options': options},
				success: function(   data   ){			 
					var results = 		data.split("{|}");
			   		if(results[0] == "SUCCESS") {
						$("#" + divToUpdate).append(results[1]);
						$("#expenseTotalYTDAmount").html(results[2]);
						$("#" + divToClose).slideUp();
						
						cancelAddObjectExpense(divToUpdate);
						
						if(typeof refreshObjectExpenses === 'function'){
							refreshObjectExpenses(clientID,results[3]);
						}
						if(typeof refreshAllMoneyTab === 'function'){
							refreshAllMoneyTab();
						}
					} else {
						$("#error_expense").show();
						$("#error_expense").html(results[1]);
					}
				}
			});
		} else {
			$("#error_expense").show();
			$("#error_expense").html(error);
		}
	}
	function updateObjectExpense(clientID, expenseID, formPanel, divToUpdate, divToClose) {
		var expBrandID = 				$("#expBrandID_" + expenseID).val(),
			expObjectType = 			$("#expObjectType_" + expenseID).val(),
			expObjectID = 				$("#expObjectID_" + expenseID).val(),
			expAmount = 				$("#expAmount_" + expenseID).val(),
			expNetAmount = 				$("#expNetAmount_" + expenseID).val(),		//added on [10.15.20] : TH
			expTaxAmount = 				$("#expTaxAmount_" + expenseID).val(),		//added on [10.15.20] : TH
			expTaxRate = 				$("#expTaxRate_" + expenseID).val(),		//added on [10.15.20] : TH
						
			expTimeStamp = 				$("#expTimeStamp_" + expenseID).val(),
			expDescription = 			$("#expDescription_" + expenseID).val(),
			expCategoryID = 			$("#expCategoryID_" + expenseID).val(),
			expAccountID = 				$("#expAccountID_" + expenseID).val(),
			expVendorID = 				$("#expVendorID_" + expenseID).val(),
			expReceiptImage = 			$("#expReceiptImage_" + expenseID).val(),
			options = 					"",
			error = 					"";
			
		$("#error_expense").hide();	
		
		
			if(expAmount == "") {
				error += 		"Please enter in an expense amount.<br />";
			}
			
			if(expTimeStamp == "") {
				error += 		"Please enter in the date it was paid out.<br />";
			}
			
			options = 						$.JSON.encode({expBrandID: expBrandID, expObjectType: expObjectType, expObjectID: expObjectID, expAmount: expAmount, expTimeStamp: expTimeStamp, 
															expDescription: expDescription, expCategoryID: expCategoryID, expAccountID: expAccountID, expVendorID: expVendorID, expReceiptImage: expReceiptImage,
															expNetAmount: expNetAmount, expTaxAmount: expTaxAmount, expTaxRate: expTaxRate});
		
		if(error == "") {	
			$.ajax({	type: "POST",	url: "/admin/fn/expenses/editObjectExpense/",
				data: {	'clientID': clientID,'expenseID': expenseID, 'options': options},
				success: function(   data   ){			 
					var results = 		data.split("{|}");
			   		if(results[0] == "SUCCESS") {
						cancelEditObjectExpense(divToClose);
						$("#amount_" + expenseID).html(results[1]);
						$("#desc_" + expenseID).html(results[2]);
						$("#date_" + expenseID).html(results[3]);
						$("#category_" + expenseID).html(results[4]);
						$("#obj_" + expenseID).html(results[5]);
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		} else {
			swal({
				type: 'error',
				title: 'Error',
				html: error
			});
		}
	}
	function deleteObjectExpense(clientID,objectType, objectID, expenseID, year) {
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you would like to delete this expense item? <br /> This action can NOT be undone!',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: true,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({	type: "POST", url: "/admin/fn/expenses/deleteObjectExpense/",
					data: {'clientID': clientID, 'objType': objectType, 'objID': objectID, 'expenseID': expenseID, 'year': year},
					success: function(   data   ) {
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							$("#expense_" + expenseID).html( "" );
							$("#expense_" + expenseID).remove();
							$("#expenseTotalYTDAmount").html(results[2]);
							
							if(typeof refreshObjectExpenses === 'function'){
								refreshObjectExpenses(clientID,year);
							}
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
		    } 
		});
	}
	function cancelDuplicateObjectExpense(clientID,objectType, objectID, expenseID, year) {
		$("#expenseDUPLICATE_" + expenseID).slideUp();
		$("#expenseDUPLICATE_" + expenseID).html('');
		modal.close();
	}
	function showDuplicateExpenseForm(clientID,objectType, objectID, expenseID, year) {
		var expenseEditForm = 				$("#expenseDUPLICATE_" + expenseID),
			error = 						"",
			errorField = 					$("#errorExpense_" + expenseID);		
			errorField.hide();
			
			$.ajax({	type: "POST",	url: "/admin/fn/expenses/getDuplicateObjectExpenseForm/",
				data: {	'clientID': clientID, 'objType': objectType, 'objID': objectID, 'expenseID': expenseID, 'year': year},
				success: function(   data   ){			 
					var results = 		data.split("{|}");
			   		if(results[0] == "SUCCESS") {	   		
			   			
			   			
			   			modalContent = 			'<div class="modalBorderBox" style="width: 400px; ">';
						modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="fa fa-tasks"></i> Duplicate Expense</div>';
						modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);"  onclick="cancelAddObjectExpense();" ><span class="icon-cancel"></span></a></div>';
						modalContent += 				'</div>';
						modalContent += 				results[1];
						modalContent += 			'</div>';
						modal.open({content: modalContent});
			   			
			   			
			   			$('input.date_picker').jdPicker({
							date_format: 'mm/dd/YYYY',
							start_of_week: 0						});
			   			$("select.styled").select_skin();
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
	}
	function duplicateObjectExpense(clientID,objectType, objectID, expenseID, year) {
		var num2Duplicate = 				$("#num2Duplicate").val(),
			timeframe = 					$("#timeframeCombo").val(),
			timeframeNum = 					$("#timeframeNum").val(),
			startDate = 					$("#startDateExpense").val(),
			error = 						"",
			errorField = 					$("#errorExpense_" + expenseID);		
			errorField.hide();
				
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you would like to duplicate this expense item? <br /> This action can NOT be undone!',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: true,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
			    $.ajax({	type: "POST", url: "/admin/fn/expenses/duplicateObjectExpense/",
					data: {'clientID': clientID, 'objType': objectType, 'objID': objectID, 'expenseID': expenseID, 'year': year,
							num2Duplicate: num2Duplicate, timeframe: timeframe, timeframeNum: timeframeNum, startDate: startDate},
					success: function(   data   ) {
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							cancelDuplicateObjectExpense(clientID,objectType, objectID, expenseID, year);
							refreshObjectExpenses(clientID,objectType, objectID, expenseID, year);					
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
		    } 
		});
	}
	
	function changePageObjectExpenses(pageNum) {
		$("#currentPageExpenses").val(pageNum);
		refreshObjectExpenses('12295',$("#years-combo").val().replace('year',''));
	}
	function refreshObjectExpenses(clientID,year){
		var error = 						"",
			searchQuery = 					"",
			errorField = 					$("#errorExpenses"),
			categories = 					$("#expenseCategoryID").val(),
			categoryType = 					$("#category_filter_type").val(),
			accountID = 					$("#expenseAccountID").val(),
			vendorID = 						$("#expenseVendorID").val(),
			startDate = 					$("#expenseStartDate").val(),
			endDate = 						$("#expenseEndDate").val(),
			brands = 						$("#expenseBrandFilter").val(),
			page = 							$("#currentPageExpenses").val(),
			searchField = 					$("#expense-search-query").val(),
			useDateRange = 					$("input[name=expenseUseDateRange]:checked").val();
			errorField.hide();
				
			if(brands !== null) {
				if(brands.length > 0) {
					if(brands[0] == "ALL") {
						brands.splice(0,1);
					}
				}
				brands = 					brands.join("||");
			}
			
			if(categories !== null) {
				if(categories.length > 0) {
					if(categories[0] == "ALL") {
						categories.splice(0,1);
					}
				}
				categories = 				categories.join("||");
			}
			
			if(searchField != '') {
				searchQuery = 				searchField;
			}
			
			$("#expensesLoad").show();
			
				
		$.ajax({	type: "POST", url: "/admin/fn/expenses/getObjectExpenses/",
			data: {'clientID': clientID, 'year': year, categories: categories, categoryType: categoryType, useDateRange: useDateRange, startDate: startDate, endDate: endDate, accountID: accountID, vendorID: vendorID, brands: brands, page: page, searchQuery: searchQuery},
			success: function(   data   ) {
				
				$("#expensesLoad").hide();
				
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#expenseListing").html(results[1]);
					$("#expenseTotalYTDAmount").html(results[2]);
					$("#expenseBottomTotalText").html(results[3]);
					
					$('#expenseListing [data-toggle="popover"]').popover({
				        trigger: 'hover',
				        placement: function (context, source) {
					        var position = $(source).position();
					        if (position.top < 110){
					            return "top";
					        }
					        return "bottom";
					    },
				        'show': true,
				        container: 'body'
				    });
				    
				    $("#expenseListing").shiftSelectable();
					
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	
	
	function insertSignature(messageField, studioID) {
		$.ajax({type: 'GET',url: '/admin/data/getSignature/',
			data: {clientID:studioID},
			success: function(data) {
				var results = data.split("{|}");
		   		var result = results[0];
		   		if(result == "SUCCESS") {
		   			var msg = "<br /><br />" + results[1];
		   				
		   			var editor = tinymce.EditorManager.get(messageField);
	   				if(editor) {
						editor.insertContent(results[1]);
	   				}
		   			
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	
	
	
	//Brand URL related functions (Client Portal URL).
	
	var timer;
	function checkCustomURL(url, clientID, brandID, statusDIV) {	 
	   clearTimeout(timer);
	   timer =					setTimeout(function(){checkCustomURLFunction(url, clientID, brandID, statusDIV)},450);
	}
	function checkCustomURLFunction(url, clientID, brandID, statusDIV) {
		if(url.length > 6) {
			$('#'+statusDIV).html("");
			$('#'+statusDIV).hide();
			$("#url-loading").show();
			$.ajax({	type: "POST", url: "/admin/fn/brands/verifyCustomBrandURL/",
				data: {clientID: clientID, url: url},
				success: function(   data   ){
					var theData = data.split("{|}");
					if(theData[0]=="SUCCESS") {
						$('#'+statusDIV).html('' +
							'<div class="client-url-status">' +
								'<div class="client-url-status_text">' +
									'<img src="/images/chevron_check.svg" alt="Check icon"/>' +
									'<span>Good one!</span>' +
								'</div>' +
								'<button type="button" class="primary-light-btn primary-light-btn_tiny" onclick="saveCustomURL(\''+ url +'\',\''+ clientID +'\',\''+ brandID +'\',\''+ statusDIV +'\');" >Save</button>'	+
							'</div>');
					} else {
						$('#'+statusDIV).html('' +
							'<div class="client-url-status">' +
							'<img alt="Alert icon" src="/images/brandSettings/alert_circle.svg"/>' +
							`<span>${theData[1]}</span>` +
							'</div>');
					}
					$("#url-loading").hide();
					$('#'+statusDIV).show();
					$('#client-url-actions').hide();
				}
			});		
		} else {
			$('#'+statusDIV).html('' +
				'<div class="client-url-status">' +
					'<img alt="Alert icon" src="/images/brandSettings/alert_circle.svg"/>' +
					'<span>URL must be more than 6 characters in length.</span>' +
				'</div>');
			$('#'+statusDIV).show();
			$('#client-url-actions').hide();
		}
	}
	
	function saveCustomURL(url, clientID, brandID, statusDIV) {
		$("#url-loading").show();
		$.ajax({	type: "POST", url: "/admin/fn/brands/saveCustomURL/",
			data: {clientID: '12295', url: url, brandID: brandID},
			success: function(   data   ){
				var results = data.split("{|}");
					if(results[0] == "SUCCESS") {
						$('#client-url-actions').show();
						$('#'+statusDIV).hide();
						const updatedValue = results[1].replace(/<\/?[^>]+(>|$)/g, "").split(" ", 2)[0];
						$('.custom-url-text').val(updatedValue);
						} else {
						$('#'+statusDIV).html('' +
							'<div class="client-url-status">' +
							'<img alt="Alert icon" src="/images/brandSettings/alert_circle.svg"/>' +
							`<span>${results[1]}</span>` +
							'</div>');
						$('#'+statusDIV).show();
						$('#client-url-actions').hide();
					}
					$("#url-loading").hide();
					}
		});
	}

	function showChangeBrandURL() {
		$("#changeURLField").slideDown();
	}

		function pad(num) {
		return ("0"+num).slice(-2)
    }
	function stopTimer(timerID,$toast) {
		$.ajax({	type: "POST",	url: "/admin/fn/time/stopTimeEntry/",
			data: {clientID: '12295', timerID: timerID},
			success: function(   data   ){
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					$toast.remove();
					$('#totalDurationListing_' + timerID).removeClass('activeTimer');
				} else {
					alert("ERROR: " + results[1]);
				}
			}
		});
	}
	function createIntervalTimer(functionToCall,timerData,$toast,intervalAmt) {
		var intervalID = setInterval(function() {
			functionToCall(timerData,$toast);
		},intervalAmt);
		//Hook up the stop button
		if ($.find('#timerStopButtonNotification_' + timerData.timerID).length) {
            $('#timerStopButtonNotification_' + timerData.timerID).on('click', function (e) {
                e.preventDefault();
            	stopTimer(timerData.timerID,$toast);
            	var intervalIDToCancel = 	intervalID;//$("#timerNotification_" + timerData.timerID).attr( "data-timer-id");
            	clearInterval(intervalIDToCancel);
            });
        }
        //Hook up the launch action
		if ($.find('#timerSubjectNotification_' + timerData.timerID).length) {
            $('#timerSubjectNotification_' + timerData.timerID).on('click', function (e) {
                e.preventDefault();
            	
            	var launchURL = 		$("#timerSubjectNotification_" + timerData.timerID).attr( "data-url");
            	location.href = launchURL;
            });
        }
		return intervalID;
	}
	function createTimerForToastr(timerData,$toast) {
		var nowTS =				moment(),
        	timestamp = 		moment(timerData.iCalDate, "YYYY-MM-DD\THH:mm:ss");
        	theDiff = 			moment.duration(nowTS - timestamp),
        	hours = 			theDiff.hours(),
        	minutes = 			theDiff.minutes(),
        	seconds = 			theDiff.seconds(),
        	timeString = 		"",
        	timerD = 			timerData;
        	if(hours > 0) {	timeString +=  hours + "h ";	}
        	if(minutes > 0) {	timeString +=  minutes + "m ";	}
        	timeString +=  pad(seconds) + "s ";
			$('#timerNotification_' + timerD.timerID).html(timeString);
			$('#totalDurationListing_' + timerD.timerID).html(timeString);
	}
	function getAllActiveTimers() {
		//First remove any leftover timers
		var timersLeftover = 			$("div.timer[data-timer-id!='']");
		for(var c = 0; c < timersLeftover.length; c++) {
			var intervalIDToCancel = 	$(timersLeftover[0]).attr('data-timer-id');
			clearInterval(intervalIDToCancel);
		}
		//First remove any toastr's that might be running
		toastr.clear();
		toastr.options = {
		  "closeButton": false,
		  "progressBar": false,
		  "debug": false,
		  "onclick": null,
		  "positionClass": "toast-bottom-right",
		  "showDuration": "1000",
		  "hideDuration": "1000",
		  "timeOut": "5000000",
		  "extendedTimeOut": "5000000",
		  "showEasing": "swing",
		  "hideEasing": "linear",
		  "showMethod": "fadeIn",
		  "hideMethod": "fadeOut",
		  "tapToDismiss": false
		};
		$.ajax({	type: "POST",	url: "/admin/fn/time/getAllActiveTimers/",
			data: {clientID: '12295'},
			success: function(   data   ){
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					/// BEGIN ///
					var dataArray = 		$.parseJSON(results[1]);
					if(dataArray !== null) {
						if(dataArray.length > 0) {
							for(var z = 0; z < dataArray.length; z++) {
								var timerData = 		dataArray[z],
									profileIMG = 		"";
								if(timerData.profileIMG != "") {
									profileIMG = 		'<img alt="" class="img-circle" src="' + timerData.profileIMG + '">';
								}
								var $toast = 			toastr.success("", profileIMG + " <span id=\"timerSubjectNotification_" + timerData.timerID + "\" data-url=\"" + timerData.launchURL + "\" class=\'subjectText\' data-toggle=\"popover\" data-content=\'" + timerData.subject + "\' >" + timerData.subjectTrimmed + "</span> <div id=\"timerStopButtonNotification_" + timerData.timerID + "\" class=\"btn btn-xs btn-danger timerButton\"><i class=\"fa fa-stop\"></i></div><div id=\"timerNotification_" + timerData.timerID + "\" data-starttime=\"" + timerData.iCalDate + "\" class=\"timer\" data-toggle=\"popover\" data-content=\"started on: " + timerData.startDate + " at " + timerData.startTime + "\"></div>");

								//Now add the timer for this specific timer
								var intervalId = createIntervalTimer(createTimerForToastr,timerData, $toast,1000);
								//Now store the timerID
								$("#timerNotification_" + timerData.timerID).attr( "data-timer-id",intervalId );
								$toast.parent().css('right', '80px');
							}
							$(function () {
								$('.toast [data-toggle="popover"]').popover({
									trigger: 'hover',
							        'placement': 'top',
							        'show': true,
							        container: 'body'
								});
							});
						}
					}
					/// END ///
				}
			}
		});
	}
	
	
	
	function cancelAddQuickClient() {
		modal.close();
	}
	let quickClientCallback = null;
	function showQuickClientForm(callback = null) {
		quickClientCallback = callback;
		
		$.ajax({	type: "POST",	url: "/admin/fn/clients/getQuickClientAddForm/",
			data: {clientID: '12295'},
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					modalContent = 			'<div class="modalBorderBox" style="width: 450px; ">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-users"></i> Add Quick Client</div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);"  onclick="cancelAddQuickClient();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					$(".form-control.emoji").emojioneArea({
					  	pickerPosition: "bottom",
					  	filtersPosition: "bottom",
					    tonesStyle: "checkbox"
					});
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function saveQuickClient() {
		var firstName = 		$("#custBrideFirst_quick").val(),
			lastName = 			$("#custBrideLast_quick").val(),
			phone = 			$("#custBridePhone_quick").val(),
			mobilePhone = 		$("#custBrideMobilePhone_quick").val(),
			mobilePhoneOptIn = 	$("input[name=custOneMobileTextingOptIn_quick]:checked").val(),
			email = 			$("#custBrideEmail_quick").val(),
			emailOptIn = 		$("input[name=custOneEmail1OptIn_quick]:checked").val(),
			customID = 			$("#custCustomID_quick").val(),
			brandID = 			$("#custBrandID_quick").val(),
			company = 			$("#custCompany_quick").val(),
			clientType = 		$("#userType_quick").val(),
			categories = 		$("#categoryID_quick").val(),
			notes =				$("#notes_quick").val(),
			categoryString = 	"",
			error = 			"";
			
			if(categories !== undefined && categories !== null) {
				if(categories.length > 0) {
					categoryString = 		categories.join(",");
					
				}
			}
			
			error += (firstName == "") ? "Please enter a first name <br />" : "";
			error += (lastName == "") ? "Please enter a last name <br />" : "";
			error += (brandID == "") ? "Please choose a brand <br />" : "";
			
			if(error == "") {
				$.ajax({	type: "POST",	url: "/admin/fn/clients/saveQuickClient/",
					data: {clientID: '12295',firstName:firstName,	lastName: lastName,phone: phone, mobilePhone: mobilePhone, mobilePhoneOptIn: mobilePhoneOptIn,
							email: email, emailOptIn: emailOptIn, customID: customID, brandID: brandID, clientType:clientType, categories: categoryString, notes: notes, company: company},
					success: function(   data   ){
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							if (quickClientCallback) {
								modal.close();
								quickClientCallback(results[1], `${firstName} ${lastName}`.trim());
								return;
							}

							swal({
							    title: 'Success!',
							    html: 'Would you like to edit the new client now?',
							    type: 'success',
							    showCancelButton: true,
							    confirmButtonColor: '#3085d6',
							    cancelButtonColor: '#d33',
							    confirmButtonText: 'Yes',
							    cancelButtonText: 'No',
							    confirmButtonClass: 'confirm-class',
							    cancelButtonClass: 'cancel-class',
							    closeOnConfirm: true,
							    closeOnCancel: true
							}, function(isConfirm) {
							    if (isConfirm) {
							    	location.href="/admin/clients/" + results[1] + "/";
							    } 
							});
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
			} else {
				swal({
					type: 'error',
					title: 'Error',
					html: error
				});
			}
	}
	
	function cancelAddQuickLead() {
		modal.close();
	}

	let showQuickLeadFormCallback = null;
	function showQuickLeadForm(callback = null) {
		showQuickLeadFormCallback = callback;
		
		$.ajax({	type: "POST",	url: "/admin/fn/leads/getQuickLeadAddForm/",
			data: {clientID: '12295'},
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					modalContent = 			'<div class="modalBorderBox" style="width: 800px; ">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-user"></i> Add Quick Lead</div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);"  onclick="cancelAddQuickLead();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					$("#isMultiDay_quick").iButton('destroy');
					$("#isMultiDay_quick").iButton();
					
					$('.modalBorderBox [data-toggle="popover"]').popover({
						trigger: 'hover',
				        'placement': 'top',
				        'show': true,
				        container: 'body'
					});
					
					
					$('input.date_picker').jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	var quickSaveRequest = 		null;
	function saveQuickLead() {
		var firstName = 		$("#leadBrideFirst_quick").val(),
			lastName = 			$("#leadBrideLast_quick").val(),
			phone = 			$("#leadBridePhone_quick").val(),
			mobilePhone = 		$("#leadBrideMobilePhone_quick").val(),
			mobilePhoneOptIn = 	$("input[name=leadOneMobileTextingOptIn_quick]:checked").val(),
			email = 			$("#leadBrideEmail_quick").val(),
			email1OptIn = 		$("#leadOneEmail1OptIn_quick").val(),		
			
			brandID = 			$("#leadBrandID_quick").val(),
			leadObjectType = 	$("#leadObjectType_quick").val(),
			clientType = 		"",
			eventDate = 		"",
			isMultiDay = 		$("input[name=isMultiDay_quick]:checked").val(),
			endDate = 			$("#endDate_quick").val(),
			eventTimeStart = 	$("#leadEventTimeStart_quick").val(),
			eventTimeEnd = 		$("#leadEventTimeEnd_quick").val(),
			clientType = 		$("#userType_quick").val(),
			categories = 		$("#categoryID_quick").val(),
			notes = 			$("#notes_quick").val(),
			eventName = 		$("#leadCustomEventName_quick").val(),
			statusID = 			$("#leadStatusID_quick").val(),
			referralID = 		$("#leadReferredBy_quick").val(),
			workflowID = 		$("#workflow_quick").val(),
			timeZoneID = 		$("#timezone_quick").val(),
			categoryString = 	"",
			error = 			"";
			
			if(categories !== undefined && categories !== null) {
				if(categories.length > 0) {
					categoryString = 		categories.join(",");
					
				}
			}
			
			if(leadObjectType == "event") {
				clientType = 		$("#clientType_event_quick").val();
				eventDate = 		$("#eventDate_event_quick").val();
			} else if (leadObjectType == "project") {
				clientType = 		$("#clientType_project_quick").val();
				eventDate = 		$("#eventDate_project_quick").val();
			}
			
			
			error += (firstName == "") ? "Please enter a first name <br />" : "";
			//error += (lastName == "") ? "Please enter a last name <br />" : "";
			error += (brandID == "") ? "Please choose a brand <br />" : "";
			
			if(error == "") {
				quickSaveRequest = 		$.ajax({	type: "POST",	url: "/admin/fn/leads/saveQuickLead/",
					data: {clientID: '12295',firstName:firstName,	lastName: lastName,phone: phone,email: email, email1OptIn: email1OptIn, brandID: brandID, 
							leadObjectType:leadObjectType,clientType: clientType, eventDate: eventDate, categories: categoryString,
							isMultiDay: isMultiDay, endDate: endDate, eventTimeStart: eventTimeStart,  eventTimeEnd: eventTimeEnd,
							notes: notes, eventName: eventName, statusID: statusID, workflowID: workflowID, mobilePhone: mobilePhone, mobilePhoneOptIn: mobilePhoneOptIn,
							referralID: referralID, timeZoneID: timeZoneID
					},
					beforeSend : function()    {
						if(quickSaveRequest != null) {
							quickSaveRequest.abort();
						}
					},
					success: function(   data   ){
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							if (showQuickLeadFormCallback) {
								modal.close();
								showQuickLeadFormCallback(results[1]);
								return;
							}

							swal({
							    title: 'Success!',
							    html: 'Would you like to edit the new lead now?',
							    type: 'success',
							    showCancelButton: true,
							    confirmButtonColor: '#3085d6',
							    cancelButtonColor: '#d33',
							    confirmButtonText: 'Yes',
							    cancelButtonText: 'No',
							    confirmButtonClass: 'confirm-class',
							    cancelButtonClass: 'cancel-class',
							    closeOnConfirm: true,
							    closeOnCancel: true
							}, function(isConfirm) {
							    if (isConfirm) {
							    	location.href="/admin/leads/" + results[1] + "/";
							    } 
							});
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
			} else {
				swal({
					type: 'error',
					title: 'Error',
					html: error
				});
			}
	}
	
	
	
	function cancelAddQuickEvent() {
		modal.close();
	}
	function showQuickEventForm() {
		
		$.ajax({	type: "POST",	url: "/admin/fn/events/getQuickEventAddForm/",
			data: {clientID: '12295'},
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					modalContent = 			'<div class="modalBorderBox" style="width: 900px; overflow: hidden !important;position: relative;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-calendar"></i> Add Quick Client + Event</div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);"  onclick="cancelAddQuickEvent();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					$("#isMultiDay_quick").iButton('destroy');
					$("#isMultiDay_quick").iButton();
					
					$('input.date_picker').jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					
					$('#modalContent [data-toggle="popover"]').popover({
				        trigger: 'hover',
				        'placement': 'top',
				        'show': true,
				        container: 'body'
				    });
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}



	var quickSaveRequest = 		null;
	function saveQuickEvent() {
		var firstName = 		$("#custBrideFirst_quick").val(),
			lastName = 			$("#custBrideLast_quick").val(),
			phone = 			$("#custBridePhone_quick").val(),
			
			mobilePhone = 		$("#custBrideMobilePhone_quick").val(),
			mobilePhoneOptIn = 	$("input[name=custOneMobileTextingOptIn_quick]:checked").val(),
			email = 			$("#custBrideEmail_quick").val(),
			emailOptIn = 		$("input[name=custOneEmail1OptIn_quick]:checked").val(),
			
			brandID = 			$("#custBrandID_quick").val(),
			company = 			$("#custCompany_quick").val(),
			
			clientType = 		"",
			eventDate = 		"",
			isMultiDay = 		$("input[name=isMultiDay_quick]:checked").val(),
			endDate = 			$("#endDate_quick").val(),
			
			eventTimeStart = 	$("#eventTimeStart_quick").val(),
			eventTimeEnd = 		$("#eventTimeEnd_quick").val(),
			eventArrivalTime = 	$("#eventArrivalTime_quick").val(),
			
			clientType = 		$("#userType_quick").val(),
			categories = 		$("#categoryID_quick").val(),
			notes = 			$("#notes_quick").val(),
			name = 				$("#eventName_quick").val(),
			eventCustomJOBName = $("#eventCustomID_quick").val(),	//added on [10.07.22] : TH
			
			reminderTemplate = 	$("#reminderTemplate_event_quick").val(),
			timeZoneID = 		$("#timezone_quick").val(),	//added on [12.09.21] : TH
			workflowID = 		$("#workflow_quick").val(),
			statusID = 			$("#status_quick").val(),
			
			categoryString = 	"",
			error = 			"";
			
			if(categories !== undefined && categories !== null) {
				if(categories.length > 0) {
					categoryString = 		categories.join(",");
					
				}
			}
			
			$("#quickSaveBtn").attr('disabled',true);

			eventType = 		$("#clientType_event_quick").val();
			eventDate = 		$("#eventDate_event_quick").val();
			
			
			
			error += (firstName == "") ? "Please enter a first name <br />" : "";
			error += (lastName == "") ? "Please enter a last name <br />" : "";
			error += (brandID == "") ? "Please choose a brand <br />" : "";
			
			error += (name == "") ? "Please enter an event name <br />" : "";
			error += (eventType == "") ? "Please choose an Event Type <br />" : "";
			
			if(error == "") {
				quickSaveRequest = 			$.ajax({	type: "POST",	url: "/admin/fn/events/saveQuickEvent/",
					data: {clientID: '12295',firstName:firstName,	lastName: lastName,phone: phone,mobilePhone: mobilePhone, mobilePhoneOptIn: mobilePhoneOptIn, email: email, emailOptIn: emailOptIn, 
							brandID: brandID, clientType: clientType, eventType: eventType, eventDate: eventDate, name: name, eventCustomJOBName: eventCustomJOBName, categories: categoryString, company: company,
							isMultiDay: isMultiDay, endDate: endDate, eventTimeStart: eventTimeStart,  eventTimeEnd: eventTimeEnd, eventArrivalTime: eventArrivalTime, 
							notes: notes, reminderTemplate: reminderTemplate, workflowID: workflowID, statusID: statusID, timeZoneID: timeZoneID},
					beforeSend : function()    {
						if(quickSaveRequest != null) {
							quickSaveRequest.abort();
						}
					},
					success: function(   data   ){
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							swal({
							    title: 'Success!',
							    html: 'Would you like to edit the new event now?',
							    type: 'success',
							    showCancelButton: true,
							    confirmButtonColor: '#3085d6',
							    cancelButtonColor: '#d33',
							    confirmButtonText: 'Yes',
							    cancelButtonText: 'No',
							    confirmButtonClass: 'confirm-class',
							    cancelButtonClass: 'cancel-class',
							    closeOnConfirm: true,
							    closeOnCancel: true
							}, function(isConfirm) {
							    if (isConfirm) {
							    	location.href="/admin/events/" + results[1] + "/";
							    } 
							});
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
							$("#quickSaveBtn").attr('disabled',false);
						}
					}
				});
			} else {
				$("#quickSaveBtn").attr('disabled',false);
				swal({
					type: 'error',
					title: 'Error',
					html: error
				});
			}
	}
	
	
	function cancelAddQuickOnlyEvent() {
		modal.close();
	}
	function showQuickOnlyEventForm() {
		
		$.ajax({	type: "POST",	url: "/admin/fn/events/getQuickOnlyEventAddForm/",
			data: {clientID: '12295'},
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					modalContent = 			'<div class="modalBorderBox" style="width: 600px; overflow: hidden !important;position: relative;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-calendar"></i> Add Quick Event</div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);"  onclick="cancelAddQuickEvent();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					$("#isMultiDay_quick").iButton('destroy');
					$("#isMultiDay_quick").iButton();
					
					$('input.date_picker').jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					
					$('#modalContent [data-toggle="popover"]').popover({
				        trigger: 'hover',
				        'placement': 'top',
				        'show': true,
				        container: 'body'
				    });
					
				    $("#locations_quick").multiselect({
						noneSelectedText: "Select Location(s)",
						header: false,
						selectedList: 1,
						height: 250
					});
					$("#category_quick").multiselect({
						noneSelectedText: "Select Categories",
						header: false,
						selectedList: 1,
						height: 250
					});
				    
					$("#client_quick_typeahead").easyAutocomplete({
						url: function(phrase) {
							return "/admin/fn/clients/searchClientsTypeAheadJSON/";
						},
						ajaxSettings: {
							dataType: "json",
							method: "POST",
							data: {
								dataType: "json",
								clientID: '12295'
							}
						},
						preparePostData: function(data) {
							data.searchQuery = $("#client_quick_typeahead").val();
							return data;
						},
						requestDelay: 500,
						getValue: function(element) {
							return element.customerName;
						},
						template: {
							type: "description",
							fields: {
								description: "customerCompanyName"
							}
						},
						list: {
							maxNumberOfElements: 15,
							onShowListEvent: function() {
								$("#client_quick_typeahead").focus();
							},
							onChooseEvent: function() {
								var data = $("#client_quick_typeahead").getSelectedItemData();
								$("#client_quick").val(data.customerID).trigger("change");
							}
						}
					});
					
					
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	
	function resetQuickOnlyEventForm() {
		$("#client_quick").val('');
		$("#client_quick_typeahead").val('');
		
		$("#isMultiDay_quick").attr('checked',false);
		$("#isMultiDay_quick").change();
		
		$("#endDate_quick").val('');
		$("#eventTimeStart_quick").val('');
		$("#eventTimeStart_quick").change();
		$("#eventTimeStart_quick_chooser").val('');
		
		$("#eventTimeEnd_quick").val('');
		$("#eventTimeEnd_quick").change();
		$("#eventTimeEnd_quick_chooser").val('');
		
		$("#eventArrivalTime_quick").val('');
		$("#eventArrivalTime_quick").change();
		$("#eventArrivalTime_quick_chooser").val('');
		
		$("#userType_quick").val('');
		$("#userType_quick").change();
		
		$("#notes_quick").val('');
		$("#eventName_quick").val('');
		
		$("#reminderTemplate_event_quick").val('');
		$("#reminderTemplate_event_quick").change();
		$("#workflow_quick").val('');
		$("#workflow_quick").change();
		
		$("#locations_quick").multiselect('uncheckAll');
		
		$("#clientType_event_quick").val('');
		$("#clientType_event_quick").change();
		$("#eventDate_event_quick").val('');
	}
	
	function saveQuickOnlyEvent() {
		var brandID = 			$("#eventBrandID_quick").val(),
			customerID = 		$("#client_quick").val(),
			clientType = 		"",
			eventDate = 		"",
			isMultiDay = 		$("input[name=isMultiDay_quick]:checked").val(),
			endDate = 			$("#endDate_quick").val(),
			eventTimeStart = 	$("#eventTimeStart_quick").val(),
			eventTimeEnd = 		$("#eventTimeEnd_quick").val(),
			eventArrivalTime = 	$("#eventArrivalTime_quick").val(),
			clientType = 		$("#userType_quick").val(),
			
			notes = 			$("#notes_quick").val(),
			name = 				$("#eventName_quick").val(),
			eventCustomJOBName = $("#eventCustomID_quick").val(),	//added on [10.07.22] : TH
			
			reminderTemplate = 	$("#reminderTemplate_event_quick").val(),
			timeZoneID = 		$("#timezone_quick").val(),	//added on [12.09.21] : TH
			workflowID = 		$("#workflow_quick").val(),
			locationIDs = 		$("#locations_quick").val(),
			statusID = 			$("#status_quick").val(),
			staffID = 			$("#staff_quick").val(),		//added on [02.05.21] : TH
			
			error = 			"";
			
			if(locationIDs !== undefined && locationIDs !== null) {
				if(locationIDs.length > 0) {
					locationIDs = 		locationIDs.join(",");
				}
			}
			
			
			eventType = 		$("#clientType_event_quick").val();
			eventDate = 		$("#eventDate_event_quick").val();
			
			error += (brandID == "") ? "Please choose a brand <br />" : "";
			
			error += (name == "") ? "Please enter an event name <br />" : "";
			error += (eventType == "") ? "Please choose an Event Type <br />" : "";
			
			if(error == "") {
				$.ajax({	type: "POST",	url: "/admin/fn/events/saveQuickOnlyEvent/",
					data: {clientID: '12295', customerID: customerID, brandID: brandID, 
							clientType: clientType, eventType: eventType, eventDate: eventDate, name: name, eventCustomJOBName: eventCustomJOBName, locationIDs: locationIDs,
							isMultiDay: isMultiDay, endDate: endDate, eventTimeStart: eventTimeStart,  eventTimeEnd: eventTimeEnd, eventArrivalTime: eventArrivalTime,
							notes: notes, reminderTemplate: reminderTemplate, workflowID: workflowID, statusID: statusID, staffID: staffID, timeZoneID: timeZoneID},
					success: function(   data   ){
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							swal({
							    title: 'Success!',
							    html: 'Would you like to edit the new event now?',
							    type: 'success',
							    showCancelButton: true,
							    confirmButtonColor: '#3085d6',
							    cancelButtonColor: '#d33',
							    confirmButtonText: 'Yes',
							    cancelButtonText: 'No',
							    confirmButtonClass: 'confirm-class',
							    cancelButtonClass: 'cancel-class',
							    closeOnConfirm: true,
							    closeOnCancel: true
							}, function(isConfirm) {
							    if (isConfirm) {
							    	location.href="/admin/events/" + results[1] + "/";
							    } 
							});
							
							resetQuickOnlyEventForm();
							
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
			} else {
				swal({
					type: 'error',
					title: 'Error',
					html: error
				});
			}
	}
	function cancelAddQuickInvoice() {
		modal.close();
	}
	function cancelAddInvoice() {
		modal.close();
	}
	function toggleAutoPaymentFieldQuick(value) {
		if(value != "") {
			$('#autopayment').show();
		} else {
			$('#autopayment').hide();
			$("#terms").val("");
		}
		modal.center();
	}
	function updateTaxAmountQuick(which,value) {
		$.ajax({type: 'POST',url: '/admin/data/getTaxProfileRate/',
			data: {clientID: '12295',profileID: value},
			success: function(data) {
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					$("#" + which).val(results[1]);
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function toggleEvtProjQuick(value) {
		if(value != "") {
			switch(value) {
				case "0":	$('#project_cbx').hide();	$("#event_cbx").show();		$("#general_cbx").hide();		break;
				case "1":	$('#project_cbx').show();	$("#event_cbx").hide();		$("#general_cbx").hide();		break;
				case "2":	$('#project_cbx').hide();	$("#event_cbx").hide();		$("#general_cbx").show();		break;
			}
		} else {
			$('#project_cbx').hide();	$("#event_cbx").show();		$("#general_cbx").hide();
		}
		modal.center();
	}
	function getQuickAddInvoiceForm() {
		$.ajax({type: 'POST',url: '/admin/fn/invoices/getAddInvoiceForm/',
			data: {clientID: '12295',quick: 'true'},
			success: function(data) {
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					modalContent = 			'<div class="modalBorderBox" style="width: 750px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-doc"></i> <strong>Add Quick Invoice: </strong></div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);"  onclick="cancelAddQuickInvoice();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					toggleEvtProjQuick($('#invObjType').val());
					
					$("#invIssueDate").jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					$("#invDueDate").jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					
					$('#modalContent [data-toggle="popover"]').popover({
				        trigger: 'hover',
				        'placement': 'top',
				        'show': true,
				        container: 'body'
				    });
				    
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function saveQuickInvoice() {
		var evtID = 		$("#invEvtID").val(),
			projID = 		$("#invEvtID_proj").val(),
			issue = 		$("#invIssueDate").val(),
			due = 			$("#invDueDate").val(),
			invID = 		$("#invCustomID").val(),
			poNum = 		$("#invPONum").val(),
			
			tax = 			$("#invTax").val(),
			tax1 = 			$("#invTaxRate2").val(),
			tax2 = 			$("#invTaxRate3").val(),
			
			taxProfileID = 	$("#taxRateCombo_1").val(),
			tax1ProfileID = $("#taxRateCombo_2").val(),
			tax2ProfileID = $("#taxRateCombo_3").val(),
			
			subj = 			$("#invSubject").val(),
			notes = 		$("#invNotes").val(),
			pkg = 			$("#package").val(),
			pkgOptions = 	$("#packageOptions").val(),
			term = 			$("#terms").val(),
			type = 			$("#invObjType").val(),
			brand = 		$("#invBrandID").val(),
			reminderTemp = 	$("#reminderTemplate").val(),
			generalClient = $("#invGeneralClientText").val(),
			customerID = 	$("#invCustomerID").val(),
			error = 		"";
			
			$("#saveInvoiceBtn").attr('disabled',true);

		if(brand == "" || brand == "0") {		error += ("You must choose a brand for this Invoice<br />");		}
		if(type == "" || type == "0") {			
			if(evtID=="") {						error += ("Event is required <br />");					}
		} else if(type == "1"){
			if(projID == "") {					error += ("Project is required <br />");				}
		}
		
		if(issue==""){	error += ("Issue Date is required. <br />");	}
		if(due==""){	error += ("Due Date is required<br />");		}
		if(tax==""){	error += ("Tax % is required <br />");			}
		
		if(generalClient == "Enter a name") {
			generalClient = "";
		}
		
		if(error == "") {
			var eventProjID = 		(type == 0) ? evtID : projID;
			$.ajax({	type: "POST",	url: "/admin/fn/invoices/addInvoice/",
			   data: { clientID: '12295',eventID: eventProjID, issue: issue,
			   			due: due, invID: invID, poNum: poNum, tax: tax, tax1: tax1, tax2: tax2, taxProfileID: taxProfileID, tax1ProfileID: tax1ProfileID, tax2ProfileID: tax2ProfileID,
			   			subj: subj, notes: notes, pkg: pkg, pkgOptions: pkgOptions, term: term,
			   			type: type, brand: brand, reminderTemp: reminderTemp, generalClient: generalClient, customerID: customerID, quick: 'true'},
			   success: function(   data   ){
					var results = 			data.split("{|}");
					if(results[0] == "SUCCESS") {
						
						
						cancelAddQuickInvoice();
						
						swal({
						    title: 'Success!',
						    html: 'Would you like to edit the new invoice now?',
						    type: 'success',
						    showCancelButton: true,
						    confirmButtonColor: '#3085d6',
						    cancelButtonColor: '#d33',
						    confirmButtonText: 'Yes',
						    cancelButtonText: 'No',
						    confirmButtonClass: 'confirm-class',
						    cancelButtonClass: 'cancel-class',
						    closeOnConfirm: true,
						    closeOnCancel: true
						}, function(isConfirm) {
						    if (isConfirm) {
						    	location.href="/admin/invoices/" + results[2] + "/?autoStart=edit";
						    } 
						});
						
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
						$("#saveInvoiceBtn").attr('disabled',false);
					}
				}
			});
		} else {
			swal({
				type: 'error',
				title: 'Error',
				html: error
			});
			$("#saveInvoiceBtn").attr('disabled',false);
		}
	}
	
	function cancelAddRecurringInvoice() {modal.close();}
	function switchRecurringCommunicationType() {
		var which  = 		$("#invAutoBillSendInvoiceNotificationType_quick").val();
		switch(which) {
			case "0": //email
				$("#smsTextToSend").hide();
				$("#emailToSend").show();
				break;
			case "1":
				$("#smsTextToSend").show();
				$("#emailToSend").hide();
				break;
			default:
				$("#smsTextToSend").hide();
				$("#emailToSend").hide();
				break;
		}
		modal.center();
	}
	function getQuickAddRecurringInvoiceForm(customerID,projectID) {
		$.ajax({type: 'POST',url: '/admin/fn/invoices/getAddRecurringInvoiceForm/',
			data: {clientID: '12295',customerID: customerID,quick: 'true',projectID:projectID},
			success: function(data) {
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					modalContent = 			'<div class="modalBorderBox" style="width: 750px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-file-sync"></i> <strong>Add Quick Recurring Invoice: </strong></div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);"  onclick="cancelAddQuickInvoice();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					
					$("#invAutoBillStartDateTS_quick").jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					$("#invAutoBillEndDateTS_quick").jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					
					$('#modalContent [data-toggle="popover"]').popover({
				        trigger: 'hover',
				        'placement': 'top',
				        'show': true,
				        container: 'body'
				    });
				    
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function saveQuickRecurringInvoice() {
		var tax = 						$("#invTax_quick").val(),
			tax1 = 						$("#invTaxRate2_quick").val(),
			tax2 = 						$("#invTaxRate3_quick").val(),
			projID = 					$("#invEvtID_proj").val(),
			
			taxProfileID = 				$("#taxRateCombo_1").val(),
			tax1ProfileID = 			$("#taxRateCombo_2").val(),
			tax2ProfileID = 			$("#taxRateCombo_3").val(),
			
			subj = 						$("#invSubject_quick").val(),
			notes = 					$("#invNotes_quick").val(),
			pkg = 						$("#package_quick").val(),
			pkgOptions = 				$("#packageOptions_quick").val(),
			type = 						$("#invObjType_quick").val(),
			brand = 					$("#invBrandID_quick").val(),
			
			generalClient = 			$("#invGeneralClientText_quick").val(),
			customerID = 				$("#invCustomerID_quick").val(),
			
			recurringFreqAmt = 			$("#invAutoBillFrequencyAmount_quick").val(),
			recurringFreqType = 		$("#invAutoBillFrequencyType_quick").val(),
			recurringStart = 			$("#invAutoBillStartDateTS_quick").val(),
			recurringEnd = 				$("#invAutoBillEndDateTS_quick").val(),
			recurringPaymentTerm = 		$("#invAutoBillPaymentTermTemplateID_quick").val(),
			recurringDueAmt = 			$("#invAutoBillDueDateAmount_quick").val(),
			recurringDueType = 			$("#invAutoBillDueDateType_quick").val(),
			recurringDueAction = 		$("#invAutoBillDueDateAction_quick").val(),
			recurringSendType = 		$("#invAutoBillSendInvoiceNotificationType_quick").val(),
			recurringSendIDEmail = 		$("#invAutoBillSendInvoiceTemplateID_email").val(),
			recurringSendIDSMS = 		$("#invAutoBillSendInvoiceTemplateID_sms").val(),
			recurringSendID = 			"";
			
			error = 		"";
			
		if(brand == "" || brand == "0") {		error += ("You must choose a brand for this Recurring Invoice<br />");		}
		if(tax==""){	error += ("Tax % is required <br />");			}
		
		if(generalClient == "Enter a name") {
			generalClient = "";
		}
		
		switch(recurringSendType) {
			case "0":	//email
				recurringSendID = 		recurringSendIDEmail;
				break;
			case "1":	//sms
				recurringSendID = 		recurringSendIDSMS;
				break;
		}
		
		if(error == "") {
			$.ajax({	type: "POST",	url: "/admin/fn/invoices/addInvoice/",
			   data: { clientID: '12295', tax: tax, tax1: tax1, tax2: tax2, taxProfileID: taxProfileID, tax1ProfileID: tax1ProfileID, tax2ProfileID: tax2ProfileID,
			   			subj: subj, notes: notes, pkg: pkg, pkgOptions: pkgOptions, projID: projID,
			   			type: type, brand: brand, generalClient: generalClient, customerID: customerID,
			   			recurringFreqAmt: recurringFreqAmt,recurringFreqType:recurringFreqType,recurringStart:recurringStart,recurringEnd:recurringEnd,recurringPaymentTerm:recurringPaymentTerm,
			   			recurringDueAmt:recurringDueAmt,recurringDueType:recurringDueType,recurringDueAction:recurringDueAction,recurringSendType:recurringSendType,recurringSendID:recurringSendID,quick: 'true'
			   },
			   success: function(   data   ){
					var results = 			data.split("{|}");
					if(results[0] == "SUCCESS") {
						
						
						cancelAddRecurringInvoice();
						
						swal({
						    title: 'Success!',
						    html: 'Would you like to edit the new Recurring Invoice now?',
						    type: 'success',
						    showCancelButton: true,
						    confirmButtonColor: '#3085d6',
						    cancelButtonColor: '#d33',
						    confirmButtonText: 'Yes',
						    cancelButtonText: 'No',
						    confirmButtonClass: 'confirm-class',
						    cancelButtonClass: 'cancel-class',
						    closeOnConfirm: true,
						    closeOnCancel: true
						}, function(isConfirm) {
						    if (isConfirm) {
						    	location.href="/admin/invoices/" + results[2] + "/?autoStart=edit";
						    } 
						});
						
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		} else {
			swal({
				type: 'error',
				title: 'Error',
				html: error
			});
		}
	}
	
	
	
	function showHideHourlyRateTime(inputVal) {
		if($(inputVal)[0].checked) {
			$("#timeHourlyRateDIV").slideDown();
		} else {
			$("#timeHourlyRateDIV").slideUp();
		}
	}
	function refreshObjectTimeTasksCombo(objType,objID) {
		$.ajax({	type: "POST",	url: "/admin/fn/time/refreshObjectTimeTasksCombo/",
			data: {	'clientID': '12295', 'objType': objType, 'objID': objID},
			success: function(   data   ){			 
				var results = 		data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			
		   			$("#timerQuickTasksCombo").html(results[1]);
		   			
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function updateManualQuickTimeDisplay() {
    	var startTime = 			$("#timerManualStartTime_quick").val(),
    		endTime = 				$("#timerManualEndTime_quick").val(),
    		today = 				moment().format("YYYY-MM-DD"),
    		startTimeM = 			moment(today + " " + startTime, "YYYY-MM-DD hh:mm:A"),
    		endTimeM = 				moment(today + " " + endTime, "YYYY-MM-DD hh:mm:A"),
    		theDiff = 				moment.duration(endTimeM - startTimeM),
        	hours = 				theDiff.hours(),
        	minutes = 				theDiff.minutes(),
        	seconds = 				theDiff.seconds(),        	
        	timeString = 			"";
        	if((hours <= 0) && (minutes <= 0)) {
        		timeString = 		"Start time must be before end time";
        	}
        	if(hours > 0) {			timeString +=  hours + "h ";	}
        	if(minutes > 0) {		timeString +=  minutes + "m ";	}
    		$("#addManualTimeDisplay").html(timeString);
    }
	function switchQuickTimerObjectType(objType) {
		$.ajax({	type: "POST",	url: "/admin/fn/time/getObjectTimerTypeCombo/",
			data: {	'clientID': '12295', 'objType': objType},
			success: function(   data   ){			 
				var results = 		data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			
		   			$("#quickWhichDIV").slideDown();
					$("#quickWhich").html(results[1]);
		   			
		   			switch(objType) {
		   				case "project":
		   				case "event":
		   				case "lead":
			   				var currentVal = 		$('#timeObjectID_quick').val();
			   				$('#timeObjectID_quick').combobox({
			   					select: function() {
			   						var objectID = $(this).val();
			   						refreshObjectTimeTasksCombo(objType,objectID);
			   					}
			   				});
			   				$('#timeObjectID_quick').combobox('value', currentVal);
			   				
		   					break;
		   			}
		   			
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function showAddManualEntryForm() {
    	$("#addTimeEntryFormManual").slideDown();
	}
	function cancelAddManualEntryForm() {
		$("#addTimeEntryFormManual").slideUp();
	}
	function closeAddTimeEntryForm() {
		modal.close();
	}
	function cancelAddQuickTimer() {
		modal.close();
	}
	function showQuickTimerForm() {
		$.ajax({	type: "POST",	url: "/admin/fn/time/getAddTimeEntryForm/",
			data: {clientID: '12295'},
			success: function(   data   ){
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					modalContent = 			'<div class="modalBorderBox" style="width: 650px; ">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-timer-2"></i> <strong>Add Quick Time Entry: </strong></div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);"  onclick="cancelAddQuickTimer();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1] + "<br />";
					modalContent += 			'</div>';
					modal.open({content: modalContent});
						
					
					switchQuickTimerObjectType($("#timeObjectType_quick").val());
					
					
					$('#timerManualStartDate_quick').jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					$('input#timerManualStartTime_quick_chooser').timepicker('destroy');
					$('input#timerManualEndTime_quick_chooser').timepicker('destroy');
					$('input#timerManualStartTime_quick_chooser').timepicker({
						interval: 15,
						timeFormat: 'h:mm p',						scrollbar: true,
						change: function(time) {
				            var picker = $(this).timepicker({timeFormat: 'h:mm p'}),
				            	fieldID = 	$(this).attr('id').replace('_chooser','');
				            	$("#" + fieldID).val(formatAMPM(time));
				            	updateManualQuickTimeDisplay();
				        }
					});
					$('input#timerManualEndTime_quick_chooser').timepicker({
						interval: 15,
						timeFormat: 'h:mm p',						scrollbar: true,
						change: function(time) {
				            var picker = $(this).timepicker({timeFormat: 'h:mm p'}),
				            	fieldID = 	$(this).attr('id').replace('_chooser','');
				            	$("#" + fieldID).val(formatAMPM(time));
				            	updateManualQuickTimeDisplay();
				        }
					});
					
					$("input[id=timeIsBillable_quick]:checkbox").iButton();
					
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function addManualQuickTimeEntry() {
    	var objectType = 					$("#timeObjectType_quick").val(),
    		objectID = 						$("#timeObjectID_quick").val(),
    		taskID  = 						$("#timeTaskID_quick").val(),
    		
    		staffMemberID = 				$("#timeStaffID_quick").val(),
			subject = 						$("#timeSubject_quick").val(),
			notes = 						$("#timeNotes_quick").val(),
			hourlyRate = 					$("#timeHourlyRate_quick").val(),
			date = 							$("#timerManualStartDate_quick").val(),
			startTime = 					$("#timerManualStartTime_quick").val(),
			endTime = 						$("#timerManualEndTime_quick").val(),
			isBillable = 					$("input[name=timeIsBillable_quick]:checked").val(),
			error = 						"",
			errorField = 					$("#timeEntryError");
			errorField.hide();
			if(taskID == "" || taskID == null || taskID == undefined) {
				taskID = 					$("#timeTaskID_quick").val();
			}
			error += 						(subject == "") ? "Please enter what you want to work on for your time entry <br />" : "";
			if(isBillable == "1") {
				error += 					(hourlyRate == "") ? "Please enter an hourly rate <br />" : "";
			}
			if(error == "") {
				$.ajax({	type: "POST",	url: "/admin/fn/time/addManualTimeEntry/",
					data: {clientID: '12295', userID: staffMemberID,objectType: objectType, objectID: objectID, taskID: taskID, subject: subject, notes: notes, date: date, startTime: startTime, endTime: endTime, isBillable: isBillable, hourlyRate: hourlyRate },
					success: function(   data   ){
						var results = 			data.split("{|}");
						if(results[0] == "SUCCESS") {
							getAllActiveTimers();
							closeAddTimeEntryForm();
							
							swal({
							    title: 'Success!',
							    html: 'Would you like to go and view/edit your new time entry?',
							    type: 'success',
							    showCancelButton: true,
							    confirmButtonColor: '#3085d6',
							    cancelButtonColor: '#d33',
							    confirmButtonText: 'Yes',
							    cancelButtonText: 'No',
							    confirmButtonClass: 'confirm-class',
							    cancelButtonClass: 'cancel-class',
							    closeOnConfirm: true,
							    closeOnCancel: true
							}, function(isConfirm) {
							    if (isConfirm) {
							    	
							    	location.href='https://www.pixifi.com/admin/' + objectType +'s/' + objectID + "/?autoStart=timetracker";
							    	
							    } 
							});
							
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
			} else {
				swal({
					type: 'error',
					title: 'Error',
					html: error
				});
			}
    }
	function startQuickTimer() {
		var objectType = 					$("#timeObjectType_quick").val(),
    		objectID = 						$("#timeObjectID_quick").val(),
    		taskID  = 						$("#timeTaskID_quick").val(),
    		
    		staffMemberID = 				$("#timeStaffID_quick").val(),
			subject = 						$("#timeSubject_quick").val(),
			notes = 						$("#timeNotes_quick").val(),
			isBillable = 					$("input[name=timeIsBillable_quick]:checked").val(),
			hourlyRate = 					$("#timeHourlyRate_quick").val(),
			error = 						"",
			errorField = 					$("#timeEntryError");
			errorField.hide();
			if(taskID == "" || taskID == null || taskID == undefined) {
				taskID = 					$("#timeTaskID_quick").val();
			}
			error += 						(subject == "") ? "Please enter what you want to work on for your time entry <br />" : "";
			if(error == "") {
				$.ajax({	type: "POST",	url: "/admin/fn/time/startTimeEntry/",
					data: {clientID: '12295', userID: staffMemberID,objectType: objectType, objectID: objectID, taskID: taskID, subject: subject, notes: notes, isBillable: isBillable, hourlyRate: hourlyRate },
					success: function(   data   ){
						var results = 			data.split("{|}");
						if(results[0] == "SUCCESS") {
							getAllActiveTimers();
							cancelAddQuickTimer();
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
			} else {
				swal({
					type: 'error',
					title: 'Error',
					html: error
				});
			}
	}
	
	
	function cancelAddQuickVendor() {
		modal.close();
	}
	function showQuickVendorForm() {
		$.ajax({	type: "POST",	url: "/admin/fn/vendors/getQuickVendorForm/",
		   data: {	clientID: '12295'},
		   success: function(   data   ){
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					modalContent = 			'<div class="modalBorderBox" style="width: 900px; ">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-people"></i> Add Quick Vendor</div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);"  onclick="cancelAddQuickVendor();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					$('div#rating').raty({
						'hintList':		['1', '2', '3', '4', '5'], //['bad', 'poor', 'regular', 'good', 'gorgeous'],
						'number':       5,
						'readOnly':     false,
						'scoreName':    'rating-score',
						'cancel':   true,
						'showHalf':     false
					});
					
					$("#venCountry").change();	//force the country picker to change
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
		   }
		});
	}
	function saveQuickVendor() {
		var brandID = 				$("#venBrandID").val(),
			type = 					$("#venType").val(),
			company = 				$("#venCompanyName").val(),
			address = 				$("#venAddress").val(),
			address1 = 				$("#venAddress1").val(),
			city = 					$("#venCity").val(),
			state = 				$("#venState").val(),
			postal = 				$("#venZip").val(),
			country = 				$("#venCountry").val(),
			phone = 				$("#venPhone").val(),
			phone1 = 				$("#venPhone1").val(),
			email = 				$("#venEmail").val(),
			email1 = 				$("#venEmail1").val(),
			contactFirst = 			$("#venContactFirst").val(),
			contactLast = 			$("#venContactLast").val(),
			contactTitle = 			$("#venContactTitle").val(),
			url = 					$("#venURL").val(),
			notes = 				$("#venNotes").val(),
			rating = 				$("#rating-score").val();
		
			$.ajax({	type: "POST",	url: "/admin/fn/vendors/addVendor/",
			   data: {	clientID: '12295', brandID: brandID, type: type, company: company, address: address, address1: address1, city: city,
			   			state: state, postal: postal, country: country, phone: phone, phone1: phone1, email: email, email1: email1,
			   			contactFirst: contactFirst, contactLast: contactLast,  contactTitle: contactTitle, url: url, notes: notes, rating: rating },
			   success: function(   data   ){
					var results = data.split("{|}");
					if(results[0] == "SUCCESS") {
						swal({
						    title: 'Success!',
						    html: 'Would you like to edit the new vendor now?',
						    type: 'success',
						    showCancelButton: true,
						    confirmButtonColor: '#3085d6',
						    cancelButtonColor: '#d33',
						    confirmButtonText: 'Yes',
						    cancelButtonText: 'No',
						    confirmButtonClass: 'confirm-class',
						    cancelButtonClass: 'cancel-class',
						    closeOnConfirm: true,
						    closeOnCancel: true
						}, function(isConfirm) {
						    if (isConfirm) {
						    	location.href="/admin/vendors/" + results[1] + "/";
						    } 
						});
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: error
						});
					}
			   }
			});
	}
	//added on [11.22.2k16] : TH
	function addQuickProject() {
		
		$.ajax({	type: "POST",	url: "/admin/fn/projects/getQuickAddProjectForm/",
			data: {clientID: '12295'},
			success: function(   data   ){
				var results = data.split("{|}");			
				if(results[0] == "SUCCESS") {
					
					modalContent = 			'<div class="modalBorderBox" style="width: 700px; ">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-windows-open"></i> Add Quick Project</div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);"  onclick="cancelQuickProject();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					$("#projStartDate_quick").jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					$("#projEndDate_quick").jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					
					
					$( ".spinnerField" ).spinner({
						spin: function( event, ui ) {
							if ( ui.value >= 100 ) {
								$( this ).spinner( "value", 100 );
								return false;
							} else if ( ui.value <= 0 ) {
								$( this ).spinner( "value", 0 );
								return false;
							}
						}
					});
					
					$('#modalContent [data-toggle="popover"]').popover({
				        trigger: 'hover',
				        'placement': 'top',
				        'show': true,
				        container: 'body'
				    });
					
					$("#client_quick_typeahead").easyAutocomplete({
						url: function(phrase) {
							return "/admin/fn/clients/searchClientsTypeAheadJSON/";
						},
						ajaxSettings: {
							dataType: "json",
							method: "POST",
							data: {
								dataType: "json",
								clientID: '12295'
							}
						},
						preparePostData: function(data) {
							data.searchQuery = $("#client_quick_typeahead").val();
							return data;
						},
						requestDelay: 500,
						getValue: function(element) {
							return element.customerName;
						},
						template: {
							type: "description",
							fields: {
								description: "customerCompanyName"
							}
						},
						list: {
							maxNumberOfElements: 15,
							onShowListEvent: function() {
								$("#client_quick_typeahead").focus();
							},
							onChooseEvent: function() {
								var data = $("#client_quick_typeahead").getSelectedItemData();
								$("#projClientID_quick").val(data.customerID).trigger("change");
							},
							showAnimation: {
								type: "slide", //normal|slide|fade
								time: 400,
								callback: function() {}
							},
							hideAnimation: {
								type: "slide", //normal|slide|fade
								time: 400,
								callback: function() {}
							}
						}
					});
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function cancelQuickProject() {
		modal.close();
	}	
	function saveQuickProject() {
		var brand = 			$("#projBrandID_quick").val(),
			client = 			$("#projClientID_quick").val(),
			name = 				$("#projName_quick").val(),
			status = 			$("#projStatus_quick").val(),
			start = 			$("#projStartDate_quick").val(),
			end = 				$("#projEndDate_quick").val(),
			percent = 			$("#projPercentComplete_quick").val(),
			notes = 			$("#projGeneralNotes_quick").val(),
			type = 				$("#projType_quick").val(),
			workflowID = 		$("#project_workflowID").val();
		
		if(name != "") {			
			$.ajax({	type: "POST",	url: "/admin/fn/projects/addProject/",
			   data: {clientID: '12295', name: name, status: status, start: start, end: end, 
			   		percent: percent, notes: notes,client: client, type: type, brand: brand, workflowID: workflowID },
			   success: function(   data   ){
					var results = data.split("{|}");			
					if(results[0].toLowerCase() == "success") {
						
						cancelQuickProject();
						
						swal({
						    title: 'Success!',
						    html: 'Would you like to edit the new project now?',
						    type: 'success',
						    showCancelButton: true,
						    confirmButtonColor: '#3085d6',
						    cancelButtonColor: '#d33',
						    confirmButtonText: 'Yes',
						    cancelButtonText: 'No',
						    confirmButtonClass: 'confirm-class',
						    cancelButtonClass: 'cancel-class',
						    closeOnConfirm: true,
						    closeOnCancel: true
						}, function(isConfirm) {
						    if (isConfirm) {
						    	location.href="/admin/projects/" + results[1] + "/";
						    } 
						});
						
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
			   }
			});		
		} else {
			swal({
				type: 'error',
				title: 'Error',
				html: 'Please give your project a name'
			});
		}		
	}
	
	
	
	function closeGlobalEmailTemplateComposer() {
		$("#globalDialog").popup('hide');
	}
	function getGlobalEmailTemplateComposer(objectType,comboID,callbackFn) {
		$.ajax({	type: "POST",	url: "/admin/fn/comm/getGlobalEmailTemplateComposer/",
			data: {clientID: '12295', objectType: objectType,comboID: comboID },
			success: function(   data   ){
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#globalDialog").html(results[1]);

					if (typeof callbackFn === 'function') {
						$(".email-template-modal__save-group > .primary-light-btn").get(0).onclick = () => {
							saveResponse(callbackFn);
						};
					}
          
					$("#globalDialog").popup({
						blur: false,
						opacity: 0.3,
						transition: 'all 0.3s'
					});
					$("#globalDialog").popup('show');
					
					$(".form-control.emoji").emojioneArea({
					  	pickerPosition: "bottom",
					  	filtersPosition: "bottom",
					    tonesStyle: "checkbox"
					});
					
					updateVariablesListGlobalEmailTemplate(objectType,'variables_globalAdd','spinner_globalAdd','subject_variables_globalAdd');
					
					
					var editor = tinymce.get('respText_globalAdd');
					if(editor) {
						editor.destroy();
					}
					tinymce.init({
					    selector: "#respText_globalAdd",
						plugins: [
							"advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
							"searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
							"table directionality emoticons template paste noneditable" //contextmenu //
						],
						link_context_toolbar: true,
						noneditable_regexp: /(\{[^{}\"]*(?=\})\}(?=([^"\\]*(\\.|"([^"\\]*\\.)*[^"\\]*"))*[^"]*$))/g,    // '/\{[^{}]*(?=\})\}/g' // matches {token_text},
						contextmenu: false,
						browser_spellcheck: true,
						toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | forecolor backcolor",
						toolbar2: "formatselect fontselect fontsizeselect",
						valid_children : '+body[style]',
						content_style: `.pageBreak {width: 100%;height: 25px;border: 2px dotted #CECECE;text-align: center;border-radius: 24px;position:relative;}.pageBreak:after {content: ' -- Page Break -- ';position: relative;top:-20px;color: #999;text-align: center;} .mceNonEditable,.mceEditable {
							background-color: #D6F0FF;
							box-shadow: 0 4px 10px rgba(50,50,93,.18), 0 1px 3px rgba(0,0,0,.08) !important;
							padding: 2px 5px;
							border-radius: 5px;
							color: #44719B;
						}`,
						setup: function (editor) {
										editor.on('init', function (e) {
				editor.execCommand("fontName", false, "Helvetica");
			});
			
							var $ = tinymce.dom.DomQuery;
							var nonEditableClass = editor.getParam('noneditable_noneditable_class', 'mceNonEditable');
							// Register a event before certain commands run that will turn contenteditable off temporarilly on noneditable fields
							editor.on('BeforeExecCommand', function (e) {
								// The commands we want to permit formatting noneditable items for
								var textFormatCommands = [
									'mceToggleFormat',
									'mceApplyTextcolor',
									'mceRemoveTextcolor',
									'FontName',
									'FontSize',
								];
								if (textFormatCommands.indexOf(e.command) !== -1) {
									// Find all elements in the editor body that have the noneditable class on them
									//  and turn contenteditable off
									$(editor.getBody()).find('.' + nonEditableClass).attr('contenteditable', null);
								}
							});
							// Turn the contenteditable attribute back to false after the command has executed
							editor.on('ExecCommand', function (e) {
								// Find all elements in the editor body that have the noneditable class on them
								//  and turn contenteditable back to false
								$(editor.getBody()).find('.' + nonEditableClass).attr('contenteditable', false);
							});
						}
					});
					
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function closeGlobalSMSTemplateComposer() {
		$("#globalDialog").popup('hide');
	}
	function getGlobalSMSTemplateComposer(objectType,comboID,callbackFn) {
		$.ajax({	type: "POST",	url: "/admin/fn/comm/getGlobalSMSTemplateComposer/",
			data: {clientID: '12295', objectType: objectType,comboID: comboID },
			success: function(   data   ){
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#globalDialog").html(results[1]);
					$("#globalDialog").popup({
						blur: false,
						opacity: 0.3,
						transition: 'all 0.3s'
					});
					$("#globalDialog").popup('show');
					
					$(".form-control.emoji").emojioneArea({
					  	pickerPosition: "bottom",
					  	filtersPosition: "bottom",
					    tonesStyle: "checkbox"
					});
					
					updateVariablesListGlobalEmailTemplate(objectType,'variables_globalAdd','spinner_globalAdd','subject_variables_globalAdd');
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function saveResponse(callback) {
		var responseName = 				$("#respName_globalAdd").val(),
			responseType = 				$("#respType_globalAdd").val(),
			responseCategory = 			$("#respCategoryID_globalAdd").val(),
			responseText = 				"",//nicEditors.findEditor('respText').getContent(),
			responseSubject = 			$("#respSubject_globalAdd").val(),
			combo = 					$("#comboBoxToUpdate_globalAdd").val();
			
			
			tinyMCE.triggerSave();
			responseText = 				$("textarea[name=respText_globalAdd]").val();
			
			
		if(responseName == "") {
			swal({
				type: 'error',
				title: 'Error',
				html: 'Please give your new e-mail template a name'
			});
		} else {
			$.ajax({type: "POST", url: "/admin/fn/comm/saveResponse/",
				data: {clientID : '12295', name: responseName, type: responseType, text: responseText, responseSubject: responseSubject, category: responseCategory},
				success: function(   data   ){
			   		var results = data.split("{|}");
			   		if(results[0] == "SUCCESS") {			   			
			   		
			   			$('#' + combo).append('<option value="' + results[1] + '" selected="selected">' + responseName + '</option>');
			   			$('#' + combo).val(results[1]);
			   			$('#' + combo).change();
			   			
			   			closeGlobalEmailTemplateComposer();

						if (typeof callback === "function") {
							callback([results[1], responseName]);
						}
			   		} else {
			   			swal({
							type: 'error',
							title: 'Error',
							html: 'Error creating new email template'
						});
			   		}
				}
			});
		}
	}
	function saveGlobalSMSTemplate() {
		var responseName = 				$("#respName_globalAdd").val(),
			responseType = 				$("#respType_globalAdd").val(),
			responseText = 				"",
			combo = 					$("#comboBoxToUpdate_globalAdd").val();
			
			tinyMCE.triggerSave();
			responseText = 				$("textarea[name=respText_globalAdd]").val();
			
		if(responseName == "") {
			swal({
				type: 'error',
				title: 'Error',
				html: 'Please give your new SMS/Text template a name'
			});
		} else {	
			$.ajax({type: "POST", url: "/admin/fn/comm/saveSMS/",
				data: {clientID : '12295', name: responseName, type: responseType, text: responseText, responseSubject: ''},
				success: function(   data   ){
			   		var results = data.split("{|}");
			   		if(results[0] == "SUCCESS") {			   			
			   		
			   			$('#' + combo).append('<option value="' + results[1] + '" selected="selected">' + responseName + '</option>');
			   			$('#' + combo).val(results[1]);
			   			$('#' + combo).change();
			   			
			   			closeGlobalSMSTemplateComposer();
			   			
			   		} else {
			   			swal({
							type: 'error',
							title: 'Error',
							html: 'Error creating new email template'
						});
			   		}
				}
			});
		}
	}
	function updateVariablesListGlobalEmailTemplate(type, varCombo, varSpinner, subjectCombo) {
		if(type != "") {
			$("#" + varSpinner).show();
			$.ajax({type: "GET", url: "/admin/fn/comm/getResponseVariables/",
				data: { clientID: '12295', type: type},
				success: function(   data   ){
			   		var results = data.split("{|}");
			   		var result = results[0];
			   		if(result == "SUCCESS") {
			   			var valuesObj = jQuery.parseJSON(results[1]);
			   			var variablesCombo = $('#' + varCombo),
					   				subCombo = 	 		$('#' + subjectCombo);
			   			// First empty the combobox
			   			variablesCombo.empty();
			   			variablesCombo.append('<option value="" selected="selected"> -- </option>');

						subCombo.empty();
					   	subCombo.append('<option value="" selected="selected"> -- </option>');

			   			var category = "";
			   			$.each(valuesObj, function(index, value) {
					   				
			   				if(category != value.category) {
								if(category != "") {
									variablesCombo.append('</optgroup>');
								}
								category = value.category;								
								if(value.displayCategory !== undefined && value.displayCategory !== null) {
									variablesCombo.append('<optgroup label="' + value.displayCategory + '">');
									subCombo.append('<optgroup label="' + value.displayCategory + '">');
								} else {
									variablesCombo.append('<optgroup label="' + value.category + '">');
									subCombo.append('<optgroup label="' + value.category + '">');
								}
			   				}
			   				// Select optgroup by label, then append the new items to that group
			   				if(value.displayCategory !== undefined && value.displayCategory !== null) {
			   					$('optgroup[label="' + value.displayCategory + '"]',variablesCombo).append('<option value="' + value.varName + '">' + value.displayName + '</option>');
			   					$('optgroup[label="' + value.displayCategory + '"]',subCombo).append('<option value="' + value.varName + '">' + value.displayName + '</option>');
			   				} else {
			   					$('optgroup[label=' + value.category + ']',variablesCombo).append('<option value="' + value.varName + '">' + value.displayName + '</option>');
			   					$('optgroup[label=' + value.category + ']',subCombo).append('<option value="' + value.varName + '">' + value.displayName + '</option>');
			   				}
						});
						variablesCombo.change();
						subCombo.change();
						$("#" + varSpinner).hide();
			   		}
				}
			});
		}
	}
	
	function insertVariableIntoEditorGlobalEmailTemplate(value,editor) {
				
		var editor2 = tinymce.EditorManager.get(editor);
			if(editor2) {
				if(value != '') {
					editor2.insertContent(value);
				}
			}		
	}
	
	
	
	//Global E-mail Composer (not for e-mail templates) added on [01.10.2k16]
	function closeObjectEmailWindow() {
		$("#globalDialog").popup('hide');
	}
	function composeNewObjectEmail(objType,objID,subObjectType,subObjectID,emailsToPrePopulate,defaultSubject,defaultMessage) {
		$.ajax({type: 'POST',url: '/admin/fn/email/getObjectEmailSendForm/',
			data: {clientID: '12295',objectType:objType,objectID:objID, subObjectType: subObjectType, subObjectID: subObjectID, emailsToPrePopulate: emailsToPrePopulate},
			success: function(data) {
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			
		   			$("#globalDialog").html(results[1]);
					$("#globalDialog").popup({
						blur: false,
						opacity: 0.3,
						transition: 'all 0s'
					});
					$("#globalDialog").popup('show');
		   			
					//Added on [01.12.2k16] : TH
					//$( "#globalDialog" ).draggable();
					$(".minimizeBtn").on('click',function() {
						$("#globalDialog").addClass('minimized');
						$("#globalDialog_wrapper").addClass('minimizedWrapper');
						$("#globalDialog_background").addClass('hidden');
						
					});
					$(".maximizeBtn").on('click',function() {
						$("#globalDialog").removeClass('minimized');
						$("#globalDialog_wrapper").removeClass('minimizedWrapper');
						$("#globalDialog_background").removeClass('hidden');
					});
					
					
					var editor = tinymce.get('message_' + objType);
					if(editor) {
						editor.destroy();
					}
					const editorPromise = tinymce.init({
					    selector: "#message_"  + objType,
					    plugins: [
					        "advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
			                "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
			                "table directionality emoticons template textcolor paste textcolor" //contextmenu
					    ],
					    height: 400,
					    contextmenu: false,
					    browser_spellcheck: true,
					    toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | forecolor backcolor",
					    toolbar2: "styleselect formatselect fontselect fontsizeselect",
	    				valid_children : '+body[style]'
	    							,setup: function (ed) {
				ed.on('init', function (e) {
					ed.execCommand("fontName", false, "Helvetica");
				});
			}
								});
					
					if(objType == 'event') {
						var index = 			$('#eventsTabs a[href="#communicationTab"]').parent().index();
			  									$("#eventsTabs").tabs('option','active',index);
					}

					if (defaultSubject) {
						$('#subject_' + objType).val(defaultSubject);
					}

					if (defaultMessage) {
						editorPromise.then(([editor]) => editor.setContent(defaultMessage));
					}
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	function replyToEmail(objType,objID,subject,messageText) {
		$.ajax({type: 'POST',url: '/admin/fn/email/getObjectEmailSendForm/',
			data: {clientID: '12295',objectType:objType,objectID:objID, subject: subject, messageText: messageText},
			success: function(data) {
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			
		   			$("#globalDialog").html(results[1]);
					$("#globalDialog").popup({
						blur: false,
						opacity: 0.3,
						transition: 'all 0s'
					});
					$("#globalDialog").popup('show');
		   			
					//Added on [01.12.2k16] : TH
					//$( "#globalDialog" ).draggable();
					$(".minimizeBtn").on('click',function() {
						$("#globalDialog").addClass('minimized');
						$("#globalDialog_wrapper").addClass('minimizedWrapper');
						$("#globalDialog_background").addClass('hidden');
						
					});
					$(".maximizeBtn").on('click',function() {
						$("#globalDialog").removeClass('minimized');
						$("#globalDialog_wrapper").removeClass('minimizedWrapper');
						$("#globalDialog_background").removeClass('hidden');
					});
					
					
					var editor = tinymce.get('message_' + objType);
					if(editor) {
						editor.destroy();
					}
					tinymce.init({
					    selector: "#message_"  + objType,
					    plugins: [
					        "advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
			                "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
			                "table directionality emoticons template textcolor paste textcolor" //contextmenu
					    ],
					    height: 400,
					    contextmenu: false,
					    browser_spellcheck: true,
					    toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | forecolor backcolor",
					    toolbar2: "styleselect formatselect fontselect fontsizeselect",
	    				valid_children : '+body[style]'
	    							,setup: function (ed) {
				ed.on('init', function (e) {
					ed.execCommand("fontName", false, "Helvetica");
				});
			}
								});
					
					
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	function sendNewObjectEmail(objType,objID) {
		
		tinymce.triggerSave();
		
		var formData = 				$("#emailFormNew").serializeArray();
			formData.push({name: 'clientID',value:'12295'});
			formData.push({name: 'objectType',value: objType});
			formData.push({name: 'objectID',value:objID});
					
			$("#sendEmailBtnTop").attr('disabled',true);
			$("#sendEmailBtn").attr('disabled',true);
			
			$("#objectEmailSendingLoad").show();
			
		$.ajax({type: 'POST',url: '/admin/fn/email/sendNewObjectEmail/',
			data: formData,
			success: function(data) {
				
				$("#objectEmailSendingLoad").hide();
				
				$("#sendEmailBtnTop").attr('disabled',false);
				$("#sendEmailBtn").attr('disabled',false);
				
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			swal({
						type: 'success',
						title: 'Success!',
						html: "Sent successfully!",
						timer: 4000
					});
					
					closeObjectEmailWindow();
					
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});

					checkForSMTPErrors();
		   		}
			}
		});
	}
	function cancelShowLater() { modal.close(); }
	function showSendLaterFilter(objectType,objectID,dateType) {
		$.ajax({type: 'POST',url: '/admin/fn/email/showSendLaterFilterForm/',
			data: {clientID:'12295', objectType: objectType, objectID: objectID, dateType: dateType},
			success: function(data) {
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			
		   			modalContent = 				'<div class="modalBorderBox" style="width: 300px; ">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-clock"></i> Send Later </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);"  onclick="cancelShowLater();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					$("#modal").css('z-index','567746');
					$("#overlay").css('z-index','299992');
					
					$('input.date_picker').jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	function showSendLaterFilterSMS(objectType,objectID,dateType) {
		$.ajax({type: 'POST',url: '/admin/fn/email/showSendLaterFilterForm/',
			data: {clientID:'12295', objectType: objectType, objectID: objectID, dateType: dateType, commType: '1'},
			success: function(data) {
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			
		   			modalContent = 				'<div class="modalBorderBox" style="width: 300px; ">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-clock"></i> Send Later </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);"  onclick="cancelShowLater();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					$("#modal").css('z-index','567746');
					$("#overlay").css('z-index','299992');
					
					$('input.date_picker').jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	function sendNewObjectEmailLater(objectType,objectID,dateType) {
		tinymce.triggerSave();
		
		var dateInput = 			$("#specificDate_" + objectType + "_" + objectID).val(),
			timeInput = 			$("#specificTime_" + objectType + "_" + objectID).val();
		
		var formData = 				$("#emailFormNew").serializeArray();
			formData.push({name: 'clientID',value:'12295'});
			formData.push({name: 'objectType',value: objectType});
			formData.push({name: 'objectID',value:objectID});
			formData.push({name: 'dateType',value:dateType});
			formData.push({name: 'dateInput',value:dateInput});
			formData.push({name: 'timeInput',value:timeInput});
					
			
			$("#sendEmailBtnTop").attr('disabled',true);
			$("#sendEmailBtn").attr('disabled',true);
			
			$("#objectEmailSendingLoad").show();
			
		$.ajax({type: 'POST',url: '/admin/fn/email/sendNewObjectEmailLater/',
			data: formData,
			success: function(data) {
				
				$("#objectEmailSendingLoad").hide();
				
				cancelShowLater();
				
				$("#sendEmailBtnTop").attr('disabled',false);
				$("#sendEmailBtn").attr('disabled',false);
				
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			swal({
						type: 'success',
						title: 'Success!',
						html: "Scheduled to Send successfully!",
						timer: 4000
					});
					
					closeObjectEmailWindow();
					
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	function saveNewObjectEmailAsDraft(objectType,objectID) {
		tinymce.triggerSave();
		
		var dateInput = 			$("#specificDate_" + objectType + "_" + objectID).val(),
			timeInput = 			$("#specificTime_" + objectType + "_" + objectID).val();
		
		var formData = 				$("#emailFormNew").serializeArray();
			formData.push({name: 'clientID',value:'12295'});
			formData.push({name: 'objectType',value: objectType});
			formData.push({name: 'objectID',value:objectID});
			formData.push({name: 'dateType',value:'draft'});					
			
			$("#sendEmailBtnTop").attr('disabled',true);
			$("#sendEmailBtn").attr('disabled',true);
			
			$("#objectEmailSendingLoad").show();
			
		$.ajax({type: 'POST',url: '/admin/fn/email/sendNewObjectEmailLater/',
			data: formData,
			success: function(data) {
				
				$("#objectEmailSendingLoad").hide();
				
				cancelShowLater();
				
				$("#sendEmailBtnTop").attr('disabled',false);
				$("#sendEmailBtn").attr('disabled',false);
				
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			swal({
						type: 'success',
						title: 'Success!',
						html: "Email Saved as a draft successfully!",
						timer: 4000
					});
					
					closeObjectEmailWindow();
					refreshObjectRemindersListing();
					
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	function sendNewObjectSMSLater(objectType,objectID,dateType) {
		tinymce.triggerSave();
		
		var dateInput = 			$("#specificDate_" + objectType + "_" + objectID).val(),
			timeInput = 			$("#specificTime_" + objectType + "_" + objectID).val();
		
		var formData = 				$("#smsFormNew").serializeArray();
			formData.push({name: 'clientID',value:'12295'});
			formData.push({name: 'objectType',value: objectType});
			formData.push({name: 'objectID',value:objectID});
			formData.push({name: 'dateType',value:dateType});
			formData.push({name: 'dateInput',value:dateInput});
			formData.push({name: 'timeInput',value:timeInput});
		
			$("#sendEmailBtnTop").attr('disabled',true);
			$("#sendEmailBtn").attr('disabled',true);
			
			$("#objectSMSSendingLoad").show();
			
		$.ajax({type: 'POST',url: '/admin/fn/email/sendNewObjectSMSLater/',
			data: formData,
			success: function(data) {
				
				$("#objectSMSSendingLoad").hide();
				
				cancelShowLater();
				
				$("#sendEmailBtnTop").attr('disabled',false);
				$("#sendEmailBtn").attr('disabled',false);
				
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			swal({
						type: 'success',
						title: 'Success!',
						html: "Scheduled to Send successfully!",
						timer: 4000
					});
					
					closeObjectSMSWindow();
					
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	
	
	
	
	
	
	function cancelShowQuestionnaireLater() { modal.close(); }
	function showSendQuestionnaireLaterFilter(objectType,objectID,dateType) {
		$.ajax({type: 'POST',url: '/admin/fn/quest/showSendQuestionnaireLaterFilterForm/',
			data: {clientID:'12295', objectType: objectType, objectID: objectID, dateType: dateType},
			success: function(data) {
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			
		   			modalContent = 				'<div class="modalBorderBox" style="width: 300px; ">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-clock"></i> Send Later </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);"  onclick="cancelShowLater();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					$("#modal").css('z-index','567746');
					$("#overlay").css('z-index','299992');
					
					$('input.date_picker').jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	function sendNewObjectQuestionnaireLater(objectType,objectID,dateType) {
		tinymce.triggerSave();
		var dateInput = 			$("#specificDate_" + objectType + "_" + objectID).val(),
			timeInput = 			$("#specificTime_" + objectType + "_" + objectID).val();
		
		var formData = 				$("#globalQuestionnaireDialog").find("select, textarea, input").serializeArray();
			formData.push({name: 'clientID',value:'12295'});
			formData.push({name: 'objectType',value: objectType});
			formData.push({name: 'objectID',value:objectID});
			formData.push({name: 'dateType',value:dateType});
			formData.push({name: 'dateInput',value:dateInput});
			formData.push({name: 'timeInput',value:timeInput});
		
			$("#sendEmailBtnTop").attr('disabled',true);
			$("#sendEmailBtn").attr('disabled',true);
			
			$("#objectEmailSendingLoad").show();
			
		$.ajax({type: 'POST',url: '/admin/fn/quest/sendNewObjectQuestionnaireLater/',
			data: formData,
			success: function(data) {
				
				$("#objectEmailSendingLoad").hide();
				
				cancelShowLater();
				
				$("#sendEmailBtnTop").attr('disabled',false);
				$("#sendEmailBtn").attr('disabled',false);
				
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			swal({
						type: 'success',
						title: 'Success!',
						html: "Scheduled to Send successfully!",
						timer: 4000
					});
					
					closeObjectEmailWindow();
					cancelAddNewQuestionnaire();
					cancelAddObjectQuestionnaire();
					
					refreshObjectRemindersListingQ(objectType, objectID);
					
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	
	
	
	
	
	function showCC(objType) {
		$("#CCDiv_" + objType).slideToggle();
	}
	function showBCC(objType) {
		$("#BCCDiv_" + objType).slideToggle();
	}
	function populateObjectEmailWithData(clientID, objectName, objectID, responseID, messageField) {	
		var theIDParam = "";	
		switch(objectName) {
			case "lead":		theIDParam = "&leadID=";		break;
			case "client":		theIDParam = "&customerID=";	break;
			case "event":		theIDParam = "&eventID=";		break;
			case "project":		theIDParam = "&projectID=";		break;
			case "payment":		theIDParam = "&paymentID=";		break;
			case "invoice":		theIDParam = "&invoiceID=";		break;
			case "deliverable":	theIDParam = "&deliverableID=";	break;
			case "workshop":	theIDParam = "&workshopID=";	break;
			case "contract":	theIDParam = "&contractID=";	break;
			case "questionnaire":theIDParam = "&questionnaireID=";	break;
			case "proposal":	theIDParam = "&proposalID=";	break;
			case "vendor":		theIDParam = "&vendorID=";		break;
			case "staff":		theIDParam = "&staffID=";		break;
			case "giftcard":	theIDParam = "&giftcardID=";	break;
		}	
		theIDParam = theIDParam + objectID;	
		$.ajax({ 
			type: 'GET',
			url: '/admin/data/populateDataForCommonResponse/',
			data: "clientID=" + clientID + "&type=" + objectName + "&responseID=" + escape(responseID) + theIDParam,
			success: function(data) {
				var results = data.split("{|}");
		   		var result = results[0];
		   		if(result == "SUCCESS") {
					var editor = tinymce.EditorManager.get(messageField);
	   				if(editor) {
						editor.setContent(results[1]);
	   				}
		   			
		   			if(results[2]) {
		   				
		   				if(objectName == "questionnaire") {
		   					
		   					var newObjectName = 	messageField.replace('message_','');	
		   					
		   					$("#subject_" + newObjectName).val(results[2]);
		   				} else {
		   					$("#subject_" + objectName).val(results[2]);
		   				}
		   			}
		   			
		   			//added on [01.09.2k16] : TH
		   			if(results[3]) {
		   				addAttachmentsFromJSONString(results[3]);
		   			}
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	
	
	function getNormalEmailSignature(messageField, studioID) {
		insertSignature(messageField, studioID);
	}
	function insertObjectEmailSignature(messageField, studioID) {
		var brandID = 			$("#emailFormNewNew  #brandID").val();
		
		//If the brandID is empty, just default to the normal signature
		if(brandID !== "") {
			$.ajax({type: 'POST',url: '/admin/data/getBrandEmailSignature/',
				data: {clientID:studioID, brandID: brandID},
				success: function(data) {
					var results = data.split("{|}");
			   		var result = results[0];
			   		if(result == "SUCCESS") {
			   			
			   			if(results[1] == "") {
			   				
			   				getNormalEmailSignature(messageField, studioID);
			   				
			   				
			   			} else {
				   			var msg = "<br /><br />" + results[1];
				   			
				   			var editor = tinymce.EditorManager.get(messageField);
			   				if(editor) {
								editor.insertContent(results[1]);
			   				}
				   		}
			   		} else {
			   			swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
			   		}
				}
			});
			
		} else {
			getNormalEmailSignature(messageField, studioID);
		}
	}
	
	
	//Global E-mail Composer (not for e-mail templates) added on [01.10.2k16]
	function closeObjectSMSWindow() {
		$("#globalSMSDialog").popup('hide');
	}
	function composeNewObjectSMS(objType,objID,subObjectType,subObjectID) {
		$.ajax({type: 'POST',url: '/admin/fn/email/getObjectSMSSendForm/',
			data: {clientID: '12295',objectType:objType,objectID:objID, subObjectType: subObjectType, subObjectID: subObjectID},
			success: function(data) {
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			
		   			$("#globalSMSDialog").html(results[1]);
					$("#globalSMSDialog").popup({
						blur: false,
						opacity: 0.3,
						transition: 'all 0s'
					});
					$("#globalSMSDialog").popup('show');
		   			
					//Added on [01.12.2k16] : TH
					//$( "#globalDialog" ).draggable();
					$(".minimizeBtn").on('click',function() {
						$("#globalSMSDialog").addClass('minimized');
						$("#globalSMSDialog_wrapper").addClass('minimizedWrapper');
						$("#globalSMSDialog_background").addClass('hidden');
						
					});
					$(".maximizeBtn").on('click',function() {
						$("#globalSMSDialog").removeClass('minimized');
						$("#globalSMSDialog_wrapper").removeClass('minimizedWrapper');
						$("#globalSMSDialog_background").removeClass('hidden');
					});
					
					
					$(".form-control.emoji").emojioneArea({
					  	pickerPosition: "bottom",
					  	filtersPosition: "bottom",
					    tonesStyle: "checkbox"
					});
					
					if(objType == 'event') {
						var index = 			$('#eventsTabs a[href="#communicationTab"]').parent().index();
			  									$("#eventsTabs").tabs('option','active',index);
					}
					
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	function sendNewObjectSMS(objectType,objectID) {
		var formData = 			$("#smsFormNew").serializeArray();
			formData.push({name: 'clientID',value:'12295'});
			formData.push({name: 'objectType',value: objectType});
			formData.push({name: 'objectID',value: objectID});
		
			
			$("#sendSMSBtnTop").attr('disabled',true);
			$("#sendSMSBtn").attr('disabled',true);
			
			$("#objectSMSSendingLoad").show();
			
		$.ajax({type: 'POST',url: '/admin/fn/email/sendNewObjectSMS/',
			data: formData,
			success: function(data) {
				
				$("#objectSMSSendingLoad").hide();
				
				$("#sendSMSBtnTop").attr('disabled',false);
				$("#sendSMSBtn").attr('disabled',false);
				
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			swal({
						type: 'success',
						title: 'Success!',
						html: "Sent successfully!",
						timer: 4000
					});
					
					closeObjectSMSWindow();
					
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	
	
	
	
	
	
	/* Global ReferralSource Linker Window */
	function viewGlobalReferrerChooseWindow(objectType,objectID,referrerID,prefix,origValue) {
		$.ajax({type: 'POST',url: '/admin/data/getReferrerLinkUpWindow/',
			data: {clientID:'12295', objectType: objectType, objectID: objectID, referrerID: referrerID,prefix: prefix,origValue: origValue},
			success: function(data) {
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			
		   			modalContent = 			'<div id="globalReferralLinkupWindow" class="modalBorderBox" style="width: 600px; ">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-team-2"></i> Manage Referral Source</div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);"  onclick="cancelGlobalReferrerChooseWindow();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					
					$('#globalReferralLinkupWindow [data-toggle="popover"]').popover({
						trigger: 'hover',
				        'placement': 'top',
				        'show': true,
				        container: 'body'
					});
					
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	function cancelGlobalReferrerChooseWindow() {
		modal.close();
	}
	function showQuickAddReferrerWindow(comboToUpdate) {
		$.ajax({type: 'POST',url: '/admin/data/getReferrerSourcesWindow/',
			data: {clientID:'12295'},
			success: function(data) {
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
					swal({
					    title: 'Add Referral Source',
					    html: results[1],
					    showCancelButton: true,
					    closeOnConfirm: false,
					    width: 700
					},
					function(){
					    var objectType = 		$('#globalReferrerHowToCreate').val(),
							newValue = 			"",
							error = 			"",
							errorField = 		$("#errorGlobalReferralCreate");
							
							errorField.hide();
							
							switch(objectType) {
								case "manual":
									newValue = 	$("#global_referrer_new_name").val();
									break;
								case "client":
									newValue = 	$("#global_referrer_clients_listing").val();
									break;
								case "vendor":
									newValue = 	$("#global_referrer_vendors_listing").val();
									break;
							}
							
							error += 			(objectType == "") ? "Please choose how to create<Br />" : "";
							error += 			(newValue == "") ? "Please enter a referral name or choose a referral source.<Br />" : "";
						
							if(error == "") {	
								
								$.ajax({	type: "POST",	url: "/admin/data/addNewGlobalReferrer/",
									data: {clientID:'12295', name: newValue, objectType: objectType, objectID: newValue},
									success: function(   data   ){
										var results = 			data.split("{|}");
										if(results[0] == "SUCCESS") {
											
											if(comboToUpdate != "" && comboToUpdate != null) {
											
												$("#" + comboToUpdate).append('<option value="' + results[1] + '">' + results[2] + '</option>');
												$("#" + comboToUpdate).val(results[1]);
												$("#" + comboToUpdate).change();
											
											} else {
												refreshReferralSources($("#yeardd").val());
											}
											
											swal({
												type: 'success',
												title: 'Success!',
												html: "Successfully created!",
												timer: 4000
											});
											
										} else {
											//actually need to keep this error field due to the pop-up being a SweetAlert...
											errorField.html(results[1]);
											errorField.slideDown();
										}
									}
								});
							} else {
								//actually need to keep this error field due to the pop-up being a SweetAlert...
								errorField.html(error);
								errorField.slideDown();
							}
					});
		
					$("select.styled").select_skin();
					
					
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	function switchGlobalReferrerSourceCombo(which) {
		
		var manualD = 		$("#manuallyCreateDIV"),
			clientD = 		$("#existingClientCreateDIV"),
			vendorD = 		$("#existingVendorCreateDIV");
		
		switch(which) {
			case "manual":
				manualD.slideDown();
				clientD.hide();
				vendorD.hide();
				break;
			case "client":
				manualD.hide();
				clientD.slideDown();
				vendorD.hide();
				break;
			case "vendor":
				manualD.hide();
				clientD.hide();
				vendorD.slideDown();
				break;
			default:
				manualD.hide();
				clientD.hide();
				vendorD.hide();
				break;
		}
	}
	function saveGlobalReferrerToObject(objectType,objectID,prefix) {
		var referrerID = 					$("#global_referrers_list").val();
		$.ajax({	type: "POST",	url: "/admin/data/associateGlobalReferrer/",
			data: {clientID: '12295', objectType: objectType, objectID: objectID, referrerID: referrerID},
			success: function(   data   ){							
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {								
					
					
					cancelGlobalReferrerChooseWindow();
					
					if(   $('#' + prefix + "_referrer_button")   ){
						$('#' + prefix + "_referrer_button").hide();
					}
					
					
					$('#' + prefix + "_current_referrer").show();
					$("#" + prefix + "_12295_referText").html(results[1]);
					
					//If they've cleared out the referrer then it removed the link...
					if(results[1] == "") {
						$("#" + prefix + "_current_referrer").hide();
						if(   $('#' + prefix + "_referrer_button")   ){
							$('#' + prefix + "_referrer_button").show();
						}
					} else {
						swal({
							type: 'success',
							title: 'Success!',
							html: "Your Referral Source has been Successfully Linked! (You can refresh to see it linked)",
							timer: 4000
						});
					}
					
					if(objectID == "") {
						if(objectType == "lead") {
							$("#" + prefix).val(referrerID  + "|");
						} else {
							$("#custReferredBy_global_referrers").val(referrerID  + "|");
						}
					}
					
					
					
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}	
			}
		 });
	}
	
	
	function saveMerchantInformation(studioID, merchantID, type, subType, nickName, objID, objKey, altInfo, desc, altFields, itemName, sortOrder, mode, brandID, divToUpdate, divToAppend, buttonText,enableAutoPay, autoPayText, afterpayEnabled, achEnabled, klarnaEnabled, cardEnabled, sepaEnabled, bacsEnabled) {
		$.ajax({ type: 'POST', url: '/admin/data/saveMerchantInfo/',
			data: {
				clientID: '12295',merchantID: merchantID,type: type,subType: subType,nickName: nickName,
				objID: objID,objKey: objKey,altInfo: altInfo,desc: desc,altFields: altFields,itemName: itemName,
				sortOrder: sortOrder,mode: mode,brandID: brandID, buttonText: buttonText, 
				enableAutoPay: enableAutoPay, autoPayText: autoPayText, afterpayEnabled: afterpayEnabled, achEnabled: achEnabled, klarnaEnabled: klarnaEnabled, cardEnabled: cardEnabled, sepaEnabled: sepaEnabled, bacsEnabled: bacsEnabled
			},
			success: function(data) {
				var results = data.split("{|}");
		   		var result = results[0];
		   		if(result == "SUCCESS") {
		   			
		   			
		   			refreshMerchantAccounts();
		   			
		   			cancelAddMerchant('addPaymentMethodDIV','paymentProcessingDIV');
		   			
		   			
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	
		function cancelAddNewGlobalCategory() {
		modal.close();
	}
	function showAddNewGlobalCategoryWindow(objectType,comboToUpdate) {
		$.ajax({	type: "POST",	url: "/admin/data/showAddNewCategoryWindow/",
			data: {clientID: '12295',objectType: objectType, comboToUpdate: comboToUpdate },
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					modalContent = 			'<div class="modalBorderBox" style="width: 450px; ">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-tag"></i> Add Category</div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);"  onclick="cancelAddNewGlobalCategory();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1] + "<br />";
					modalContent += 			'</div>';
					modal.open({content: modalContent, zindex: '100501'});
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function saveGlobalObjectCategory(objectType,name,color,textcolor,comboToUpdate) {
		
		$.ajax({	type: "POST",	url: "/admin/fn/misc/addObjectCategory/",
			data: {	clientID: '12295', objectType: objectType, name: $("#" + name).val(),
					color: $("#" + color).val(), textcolor: $("#" + textcolor).val()},
			success: function(   data   ){	 
				var results = 		data.split("{|}");
		   		if(results[0] == "SUCCESS") {
					$("#" + comboToUpdate).append('<option value="' + results[1] + '">' + $("#" + name).val() + '</option>');
					$("#" + comboToUpdate).val(results[1]);
					$("#" + comboToUpdate).change();
					cancelAddNewGlobalCategory();
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	
		function refreshProjectTypeCombo(newValue,isQuickAdd) {
		
		var comboName = 					'projType';
		if(isQuickAdd == 'true') {
			comboName = 					'projType_quick'
		}
		
		$.ajax({	type: "POST",	url: "/admin/data/refreshProjectTypeCombo/",
			data: {clientID: '12295',comboName: comboName},
			success: function(   data   ){			 
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					
					$("#addProject_TypeComboHolder").html(results[1]);
					if(newValue != "") {
						$("#" + comboName).val(newValue);
						$("#" + comboName).change();
					}
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function showQuickProjectType(isQuickAdd) {
		swal({
		    title: 'Add Project Type',
		    html: '<p><div style="text-align: center; width: 250px; margin-left: auto; margin-right: auto;"><input id="quickProjectType" class="form-control" /></div></p>',
		    showCancelButton: true,
		    closeOnConfirm: true
		},
		function(){
		    var type = 				$('#quickProjectType').val(),
				error = 			"";
				
				error += 			(type == "") ? "Name is a required field<Br />" : "";
			
				if(error == "") {	
					
					$.ajax({	type: "POST",	url: "/admin/data/addNewProjectType/",
						data: {clientID:'12295', name: type},
						success: function(   data   ){
							var results = 			data.split("{|}");
							if(results[0] == "SUCCESS") {
								
								refreshProjectTypeCombo(results[1],isQuickAdd);
								
							} else {
								swal({
									type: 'error',
									title: 'Error',
									html: results[1]
								});
							}
						}
					});
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: error
					});
				}
		});
		
		$("select.styled").select_skin();
	}
	
	
		function refreshEventTypeCombo(newValue) {
		$.ajax({	type: "POST",	url: "/admin/data/refreshEventTypeCombo/",
			data: {clientID: '12295',comboName: 'eventType'},
			success: function(   data   ){			 
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					
					$("#addEvent_TypeComboHolder").html(results[1]);
					if(newValue != "") {
						$("#eventType").val(newValue);
						$("#eventType").change();
					}
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function showQuickEventType() {
		swal({
		    title: 'Add Event Type',
		    html: '<p><div style="text-align: center; width: 250px; margin-left: auto; margin-right: auto;"><input id="quickEventType" class="form-control" /></div></p>',
		    showCancelButton: true,
		    closeOnConfirm: true
		},
		function(){
		    var name = 			$('#quickEventType').val()
				error = 			"";
				
				error += 			(name == "") ? "Name is a required field<Br />" : "";
				
				if(error == "") {	
					
					$.ajax({	type: "POST",	url: "/admin/data/addEventType/",
						data: {clientID:'12295', name: name, type: '2'},
						success: function(   data   ){
							var results = 			data.split("{|}");
							if(results[0] == "SUCCESS") {
								
								refreshEventTypeCombo(results[2]);
								
							} else {
								swal({
									type: 'error',
									title: 'Error',
									html: results[1]
								});
							}
						}
					});
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: error
					});
				}
		});
		
		$("select.styled").select_skin();
	}
	function refreshLeadEventTypeCombo(newValue) {
		$.ajax({	type: "POST",	url: "/admin/data/refreshEventTypeCombo/",
			data: {clientID: '12295',comboName: 'clientType_event_quick'},
			success: function(   data   ){			 
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					$("#addEvent_TypeComboHolder").html(results[1]);
					if(newValue != "") {
						$("#clientType_event_quick").val(newValue);
						$("#clientType_event_quick").change();
					}
					
					$("select.styled").select_skin();
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function showQuickLeadEventType() {
		swal({
		    title: 'Add Event Type',
		    html: '<p><div style="text-align: center; width: 250px; margin-left: auto; margin-right: auto;"><input id="quickEventType" class="form-control" /></div></p>',
		    showCancelButton: true,
		    closeOnConfirm: true
		},
		function(){
		    var name = 			$('#quickEventType').val()
				error = 			"";
				
				error += 			(name == "") ? "Name is a required field<Br />" : "";
				
				if(error == "") {	
					
					$.ajax({	type: "POST",	url: "/admin/data/addEventType/",
						data: {clientID:'12295', name: name, type: '2'},
						success: function(   data   ){
							var results = 			data.split("{|}");
							if(results[0] == "SUCCESS") {
								
								refreshLeadEventTypeCombo(results[2]);
								
							} else {
								swal({
									type: 'error',
									title: 'Error',
									html: results[1]
								});
							}
						}
					});
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: error
					});
				}
		});
		
		$("select.styled").select_skin();
	}
	
		function refreshQuickEventTypeCombo(newValue,divToUpdate,comboName) {
		$.ajax({	type: "POST",	url: "/admin/data/refreshEventTypeCombo/",
			data: {clientID: '12295',comboName: comboName},
			success: function(   data   ){			 
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#" + divToUpdate).html(results[1]);
					if(newValue != "") {
						$("#" + comboName).val(newValue);
						$("#" + comboName).change();
					}
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}

	/**
	 * @overload
	 * {(newEventTypeID: string, newEventTypeName: string) => any} divToUpdateOrCallback
	 */
	/**
	 * @overload
	 * @param {string} divToUpdateOrCallback
	 * @param {string} comboName
	 */
	/**
	 * @param {string | ((newEventTypeID: string, newEventTypeName: string) => any)} divToUpdateOrCallback
	 * @param {string} [comboName]
	 * @returns {void}
	 */
	function showAddQuickEventType(divToUpdateOrCallback,comboName) {
		swal({
		    title: 'Add Event Type',
		    html: '<p><div style="text-align: center; width: 250px; margin-left: auto; margin-right: auto;"><input id="quickEventType" class="form-control" /></div></p>',
		    showCancelButton: true,
		    closeOnConfirm: true
		},
		function(){
		    var name = 			$('#quickEventType').val()
				error = 			"";
				
				error += 			(name == "") ? "Name is a required field<Br />" : "";
				
				if(error == "") {	
					
					$.ajax({	type: "POST",	url: "/admin/data/addEventType/",
						data: {clientID:'12295', name: name, type: '2'},
						success: function(   data   ){
							var results = 			data.split("{|}");
							if(results[0] == "SUCCESS") {
								if (typeof divToUpdateOrCallback === 'function') {
									divToUpdateOrCallback(results[1], name);
								} else {
									refreshQuickEventTypeCombo(results[2],divToUpdateOrCallback,comboName);
								}

							} else {
								swal({
									type: 'error',
									title: 'Error',
									html: results[1]
								});
							}
						}
					});
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: error
					});
				}
		});
		
		$("select.styled").select_skin();
	}
	
	
	
	
	
	
	
	function cancelEmailTemplateWizardWindow() { modal.close(); }
	function getEmailTemplateWizardWindow() {
		$.ajax({	type: "POST",	url: "/admin/data/getEmailTemplateWizardWindow/",
			data: {clientID: '12295'},
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					modalContent = 			'<div class="modalBorderBox" style="width: 960px; ">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-office-archives"></i> E-mail Templates Library</div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);"  onclick="cancelEmailTemplateWizardWindow();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1] + "<br />";
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					listEmailTemplateWizardGrid();
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	var timer;
	function searchEmailTemplateWizardGrid(query) {
		clearTimeout(timer);
		timer =					setTimeout(function(){listProductTemplatesGrid(query)},350);
	}
	function listEmailTemplateWizardGrid(query) {
		var errorField = 			$("#errorTempPackage");
			errorField.hide();
		
		$("#search_query_new_package_loading").addClass('fa fa-spinner fa-spin');
		$("#search_query_new_package_loading").removeClass('icon-magnifier');
		
		$.ajax({	type: "POST",	url: "/admin/data/getEmailTemplateWizardTemplatesListing/",
			data: {clientID: '12295',query:query},
			success: function(   data   ){
				$("#search_query_new_package_loading").addClass('icon-magnifier');
				$("#search_query_new_package_loading").removeClass('fa fa-spinner fa-spin');
				
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#emailTemplatesListingDIV").html(results[1]);
					
					
					$('#emailTemplatesListingDIV [data-toggle="popover"]').popover({
				        trigger: 'hover',
				        placement: function (context, source) {
					        var position = $(source).position();
					        if (position.top < 110){
					            return "top";
					        }
					        return "bottom";
					    },
				        'show': true,
				        container: 'body'
				    });
					
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function previewWizardEmailTemplate(templateID) {
		$.ajax({	type: "POST",	url: "/admin/data/previewWizardEmailTemplate/",
			data: {clientID: '12295',templateID:templateID},
			success: function(   data   ){
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#emailTemplatesPreviewDIV").html(results[1]);
					$("#emailTemplateNamePreview").html(results[2]);
					$("#actionButtonArea").html(results[3]);
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function selectWizardEmailTemplate(templateID) {
		$("input.email-template[name=chk_" + templateID + "]").attr('checked','true');
	}
	function selectAllWizardEmailTemplates(cbx) {
		$("input[class=email-template]").each(function() {
		    ($(this).attr("checked")) ? $(this).attr("checked",false) : $(this).attr("checked",true);
		});
	}
	function batchSaveWizardEmailTemplates() {
		var emailTemplates = 		[],
			error = 				"";
			
		$("input[class=email-template]:checked").each(function() {
		    emailTemplates.push(this.id.replace("chk_",""));
		});	
		
		if(emailTemplates.length == 0) {
			//error, no leads selected
			swal({
				type: 'error',
				title: 'Error',
				html: 'Please check at least 1 e-mail template to add...'
			});
		} else {			
			
			$.ajax({type: 'POST',url: '/admin/data/batchAddCommonResponses/',
				data: {clientID: '12295', emailTemplates: emailTemplates},
				success: function(data) {
					var results = 			data.split("{|}");
					if(results[0] == "SUCCESS") {
						cancelEmailTemplateWizardWindow();
						refreshResults();
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		}
	}
	
	
	
	function closePreviewPackageTotalingType() {
		$("#globalPackagePreviewDialog").popup('hide');
	}
	function previewPackageTotalingType(packageIDdiv,totalingTypeIDdiv) {
		
		var packageID = 			$("#" + packageIDdiv).val(),
			totalingTypeID = 		$("#" + totalingTypeIDdiv).val(),
			modalContent = 			"";
			
			$.ajax({	type: "POST",	url: "/admin/data/previewPackageTotalingType/",
				data: {	clientID: '12295', packageID: packageID, totalingTypeID: totalingTypeID},
				success: function(   data   ){
					var results = data.split("{|}");
			   		if(results[0] == "SUCCESS") {
			   			
			   			$("#globalPackagePreviewDialog").html(results[1]);
						$("#globalPackagePreviewDialog").popup({
							blur: false,
							escape: false,
							opacity: 0.3,
							transition: 'all 0.3s',
							autozindex: false
						});
						$("#globalPackagePreviewDialog").popup('show');
			   			
			   			
			   		} else {
			   			swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
			   		}
				}
			});
	}
	
	
	
	
	function refreshTaskCategoryCombo(newValue,comboName) {
		$.ajax({	type: "POST",	url: "/admin/data/refreshTaskCategoryCombo/",
			data: {clientID: '12295',comboName: comboName},
			success: function(   data   ){			 
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#addCategory_ComboHolder").html(results[1]);
					if(newValue != "") {
						$("#" + comboName).val(newValue);
						$("#" + comboName).change();
					}
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function showQuickAddTaskCategory(comboName) {
		swal({
		    title: 'Add Task Category',
		    html: '<p><div style="text-align: center; width: 250px; margin-left: auto; margin-right: auto;"><input id="quickCategoryName" class="form-control" /></div></p>',
		    showCancelButton: true,
		    closeOnConfirm: true
		},
		function(){
		    var title = 			$('#quickCategoryName').val(),
				error = 			"";
				
				
				error += 			(title == "") ? "Name is a required field<Br />" : "";
			
				if(error == "") {	
					
					$.ajax({	type: "POST",	url: "/admin/data/addTaskCategory/",
						data: {clientID:'12295', name: title},
						success: function(   data   ){
							var results = 			data.split("{|}");
							if(results[0] == "SUCCESS") {
								
								refreshTaskCategoryCombo(results[1], comboName);
								
							} else {
								swal({
									type: 'error',
									title: 'Error',
									html: results[1]
								});
							}
						}
					});
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: error
					});
				}
		});
	}
	function switchObjectTaskTypeCombo(objType, divToUpdate, comboToUpdate ) {
		
		var currentVal = 		$('#taskObjID').val();
		
		if(objType != "general" && objType != "") {
			$.ajax({	type: "POST",	url: "/admin/data/getObjectTaskTypeCombo/",
				data: {	clientID:'12295','objType': objType},
				success: function(   data   ){			 
					var results = 		data.split("{|}");
			   		if(results[0] == "SUCCESS") {
			   			
			   			$("#" + divToUpdate).slideDown();
			   			$("#" + comboToUpdate).html(results[1]);
			   			
			   			if(currentVal != '') {
			   				$('#taskObjID').val(currentVal);
			   			}
			   			
			   			switch(objType) {
			   				case "project":
			   				case "client":
			   				case "event":
			   				case "lead":
				   				//var currentVal = 		$('#taskObjID').val();
				   				$('#taskObjID').combobox();
				   				$('#taskObjID').combobox('value', currentVal);
			   					break;
			   			}
			   			
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		} else {
			$("#" + divToUpdate).slideUp();
			$("#" + comboToUpdate).html('');
		}
	}
	
	
	
	
	
	
	function switchPaymentFormType(which) {
		if(which == "1") {
			$(".showWhenPaid").show();
			$("#modalContent .modalBorderBox").animate({width:'800px'}, 500, function() {
				modal.center();	//added on [06.15.2k16] : TH to fix window re-centering
			});
			$("#normalColumnAlwaysVisible").removeClass('col-lg-12 col-md-12 col-sm-12 col-xs-12');
			$("#normalColumnAlwaysVisible").addClass('col-lg-6 col-md-6 col-sm-6 col-xs-6');
			
			
			
		} else {
			$(".showWhenPaid").hide();
			$("#modalContent .modalBorderBox").animate({width:'400px'}, 500, function() {
				modal.center();	//added on [06.15.2k16] : TH to fix window re-centering
			});
			$("#normalColumnAlwaysVisible").removeClass('col-lg-6 col-md-6 col-sm-6 col-xs-6');
			$("#normalColumnAlwaysVisible").addClass('col-lg-12 col-md-12 col-sm-12 col-xs-12');
			
		}
	}
	
	
	
	
	function applyEmailTemplateToObject(emailTemplateID,objectType,objectID,objectSubType,objectSubID,customMessageFieldToUpdate,dontOverWriteMode,customSubjectFieldToUpdate,dontOverrideSubject) {
		$.ajax({	type: "POST", url: "/admin/data/applyEmailTemplateToObject/",
			data: {clientID: '12295', emailTemplateID: emailTemplateID, objectType: objectType, objectID:objectID, objectSubType: objectSubType, objectSubID: objectSubID},
			success: function(   data   ) {
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					var resultsData = 			$.JSON.decode(results[1]);
					
					//This is for when sending a Questionnaire manually form : [02.21.2k18] : TH
	   				if(objectSubType == 'questionnaire' && objectSubID == '') {
	   					objectType = 		objectSubType;
	   				}
					
					if(dontOverrideSubject != '' && dontOverrideSubject != undefined && dontOverrideSubject != null) {
						
						//added on [06.11.20] : TH
						//don't override the subject line
						
					} else {
					
						$("#subject_" + objectType).val(resultsData.subject);
						$("#subject_pricing_send").val(resultsData.subject);
						
						if($("#subject_" + objectType).length < 1) {
							$("#subject").val(resultsData.subject);
						}
					
					}
					var editor = tinymce.EditorManager.get(objectType + '_message');
	   				if(editor) {
	   					if(dontOverWriteMode !== undefined && dontOverWriteMode !== "" && dontOverWriteMode !== null) {
	   						editor.insertContent( resultsData.message );
	   					} else {
							editor.setContent( resultsData.message );
	   					}
	   				}
	   				
	   				//added on [04.15.20] 
	   				if(customSubjectFieldToUpdate != '' && customSubjectFieldToUpdate != undefined && customSubjectFieldToUpdate != null) {
	   					$("#" + customSubjectFieldToUpdate).val(resultsData.subject);
	   				}
	   				
	   				if(customMessageFieldToUpdate != '' && customMessageFieldToUpdate != undefined && customMessageFieldToUpdate != null) {
	   					var editor = tinymce.EditorManager.get(customMessageFieldToUpdate);
		   				if(editor) {
							if(dontOverWriteMode !== undefined && dontOverWriteMode !== "" && dontOverWriteMode !== null) {
		   						editor.insertContent( resultsData.message );
		   					} else {
								editor.setContent( resultsData.message );
		   					}
		   				} else {
		   					$("#" + customMessageFieldToUpdate).val(resultsData.message);
		   					$("#" + customMessageFieldToUpdate).change();
		   				}
	   				} else {
	   					var editor = tinymce.EditorManager.get('message_' + objectType);
		   				if(editor) {
							if(dontOverWriteMode !== undefined && dontOverWriteMode !== "" && dontOverWriteMode !== null) {
		   						editor.insertContent( resultsData.message );
		   					} else {
								editor.setContent( resultsData.message );
		   					}
		   				} else {
		   					$("#message_" + objectType).val(resultsData.message);
		   					$("#message_" + objectType).change();
		   				}
	   				}
	   				//fixed on [03.20.2k18] : TH
	   				if(resultsData.attachments != '') {
	   					addAttachmentsFromJSONString(resultsData.attachments);
	   				}
	   				
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function applySMSTemplateToObject(emailTemplateID,objectType,objectID,objectSubType,objectSubID) {
		$.ajax({	type: "POST", url: "/admin/data/applyEmailTemplateToObject/",
			data: {clientID: '12295', emailTemplateID: emailTemplateID, objectType: objectType, objectID:objectID, objectSubType: objectSubType, objectSubID: objectSubID},
			success: function(   data   ) {
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					var resultsData = 			$.JSON.decode(results[1]);
					$("#subject_" + objectType).val(resultsData.subject);
					$("#message_" + objectType).val(resultsData.message);
					$("#message_" + objectType).change();
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	
	
	
	
	
	function cancelAddCategoryToItem() {
		//$("#addCategoryForm").slideUp();
		//$("#errorCategory").slideUp();
		$("#globalCategoryDialog").popup('hide');
	}
	function refreshObjectCategoriesListing(objectType,objectID) {
		$.ajax({	type: "POST", url: "/admin/fn/misc/refreshObjectCategoriesListing/",
			data: {clientID: '12295', objectType: objectType, objectID: objectID}, 
			success: function(   data   ){
				var results = data.split("{|}");			
				if(results[0]=="SUCCESS") {
					$("#categoryListing_" + objectID).html(results[1]);
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function getAddObjectCategoryForm(objectType,objectID) {
		$.ajax({	type: "POST", url: "/admin/fn/misc/getAddObjectCategoryForm/",
			data: {clientID: '12295', objectType: objectType, objectID: objectID}, 
			success: function(   data   ){
				var results = data.split("{|}");			
				if(results[0]=="SUCCESS") {
					
					
					modalContent = 				'<div class="modalBorderBox" style="width: 450px; ">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-tag"></i> Add Category</div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);"  onclick="cancelAddCategoryToItem();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					//modal.open({content: modalContent});
					
					
					$("#globalCategoryDialog").html(modalContent);
					$("#globalCategoryDialog").popup({
						blur: false,
						opacity: 0.3,
						transition: 'all 0.3s',
						autozindex: false,
					});
					$("#globalCategoryDialog").popup('show');
					$("#globalCategoryDialog_wrapper").css('z-index','77777');
					$("#globalCategoryDialog_background").css('z-index','69999');
					
					
				   	$('input.date_picker').jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function associateCategoryToItem(categoryID, objectType, objectID) {
		var divToUpdate = 					$("#categoryListing");
			
		if(categoryID != "") {
			
			if(categoryID !== null) {
				if(categoryID.length > 0) {
					if(categoryID[0] == "ALL") {
						categoryID.splice(0,1);
					}
				}
				categoryID = 			categoryID.join("||");
			}
			
			
			$.ajax({	type: "POST",	url: "/admin/fn/misc/associateObjectCategoryToItem/",
				data: {	'clientID': '12295', 'categoryID': categoryID,'objectType': objectType, 'objectID': objectID},
				success: function(   data   ){			 
					var results = 		data.split("{|}");
					if(results[0] == "SUCCESS") {	   		
						refreshObjectCategoriesListing(objectType,objectID);
						cancelAddCategoryToItem();
						
						if(typeof getObjectActivityLog === 'function'){
							getObjectActivityLog(objectType,objectID);
						}
						
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});		
		} else {
			swal({
				type: 'error',
				title: 'Error',
				html: 'You must choose a category before saving'
			});
		}
	}
	function removeCategoryFromItem(clientID, associationID) {
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you want to delete this category from this item? <br /> This action can NOT be undone!',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: true,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({	type: "POST", url: "/admin/fn/misc/disassociateObjectCategoryFromItem/",
					data: {'clientID': clientID, 'associationID': associationID	},
					success: function(   data   ) {
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							$("#" + associationID + "_category").html( "" );
							$("#" + associationID + "_category").remove();
							
							var objectType = 		results[1],
								objectID = 			results[2];
							
							refreshObjectCategoriesListing(objectType,objectID);
							cancelAddCategoryToItem();
							
							if(typeof getObjectActivityLog === 'function'){
								getObjectActivityLog(objectType,objectID);
							}
							
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
		    } 
		});
	}
	
	
	function refreshObjectTasksListing(objectType,objectID) {
		$.ajax({	type: "POST", url: "/admin/fn/tasks/refreshObjectTasksListing/",
			data: {clientID: '12295', objectType: objectType, objectID: objectID	},
			success: function(   data   ) {
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					$(".popover").remove();
					$("#" + objectType + "_tasks_container").html( results[1] );
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	
	
	
	
	
	
	
	function cancelInsertTokens() {
		$("#globalTokenChooserDialog").popup('hide');
	}
	function showInsertVariablesIntoField(objectType,customTarget) {
		$.ajax({	type: "POST", url: "/admin/data/showInsertTokensDialog/",
			data: {clientID: '12295', customTarget: customTarget}, 
			success: function(   data   ){
				var results = data.split("{|}");			
				if(results[0]=="SUCCESS") {
										
					modalContent = 				'<div class="modalBorderBox" style="width: 550px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-rocket"></i> Insert Tokens/Variables </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelInsertTokens();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					
					$("#globalTokenChooserDialog").html(modalContent);
					$("#globalTokenChooserDialog").popup({
						blur: false,
						opacity: 0.3,
						transition: 'all 0.3s',
						autozindex: false,
					});
					$("#globalTokenChooserDialog").popup('show');
					$("#globalTokenChooserDialog_wrapper").css('z-index','77777');
					$("#globalTokenChooserDialog_background").css('z-index','69999');
					
					//modal.open({content: modalContent});
					
					updateVariablesListForCombo('allTokens', 'allTokens_spinner', objectType);
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function showInsertVariablesIntoFieldUpdated(objectType, customTarget) {
		$.ajax({	type: "GET", url: "/admin/data/getResponseVariablesUpdated/",
			data: {clientID: '12295', type: objectType},
			success: function(   data   ){
				let results = data.split("{|}");
				if(results[0]=="SUCCESS") {
					//jquery.popupoverlay.min.js
					const variables = $.parseJSON(results[1]);
					$("#globalTokenChooserDialog").popup({
						blur: true,
						color: "#101828",
						opacity: 0.7,
						transition: 'all 0.3s',
						autozindex: false,
					});
					let modalUpdatedContent = '<div class="insertVariablesModal">' +
						'<div class="insertVariablesModal-header">' +
						'<div class="insertVariablesModal-header-icon"><img alt="Insert token icon" src="/images/brandSettings/insert_token_green.svg"></div>' +
						'<div class="insertVariablesModal-header-content"><h3>Add Variable</h3><p>Simply choose your Variable and add it to the Email</p></div>' +
						'<div class="insertVariablesModal-header-button" onclick="cancelInsertTokens();"><img src="/images/modals/close.svg" alt="Close modal icon"></div>' +
						'</div>' +
						'<div id="modalVariablesTabs" class="insertVariablesModal-content">' +
						'<ul id="modalVariablesTabsTitles" class="insertVariablesModal-nav">' +
						'</ul>' +
						'<div id="modalVariablesTabsContent" class="insertVariablesModal-tabs-content">' +
						'</div>'
					'</div>'
					'</div>';
					$("#globalTokenChooserDialog").html(modalUpdatedContent);
					let uniqueCategories = [...new Set(variables.map(item => item.category))];
					$.map(uniqueCategories, function (category, index ) {
						let tabTitle = `<li><a href='#${category}VariablesTab'>${capitalizeFirstLetter(category)}</a></li>`;
						let tabContent = `<div id='${category}VariablesTab'></div>`;
						$("#modalVariablesTabsTitles").append(tabTitle);
						$("#modalVariablesTabsContent").append(tabContent);
						$.map(variables, function (item, i) {
							if	(item.category === category) {
								let option = `<li class='insertVariablesModal-tabs-item'><span>${item.displayName}</span><button class="primary-light-btn" data-target="${customTarget}" data-value="${item.varName}" onclick="insertTokenIntoField(this.dataset.target, this.dataset.value)" type="button"><img src="/images/brandSettings/plus.svg" alt=""></button></li>`
								$(`#${category}VariablesTab`).append(option);
							}
						})
						function capitalizeFirstLetter(string) {
							return string.charAt(0).toUpperCase() + string.slice(1);
						}
					})
					$("#globalTokenChooserDialog").popup('show');
					$('#modalVariablesTabs').tabs({
						event: "mouseover"
					});

				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function insertTokenIntoField(fieldName,value) {
		$('#' + fieldName).insertAtCaret(value);
		$('#' + fieldName).change();
		
		var editor = tinymce.EditorManager.get(fieldName);
		if(editor) {
			editor.insertContent(value);
		}
		cancelInsertTokens();
	}
	function updateVariablesListForCombo(varCombo, varSpinner, objectType) {
		$("#" + varSpinner).show();
		$.ajax({type: "GET", url: "/admin/data/getResponseVariables/",
			data: { clientID: '12295', type: objectType },
			success: function(   data   ){
		   		var results = data.split("{|}");
		   		var result = results[0];
		   		if(result == "SUCCESS") {
		   			var valuesObj = 		jQuery.parseJSON(results[1]);

		   			var variablesCombo = 	$('#' + varCombo);
		   				
		   			// First empty the combobox
		   			variablesCombo.empty();
		   			variablesCombo.append('<option value="" selected="selected"> -- </option>');
		   			
		   					   			
		   			var category = "";
		   			$.each(valuesObj, function(index, value) {
		   				
		   				if(category != value.category) {
							if(category != "") {
								variablesCombo.append('</optgroup>');
							}
							category = value.category;
							variablesCombo.append('<optgroup label="' + value.category + '">');
							
		   				}
		   				// Select optgroup by label, then append the new items to that group
		   				$('optgroup[label=' + value.category + ']',variablesCombo).append('<option value="' + value.varName + '">' + value.displayName + '</option>');
		   				
					});
					
					$("#" + varSpinner).hide();
		   		}
			}
		});
	}
	function updateVariablesListForComboUpdated(varCombo, varSpinner, objectType) {
		$("#" + varSpinner).show();
		$.ajax({type: "GET", url: "/admin/data/getResponseVariables/",
			data: { clientID: '12295', type: objectType },
			success: function(   data   ){
				var results = data.split("{|}");
				var result = results[0];
				if(result == "SUCCESS") {
					var valuesObj = 		jQuery.parseJSON(results[1]);
					let categories = [];

					function getUniqCategories(item) {
						if (categories.indexOf(item.category) === -1) {
							categories.push(item.category);
							return true;
						}
						return false;
					}

					valuesObj.filter((item) => getUniqCategories(item));



					console.log("Result in combo", categories);
					console.log("Result in combo", typeof results[1]);


					var variablesCombo = 	$('#' + varCombo);

					// First empty the combobox
					variablesCombo.empty();
					variablesCombo.append('<option value="" selected="selected"> -- </option>');


					var category = "";
					$.each(valuesObj, function(index, value) {

						if(category != value.category) {
							if(category != "") {
								variablesCombo.append('</optgroup>');
							}
							category = value.category;
							variablesCombo.append('<optgroup label="' + value.category + '">');

						}
						// Select optgroup by label, then append the new items to that group
						$('optgroup[label=' + value.category + ']',variablesCombo).append('<option value="' + value.varName + '">' + value.displayName + '</option>');

					});

					variablesCombo.change();

					$("#" + varSpinner).hide();
				}
			}
		});
	}
	
	
	function getEventTypeDuration(eventTypeID) {
		$.ajax({	type: "POST",	url: "/admin/fn/events/getEventTypeDuration/",
			data: {clientID: '12295', eventTypeID: eventTypeID},
			success: function(   data   ){			 
				var results = 			data.split("{|}");
		   		if(results[0] == "SUCCESS") {
					if(results[1] != "") {
						var dataArray = $.JSON.decode(results[1]);
						$("#durationAmount").val(dataArray.durationAmount);
						$("#durationType").val(dataArray.durationType);
					}
				}
			}
		});
	}
	function updateEndTime(fieldName,fieldToUpdate,timeFormat) {
		var durationAmount = 			$("#durationAmount").val(),
			durationType = 				$("#durationType").val(),
			theField = 					$("#" + fieldName),
			startTimeValue = 			theField.val().split(':'),
			theFieldUpdate = 			$("#" + fieldToUpdate),
			theTimeFieldUpdate = 		$("#" + fieldToUpdate + "_chooser"),
			theTime = 					"",
			newTime = 					"";
			
		if(durationType !== "") {
			theTime = 					moment(parseInt(startTimeValue[0]) + ":" + startTimeValue[1] + " " + startTimeValue[2], "h:mm a");
			newTime = 					theTime.add(parseInt(durationAmount),durationType);
			
			theFieldUpdate.val(newTime.format('h:mm:A'));
			if(timeFormat == "military") {
				theTimeFieldUpdate.val(newTime.format('H:mm'));
			} else {
				theTimeFieldUpdate.val(newTime.format('h:mm A'));
			}
			//theTimeFieldUpdate.change();
		}
	}
	function checkIfDateIsBooked(eventDate,endDate,messageField) {
		if(messageField == null || messageField == undefined || messageField == "") {
			messageField = 				$("#eventConflict");
		} else {
			messageField = 				$("#" + messageField);
		}
		$.ajax({	type: "POST",	url: "/admin/fn/events/checkIfEventDateIsBooked/",
			data: {clientID: '12295', eventDate: eventDate, endDate: endDate},
			success: function(   data   ){			 
				var results = 			data.split("{|}");
		   		if(results[0] == "SUCCESS") {
					messageField.html(results[1]);
					messageField.show();
				} else {
					swal({ 	type: 'error', 	title: 'Error', 	html: results[1] });
				}
			}
		});
	}
	
	
	
	
	
	
	
	function refreshObjectComments(objT,objID,cont){
		$.ajax({	type: "POST",	url: "/admin/fn/cmts/refreshObjectCommentsListing/",
			data: {clientID: '12295', objectType: objT, objectID: objID, container: cont},
			success: function(   data   ){			 
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
					$("#" + cont).html(results[1]);
					$("#" + cont).slideDown('fast');
					$("time.timeago").timeago();
					
					$("#comments_btn_" + objT + "_" + objID).html(results[2]);
					
					if($("#" + cont).length < 1) {
						
						//If that DIV is no where to be found in the DOM, then open it in a modal:
						modalContent = 			'<div class="modalBorderBox" style="width: 850px;">';
						modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-chat-2"></i> Comments </div>';
						modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="closeObjectCommentForm();" ><span class="icon-cancel"></span></a></div>';
						modalContent += 				'</div>';
						modalContent += 				'<div id="modalCommentsContent"  >';	//style="max-height: 350px;overflow: auto; padding-left: 10px; padding-right: 10px;"
						modalContent += 					results[1] + "<br />";
						modalContent += 				'</div>';
						modalContent += 			'</div>';
						
						$("#globalCommentsDialog").html(modalContent);
						$("#globalCommentsDialog").popup({
							blur: false,
							opacity: 0.3,
							transition: 'all 0.3s',
							autozindex: false,
						});
						$("#globalCommentsDialog").popup('show');
						$("#globalCommentsDialog_wrapper").css('z-index','7777');
						$("#globalCommentsDialog_background").css('z-index','6999');
						
						$(".commentsView").css('max-height','350px');
						$(".commentsView").css('overflow','auto');
						$(".commentsView").css('padding-left','10px');
						$(".commentsView").css('padding-right','10px');
						
						$(".commentsView").scrollTop($('.commentsView')[0].scrollHeight);
						
						$("time.timeago").timeago();
						
						//$("#modalCommentsContent").scrollTop($('#modalCommentsContent')[0].scrollHeight);
						
					}
					
				} else {
					swal({ 	type: 'error', 	title: 'Error', html: results[1] });
				}
			}
		});
	}
	function closeObjectCommentForm(objT,objID,cont) {
		$("#" + cont).html('');
		$("#" + cont).slideUp('fast');
		if($("#" + cont).length < 1) {
			$("#globalCommentsDialog").popup('hide');
		}
	}
	function getAddObjectCommentForm(objT,objID,cont) {
		$.ajax({	type: "POST",	url: "/admin/fn/cmts/getAddObjectCommentForm/",
			data: {clientID: '12295', objectType: objT, objectID: objID, container: cont},
			success: function(   data   ){			 
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
					modalContent = 			'<div class="modalBorderBox" style="width: 450px; ">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-chat-2"></i> Add Comment </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);"  onclick="cancelUpdateTask();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					$(".form-control.emoji").emojioneArea({
					  	pickerPosition: "bottom",
					  	filtersPosition: "bottom",
					    tonesStyle: "checkbox"
					});
					
				} else {
					swal({ 	type: 'error', 	title: 'Error', html: results[1] });
				}
			}
		});
	}
	function cancelAddObjectComment() { modal.close() }
	function addObjectComment(objT,objID,cont) {
		var comment = 					$("#comment_body").val();
		$.ajax({	type: "POST",	url: "/admin/fn/cmts/addObjectComment/",
			data: {clientID: '12295', objectType: objT, objectID: objID, comment: comment},
			success: function(   data   ){			 
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			cancelAddObjectComment();
					refreshObjectComments(objT,objID,cont);
				} else {
					swal({ 	type: 'error', 	title: 'Error', html: results[1] });
				}
			}
		});
	}
	function getObjectCommentEditForm(commentID,objT,objID,cont) {
		$.ajax({	type: "POST",	url: "/admin/fn/cmts/getObjectCommentEditForm/",
			data: {clientID: '12295', objectType: objT, objectID: objID, container: cont, commentID: commentID},
			success: function(   data   ){			 
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			$("#comment_edit_screen_" + commentID).html(results[1]);
		   			$("#comment_edit_screen_" + commentID).slideDown('fast');
		   			
		   			$(".form-control.emoji").emojioneArea({
					  	pickerPosition: "bottom",
					  	filtersPosition: "bottom",
					    tonesStyle: "checkbox"
					});
		   			
				} else {
					swal({ 	type: 'error', 	title: 'Error', html: results[1] });
				}
			}
		});
	}
	function cancelUpdateObjectComment(commentID) {
		$("#comment_edit_screen_" + commentID).html('');
		$("#comment_edit_screen_" + commentID).slideUp('fast');
	}
	function updateObjectComment(commentID,objT,objID,cont) {
		var comment = 					$("#comment_body_" + commentID).val();
		$.ajax({	type: "POST",	url: "/admin/fn/cmts/updateObjectComment/",
			data: {clientID: '12295', commentID: commentID, comment: comment },
			success: function(   data   ){			 
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			refreshObjectComments(objT,objID,cont);
				} else {
					swal({ 	type: 'error', 	title: 'Error', html: results[1] });
				}
			}
		});
	}
	function deleteObjectComment(commentID,objT,objID,cont) {
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you want to delete this comment? <br /> This action can NOT be undone!',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: true,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({	type: "POST",	url: "/admin/fn/cmts/deleteObjectComment/",
					data: {clientID: '12295', commentID: commentID},
					success: function(   data   ){			 
						var results = data.split("{|}");
				   		if(results[0] == "SUCCESS") {
							refreshObjectComments(objT,objID,cont);
						} else {
							swal({ 	type: 'error', 	title: 'Error', html: results[1] });
						}
					}
				});
		    } 
		});
	}
	
	
	function getObjectAuditLog(objT,objID) {
		$.ajax({	type: "POST",	url: "/admin/fn/audit/getObjectAuditLog/",
			data: {clientID: '12295', objectType: objT, objectID: objID},
			success: function(   data   ){			 
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
					$("#audit_log_" + objT).html(results[1]);
				} else {
					swal({ 	type: 'error', 	title: 'Error', html: results[1] });
				}
			}
		});
	}
	
	function getObjectActivityLog(objT,objID) {
		$("#loading_activity_log_" + objT).show();
		var pageNum = 						$("#activity_page_num").val(),
			type = 							$("#activity_type").val();
			
		$.ajax({	type: "POST",	url: "/admin/fn/activity/getObjectActivityLog/",
			data: {clientID: '12295', objectType: objT, objectID: objID, page: pageNum, type: type},
			success: function(   data   ){		
				$("#loading_activity_log_" + objT).hide();	 
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
					$("#activity_log_" + objT).html(results[1]);
				} else {
					swal({ 	type: 'error', 	title: 'Error', html: results[1] });
				}
			}
		});
	}
	
	function cancelClientPreview(){
		$("#globalClientPreviewDialog").popup('hide');
	}
	function getClientPreview(customerID) {
		$.ajax({	type: "POST",	url: "/admin/fn/clients/getClientPreview/",
			data: {clientID: '12295', customerID: customerID},
			success: function(   data   ){			 
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
					
		   			modalContent = 			'<div class="modalBorderBox" style="width: 825px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-user-profile-1"></i> View Client Preview </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelClientPreview();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					
					$("#globalClientPreviewDialog").html(modalContent);
					$("#globalClientPreviewDialog").popup({
						blur: false,
						opacity: 0.3,
						transition: 'all 0.3s'
					});
					$("#globalClientPreviewDialog").popup('show');
					
				} else {
					swal({ 	type: 'error', 	title: 'Error', html: results[1] });
				}
			}
		});
	}
	
	function cancelEmailTemplatePreview(){modal.close();}
	function getEmailTemplatePreview(templateID) {
		$.ajax({	type: "POST",	url: "/admin/fn/comm/getEmailTemplatePreview/",
			data: {clientID: '12295', templateID: templateID},
			success: function(   data   ){			 
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
					
		   			modalContent = 			'<div class="modalBorderBox" style="width: 755px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-magnifier"></i> View Preview </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelEmailTemplatePreview();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
		   			
				} else {
					swal({ 	type: 'error', 	title: 'Error', html: results[1] });
				}
			}
		});
	}
	
	
	
	function cancelNewEvent() {
		modal.close();
	}	
	
	function saveNewEvent() {
		var brandID = 			$("#event_brandID").val(),
			customerID = 		$("#eventCustID").val(),
			eventDate = 		$("#dateofevent").val(),
			eventType = 		$("#eventType").val(),
			timeZoneID = 		$("#eventTimezone").val(),
			eventName = 		$("#eventName").val(),
			eventCustomJOBName = $("#eventCustomJobID").val(),	//added on [10.07.22] : TH
			eventStart = 		$("#eventTimeStart").val(),
			eventEnd = 			$("#eventTimeEnd").val(),
			eventArrivalTime = 	$("#eventArrivalTime").val(),
			bridalParty = 		$("#eventNumInBridalParty").val(),
			guests = 			$("#eventNumOfGuests").val(),
			notes = 			$("#eventNotes").val(),
			reminderTemplateID = $("#reminderTemplate_event").val(),						
			workflowTemplateID = $("#workflowTemplate_event").val(),
			locations = 		$("#locationsToAdd").val(),
			statusID = 			$("#eventStatusID").val(),
			staffID = 			$("#staff_event").val(),		//added on [02.05.21] : TH
			
			isMultiDay = 		$("input[name=eventIsMultiDay]:checked").val(),
			endDate = 			$("#eventEndDateTimeStamp").val();
			
			
			if(locations !== undefined && locations !== null) {
				if(locations.length > 0) {
					locations = 		locations.join(",");
				}
			}
			
			
			$("#addEventBtnWindow").attr('disabled','disabled');
			$("#addEventBtnIcon").removeClass('fa-check');
			$("#addEventBtnIcon").addClass('fa-refresh fa-spin');
			
			
		$.ajax({type: "POST",url: "/admin/fn/events/addEvent/",
			data: {clientID: '12295', brandID: brandID,customerID: customerID, date: eventDate, type: eventType, locationIDs: locations, 
					name: eventName, eventCustomJOBName: eventCustomJOBName, start: eventStart, end: eventEnd, eventArrivalTime: eventArrivalTime, bridalParty: bridalParty,
					guests: guests, notes: notes, isMultiDay: isMultiDay, endDate: endDate, reminderTemplateID: reminderTemplateID, 
					workflowTemplateID: workflowTemplateID, statusID: statusID, staffID: staffID, timeZoneID: timeZoneID },
			success: function(   data   ){
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					cancelNewEvent();
					
					//updated on [04.15.21] : TH
					if(typeof getEventsListingForClient === 'function') {
						getEventsListingForClient();
					}
					
					//updated on [04.15.21] : TH
					if(typeof forceRefreshEventsJSON === 'function') {
						forceRefreshEventsJSON();
					}
					
					var newEventID = 			results[1];
						if(newEventID == "SUCCESS") {
							newEventID = 		results[2];
						}
					
					
					swal({
					    title: 'Are you sure?',
					    html: "Would you like to edit the new event now?",
					    type: 'success',
					    showCancelButton: true,
					    confirmButtonColor: '#3085d6',
					    cancelButtonColor: '#d33',
					    confirmButtonText: 'Yes',
					    cancelButtonText: 'No',
					    confirmButtonClass: 'confirm-class',
					    cancelButtonClass: 'cancel-class',
					    closeOnConfirm: true,
					    closeOnCancel: true
					}, function(isConfirm) {
					    if (isConfirm) {
					    	location.href="/admin/events/" + newEventID + "/";
					    } 
					});
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
					
					$("#addEventBtnWindow").attr('disabled',false);
					$("#addEventBtnIcon").removeClass('fa-refresh fa-spin');
					$("#addEventBtnIcon").addClass('fa-check');
					
				}
			}
  		});
	}
	
	
	function getAddEventForm(customerID) {
		$.ajax({	type: "POST",	url: "/admin/fn/events/getAddEventForm/",
		   data: {clientID: '12295', useModalWindow: 'yes', customerID: customerID},
		   success: function(   data   ){
		   		$("#calendarAppLoader").hide();
		   		var results = 		data.split("{|}");
				if(results[0] == "SUCCESS") {
					modal.open({content: results[1]});
					
					$("#locationsToAdd").multiselect({
						noneSelectedText: "Select Location(s)",
						header: false,
						selectedList: 1,
						height: 250
					});
					
					$('#dateofevent').on('change',function(e) {
						var eventDate = 		$(this).val();
						
						checkIfDateIsBooked(eventDate);
						
					});
					//Auto load the warning
					if($('#dateofevent').val() != "") {
						checkIfDateIsBooked($('#dateofevent').val());
					}
					
					/*
					$("select.styled").select_skin();*/
					$("input[xclass=styled]:checkbox").iButton();
					$('#dateofevent.date_picker').jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					$('#eventEndDateTimeStamp.date_picker').jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					$('input.timepicker').timepicker({
						interval: 15,
						timeFormat: 'h:mm p',						startTime: '8:00',
						scrollbar: true,
						change: function(time) {
				            var picker = $(this).timepicker({timeFormat: 'h:mm p'}),
				            	fieldID = 	$(this).attr('id').replace('_chooser','');
				            	if(time != "") {
	            					$("#" + fieldID).val(formatAMPM(time));
				            		updateEndTime('eventTimeStart','eventTimeEnd','standard');
				            	} else {
				            		$("#" + fieldID).val('');
				            	}
				            	
				        }
					});
					
					$('#modalContent [data-toggle="popover"]').popover({
				        trigger: 'hover',
				        'placement': 'top',
				        'show': true,
				        container: 'body'
				    });
					
				    $("#client_quick_typeahead").easyAutocomplete({
						url: function(phrase) {
							return "/admin/fn/clients/searchClientsTypeAheadJSON/";
						},
						ajaxSettings: {
							dataType: "json",
							method: "POST",
							data: {
								dataType: "json",
								clientID: '12295'
							}
						},
						preparePostData: function(data) {
							data.searchQuery = $("#client_quick_typeahead").val();
							return data;
						},
						requestDelay: 500,
						getValue: function(element) {
							return element.customerName;
						},
						template: {
							type: "description",
							fields: {
								description: "customerCompanyName"
							}
						},
						list: {
							maxNumberOfElements: 15,
							onShowListEvent: function() {
								$("#client_quick_typeahead").focus();
							},
							onChooseEvent: function() {
								var data = $("#client_quick_typeahead").getSelectedItemData();
								$("#eventCustID").val(data.customerID).trigger("change");
							}
						}
					});
				    
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}

	function cancelProject() {
		modal.close();
	}
	function getAddProjectScreen(customerID) {

		$.ajax({	type: "POST",	url: "/admin/fn/projects/getAddProjectForm/",
			data: {clientID: '12295', customerID: customerID},
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					modalContent = 			'<div class="modalBorderBox" style="width: 700px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-windows-open"></i> Add Project </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelProject();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					$("#projStartDate").jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					$("#projEndDate").jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					
					
					$( ".spinnerField" ).spinner({
						spin: function( event, ui ) {
							if ( ui.value >= 100 ) {
								$( this ).spinner( "value", 100 );
								return false;
							} else if ( ui.value <= 0 ) {
								$( this ).spinner( "value", 0 );
								return false;
							}
						}
					});
					
					$('#modalContent [data-toggle="popover"]').popover({
				        trigger: 'hover',
				        'placement': 'top',
				        'show': true,
				        container: 'body'
				    });
					
					$("#client_quick_typeahead").easyAutocomplete({
						url: function(phrase) {
							return "/admin/fn/clients/searchClientsTypeAheadJSON/";
						},
						ajaxSettings: {
							dataType: "json",
							method: "POST",
							data: {
								dataType: "json",
								clientID: '12295'
							}
						},
						preparePostData: function(data) {
							data.searchQuery = $("#client_quick_typeahead").val();
							return data;
						},
						requestDelay: 500,
						getValue: function(element) {
							return element.customerName;
						},
						template: {
							type: "description",
							fields: {
								description: "customerCompanyName"
							}
						},
						list: {
							maxNumberOfElements: 15,
							onShowListEvent: function() {
								$("#client_quick_typeahead").focus();
							},
							onChooseEvent: function() {
								var data = $("#client_quick_typeahead").getSelectedItemData();
								$("#projClientID").val(data.customerID).trigger("change");
							}
						}
					});
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function saveProject() {
		var brand = 			$("#projBrandID").val(),
			client = 			$("#projClientID").val(),
			name = 				$("#projName").val(),
			status = 			$("#projStatus").val(),
			start = 			$("#projStartDate").val(),
			end = 				$("#projEndDate").val(),
			percent = 			$("#projPercentComplete").val(),
			notes = 			$("#projGeneralNotes").val(),
			type = 				$("#projType").val(),
			workflowID = 		$("#project_workflowID").val();
		
		if(name != "") {			
			$.ajax({	type: "POST",	url: "/admin/fn/projects/addProject/",
			   data: {clientID: '12295', name: name, status: status, start: start, end: end, 
			   		percent: percent, notes: notes,client: client, type: type, brand: brand, workflowID: workflowID },
			   success: function(   data   ){
					var result = data.split("{|}");			
					if(result[0].toLowerCase() == "success") {

						cancelProject();
						getProjectListingForClient();
						
						swal({
						    title: 'Success!',
						    html: 'Would you like to edit the new project now?',
						    type: 'success',
						    showCancelButton: true,
						    confirmButtonColor: '#3085d6',
						    cancelButtonColor: '#d33',
						    confirmButtonText: 'Yes',
						    cancelButtonText: 'No',
						    confirmButtonClass: 'confirm-class',
						    cancelButtonClass: 'cancel-class',
						    closeOnConfirm: true,
						    closeOnCancel: true
						}, function(isConfirm) {
						    if (isConfirm) {
						    	location.href="/admin/projects/" + result[1] + "/";
						    } 
						});
						
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
			   }
			});		
		} else {
			swal({
				type: 'error',
				title: 'Error',
				html: 'Please give your project a name'
			});
		}		
	}
		
	function addObjectInvoice(objectType,objectID) {
		let dataArray = 		{'clientID':'12295'};
		
		switch(objectType) {
			case "event":
				dataArray.evtID = 			objectID;
				break;
			case "project":
				dataArray.projID = 			objectID;
				break;
			case "client":
				dataArray.customerID =		objectID;
				break;
		}
		
		$.ajax({type: 'POST',url: '/admin/fn/invoices/getAddInvoiceForm/',
			data: dataArray,
			success: function(data) {
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					
					modalContent = 			'<div class="modalBorderBox" style="width: 750px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-doc"></i> Add Invoice </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelAddInvoice();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					
					toggleEvtProj($('#invObjType').val());
					
					$("#invIssueDate").jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					$("#invDueDate").jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					
					$('#modalContent [data-toggle="popover"]').popover({
				        trigger: 'hover',
				        'placement': 'top',
				        'show': true,
				        container: 'body'
				    });				
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	};
	function cancelAddInvoice() {
		
		modal.close();
	}
	
	function saveInvoice() {
		var evtID = 		$("#invEvtID").val(),
			projID = 		$("#invEvtID_proj").val(),
			issue = 		$("#invIssueDate").val(),
			due = 			$("#invDueDate").val(),
			invID = 		$("#invCustomID").val(),
			poNum = 		$("#invPONum").val(),
			
			tax = 			$("#invTax").val(),
			tax1 = 			$("#invTaxRate2").val(),
			tax2 = 			$("#invTaxRate3").val(),
			
			taxProfileID = 	$("#taxRateCombo_1").val(),
			tax1ProfileID = $("#taxRateCombo_2").val(),
			tax2ProfileID = $("#taxRateCombo_3").val(),
			
			subj = 			$("#invSubject").val(),
			notes = 		$("#invNotes").val(),
			pkg = 			$("#package").val(),
			pkgOptions = 	$("#packageOptions").val(),
			term = 			$("#terms").val(),
			type = 			$("#invObjType").val(),
			brand = 		$("#invBrandID").val(),
			reminderTemp = 	$("#reminderTemplate").val(),
			generalClient = $("#invGeneralClientText").val(),
			customerID = 	$("#invCustomerID").val(),
			error = 		"",
			errorField = 	$("#invoiceError");
			
			errorField.hide();

			$("#saveInvoiceBtn").attr('disabled',true);


		if(brand == "" || brand == "0") {		error += ("You must choose a brand for this Invoice<br />");		}
		if(type == "" || type == "0") {			
			if(evtID=="") {						error += ("Event is required <br />");					}
		} else if(type == "1"){
			if(projID == "") {					error += ("Project is required <br />");				}
		}
		
		if(issue==""){	error += ("Issue Date is required. <br />");	}
		if(due==""){	error += ("Due Date is required<br />");		}
		if(tax==""){	error += ("Tax % is required <br />");			}
		
		if(generalClient == "Enter a name") {
			generalClient = "";
		}
		
		if(error == "") {
			var eventProjID = 		(type == 0) ? evtID : projID;
			$.ajax({	type: "POST",	url: "/admin/fn/invoices/addInvoice/",
					   data: { clientID: '12295',eventID: eventProjID, issue: issue,
					   			due: due, invID: invID, poNum: poNum, tax: tax, tax1: tax1, tax2: tax2, taxProfileID: taxProfileID, tax1ProfileID: tax1ProfileID, tax2ProfileID: tax2ProfileID,
					   			subj: subj, notes: notes, pkg: pkg, pkgOptions: pkgOptions, term: term,
					   			type: type, brand: brand, reminderTemp: reminderTemp, generalClient: generalClient, customerID: customerID},
					   success: function(   data   ){
							var results = 			data.split("{|}");
							if(results[0] == "SUCCESS") {
								
								cancelAddInvoice();
								
								$("#invoicesDIV").append(results[1]);
								
								swal({
								    title: 'Success!',
								    html: 'Would you like to edit the new invoice now?',
								    type: 'success',
								    showCancelButton: true,
								    confirmButtonColor: '#3085d6',
								    cancelButtonColor: '#d33',
								    confirmButtonText: 'Yes',
								    cancelButtonText: 'No',
								    confirmButtonClass: 'confirm-class',
								    cancelButtonClass: 'cancel-class',
								    closeOnConfirm: true,
								    closeOnCancel: true
								}, function(isConfirm) {
								    if (isConfirm) {
								    	location.href="/admin/invoices/" + results[2] + "/?autoStart=edit";
								    } 
								});
								
							} else {
								swal({
									type: 'error',
									title: 'Error',
									html: results[1]
								});
								$("#saveInvoiceBtn").attr('disabled',false);
							}
						}
			});
		} else {
			swal({
				type: 'error',
				title: 'Error',
				html: error
			});
			$("#saveInvoiceBtn").attr('disabled',false);
		}
	};
	function toggleEvtProj(value) {
		if(value != "") {
			switch(value) {
				case "0":	$('#project_cbx').hide();	$("#event_cbx").show();		$("#general_cbx").hide();		break;
				case "1":	$('#project_cbx').show();	$("#event_cbx").hide();		$("#general_cbx").hide();		break;
				case "2":	$('#project_cbx').hide();	$("#event_cbx").hide();		$("#general_cbx").show();		break;
			}
		} else {
			$('#project_cbx').hide();	$("#event_cbx").show();		$("#general_cbx").hide();
		}
	}
	function toggleAutoPaymentField(value) {
		if(value != "") {
			$('#autopayment').show();
		} else {
			$('#autopayment').hide();
			$("#terms").val("");
		}
	}
	function updateTaxAmount(which,value) {
		$.ajax({type: 'POST',url: '/admin/data/getTaxProfileRate/',
			data: {clientID: '12295',profileID: value},
			success: function(data) {
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					$("#" + which).val(results[1]);
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	
	
	
	function refreshQuickRelationTypeCombo(newValue,divToUpdate,comboName) {
		$.ajax({	type: "POST",	url: "/admin/fn/clients/refreshRelationshipTypeCombo/",
			data: {clientID: '12295',comboName: comboName, selected: newValue},
			success: function(   data   ){			 
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#" + divToUpdate).html(results[1]);					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function showAddQuickRelationType(divToUpdate,comboName) {
		swal({
		    title: 'Add Relation Type',
		    html: '<p><div style="text-align: center; width: 250px; margin-left: auto; margin-right: auto;"><input id="quickRelationTypeName" class="form-control" /></div></p>',
		    showCancelButton: true,
		    closeOnConfirm: true
		},
		function(){
		    var name = 			$('#quickRelationTypeName').val()
				error = 			"";
				
				error += 			(name == "") ? "Relation Type Name is a required field<Br />" : "";
				
				if(error == "") {	
					
					$.ajax({	type: "POST",	url: "/admin/fn/clients/addRelationshipType/",
						data: {clientID:'12295', name: name},
						success: function(   data   ){
							var results = 			data.split("{|}");
							if(results[0] == "SUCCESS") {
								
								refreshQuickRelationTypeCombo(results[1],divToUpdate,comboName);
								
							} else {
								swal({
									type: 'error',
									title: 'Error',
									html: results[1]
								});
							}
						}
					});
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: error
					});
				}
		});
		
		$("select.styled").select_skin();
	}
	
	
	
	
	jQuery.fn.extend({
		insertAtCaret: function(myValue){
		  return this.each(function(i) {
		    if (document.selection) {
		      //For browsers like Internet Explorer
		      this.focus();
		      sel = document.selection.createRange();
		      sel.text = myValue;
		      this.focus();
		    }
		    else if (this.selectionStart || this.selectionStart == '0') {
		      //For browsers like Firefox and Webkit based
		      var startPos = this.selectionStart;
		      var endPos = this.selectionEnd;
		      var scrollTop = this.scrollTop;
		      this.value = this.value.substring(0, startPos)+myValue+this.value.substring(endPos,this.value.length);
		      this.focus();
		      this.selectionStart = startPos + myValue.length;
		      this.selectionEnd = startPos + myValue.length;
		      this.scrollTop = scrollTop;
		    } else {
		      this.value += myValue;
		      this.focus();
		    }
		  })
		}
	});
	
	
	
	
	
	
	
	
	
	function showMiniCalendar(calendarDIV) {
		
		$('.pull-out-window').addClass('opened');
		displayMiniCalendar(calendarDIV);
	}
	function hideMiniCalendar() {
		$('.pull-out-window').removeClass('opened');
	}
	    var eventsCalendarRequest = 		null;
	function refreshEventsJSONmini(month, year, calendarDIV) {
		
		var data = 					{};
			data.clientID = 		'12295';			
			data.view = 			'month';
			data.month = 			month;
			data.year = 			year;
			
		$("#mini-calendar-loading").show();
		$("#currentCalendarView").html('');
		
		eventsCalendarRequest = 		$.ajax({	type: "POST",	url: "/admin/fn/events/getAllEventsJson/",
			data: data,
			beforeSend : function()    {           
				if(eventsCalendarRequest != null) {
					eventsCalendarRequest.abort();
				}
			},
			success: function(   data   ){
				$("#mini-calendar-loading").hide();
				var results = 		data.split("{|}");
				if(results[0] == "SUCCESS") {
					var eventArray = 	$.JSON.decode(results[1]);
								
					$('#' + calendarDIV).fullCalendar( 'removeEvents');
					$('#' + calendarDIV).fullCalendar( 'addEventSource', eventArray);
					$('#' + calendarDIV).fullCalendar( 'refetchEvents' );
					
					$(".popover").hide();
					
					$('.pxContractError').qtip({
						style: { classes: 'qtip-rounded qtip-dark qtip-pixifi' },
						content: 'Contract has not been signed yet',
						position: {
							viewport: $(window)
						},
						hide: {
							fixed: true,
							delay: 300
						}
					});
					
					if(results[2] != undefined && results[2] != null && results[2] != "") {
						$("#currentCalendarView").html(results[2]);
					}
				
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
    function displayMiniCalendar(calendarDIV) {
    	var date = 			new Date(),
			d = 			date.getDate(),
			m = 			date.getMonth(),
			y = 			date.getFullYear(),
			error = 		"",
			errorField = 	$("#calendarError"),
			eventsArray = 	{};
					
		$('#' + calendarDIV).fullCalendar({
			firstDay: '0',										
			header: {
				left: '',
				center: 'title',
				right: 'today prev,next,agendaWeek,month,agendaDay'
			},
			selectable: true,
			selectHelper: true,
			eventRender: function(eventObj, $el) {
				
				if(eventObj.url !== null && eventObj.url !== undefined) {
					var eventData = 		Base64.decode(eventObj.url);
				
					
					if(eventData.charAt(0) == "{") {
						var eventArray = 	$.JSON.decode(eventData);
					} else {
						var eventArray =	'';
					}
				}
				var startTime = 			'',
					endTime = 				'',
					format = 				'';
					
				format = 'h:mmt';				
				
				if(eventArray !== '' && eventArray !== undefined && eventArray !== null) {
					if(eventArray.eventStatusID != '' && eventArray.eventStatusID != '0' && eventArray.eventStatusID !== null && eventArray.eventStatusID !== undefined) {
						
						$el.append('<div class="pxEventStatus" style="background-color: #' + eventArray.eventStatusBGColor + ';" data-toggle="popover" data-html="true" data-content="' + eventArray.eventStatusName + '" ></div>');
		
					}
				}
								
				if(eventObj.start !== null && eventObj.start !== undefined) {
					startTime = 	eventObj.start.format(format);
				}
				if(eventObj.end !== null && eventObj.end !== undefined) {
					endTime = 		eventObj.end.format(format);
				}
				
		        $el.popover({
		          title: eventObj.title,
		          content: startTime + " - " + endTime,
		          trigger: 'hover',
		          placement: 'top',
		          container: 'body'
		        });
		        
		        $('.pxEventStatus[data-toggle="popover"]').popover({
			        trigger: 'hover',
			        'placement': 'top',
			        'show': true,
			        container: 'body'
			    });
		      },
			
			
										timeFormat: {
								agenda: 'h:mmt',
							},
									
			viewRender: function(view, element) {
				switch(view.name) {
		        	case "month":
		        		var date = 					moment(view.start, "DD-MM-YYYY").add('days', 12),
		        			month = 				(date.month() + 1),
		        			comboMonth = 			month,
		        			year = 					date.year();
		        			
		        			month = 				('0' + month).slice(-2);
		        			
							refreshEventsJSONmini(month, year, calendarDIV);
		        			        			
				        	$("#mini-calendar-loading").show();
				        	
		        		break;
		        }
			},									    
			editable: false			
		});
	}
						        
	function closeGlobalLocationAdd() {
		$("#globalLocationDialog").popup('hide');
	}
	function getGlobalLocationAdd(divToReplace,comboID) {
		$.ajax({	type: "POST",	url: "/admin/fn/locations/getAddMasterLocationForm/",
			data: {clientID: '12295',global: 'yes', divToReplace: divToReplace, comboID: comboID},
			success: function(   data   ){
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					modalContent = 			'<div class="modalBorderBox" style="width: 800px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-directions"></i> Add Location </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="closeGlobalLocationAdd();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					
					
					$("#globalLocationDialog").html(modalContent);
					$("#globalLocationDialog").popup({
						blur: false,
						opacity: 0.3,
						transition: 'all 0.3s'
					});
					$("#globalLocationDialog").popup('show');
					
					
					switchState('locationState' , 'locationCountry');
						
						
						var input = document.getElementById('locationAddress');
						var autocomplete = new google.maps.places.Autocomplete(input);
						autocomplete.addListener('place_changed', function () {
							
							var place = autocomplete.getPlace();
							// place variable will have all the information you are looking for.
							//$('#lat').val(place.geometry['location'].lat());
							//$('#long').val(place.geometry['location'].lng());
							var address = 							"",
								city = 								"",
								state = 							"",
								postal = 							"",
								country = 							"";
								
							for (var i = 0; i < place.address_components.length; i++) {
								
								var addressType = place.address_components[i].types[0];
								
								switch(addressType) {
									case "street_number":
										address = 					place.address_components[i].short_name;
										break;
									case "route":
										address += 					" " + place.address_components[i].long_name;
										break;
									case "locality":
									case "neighborhood":
										city = 						place.address_components[i].long_name;
										break;
									case "administrative_area_level_1":
										state = 					place.address_components[i].long_name;
										break;
									case "postal_code":
										postal = 					place.address_components[i].short_name;
										break;
									case "country":
										country = 					place.address_components[i].long_name;
										break;
								}
							}
							let existingLocationName = 				$("#locationName").val();
							if(existingLocationName == '') {
								$("#locationName").val(place.name);
							}
							$("#locationAddress").val(address);
							$("#locationCity").val(city);
							
							$("#locationZip").val(postal);
							
							getCountryIDFromCountryName(country, function(countryID) {
								
								var currentVal = 			$("#locationCountry").val();
								if(countryID != currentVal) {
								
									$("#locationCountry").val(countryID);
									$("#locationCountry").change();
								
								}
								
								getStateIDFromStateName(state, function(stateID) {
									$("#locationState").val(stateID);
									$("#locationState").change();
								});
								
								
							});
							
							
							
						});
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	
	function createGlobalLocation(divToReplace,comboID) {
		var name = 						$("#locationName").val(),
			phone = 					$("#locationPhone").val(),
			phone1 = 					$("#locationPhone1").val(),
			email = 					$("#locationEmail").val(),
			email1 = 					$("#locationEmail1").val(),
			address = 					$("#locationAddress").val(),
			address1 = 					$("#locationAddress1").val(),
			city = 						$("#locationCity").val(),
			state = 					$("#locationState").val(),
			postal = 					$("#locationZip").val(),
			country = 					$("#locationCountry").val(),
			contactName = 				$("#locationContactName").val(),
			url = 						$("#locationURL").val(),
			desc = 						$("#locationDescription").val(),
			error = 					"",
			errorField = 				$("#errorLocations");
			errorField.hide();	
		
			error += (name == "") ? 	"Location name is required <br />" : "";
			//error += (address == "") ? 	"Address is required <br />" : "" ;				
		
		if(error == "") {
			$.ajax({	type: "POST",	url: "/admin/fn/locations/createMasterLocation/",
			   data: {clientID: '12295', name: name, address: address, address1: address1, city: city, 
			   			state: state, postal: postal, country: country, phone: phone, phone1: phone1, email: email, email1: email1,
			   			desc: desc, url: url, contactName: contactName},
			   success: function(   data   ){
			   		var results = data.split("{|}");
			   		if(results[0] == "SUCCESS") {				   			
			   						 		
				 		closeGlobalLocationAdd();
				 		if(divToReplace != undefined && divToReplace != '') {
				 			refreshLocationsCombo(divToReplace,comboID,'yes',results[1]);	
				 		} else {
				 			swal({
							    title: 'Success!',
							    html: 'Would you like to edit the new Location now?',
							    type: 'success',
							    showCancelButton: true,
							    confirmButtonColor: '#3085d6',
							    cancelButtonColor: '#d33',
							    confirmButtonText: 'Yes',
							    cancelButtonText: 'No',
							    confirmButtonClass: 'confirm-class',
							    cancelButtonClass: 'cancel-class',
							    closeOnConfirm: true,
							    closeOnCancel: true
							}, function(isConfirm) {
							    if (isConfirm) {
							    	location.href="/admin/locations/" + results[1] + "/";
							    } 
							});
				 		}
				 		
				 				 		
			   		} else {
			   			swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
			   		}				 					 
			   }
			 });
		} else {
			swal({
				type: 'error',
				title: 'Error',
				html: error
			});
		}
	}
	function showAddQuickLocation(divToReplace,comboID) {
		getGlobalLocationAdd(divToReplace,comboID);
	}
	function refreshLocationsCombo(divToReplace,comboID,isMultiSelect,newID) {
		$.ajax({	type: "POST",	url: "/admin/fn/locations/refreshMasterLocationsCombo/",
		   data: {clientID: '12295', comboID: comboID, isMultiSelect: isMultiSelect, selected: newID},
		   success: function(   data   ){
		   		var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {				   			
		   						 		
			 		$("#" + divToReplace).html(results[1]);
			 		
			 		if(isMultiSelect == 'yes') {
			 			$("#" + comboID).multiselect({
							noneSelectedText: "Select Location(s)",
							header: false,
							selectedList: 1,
							height: 250
						});
			 		}
			 			
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
		   }
		 });
	}
	
	
	
	
	function updateStatusOfLead(clientID, leadID, statusID, divToUpdate, divToClose) {
		$("#" + divToClose).hide();
		
		$.ajax({	type: "POST",	url: "/admin/fn/leads/updateStatusOfLead/",
			data: {clientID: clientID,leadID: leadID,statusID:statusID},
			success: function(   data   ){
				var results = 		data.split("{|}");
		   		if(results[0] == "SUCCESS") {
					$("#" + divToUpdate).html(results[1]);
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	
	
	function switchOtherPronounField(which,val) {
		if(val == 'other/custom') {
			$("#" + which + '_otherField').slideDown('fast');
		} else {
			$("#" + which + '_other').val('');
			$("#" + which + '_otherField').slideUp('fast');
		}
	}

	//this method will allow us to set a Promise that waits until the element actually exists before firing off the new code
	//usage example: elementReady('#addProductsBtn_25463').then((someWidget)=>{console.log('woot!');});
	function elementReady(selector) {
		return new Promise((resolve, reject) => {
			let el = document.querySelector(selector);
			if (el) {resolve(el);}
			new MutationObserver((mutationRecords, observer) => {
				// Query for elements matching the specified selector
				Array.from(document.querySelectorAll(selector)).forEach((element) => {
					resolve(element);
					//Once we have resolved we don't need the observer anymore.
					observer.disconnect();
				});
			})
				.observe(document.documentElement, {
					childList: true,
					subtree: true
				});
		});
	}
	//this method will allow you to "pause" for the amount of miliseconds you want, then continue on
	//usage example:
	// await delay(5000);
	// console.log("Waited 5s");
	const delay = ms => new Promise(res => setTimeout(res, ms));

	function cancelAddClientToBlockList() { modal.close(); }
	function getAddClientToBlockListingForm() {
		$.ajax({	type: "POST", url: "/admin/fn/clients/getAddClientToBlockListingForm/",
			data: {clientID: '12295'},
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0]=="SUCCESS") {

					modalContent = 			'<div class="modalBorderBox" style="width: 800px; ">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-user-male-delete"></i> Add Client To Block list</div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);"  onclick="cancelAddClientToBlockList();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent})

					$("#blockListCustomerID_typeahead").easyAutocomplete({
						url: function(phrase) {
							return "/admin/fn/clients/searchClientsTypeAheadJSON/";
						},
						ajaxSettings: {
							dataType: "json",
							method: "POST",
							data: {
								dataType: "json",
								clientID: '12295'
							}
						},
						preparePostData: function(data) {
							data.searchQuery = $("#blockListCustomerID_typeahead").val();
							return data;
						},
						requestDelay: 500,
						getValue: function(element) {
							return element.customerName;
						},
						template: {
							type: "description",
							fields: {
								description: "customerCompanyName"
							}
						},
						list: {
							maxNumberOfElements: 15,
							onShowListEvent: function() {
								$("#blockListCustomerID_typeahead").focus();
							},
							onChooseEvent: function() {
								var data = $("#blockListCustomerID_typeahead").getSelectedItemData();
								$("#blockListCustomerID").val(data.customerID).trigger("change");
							}
						}
					});


				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function saveClientToBlockList() {
		var customerID = 						$("#blockListCustomerID").val(),
			firstName =							$("#blockListFirstName").val(),
			lastName =							$("#blockListLastName").val(),
			email =								$("#blockListEmail").val(),
			error = 							"";

		if(customerID != '' && customerID != '0') {
			// do nothing
		} else {
			error += 							(email == "") ? "Please enter an email address to block" : "";
		}
		if(error == "") {
			$.ajax({
				type: "POST", url: "/admin/fn/clients/addClientToBlockList/",
				data: {
					clientID: '12295',
					customerID: customerID,
					firstName: firstName,
					lastName: lastName,
					email: email
				},
				success: function (data) {
					var results = data.split("{|}");
					if (results[0] == "SUCCESS") {
						cancelAddClientToBlockList();

						if (typeof refreshClientBlockListing === 'function') {
							refreshClientBlockListing();
						}
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		} else {
			swal({
				type: 'error',
				title: 'Error',
				html: error
			});
		}
	}

	function displayDeleteWarningDIV(divToShowHide, inputVal ) {
		if($(inputVal).attr('checked') == "checked") {
			$("#" + divToShowHide).slideDown('fast', function() { modal.center(); });
		} else {
			$("#" + divToShowHide).hide(function() {modal.center();});
		}
		modal.center();
	}



	function showSMTPErrorBubble(urlLink,text,desc) {
		let stack_topright = 			{"dir1": "down", "dir2": "left", "push": "top"};
		$(function() {
			$.pnotify({
				title: "<a href='" + urlLink + "' target='_blank' >" + text + "</a>",
				text:  "<a href='" + urlLink + "' target='_blank'>" + desc + "</a>",
				type: 'error',
				animation: {
					effect_in: 'show',
					effect_out: 'slide'
				},
				icon: 'lrgIcon icon-warning-hexagon',
				addclass: "stack-topright",
				stack: stack_topright,
				sticker: false,
				closer_hover: false,
				hide: false,
				closer: false
			});
		});
	}
	function checkForSMTPErrors() {
		$(".ui-pnotify").remove();
		$.ajax({
			type: "POST", url: "/admin/fn/misc/checkForSMTPErrors/",
			data: {
				clientID: '12295'
			},
			success: function (data) {
				let results = data.split("{|}");
				if (results[0] == "SUCCESS") {
					if(results[1] != '') {
						eval(results[1]);
					} else {
						$(".ui-pnotify").remove();
					}
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}


	function toggleVisibilityIndicator (   which , cbxToUnCheck   ) {
		if($("#" + which ).attr('checked')){
			$("#" + which ).attr('checked',false);
			$("#" + which + "_icon").html('<i class="fa fa-eye font-green-jungle" alt="VISIBLE" title="VISIBLE"></i>');
			$("#" + which + "_txt").html('&nbsp;Visible on Form');

			switch(which) {
				case "social_vis":
					$("#socialmediaOptionsDIV").slideDown('fast');
					break;
			}
		} else {
			$("#" + which ).attr('checked',true);
			$("#" + which + "_icon").html('<i class="fa fa-eye-slash" alt="NOT VISIBLE" title="NOT VISIBLE"></i>');
			$("#" + which + "_txt").html('&nbsp;Not Visible on Form');

			switch(which) {
				case "social_vis":
					$("#socialmediaOptionsDIV").slideUp('fast');
					break;
			}
		}
		$("#" + cbxToUnCheck ).attr('checked',false);
	}

	function turnOnVisibility (   which , indicatorToEnable   ){
		if($("#" + which ).attr('checked')){
			$("#" + indicatorToEnable ).attr('checked',false);
			$("#" + indicatorToEnable + "_icon").html('<i class="fa fa-eye font-green-jungle" alt="VISIBLE" title="VISIBLE"></i>');
			$("#" + indicatorToEnable + "_txt").html('&nbsp;Visible on Form');

			switch(which) {
				case "social_req":
					$("#socialmediaOptionsDIV").slideDown('fast');
					break;
			}
		}
	}


	function cancelNewQuickStatus() { $("#globalDialog").popup('hide'); }
	function showAddQuickStatusForm($data) {
		let objectType = 			$data['objectType'],
			whichDIV = 				$data['whichDIV'],
			comboID = 				$data['comboID'];
		$.ajax({	type: "POST",	url: "/admin/fn/misc/getAddNewStatusForm/",
			data: {clientID: '12295', objectType: objectType,comboID: comboID, whichDIV: whichDIV },
			success: function(   data   ){
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#globalDialog").html(results[1]);
					$("#globalDialog").popup({
						blur: false,
						opacity: 0.3,
						transition: 'all 0.3s'
					});
					$("#globalDialog").popup('show');
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function saveNewQuickStatus($data) {
		let name = 							$("#newStatusName").val(),
			brandID = 						$("#newStatusBrand").val(),
			color = 						$("#newStatusBGColor").val(),
			textcolor = 					$("#newStatusTextColor").val(),
			objectType = 					$data['objectType'],
			error = 						"";
			debugger;
		$.ajax({	type: "POST",	url: "/admin/fn/misc/saveQuickStatus/",
			data: {clientID: '12295', objectType: objectType,name: name, brandID: brandID, color: color, textcolor: textcolor},
			success: function(   data   ){
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					cancelNewQuickStatus();
					debugger;
					refreshStatusCombo($data);
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function refreshStatusCombo($data) {
		debugger;
	}


</script>
<input type="hidden" id="globalClipboardText" name="globalClipboardText" size="" class="" maxlength="" value=""   /><script type="text/javascript" >
	
	
	(function() {
	  var _ss = window.ss || (window.ss = []);
	  if (ss.length < 1) {
	    var fbds = document.createElement('script');
	    fbds.async = true;
	    fbds.src = '/admin/js/new/plugins/simpleajaxuploader/v2/SimpleAjaxUploader.min.js';
	    var s = document.getElementsByTagName('script')[0];
	    s.parentNode.insertBefore(fbds, s);
	  }
	})();

	var timer;
	function searchUploads(query,type,fieldToUpdate) {
		clearTimeout(timer);
		timer =					setTimeout(function(){performsearchUploads(query,type,fieldToUpdate)},350);
	}
	function performsearchUploads(query,type,fieldToUpdate) {
		$("#filesDialogLoad").show();
		
		$.ajax({	type: "POST",	url: "/admin/fn/uploads/getAllUploadsByType/",
			data: {clientID: '12295', type: type,fieldToUpdate: fieldToUpdate, query: query},
			success: function(   data   ){
				
				$("#filesDialogLoad").hide();
				
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#uploadsListingDIV").html(results[1]);
					
					
					$(".iconLink").hover(function () {
						$(this).find('.fileSelect').stop(true, true).animate({
							top: '50%'
						}, 500, 'easeOutExpo');
						
						$(this).addClass('blur');
						
						
					}, function () {
						$(this).find('.fileSelect').stop(true, true).animate({
							top: '150%'
						}, 200, function () {
							$(this).css({top: '-45%'})
						});
						
						$(this).removeClass('blur');
					});
					
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	
	function deleteAllObjectUploads(type) {
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you want to delete <strong>ALL</strong> of the files in this area? <br /> This action can NOT be undone!',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: false,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	
		    	swal({
				    title: 'Are you sure?',
				    html: 'There is no going back, and NO WAY to get the files back if you continue...<br /> You won\'t be able to say that you deleted these accidentally, <br />as this is the 2nd prompt warning you about your decision to delete them all.',
				    type: 'warning',
				    showCancelButton: true,
				    confirmButtonColor: '#3085d6',
				    cancelButtonColor: '#d33',
				    confirmButtonText: 'Yes',
				    cancelButtonText: 'No',
				    confirmButtonClass: 'confirm-class',
				    cancelButtonClass: 'cancel-class',
				    closeOnConfirm: true,
				    closeOnCancel: true
				}, function(isConfirm) {
				    if (isConfirm) {
				    	
				    	
				    	$("#filesDialogLoad").show();
		    	
				    	$.ajax({	type: "POST",	url: "/admin/fn/uploads/deleteAllObjectUploads/",
							data: {clientID: '12295', type: type},
							success: function(   data   ){
								
								$("#filesDialogLoad").hide();
								
								var results = data.split("{|}");
								if(results[0] == "SUCCESS") {								
									getAllUploadsByType(type);
								} else {
									swal({
										type: 'error',
										title: 'Error',
										html: results[1]
									});
								}
							}
						});
				    	
				    } 
				});
		    	
		    	
		    } 
		});
	}
	
	
	function deleteFileUpload(type,fileID,fieldName,fieldToUpdate) {
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you want to delete ' + fieldName + '? <br /> This action can NOT be undone!',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: true,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	
		    	$("#filesDialogLoad").show();
		    	
		    	$.ajax({	type: "POST",	url: "/admin/fn/uploads/deleteObjectUpload/",
					data: {clientID: '12295', type: type, fileID: fileID},
					success: function(   data   ){
						
						$("#filesDialogLoad").hide();
						
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {								
							getAllUploadsByType(type,fieldToUpdate);
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
		    } 
		});
	}
	function removeAttachment(fileID) {
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you want to remove this attachment?',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: true,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$("#" + fileID).html('');
				$("#" + fileID).remove();
		    } 
		});
	}
	
	
	
	function addAttachmentsFromJSONString(string,listingToUpdate) {
		if(listingToUpdate === null || listingToUpdate == '' || listingToUpdate === undefined) {
			listingToUpdate = 						'attachmentListing';
		}
		
		var attachments = 			$.JSON.decode(string);
			$.each(attachments, function(index, attachment) {
				selectFileUpload('attachments',attachment.fileID,listingToUpdate,attachment.name,attachment.size);
			});
			
			
		$('#' + listingToUpdate + '[data-toggle="popover"]').popover({
			trigger: 'hover',
	        'placement': 'top',
	        'show': true,
	        container: '#' + listingToUpdate
		});	
			
	}
	function addTypeChooserFromJSONString(string,listingToUpdate) {
		if(listingToUpdate === null || listingToUpdate == '' || listingToUpdate === undefined) {
			listingToUpdate = 						'attachmentListing';
		}
		
		var attachments = 			$.JSON.decode(string);
			$.each(attachments, function(index, attachment) {
				selectFileUpload('typechooser',attachment.fileID,listingToUpdate,attachment.name,attachment.size,attachment.type,attachment.visibility);
			});
			
			
		$('#' + listingToUpdate + '[data-toggle="popover"]').popover({
			trigger: 'hover',
	        'placement': 'top',
	        'show': true,
	        container: '#' + listingToUpdate
		});	
			
	}
	function previewAttachment(fileID) {
		window.open('https://f001.backblazeb2.com/b2api/v1/b2_download_file_by_id?fileId=' + fileID);
	}
	function selectFileUpload(type,fileID,fieldToUpdate,fileName,fileSize, fileNameToUpdate, visibility) {
		closeObjectUploadsDialog();
		
		if(fieldToUpdate == '' || fieldToUpdate == null || fieldToUpdate === undefined) {
			fieldToUpdate = 						'globalClipboardText';
		}
		if(fileNameToUpdate == "url") {


			var revisedFileID = 					$.base64.encode(fileID).replace('=','').replace('=','');

			if($("#" + fieldToUpdate + " #file_" + revisedFileID).length < 1) {

				$('<div>').attr({
					id: "file_" + revisedFileID,
					'class': 'fileAttachment btn btn-circle btn-default',
				}).appendTo("#" + fieldToUpdate);



				var publicSelected = 				' selected="selected" ',
					privateSelected = 				'';

				if(visibility !== null && visibility !== undefined && visibility != '') {
					if(visibility == "1") {
						publicSelected = 		' selected="selected" ';
						privateSelected = 		'';
					} else if (visibility == "0") {
						privateSelected = 		' selected="selected" ';
						publicSelected = 		'';
					}
				}


				$("#" + fieldToUpdate + " #file_" + revisedFileID).append('<div class="leftTitle" ><i class="icon-navigation-1"></i>' + fileName + ' - ' + fileID + '</div>' +
					'<div class="leftTitle" style="margin-left: 10px;"><select id="privacy[]" name="privacy[]" class="styled" style="width: 80px;">' +
					'<option value="0" ' + privateSelected + '>Private</option>' +
					'<option value="1" ' + publicSelected + '>Public</option>' +
					'</select></div>' +
					'<div class="rightTitle" ><a href="javascript:void(0);" onclick="removeAttachment(\'file_' + revisedFileID + '\');" style="padding: 5px;"><span class="fa fa-times font-red-flamingo"></span></a></div>');

				$('<input>').attr({
					type: 'hidden',
					id: 'attachments[]',
					name: 'attachments[]',
					value: fileName + '{||||}' + fileID + '{||||}' + fileSize + '{||||}' + revisedFileID + '{||||}url'
				}).appendTo("#" + fieldToUpdate + " #file_" + revisedFileID);


				$('#' + fieldToUpdate + ' [data-toggle="popover"]').popover({
					trigger: 'hover',
					'placement': 'top',
					'show': true,
					container: '#' + fieldToUpdate
				});
				modal.close();
				$("select.styled").select_skin();

				} else {
					swal({
					type: 'error',
					title: 'Error',
					html: "That URL has already been added"
				});
			}



		} else if(type == "typechooser") {
			
			
			if($("#" + fieldToUpdate + " #file_" + fileID).length < 1) {
				
				$('<div>').attr({
				    id: "file_" + fileID,
				    'class': 'fileAttachment btn btn-circle btn-default',
				    'data-size': fileSize,
				    'data-toggle': "popover",
				    'data-html': "true",
				    'data-content': '<i class="icon-magnifier"></i> Click to preview document'
				}).appendTo("#" + fieldToUpdate);
				
				
				
				var publicSelected = 				' selected="selected" ',
					privateSelected = 				'';
					
					if(visibility !== null && visibility !== undefined && visibility != '') {
						if(visibility == "1") {
							publicSelected = 		' selected="selected" ';
							privateSelected = 		'';
						} else if (visibility == "0") {
							privateSelected = 		' selected="selected" ';
							publicSelected = 		'';
						}
					}
				
				
				$("#" + fieldToUpdate + " #file_" + fileID).append('<div class="leftTitle" onclick="previewAttachment(\'' + fileID + '\');">' + fileName + '</div>' +
				'<div class="leftTitle" style="margin-left: 10px;"><select id="privacy[]" name="privacy[]" class="styled" style="width: 80px;">' + 
			        '<option value="0" ' + privateSelected + '>Private</option>' + 
			        '<option value="1" ' + publicSelected + '>Public</option>' + 
			    '</select></div>' + 
				'<div class="rightTitle" ><a href="javascript:void(0);" onclick="removeAttachment(\'file_' + fileID + '\');" style="padding: 5px;"><span class="fa fa-times font-red-flamingo"></span></a></div>');
				
				$('<input>').attr({
				    type: 'hidden',
				    id: 'attachments[]',
				    name: 'attachments[]',				    
				    value: fileName + '{||||}https://f001.backblazeb2.com/b2api/v1/b2_download_file_by_id?fileId=' + fileID + '{||||}' + fileSize + '{||||}' + fileID
				}).appendTo("#" + fieldToUpdate + " #file_" + fileID);
				
				
				$('#' + fieldToUpdate + ' [data-toggle="popover"]').popover({
					trigger: 'hover',
			        'placement': 'top',
			        'show': true,
			        container: '#' + fieldToUpdate
				});	
				
				$("select.styled").select_skin();
				
			} else {
				swal({
					type: 'error',
					title: 'Error',
					html: "That document has already been added"
				});
			}
			
		
		} else if(type == "attachments") {

			if(fieldToUpdate == "globalClipboardText") {
				$("#"+fieldToUpdate).val('https://f001.backblazeb2.com/b2api/v1/b2_download_file_by_id?fileId='+fileID);
				$("#"+fieldToUpdate).change();
			} else {



				if($("#" + fieldToUpdate + " #file_" + fileID).length < 1) {

					$('<div>').attr({
						id: "file_" + fileID,
						'class': 'fileAttachment btn btn-circle btn-default',
						'data-size': fileSize,
						'data-toggle': "popover",
						'data-html': "true",
						'data-content': '<i class="icon-magnifier"></i> Click to preview attachment'
					}).appendTo("#" + fieldToUpdate);


					$("#" + fieldToUpdate + " #file_" + fileID).append('<div class="leftTitle" onclick="previewAttachment(\'' + fileID + '\');">' + fileName + '</div><div class="rightTitle" ><a href="javascript:void(0);" onclick="removeAttachment(\'file_' + fileID + '\');" style="padding: 5px;"><span class="fa fa-times font-red-flamingo"></span></a></div>');

					$('<input>').attr({
						type: 'hidden',
						id: 'attachments[]',
						name: 'attachments[]',
						value: fileName + '{||||}https://f001.backblazeb2.com/b2api/v1/b2_download_file_by_id?fileId=' + fileID + '{||||}' + fileSize + '{||||}' + fileID
					}).appendTo("#" + fieldToUpdate + " #file_" + fileID);


					$('#' + fieldToUpdate + ' [data-toggle="popover"]').popover({
						trigger: 'hover',
						'placement': 'top',
						'show': true,
						container: '#' + fieldToUpdate
					});

					//After adding that file check to make sure we haven't gone over the file attachment limit
					var totalSize = 				0;
					$(".fileAttachment").each(function() {
						fileSize = 					parseInt($(this).attr('data-size'));
						totalSize += 				fileSize;
					});

					if(totalSize > 10485760) {

						$("#" + fieldToUpdate + " #file_" + fileID).html('');
						$("#" + fieldToUpdate + " #file_" + fileID).remove();

						swal({
							type: 'error',
							title: 'Error',
							html: "That attachment would put you over the max attachment file size limit. It was just removed."
						});
					}

				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: "That attachment has already been added"
					});
				}
			}
		} else if (type == "documents") {
			
			if(fileNameToUpdate != "" && fileNameToUpdate != undefined && fileNameToUpdate != null) {
				$("#" + fileNameToUpdate).val(fileName);
			}
			$("#"+fieldToUpdate).val('https://www.pixifi.com/downloadfile/12295/'+fileID+'/');
			$("#"+fieldToUpdate).change();
			
		} else {
			
						$("#"+fieldToUpdate).val('https://f001.backblazeb2.com/b2api/v1/b2_download_file_by_id?fileId='+fileID);
			$("#picbox").html('<img src="https://f001.backblazeb2.com/b2api/v1/b2_download_file_by_id?fileId='+fileID+'" style="width: 150px;" />');
			$("#"+fieldToUpdate).focus();
			$("#"+fieldToUpdate).blur();
			$("#"+fieldToUpdate).change();
		}
		
		if(fieldToUpdate == 'globalClipboardText') {
			
			var textarea = document.createElement('textarea');
				textarea.textContent = 			$("#globalClipboardText").val();
				document.body.appendChild(textarea);
				
			var selection = document.getSelection();
			var range = document.createRange();
			
			range.selectNode(textarea);
			selection.removeAllRanges();
			selection.addRange(range);
			
			console.log('copy success', document.execCommand('copy'));
			selection.removeAllRanges();
			
			document.body.removeChild(textarea);
			
			swal({
				type: 'success',
				title: 'Success!',
				html: "Link copied to clipboard",
				timer: 3000
			});
		}
	}

	function getAllUploadsByType(type,fieldToUpdate,fileNameToUpdate) {
		
		$("#filesDialogLoad").show();
		
		$.ajax({	type: "POST",	url: "/admin/fn/uploads/getAllUploadsByType/",
			data: {clientID: '12295', type: type,fieldToUpdate: fieldToUpdate,fileNameToUpdate: fileNameToUpdate},
			success: function(   data   ){
				
				$("#filesDialogLoad").hide();
				
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#uploadsListingDIV").html(results[1]);
					
					//added on [03.24.2k16] : TH
					if(type == "images"){
						$('[data-toggle="popover"]').popover({
					        trigger: 'hover',
					        delay: 300,
					        placement: function (context, source) {
						        var position = $(source).position();
						
						        //if (position.left > 515) {
						       //     return "left";
						        //}
						
						        //if (position.left < 515) {
						        //    return "right";
						        //}
						
						        if (position.top < 110){
						            return "bottom";
						        }
						
						        return "bottom";
						    },
					        'show': true,
					        container: '#globalFilePickerDialog'
					    });
					}
						
					
					
					
					$(".iconLink").hover(function () {
						$(this).find('.fileSelect').stop(true, true).animate({
							top: '50%'
						}, 500, 'easeOutExpo');
						
						$(this).addClass('blur');
						
						
					}, function () {
						$(this).find('.fileSelect').stop(true, true).animate({
							top: '150%'
						}, 200, function () {
							$(this).css({top: '-45%'})
						});
						
						$(this).removeClass('blur');
					});
					
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function renameFileUpload(type,fileID,fieldName,fieldToUpdate) {
		swal({
			title: 'New filename',
			html: '<p><input id="new-file-name-input-field" value="' + fieldName + '" class="form-control" >',
			width: 350,
			showCancelButton: true,
			closeOnConfirm: true
		}, function(isConfirm) {
			if (isConfirm) {
				
				var newFileName = 				$('#new-file-name-input-field').val();
				
		    	$.ajax({	type: "POST",	url: "/admin/fn/uploads/renameObjectUploadFile/",
					data: {clientID: '12295', fileID: fileID, type: type,fieldToUpdate: fieldToUpdate, newFileName: newFileName},
					success: function(   data   ){
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {									
							getAllUploadsByType(type,fieldToUpdate);
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
				
		    }
		});
	}
	
	function closeObjectUploadsDialog() {
		$("#globalFilePickerDialog").popup('hide');
	}
	function getObjectUploadsDialog(type,fieldToUpdate,fileNameToUpdate,allowExtras=false) {
		$.ajax({	type: "POST",	url: "/admin/fn/uploads/getObjectUploadsDialog/",
			data: {clientID: '12295', type: type,fieldToUpdate: fieldToUpdate,fileNameToUpdate: fileNameToUpdate},
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					modalContent = 				results[1];
					
					
					$.fn.popup.defaults.blur =  false;
					
					
												$("#globalFilePickerDialog").html(modalContent);
							$("#globalFilePickerDialog").popup({
								blur: false,
								escape: false,
								opacity: 0.3,
								transition: 'all 0.3s',
								autozindex: false
							});
							$("#globalFilePickerDialog").popup('show');
							if(type == "attachments") {
								$("#globalFilePickerDialog_wrapper").css('z-index','5554000');
							}
																	
					getAllUploadsByType(type,fieldToUpdate, fileNameToUpdate);
					
					var btn = 			$('#object-upload-btn'),
					  wrap = 			$('#pic-progress-wrap'),
					  picBox = 			$('#picbox'),
					  errBox = 			$('#errormsg'),
					  allowedExts = 	[];
					
					 if(type == "images") {
					 	allowedExts = 			['jpg', 'jpeg', 'png','gif'];
						 if (allowExtras) {
							 // We don't want these for most image uploads, but we do want them for receipts:
							 allowedExts.push('pdf', 'tif')
						 }
					 	acceptLimiter = 		'';//'image/*';
					 } else {
					 	allowedExts = 			['au','avi','bmp','cdr','drw','dwg','dxf','eps','gif','ico','img','jpeg','jpg','png',
					 								'log','mdb','mde','mid','midi','mov','movie','mp1','mp2','mp3','m4a','mpeg','mpg',
					 								'msg','nws','obd','pcx','pdd','pdf','pic','pps','pub','qbb','qbw','qdb','ra',
					 								'snd','text','tga','tif','tsv','txt','wav','wma','wmf','wri','alx','cur','dic',
					 								'dot','htm','html','oft','pot','shtml','asp','doc','docx','ppt','pptx','wb2','wbk','wiz',
					 								'wk4','wks','wpd','xlk','xls','xlsx','cab','gtar','gz','tar','tgz','uu','z','zip','rar',
					 								'fav','grp','lnk','url','xml','inf','ini','msi','msp','pbk','sys','ttf','csv','rtf','psd','ai'];
					 	acceptLimiter = 		'';
					 }
					  
					  
					var uploader = new ss.SimpleUpload({
					    button: btn,
					    url: '/admin/fn/uploads/uploadObjectFile/',
					    progressUrl: '/admin/fn/uploads/uploadObjectFileProgress/',
					    name: 'imageFileUpload',
					    data: { clientID: '12295',type: type},
					    multiple: false,
					    maxUploads: 10,
					    maxSize: 10000,
					    dropzone: 'uploadsListingDIV',
					    allowedExtensions: allowedExts,
					    accept: acceptLimiter,
					    hoverClass: 'btn-hover',
					    focusClass: 'active',
					    disabledClass: 'disabled',
					    responseType: 'text',
					    onExtError: function(filename, extension) {
					    	if(type == "images") {
						    	swal({
									type: 'error',
									title: 'Error',
									html: filename + ' is not a permitted file type. <br /> Only PNG, JPG and GIF files are allowed.'
								});
					    	} else {
					    		swal({
									type: 'error',
									title: 'Error',
									html: filename + ' is not a permitted file type.'
								});
					    	}
					    },
					    onSizeError: function(filename, fileSize) {
					    	swal({
								type: 'error',
								title: 'Error',
								html: filename + ' is too big. (10MB max file size)'
							});
					    },        
					    onSubmit: function(filename, ext) { 
			
					    	errBox.hide();
					    	        
					       var prog = document.createElement('div'),
					           outer = document.createElement('div'),
					           bar = document.createElement('div'),
					           size = document.createElement('div');
					                   
					        prog.className = 'prog';
					        size.className = 'size';
					        outer.className = 'progress progress-striped active';
					        bar.className = 'progress-bar progress-bar-success';
					        
					        outer.appendChild(bar);
					        prog.innerHTML = '<span style="vertical-align:middle;">'+filename+' - </span>';
					        prog.appendChild(size);
					        prog.appendChild(outer);
					        wrap[0].appendChild(prog); // 'wrap' is an element on the page
					        
					        this.setProgressBar(bar);
					        this.setProgressContainer(prog);
					        this.setFileSizeBox(size);      
					        
					        errBox.innerHTML = '';
					        btn.value = 'Choose another file';
					      },
					      onComplete: function(filename, response, uploadBtn) {
					      	var results = 			response.split("{|}");
					      	if(results[0] == "SUCCESS") {
					      		getAllUploadsByType(type,fieldToUpdate,fileNameToUpdate);
					      	} else {
					      		swal({
									type: 'error',
									title: 'Error',
									html: results[1]
								});
					      	}
					      },
					      startXHR: function() {
					      // Dynamically add a "Cancel" button to be displayed when upload begins
					      // By doing it here ensures that it will only be added in browses which 
					      // support cancelling uploads
					      //var abort = document.createElement('button');
					        
					        //wrap[0].appendChild(abort);
					        //abort.className = 'btn btn-sm btn-info';
					        //abort.innerHTML = 'Cancel';
					
					        // Adds click event listener that will cancel the upload
					        // The second argument is whether the button should be removed after the upload
					        // true = yes, remove abort button after upload
					        // false/default = do not remove
					        //this.setAbortBtn(abort, true);              
					    }
					});
					
					$("#object-upload-btn").popover({
						trigger: 'hover',
				        'placement': 'top',
				        'show': true,
				        container: 'body'
					});
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}


</script>
<script type="text/javascript">
	$(function() {
		Layout.init();
		getNotificationNumber();



		$("#search-query").mouseenter(function() {
			$("#search-query").focus();
		});



		$(".form-control.emoji").emojioneArea({
		  	pickerPosition: "bottom",
		  	filtersPosition: "bottom",
		    tonesStyle: "checkbox"
		});



	});
	function openFavoriteDialog() {
		$("#addFavoritesDialog").modal('show');
		$(function(){
			$("#favoriteModulesAdd").multiselect({
				noneSelectedText: "Select Favorite(s)",
				header: false,
				selectedList: 3,
				height: 225,
				click: function(event,ui) {
					var checkedItems = 	$(this).multiselect("getChecked"),
						checkCount = 	checkedItems.length;
				    if ( checkCount > 5 ) {
						alert( "Limit is 5" );
						event.preventDefault();
						return false;
					}
				}
			});
	    });
	}
	function saveFavorites() {
		var favoriteModules = 	$("#favoriteModulesAdd").val(),
			favoritesString = 	"";

			if(favoriteModules !== undefined && favoriteModules !== null) {
				if(favoriteModules.length > 0) {
					favoritesString = 		favoriteModules.join(",");
				}
			}

		$.ajax({type: 'POST',url: '/admin/data/saveModuleFavorites/',
			data: {clientID: '12295', userID: '26818',favorites: favoritesString},
			success: function(data) {
				var results = data.split("{|}");
   				if(results[0] == "SUCCESS") {
		   			location.href='/admin/';
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
</script>
</head>

<body class="page-boxed page-header-fixed  page-container-bg-solid">
<div class="custom-header">
  <div class="container">
  	<div style="display: flex; flex-direction: row; justify-content: space-between; align-items: center">
		<a href="javascript:;" class="menu-toggler responsive-toggler" data-toggle="collapse"
		   data-target=".navbar-collapse"><img id="mobile-menu-handle" src="/admin/icons/svg/HamburgerMenuIcon.svg" /></a>
		<a class="custom-header__logo" href="/admin/">
			<img src="/admin/icons/svg/Logo.svg" alt="">
		</a>
	</div>
    <div class="custom-header__items">
  <ul class="custom-header__nav pull-right">
    <li>
      <script type="text/javascript">
        $(function () {
          showAndLaunchNewSearch();
        });
      </script>
      <div class="search-form">
        <div class="input-group">
          <input type="text" class="" id="search-query" placeholder="Search..." name="query">
          <img src="/admin/icons/svg/topbar/SearchIcon.svg" alt="">
        </div>
      </div>
    </li>

    
    <!-- BEGIN QUICK ITEMS DROPDOWN -->
    <li class="dropdown" id="header_quick_bar">
      <a class="custom-header__nav-item" href="#" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
        <img src="/admin/icons/svg/topbar/QuickActionsIcon.svg" alt="">
      </a>
      <ul class="dropdown-menu custom-dropdown-menu">
        <li class="dropdown-menu__title">Quick Actions</li>
        <li>
          <a href="javascript:void(0);" onclick="showQuickClientForm();">
            <img src="/admin/icons/svg/topbar/AddClientIcon.svg" alt="">
            Add Client
          </a>
        </li>
        <li>
          <a href="javascript:void(0);" id="addQuickLeadBtn" onclick="showQuickLeadForm();">
            <img src="/admin/icons/svg/topbar/AddLeadIcon.svg" alt="">
            Add Lead
          </a>
        </li>
        <li>
          <a href="javascript:void(0);" onclick="showQuickOnlyEventForm();">
            <img src="/admin/icons/svg/topbar/AddEventIcon.svg" alt="">
            Add Event
          </a>
        </li>
        <li>
          <a href="javascript:void(0);" onclick="showQuickEventForm();">
            <img src="/admin/icons/svg/topbar/AddClientEventIcon.svg" alt="">
            Add Client + Event
          </a>
        </li>
        <li>
          <a href="javascript:void(0);" onclick="addQuickProject();">
            <img src="/admin/icons/svg/topbar/AddProjectIcon.svg" alt="">
            Add Project
          </a>
        </li>
        <li>
          <a href="javascript:void(0);" onclick="showQuickVendorForm();">
            <img src="/admin/icons/svg/topbar/AddVendorIcon.svg" alt="">
            Add Vendor
          </a>
        </li>
        <li>
          <a href="javascript:void(0);" onclick="getQuickAddInvoiceForm();">
            <img src="/admin/icons/svg/topbar/AddInvoiceIcon.svg" alt="">
            Add Invoice
          </a>
        </li>
        <li>
          <a href="javascript:void(0);" onclick="getQuickAddRecurringInvoiceForm();">
            <img src="/admin/icons/svg/topbar/AddRecurringInvoiceIcon.svg" alt="">
            Add Recurring Invoice
          </a>
        </li>
        <li>
          <a href="javascript:void(0);" onclick="showQuickAddObjectExpenseForm();">
            <img src="/admin/icons/svg/topbar/AddExpenseIcon.svg" alt="">
            Add Expense
          </a>
        </li>
        <li>
          <a href="javascript:void(0);" onclick="showQuickTimerForm();">
            <img src="/admin/icons/svg/topbar/AddTimeIcon.svg" alt="">
            Add Time
          </a>
        </li>
        <li>
          <a href="javascript:void(0);" onclick="getGlobalLocationAdd();">
            <img src="/admin/icons/svg/topbar/AddLocationIcon.svg" alt="">
            Add Location
          </a>
        </li>
        <li>
          <a href="javascript:void(0);"
             onclick="getNewObjectTaskForm('12295' , 'general', '0', '0');">
            <img src="/admin/icons/svg/topbar/AddTaskIcon.svg" alt="">
            Add Task
          </a>
        </li>
        <li>
          <a href="javascript:void(0);"
             onclick="getNewObjectTaskForm('12295' , 'general', '0', '1');">
            <img src="/admin/icons/svg/topbar/AddNoteIcon.svg" alt="">
            Add Note
          </a>
        </li>
      </ul>
    </li>
    <!-- END QUICK ITEMS DROPDOWN -->

    <!-- BEGIN NOTIFICATION DROPDOWN -->
          <li class="dropdown" id="header_notification_bar">
        <a class="custom-header__nav-item" href="#" data-toggle="dropdown" data-hover="dropdown"
           data-close-others="true">
          <img src="/admin/icons/svg/topbar/NotificationsIcon.svg" alt="">
          <!--<span class="custom-badge" id="systemNotificationsTOTAL">&nbsp;</span>-->
        </a>
        <ul class="dropdown-menu custom-dropdown-menu" style="max-height: calc(100vh - 100px); overflow-y: auto;">
          <li class="dropdown-menu__title">Notifications</li>
          
		<li id="notification_7225774" class="notification">
      <div class="notification__item">
        <svg class="notification__icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M10.6666 2.31184C11.6544 2.80274 12.3333 3.82209 12.3333 5C12.3333 6.17791 11.6544 7.19726 10.6666 7.68816M11.9999 11.1776C13.0076 11.6336 13.9149 12.3767 14.6666 13.3333M1.33325 13.3333C2.63091 11.6817 4.39271 10.6667 6.33325 10.6667C8.2738 10.6667 10.0356 11.6817 11.3333 13.3333M9.33325 5C9.33325 6.65685 7.99011 8 6.33325 8C4.6764 8 3.33325 6.65685 3.33325 5C3.33325 3.34315 4.6764 2 6.33325 2C7.99011 2 9.33325 3.34315 9.33325 5Z" stroke="#4E6A8B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <div class="notification__content">
          <p><a href="/admin/leads/1615775/" target="_blank">You've got a new lead! (Test Lead )</a></p>
          <time class="timeago" datetime="2025-04-30T20:23:11">04/30/2025</time>
        </div>
        <div class="notification__close"><a href="javascript:void(0);" onclick="deleteNotification('7225774',true);" title="Delete Notification">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M12 4L4 12M4 4L12 12" stroke="#A1B3CC" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
        </div>
      </div>
    </li>
		
		<li id="notification_7225773" class="notification">
      <div class="notification__item">
        <svg class="notification__icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M10.6666 2.31184C11.6544 2.80274 12.3333 3.82209 12.3333 5C12.3333 6.17791 11.6544 7.19726 10.6666 7.68816M11.9999 11.1776C13.0076 11.6336 13.9149 12.3767 14.6666 13.3333M1.33325 13.3333C2.63091 11.6817 4.39271 10.6667 6.33325 10.6667C8.2738 10.6667 10.0356 11.6817 11.3333 13.3333M9.33325 5C9.33325 6.65685 7.99011 8 6.33325 8C4.6764 8 3.33325 6.65685 3.33325 5C3.33325 3.34315 4.6764 2 6.33325 2C7.99011 2 9.33325 3.34315 9.33325 5Z" stroke="#4E6A8B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <div class="notification__content">
          <p><a href="/admin/invoices/1290331/" target="_blank">New ShootProof Order: #9867764</a></p>
          <time class="timeago" datetime="2025-04-30T20:22:21">04/30/2025</time>
        </div>
        <div class="notification__close"><a href="javascript:void(0);" onclick="deleteNotification('7225773',true);" title="Delete Notification">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M12 4L4 12M4 4L12 12" stroke="#A1B3CC" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
        </div>
      </div>
    </li>
		
		<li id="notification_7225772" class="notification">
      <div class="notification__item">
        <svg class="notification__icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M10.6666 2.31184C11.6544 2.80274 12.3333 3.82209 12.3333 5C12.3333 6.17791 11.6544 7.19726 10.6666 7.68816M11.9999 11.1776C13.0076 11.6336 13.9149 12.3767 14.6666 13.3333M1.33325 13.3333C2.63091 11.6817 4.39271 10.6667 6.33325 10.6667C8.2738 10.6667 10.0356 11.6817 11.3333 13.3333M9.33325 5C9.33325 6.65685 7.99011 8 6.33325 8C4.6764 8 3.33325 6.65685 3.33325 5C3.33325 3.34315 4.6764 2 6.33325 2C7.99011 2 9.33325 3.34315 9.33325 5Z" stroke="#4E6A8B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <div class="notification__content">
          <p><a href="/admin/events/1141101/questionnaire/1077899/" target="_blank">Hannah Baker just answered their questionnaire - PHOTOGRAPHER SESSION INFO QUESTIONNAIRE</a></p>
          <time class="timeago" datetime="2025-04-30T20:20:23">04/30/2025</time>
        </div>
        <div class="notification__close"><a href="javascript:void(0);" onclick="deleteNotification('7225772',true);" title="Delete Notification">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M12 4L4 12M4 4L12 12" stroke="#A1B3CC" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
        </div>
      </div>
    </li>
		
		<li id="notification_7225770" class="notification">
      <div class="notification__item">
        <svg class="notification__icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M10.6666 2.31184C11.6544 2.80274 12.3333 3.82209 12.3333 5C12.3333 6.17791 11.6544 7.19726 10.6666 7.68816M11.9999 11.1776C13.0076 11.6336 13.9149 12.3767 14.6666 13.3333M1.33325 13.3333C2.63091 11.6817 4.39271 10.6667 6.33325 10.6667C8.2738 10.6667 10.0356 11.6817 11.3333 13.3333M9.33325 5C9.33325 6.65685 7.99011 8 6.33325 8C4.6764 8 3.33325 6.65685 3.33325 5C3.33325 3.34315 4.6764 2 6.33325 2C7.99011 2 9.33325 3.34315 9.33325 5Z" stroke="#4E6A8B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <div class="notification__content">
          <p><a href="/admin/leads/1615773/" target="_blank">You've got a new lead! (Test Lead )</a></p>
          <time class="timeago" datetime="2025-04-30T20:19:19">04/30/2025</time>
        </div>
        <div class="notification__close"><a href="javascript:void(0);" onclick="deleteNotification('7225770',true);" title="Delete Notification">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M12 4L4 12M4 4L12 12" stroke="#A1B3CC" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
        </div>
      </div>
    </li>
		
		<li id="notification_7225767" class="notification">
      <div class="notification__item">
        <svg class="notification__icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M10.6666 2.31184C11.6544 2.80274 12.3333 3.82209 12.3333 5C12.3333 6.17791 11.6544 7.19726 10.6666 7.68816M11.9999 11.1776C13.0076 11.6336 13.9149 12.3767 14.6666 13.3333M1.33325 13.3333C2.63091 11.6817 4.39271 10.6667 6.33325 10.6667C8.2738 10.6667 10.0356 11.6817 11.3333 13.3333M9.33325 5C9.33325 6.65685 7.99011 8 6.33325 8C4.6764 8 3.33325 6.65685 3.33325 5C3.33325 3.34315 4.6764 2 6.33325 2C7.99011 2 9.33325 3.34315 9.33325 5Z" stroke="#4E6A8B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <div class="notification__content">
          <p><a href="/admin/leads/1615771/" target="_blank">You've got a new lead! (Laura  )</a></p>
          <time class="timeago" datetime="2025-04-30T20:17:12">04/30/2025</time>
        </div>
        <div class="notification__close"><a href="javascript:void(0);" onclick="deleteNotification('7225767',true);" title="Delete Notification">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M12 4L4 12M4 4L12 12" stroke="#A1B3CC" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
        </div>
      </div>
    </li>
		
		<li id="notification_7225766" class="notification">
      <div class="notification__item">
        <svg class="notification__icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M10.6666 2.31184C11.6544 2.80274 12.3333 3.82209 12.3333 5C12.3333 6.17791 11.6544 7.19726 10.6666 7.68816M11.9999 11.1776C13.0076 11.6336 13.9149 12.3767 14.6666 13.3333M1.33325 13.3333C2.63091 11.6817 4.39271 10.6667 6.33325 10.6667C8.2738 10.6667 10.0356 11.6817 11.3333 13.3333M9.33325 5C9.33325 6.65685 7.99011 8 6.33325 8C4.6764 8 3.33325 6.65685 3.33325 5C3.33325 3.34315 4.6764 2 6.33325 2C7.99011 2 9.33325 3.34315 9.33325 5Z" stroke="#4E6A8B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <div class="notification__content">
          <p><a href="/admin/events/1129439/" target="_blank">$ 201098ROBLES041625LA status was automatically switched from AWAITING CLIENT ORDER to </a></p>
          <time class="timeago" datetime="2025-04-30T20:17:07">04/30/2025</time>
        </div>
        <div class="notification__close"><a href="javascript:void(0);" onclick="deleteNotification('7225766',true);" title="Delete Notification">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M12 4L4 12M4 4L12 12" stroke="#A1B3CC" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
        </div>
      </div>
    </li>
		
		<li id="notification_7225765" class="notification">
      <div class="notification__item">
        <svg class="notification__icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M10.6666 2.31184C11.6544 2.80274 12.3333 3.82209 12.3333 5C12.3333 6.17791 11.6544 7.19726 10.6666 7.68816M11.9999 11.1776C13.0076 11.6336 13.9149 12.3767 14.6666 13.3333M1.33325 13.3333C2.63091 11.6817 4.39271 10.6667 6.33325 10.6667C8.2738 10.6667 10.0356 11.6817 11.3333 13.3333M9.33325 5C9.33325 6.65685 7.99011 8 6.33325 8C4.6764 8 3.33325 6.65685 3.33325 5C3.33325 3.34315 4.6764 2 6.33325 2C7.99011 2 9.33325 3.34315 9.33325 5Z" stroke="#4E6A8B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <div class="notification__content">
          <p><a href="/admin/events/1142077/questionnaire/1078306/" target="_blank">Klaudia Lourde just answered their questionnaire - PHOTOGRAPHER SESSION INFO QUESTIONNAIRE</a></p>
          <time class="timeago" datetime="2025-04-30T20:17:02">04/30/2025</time>
        </div>
        <div class="notification__close"><a href="javascript:void(0);" onclick="deleteNotification('7225765',true);" title="Delete Notification">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M12 4L4 12M4 4L12 12" stroke="#A1B3CC" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
        </div>
      </div>
    </li>
		
		<li id="notification_7225764" class="notification">
      <div class="notification__item">
        <svg class="notification__icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M10.6666 2.31184C11.6544 2.80274 12.3333 3.82209 12.3333 5C12.3333 6.17791 11.6544 7.19726 10.6666 7.68816M11.9999 11.1776C13.0076 11.6336 13.9149 12.3767 14.6666 13.3333M1.33325 13.3333C2.63091 11.6817 4.39271 10.6667 6.33325 10.6667C8.2738 10.6667 10.0356 11.6817 11.3333 13.3333M9.33325 5C9.33325 6.65685 7.99011 8 6.33325 8C4.6764 8 3.33325 6.65685 3.33325 5C3.33325 3.34315 4.6764 2 6.33325 2C7.99011 2 9.33325 3.34315 9.33325 5Z" stroke="#4E6A8B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <div class="notification__content">
          <p><a href="/admin/events/1139750/questionnaire/1077894/" target="_blank">Abegail  Reyes just answered their questionnaire - PHOTOGRAPHER SESSION INFO QUESTIONNAIRE</a></p>
          <time class="timeago" datetime="2025-04-30T20:16:58">04/30/2025</time>
        </div>
        <div class="notification__close"><a href="javascript:void(0);" onclick="deleteNotification('7225764',true);" title="Delete Notification">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M12 4L4 12M4 4L12 12" stroke="#A1B3CC" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
        </div>
      </div>
    </li>
		
		<li id="notification_7225762" class="notification">
      <div class="notification__item">
        <svg class="notification__icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M10.6666 2.31184C11.6544 2.80274 12.3333 3.82209 12.3333 5C12.3333 6.17791 11.6544 7.19726 10.6666 7.68816M11.9999 11.1776C13.0076 11.6336 13.9149 12.3767 14.6666 13.3333M1.33325 13.3333C2.63091 11.6817 4.39271 10.6667 6.33325 10.6667C8.2738 10.6667 10.0356 11.6817 11.3333 13.3333M9.33325 5C9.33325 6.65685 7.99011 8 6.33325 8C4.6764 8 3.33325 6.65685 3.33325 5C3.33325 3.34315 4.6764 2 6.33325 2C7.99011 2 9.33325 3.34315 9.33325 5Z" stroke="#4E6A8B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <div class="notification__content">
          <p><a href="/admin/leads/1615769/" target="_blank">You've got a new lead! (Laura Craver )</a></p>
          <time class="timeago" datetime="2025-04-30T20:15:11">04/30/2025</time>
        </div>
        <div class="notification__close"><a href="javascript:void(0);" onclick="deleteNotification('7225762',true);" title="Delete Notification">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M12 4L4 12M4 4L12 12" stroke="#A1B3CC" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
        </div>
      </div>
    </li>
		
		<li id="notification_7225761" class="notification">
      <div class="notification__item">
        <svg class="notification__icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M10.6666 2.31184C11.6544 2.80274 12.3333 3.82209 12.3333 5C12.3333 6.17791 11.6544 7.19726 10.6666 7.68816M11.9999 11.1776C13.0076 11.6336 13.9149 12.3767 14.6666 13.3333M1.33325 13.3333C2.63091 11.6817 4.39271 10.6667 6.33325 10.6667C8.2738 10.6667 10.0356 11.6817 11.3333 13.3333M9.33325 5C9.33325 6.65685 7.99011 8 6.33325 8C4.6764 8 3.33325 6.65685 3.33325 5C3.33325 3.34315 4.6764 2 6.33325 2C7.99011 2 9.33325 3.34315 9.33325 5Z" stroke="#4E6A8B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <div class="notification__content">
          <p><a href="/admin/leads/1615768/" target="_blank">You've got a new lead! (Celia Caballero )</a></p>
          <time class="timeago" datetime="2025-04-30T20:14:19">04/30/2025</time>
        </div>
        <div class="notification__close"><a href="javascript:void(0);" onclick="deleteNotification('7225761',true);" title="Delete Notification">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M12 4L4 12M4 4L12 12" stroke="#A1B3CC" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
        </div>
      </div>
    </li>
		            <li class="notification__view-wrapper">
              <a href="/admin/notifications/" class="notification__view">
                View All
              </a>
            </li>
                    </ul>
      </li>
        <!-- END NOTIFICATION DROPDOWN -->

    <!-- BEGIN TODO DROPDOWN -->
    <li class="dropdown" id="header_task_bar">
      <a class="custom-header__nav-item" href="#" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
        <img src="/admin/icons/svg/topbar/TasksIcon.svg" alt="">
        <!--<span class="custom-badge custom-badge--success"
              id="tasksNotificationsTOTAL"></span>-->
              </a>
      <ul class="dropdown-menu custom-dropdown-menu">
        <li class="dropdown-menu__title">Your Tasks</li>

                  <div id="noneToNotify">
            <a href="/admin/tasks/" class="notification__item">
              There are no tasks
            </a>
          </div>
                </ul>
    </li>
    <!-- END TODO DROPDOWN -->

    <!-- BEGIN HELP DROPDOWN -->
    <li class="dropdown" id="header_help_bar">
      <a class="custom-header__nav-item" href="#" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
        <img src="/admin/icons/svg/topbar/HelpIcon.svg" alt="">
      </a>
      <ul class="dropdown-menu custom-dropdown-menu">
        <li>
          <a class="tBox" onClick="openIntercomMessenger(event)">
            <img src="/admin/icons/svg/topbar/AskQuestionIcon.svg" alt="">
            Ask a Question
          </a>
        </li>
      </ul>
    </li>
    <!-- END HELP DROPDOWN -->

    <!-- BEGIN USER LOGIN DROPDOWN -->
    <li class="dropdown">
      <a href="#" class="custom-header__nav-item" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
        <img alt="" class="profile__photo" src="/admin/icons/default_profile_image.png"/>
                  <span class="badge badge-years badge-8" data-toggle="popover" data-html="true"
                data-content="Your life changed <strong>8</strong> years ago when you joined Pixifi">8</span>
              </a>
      <ul class="dropdown-menu custom-dropdown-menu">
        <li class="dropdown-menu__profile">
          <img alt="" class="profile__photo" src="/admin/icons/default_profile_image.png"/>
          <div>
            <p>
              1.Shawn Hughes            </p>
            <span>info@sweetmephotography.com</span>
          </div>
        </li>
        <li id="myProfileButton">
          <a href="/admin/staff/26818/">
            <img src="/admin/icons/svg/topbar/SettingsIcon.svg" alt="">
            My Settings
          </a>
        </li>
        <li>
          <a href="/admin/staff/26818/#personalTab">
            <img src="/admin/icons/svg/topbar/BrandsIcon.svg" alt="">
            My Preferences
          </a>
        </li>
        <li class="divider"></li>
        <li>
          <a href="/admin/logout/">
            <img src="/admin/icons/svg/topbar/LogOutIcon.svg" alt="">
            Log out
          </a>
        </li>
      </ul>
    </li>
    <!-- END USER LOGIN DROPDOWN -->

  </ul>
</div>
  </div>
</div>

<div class="custom-content mainScrollableArea">
  <div class="container">
    <div class="page-container">
      <div class="page-sidebar-wrapper custom-sidebar ">
        <div class="page-sidebar navbar-collapse collapse">
          <ul class="page-sidebar-menu page-sidebar-menu-hover-submenu">
  <li id="dashboard-sidebar" class="start"  >
    <a href="/admin/">
      <img src="/admin/icons/svg/sidebar/DashboardIcon.svg" alt="">
      <span>Dashboard</span>
    </a>
    <div class="sub-menu">
      <p class="sub-menu__title">Dashboard</p>
      <ul>
        <li >
          <a href="/admin/">
            <img src="/admin/icons/svg/sidebar/OverviewIcon.svg" alt="">
            Overview
          </a>
        </li>
        <li  >
          <a onclick="openFavoriteDialog();">
            <img src="/admin/icons/svg/sidebar/FavouritesIcon.svg" alt="">
            Favourites
          </a>
        </li>
        <li >
          <a onclick="openDashboardSettingsDialog();">
            <img src="/admin/icons/svg/sidebar/CustomizeIcon.svg" alt="">
            Customize
          </a>
        </li>
      </ul>
    </div>
  </li>
  <li id="contacts-sidebar" >
    <a href="javascript:;" class="contactsNavSection ">
      <img src="/admin/icons/svg/sidebar/ContactsIcon.svg" alt="">
      <!--<div class="custom-bubble"></div>-->
      <div class="indicator indicator--sidebar"></div>      <span>Contacts</span>
    </a>
    <div class="sub-menu">
      <p class="sub-menu__title">Contacts</p>
      <ul>
        <li >
          <a href="/admin/clients/">
            <img src="/admin/icons/svg/sidebar/ClientsIcon.svg" alt="">
            Clients
          </a>
        </li>
        <li >
          <a href="/admin/leads/">
            <div>
              <img src="/admin/icons/svg/sidebar/LeadsIcon.svg" alt="">
              <div class="indicator"></div>            </div>
            Leads
            <!--<span class="custom-bubble"></span>-->
          </a>
        </li>
        <li >
          <a href="/admin/staff/">
            <img src="/admin/icons/svg/sidebar/StaffIcon.svg" alt="">
            Staff
          </a>
        </li>
        <li >
          <a href="/admin/vendors/">
            <img src="/admin/icons/svg/sidebar/VendorsIcon.svg" alt="">
            Vendors
          </a>
        </li>
      </ul>
    </div>
  </li>
  <li id="thingstodo-sidebar" >
    <a href="javascript:;">
      <img src="/admin/icons/svg/sidebar/ThingsToDoIcon.svg" alt="">
      <span>Things to Do</span>
    </a>
    <div class="sub-menu">
      <p class="sub-menu__title">Things to Do</p>
      <ul>
        <li >
          <a href="/admin/contracts/">
            <img src="/admin/icons/svg/sidebar/ContractsIcon.svg" alt="">
            Contracts
          </a>
        </li>
        <li >
          <div class="sub-menu__row">
            <a href="/admin/events/">
              <img src="/admin/icons/svg/sidebar/EventsIcon.svg" alt="">
              Events
            </a>
            <a class="second-level-menu-btn" href="">
              <div class="chevron-down">
                <img src="/admin/icons/svg/sidebar/ChevronDownIcon.svg" alt="">
              </div>
            </a>
          </div>
          <ul class="second-level-menu">
            <li>
              <a href="/admin/locations/">Locations</a>
            </li>
          </ul>
        </li>
        <li >
          <a href="/admin/tasks/">
            <img src="/admin/icons/svg/sidebar/TasksIcon.svg" alt="">
            Tasks
          </a>
        </li>
        <li >
          <a href="/admin/timelines/">
            <img src="/admin/icons/svg/sidebar/TimelinesIcon.svg" alt="">
            Timelines
          </a>
        </li>
        <li >
          <a href="/admin/productions/">
            <img src="/admin/icons/svg/sidebar/ProductionsIcon.svg" alt="">
            Productions
          </a>
        </li>
        <li >
          <a href="/admin/projects/">
            <img src="/admin/icons/svg/sidebar/ProjectsIcon.svg" alt="">
            Projects
          </a>
        </li>
        <li >
          <a href="/admin/proposals/">
            <img src="/admin/icons/svg/sidebar/ProposalsIcon.svg" alt="">
            Proposals
          </a>
        </li>
        <li >
          <a href="/admin/workshops/">
            <img src="/admin/icons/svg/sidebar/WorkshopsIcon.svg" alt="">
            Workshops
          </a>
        </li>
      </ul>
    </div>
  </li>
  <li id="finances-sidebar" >
    <a href="javascript:;">
      <img src="/admin/icons/svg/sidebar/FinancesIcon.svg" alt="">
      <span>Finances</span>
    </a>
    <div class="sub-menu">
      <p class="sub-menu__title">Finance</p>
      <ul>
        <li >
          <a href="/admin/invoices/">
            <img src="/admin/icons/svg/sidebar/InvoicesIcon.svg" alt="">
            Invoices
          </a>
        </li>
        <li >
          <a href="/admin/mileage/">
            <img src="/admin/icons/svg/sidebar/MileageIcon.svg" alt="">
            Mileage
          </a>
        </li>
        <li >
          <a href="/admin/money/">
            <img src="/admin/icons/svg/sidebar/MoneyIcon.svg" alt="">
            Money
          </a>
        </li>
      </ul>
    </div>
  </li>
  <li id="templates-sidebar" >
    <a href="javascript:;">
      <img src="/admin/icons/svg/sidebar/TemplatesIcon.svg" alt="">
      <span>Templates</span>
    </a>
    <div class="sub-menu">
      <p class="sub-menu__title">Templates</p>
      <ul>
        <li >
          <div class="sub-menu__row">
            <a href="/admin/settings/communication/">
              <img src="/admin/icons/svg/sidebar/Email&SMSIcon.svg" alt="">
              Emails & SMS
            </a>
            <a class="second-level-menu-btn" href="">
              <div class="chevron-down">
                <img src="/admin/icons/svg/sidebar/ChevronDownIcon.svg" alt="">
              </div>
            </a>
          </div>
          <ul class="second-level-menu">
			<li>
				<a href="/admin/settings/communication/">View & Edit Templates</a>
			</li>
            <li>
              <a href="/admin/settings/lists/contractreminders/">Contract Reminders</a>
            </li>
            <li>
              <a href="/admin/settings/lists/eventreminders/">Event Reminders</a>
            </li>
            <li>
              <a href="/admin/settings/lists/invoicereminders/">Invoice Reminders</a>
            </li>
            <li>
              <a href="/admin/settings/lists/paymentreminders/">Payment Reminders</a>
            </li>
            <li>
              <a href="/admin/settings/lists/proposalreminders/">Proposal Reminders</a>
            </li>
            <li>
              <a href="/admin/settings/lists/questionnairereminders/">Questionnaire Reminders</a>
            </li>
          </ul>
        </li>
        <li >
          <a href="/admin/contracts/?autoStart=templates">
            <img src="/admin/icons/svg/sidebar/ContractsIcon.svg" alt="">
            Contracts
          </a>
        </li>
        <li >
          <a href="/admin/workflow/">
            <img src="/admin/icons/svg/sidebar/WorkflowsIcon.svg" alt="">
            Workflows
          </a>
        </li>
        <li >
          <a href="/admin/timelines/?autoStart=templates">
            <img src="/admin/icons/svg/sidebar/TimelinesIcon.svg" alt="">
            Timelines
          </a>
        </li>
        <li>
          <hr/>
        </li>
        <li >
          <a href="/admin/products/">
            <img src="/admin/icons/svg/sidebar/ProductsIcon.svg" alt="">
            Products/Services
          </a>
        </li>
        <li >
          <a href="/admin/packages/">
            <img src="/admin/icons/svg/sidebar/PackagesIcon.svg" alt="">
            Packages
          </a>
        </li>
        <li >
          <a href="/admin/proposals/#templatesTab">
            <img src="/admin/icons/svg/sidebar/ProposalsIcon.svg" alt="">
            Proposals
          </a>
        </li>
        <li >
          <a href="/admin/settings/pricing/">
            <img src="/admin/icons/svg/sidebar/PricingPagesIcon.svg" alt="">
            Pricing Pages
          </a>
        </li>
        <li >
          <a href="/admin/settings/booking/">
            <img src="/admin/icons/svg/sidebar/BookingPagesIcon.svg" alt="">
            Booking Pages
          </a>
        </li>
        <li>
          <hr/>
        </li>
        <li >
          <a href="/admin/locations/">
            <img src="/admin/icons/svg/sidebar/LocationsIcon.svg" alt="">
            Locations
          </a>
        </li>
        <li >
          <a href="/admin/questionnaires/">
            <img src="/admin/icons/svg/sidebar/QuestionnairesIcon.svg" alt="">
            Questionnaires
          </a>
        </li>
      </ul>
    </div>
  </li>
  <li id="settingsNav" >
    <a href="javascript:;">
      <img src="/admin/icons/svg/sidebar/SettingsIcon.svg" alt="">
      <span>Settings</span>
    </a>

    
    <div class="sub-menu">
      <p class="sub-menu__title">Settings</p>
      <ul >
        <li >
          <a href="/admin/settings/app/">
            <img src="/admin/icons/svg/sidebar/ApplicationIcon.svg" alt="">
            Application
          </a>
        </li>
                  <li >
            <div class="sub-menu__row">
              <a href="/admin/settings/brands/">
                <img src="/admin/icons/svg/sidebar/BrandsIcon.svg" alt="">
                Brands
              </a>
              <a class="second-level-menu-btn" href="">
                <div class="chevron-down">
                  <img src="/admin/icons/svg/sidebar/ChevronDownIcon.svg" alt="">
                </div>
              </a>
            </div>
            <ul class="second-level-menu">

                                  <li>
                      <a href="/admin/settings/brands/11473/">BOOKING</a>
                    </li>
                                        <li>
                      <a href="/admin/settings/brands/15793/">SESSIONS</a>
                    </li>
                                        <li>
                      <a href="/admin/settings/brands/18826/">SCHEDULE</a>
                    </li>
                                        <li>
                      <a href="/admin/settings/brands/19647/">RESERVE</a>
                    </li>
                                        <li>
                      <a href="/admin/settings/brands/11634/">(EDITING) EAST/CENTRAL SMP </a>
                    </li>
                                        <li>
                      <a href="/admin/settings/brands/17159/">(EDITING) WEST SMP</a>
                    </li>
                                        <li>
                      <a href="/admin/settings/brands/14652/">Sweet Me Models</a>
                    </li>
                                        <li>
                      <a href="/admin/settings/brands/17956/">SMP JOBS</a>
                    </li>
                                        <li>
                      <a href="/admin/settings/brands/21064/">PC -SMP</a>
                    </li>
                                        <li>
                      <a href="/admin/settings/brands/17187/">ONBOARDING SMP</a>
                    </li>
                                        <li>
                      <a href="/admin/settings/brands/15121/">XXX DEFUNCT BRAND NAME XXX</a>
                    </li>
                                        <li>
                      <a href="/admin/settings/brands/17999/">Sweet Me Gift Cards</a>
                    </li>
                                        <li>
                      <a href="/admin/settings/brands/18626/">Sweet Me Staff Vacation Calendar</a>
                    </li>
                                        <li>
                      <a href="/admin/settings/brands/19691/">MELISSA TEST BRAND - DO NOT USE</a>
                    </li>
                    
            </ul>
          </li>
        
        <li >
          <a href="/admin/settings/external/">
            <img src="/admin/icons/svg/sidebar/IntegrationsIcon.svg" alt="">
            Integrations
          </a>
        </li>
        <li >
          <a href="/admin/settings/giftcards/">
            <img src="/admin/icons/svg/sidebar/GiftCardsIcon.svg" alt="">
            Gift Cards
          </a>
        </li>
        <li >
          <a href="/admin/settings/giftcardpages/">
            <img src="/admin/icons/svg/sidebar/GiftCardsIcon.svg" alt="">
            Gift Card Pages
          </a>
        </li>
        <li >
          <div class="sub-menu__row">
            <a href="/admin/settings/lists/">
              <img src="/admin/icons/svg/sidebar/ListsIcon.svg" alt="">
              Lists/Types
            </a>
            <a class="second-level-menu-btn" href="">
              <div class="chevron-down">
                <img src="/admin/icons/svg/sidebar/ChevronDownIcon.svg" alt="">
              </div>
            </a>
          </div>
          <ul class="second-level-menu">
            <li>
              <a href="/admin/settings/lists/archivereasons/">Archive Reasons</a>
            </li>
            <li>
              <a href="/admin/settings/lists/clientcategories/">Client Categories</a>
            </li>
            <li>
              <a href="/admin/settings/lists/clientroles/">Client Roles</a>
            </li>
            <li>
              <a href="/admin/settings/lists/contractreminders/">Contract Reminders</a>
            </li>
            <li>
              <a href="/admin/settings/lists/eventreminders/">Event Reminders</a>
            </li>
            <li>
              <a href="/admin/settings/lists/eventstaffroles/">Event Staff Roles</a>
            </li>
            <li>
              <a href="/admin/settings/lists/eventstatuses/">Event Statuses</a>
            </li>
            <li>
              <a href="/admin/settings/lists/eventtypes/">Event Types</a>
            </li>
            <li>
              <a href="/admin/settings/lists/giftcardcategories/">Gift Card Categories</a>
            </li>
            <li>
              <a href="/admin/settings/lists/invoicereminders/">Invoice Reminders</a>
            </li>
            <li>
              <a href="/admin/settings/lists/leadstatuses/">Lead Statuses</a>
            </li>
            <li>
              <a href="/admin/settings/lists/paymentterms/">Payment Terms</a>
            </li>
            <li>
              <a href="/admin/settings/lists/paymentreminders/">Payment Reminders</a>
            </li>
            <li>
              <a href="/admin/settings/lists/paymentcategories/">Payment Categories</a>
            </li>
            <li>
              <a href="/admin/settings/lists/productcategories/">Product Categories</a>
            </li>
            <li>
              <a href="/admin/settings/lists/productstatuses/">Product Statuses</a>
            </li>
            <li>
              <a href="/admin/settings/lists/producttypes/">Product Types</a>
            </li>
            <li>
              <a href="/admin/settings/lists/projecttypes/">Project Types</a>
            </li>
            <li>
              <a href="/admin/settings/lists/projectstaffroles/">Project Staff Roles</a>
            </li>
            <li>
              <a href="/admin/settings/lists/projectreminders/">Project Reminders</a>
            </li>
            <li>
              <a href="/admin/settings/lists/projectstatuses/">Project Statuses</a>
            </li>
            <li>
              <a href="/admin/settings/lists/proposalreminders/">Proposal Reminders</a>
            </li>
            <li>
              <a href="/admin/settings/lists/questionnairereminders/">Questionnaire Reminders</a>
            </li>
            <li>
              <a href="/admin/settings/lists/referrals/">Referral Sources</a>
            </li>
            <li>
              <a href="/admin/settings/lists/relationshiptypes/">Relationship Types</a>
            </li>
            <li>
              <a href="/admin/settings/lists/taskcategories/">Task Categories</a>
            </li>
            <li>
              <a href="/admin/settings/lists/taxprofiles/">Tax Profiles</a>
            </li>
            <li>
              <a href="/admin/settings/lists/vendortypes/">Vendor Types</a>
            </li>
          </ul>
        </li>
        <li>
          <hr/>
        </li>
        <li >
          <a href="/admin/settings/paymentprocessing/">
            <img src="/admin/icons/svg/sidebar/MerchantIcon.svg" alt="">
            Merchant
          </a>
        </li>
        <li >
          <a href="/admin/settings/booking/">
            <img src="/admin/icons/svg/sidebar/BookingIcon.svg" alt="">
            Booking Pages
          </a>
        </li>
        <li >
          <a href="/admin/settings/pricing/">
            <img src="/admin/icons/svg/sidebar/PricingIcon.svg" alt="">
            Pricing Pages
          </a>
        </li>
        <li>
          <hr/>
        </li>
        <li >
          <a href="/admin/settings/referrals/">
            <img src="/admin/icons/svg/sidebar/ReferralsIcon.svg" alt="">
            Referrals
          </a>
        </li>
        <li >
          <a href="/admin/settings/sharing/">
            <img src="/admin/icons/svg/sidebar/SharingIcon.svg" alt="">
            Sharing
          </a>
        </li>
        <li>
          <hr/>
        </li>
        <li >
          <a href="/admin/settings/subscription/">
            <img src="/admin/icons/svg/sidebar/SubscriptionsIcon.svg" alt="">
            Subscription
          </a>
        </li>
        <li >
          <a href="/admin/settings/export/">
            <img src="/admin/icons/svg/sidebar/ExportIcon.svg" alt="">
            Export Data
          </a>
        </li>
      </ul>
    </div>
  </li>
  <li id="addNewNav" >
    <a href="javascript:;">
      <img src="/admin/icons/svg/sidebar/NewIcon.svg" alt="">
      <span> New </span>
    </a>
    <div class="sub-menu">
      <p class="sub-menu__title">Quick Actions</p>
      <ul class="listsTypesMenu newSubMenu ">
        <li>
          <a href="javascript:void(0);" onclick="showQuickClientForm();">
            <img src="/admin/icons/svg/sidebar/AddClientIcon.svg" alt="">
            Add Client
          </a>
        </li>
        <li>
          <a href="javascript:void(0);" id="addQuickLeadBtn" onclick="showQuickLeadForm();">
            <img src="/admin/icons/svg/sidebar/AddLeadIcon.svg" alt="">
            Add Lead
          </a>
        </li>
        <li>
          <a href="javascript:void(0);" onclick="showQuickOnlyEventForm();">
            <img src="/admin/icons/svg/sidebar/EventsIcon.svg" alt="">
            Add Event
          </a>
        </li>
        <li>
          <a href="javascript:void(0);" onclick="showQuickEventForm();">
            <img src="/admin/icons/svg/sidebar/AddEventIcon.svg" alt="">
            Add Client + Event
          </a>
        </li>
        <li>
          <a href="javascript:void(0);" onclick="addQuickProject();">
            <img src="/admin/icons/svg/sidebar/AddProjectIcon.svg" alt="">
            Add Project
          </a>
        </li>
        <li>
          <a href="javascript:void(0);" onclick="showQuickVendorForm();">
            <img src="/admin/icons/svg/sidebar/AddVendorIcon.svg" alt="">
            Add Vendor
          </a>
        </li>
        <li>
          <a href="javascript:void(0);" onclick="getQuickAddInvoiceForm();">
            <img src="/admin/icons/svg/sidebar/AddInvoiceIcon.svg" alt="">
            Add Invoice
          </a>
        </li>
        <li>
          <a href="javascript:void(0);" onclick="getQuickAddRecurringInvoiceForm();">
            <img src="/admin/icons/svg/sidebar/AddRecurringInvoiceIcon.svg" alt="">
            Add Recurring Invoice
          </a>
        </li>
        <li>
          <a href="javascript:void(0);" onclick="showQuickAddObjectExpenseForm();">
            <img src="/admin/icons/svg/sidebar/AddExpenseIcon.svg" alt="">
            Add Expense</a>
        </li>
        <li>
          <a href="javascript:void(0);" onclick="showQuickTimerForm();">
            <img src="/admin/icons/svg/sidebar/AddTimeIcon.svg" alt="">
            Add Time
          </a>
        </li>
        <li>
          <a href="javascript:void(0);" onclick="getGlobalLocationAdd();">
            <img src="/admin/icons/svg/sidebar/LocationsIcon.svg" alt="">
            Add Location
          </a>
        </li>
        <li>
          <a href="javascript:void(0);" onclick="getNewObjectTaskForm('12295' , 'general', '0', '0');">
            <img src="/admin/icons/svg/sidebar/AddTaskIcon.svg" alt="">
            Add Task
          </a>
        </li>
        <li>
          <a href="javascript:void(0);" onclick="getNewObjectTaskForm('12295' , 'general', '0', '1');">
            <img src="/admin/icons/svg/sidebar/AddNoteIcon.svg" alt="">
            Add Note
          </a>
        </li>
      </ul>
    </div>
  </li>


      </li>
</ul>

<script>
  $('.page-sidebar-wrapper.custom-sidebar .page-sidebar-menu > li:not(".extra")').on('hover', function () {
    $('.page-sidebar-wrapper.custom-sidebar .page-sidebar-menu').toggleClass('open-menu');
    // $(this).find('.sub-menu').slideToggle();
  }).on('click', function() {
	  if (window.innerWidth <= 991) {
		  $(this).closest('.page-sidebar-menu')[0].scrollTop = 0;
	  }
  })

  $('.second-level-menu-btn').on('click', function (e) {
    e.preventDefault();
    $(this).toggleClass('open').parent().next().slideToggle();
  })
</script>
        </div>
      </div>
      <div class="page-content-wrapper">
        <div class="page-content" >
          <div id="edit" class="leads-section-module module">
	    <form method="post" class="asholder" enctype="multipart/form-data" autocomplete="off"  >
		<script type="text/javascript">
	

	function cancelChangeLeadType() {
		modal.close();
	}
	function changeLeadType() {
		$.ajax({	type: "POST",	url: "/admin/fn/leads/getChangeLeadTypeForm/",
			data: {clientID: '12295', leadID: '1615775'},
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {									
					
					modalContent = 			'<div class="modalBorderBox" style="width: 350px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-user"></i> Change Lead Type </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelChangeLeadType();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
										
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function saveNewLeadType() {
		
		var type = $("#newLeadType").val();	
		
		$.ajax({	type: "POST",	url: "/admin/fn/leads/changeLeadType/",
			data: {clientID: '12295', leadID: '1615775',type:type},
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {									
					
					cancelChangeLeadType();
					
					location.href="/admin/leads/1615775/";
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}



	function deleteLead( leadID ) {
		
		
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you want to delete this lead? <br /> This action can NOT be undone!',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: false,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({	type: "GET",	url: "/admin/fn/leads/deleteLead/",
					data: "clientID=12295&leadID=" +   escape(  leadID  ),
					success: function(   data   ){
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {									
							location.href="/admin/leads/";
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
		    } 
		});
	}	
	function changePass (   which   ) {
		if (   which.checked == true   ) {			
			$('#password').show();
			$('#custPass').removeAttr('disabled');
		} else {
			$('#password').hide();
			$('#custPass').attr('disabled', true);
		}
	}
	function checkDate(   date , innerHTML , clientID   ) {
		$('#status_date').show();
		if( date != "" ) {
			$.ajax({	type: "GET",	url: "/admin/data/checkDate/",
			   data: "clientID=12295&date=" + escape(date),
			   success: function(   data   ){				 
					$("#" + innerHTML + "").html(data);
					$('#status_date').hide();					
				}
			 });			
		} else {
			$('#status_date').hide();
		}
	}	
	function toggleEditMode(   clientSubType   ) {
		if(clientSubType == "1") {
			$("#WeddingContainer").toggle();											
		} else if (clientSubType == "2") {
			$("#NonWeddingContainer").toggle();											
		}
	}	
		
	function markAsReadUnread(leadID,status,isView) {
		var value = 0;
		var isChecked = status.is(":checked");
		if(isChecked) {
			value = 1;
		}
		$.ajax({	type: "POST",	url: "/admin/fn/leads/updateReadUnreadLead/",
			data: {clientID: '12295',leadID: leadID,status: value},
			success: function(   data   ){
				if(isView !== "" && isView !== null && isView !== undefined) {
					$("#status_view_" + leadID).hide();
				} else {
					$("#status_" + leadID).hide();
				}
				getObjectActivityLog('lead',leadID);
			}
		});
	}	
	function showOtherPhones(source , which){
		$("#" + source).hide();
		$("#" + which).slideDown('slow');
	}	
	function displayStatusChooser() {
		$("#status_div").slideDown();
	}	
	function archiveLeadReason() {
		$("#archiveReasonDiv").slideDown();
	}
	function cancelArchiveReason() {
		$("#archiveReasonDiv").slideUp();
	}
	function archiveLead( leadID ) {		
		var archiveReason =  $("#archiveReason").val();
		if(archiveReason == "") {
			swal({
				type: 'error',
				title: 'Error',
				html: "Please choose a reason for archiving this lead."
			});
			return false;
		}
		
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you want to archive this lead?',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: false,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({	type: "GET",	url: "/admin/fn/leads/archiveLead/",
					data: "clientID=12295&leadID=" +   escape(  leadID  ) + "&reasonID=" + escape(archiveReason),
					success: function(   data   ){
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {									
							location.href='/admin/leads/';
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
		    } 
		});
	}
	function unArchiveLead( leadID ) {
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you want to un-archive this lead?',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: false,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({	type: "GET",	url: "/admin/fn/leads/unArchiveLead/",
					data: "clientID=12295&leadID=" +   escape(  leadID  ),
					success: function(   data   ){
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {									
							location.href='/admin/leads/';
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
		    } 
		});
	}
	function showChangePassword(type) {
		$.ajax({type: "POST", url: "/admin/fn/leads/getEditLeadPasswordWindow/",
			data: {clientID: '12295', leadID: '1615775'},
			success: function(   data   ){
		   		var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			modalContent = 			'<div class="modalBorderBox" style="width: 450px;">';
					modalContent += 			'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-firewall-allert"></i> Change/Update Password </div>';
					modalContent += 			'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelShowChangePassword();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 			'</div>';
					modalContent += 			results[1];
					modalContent += 		'</div>';
					modal.open({content: modalContent});
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	function cancelShowChangePassword(type) {
		modal.close();
	}
	function changeLeadsPassword(type) {
		var password = 					$("#password_" + type).val(),
			confirmPassword = 			$("#confirmpassword_" + type).val();
			
			swal({
			    title: 'Are you sure?',
			    html: 'Are you sure you want to change the password?',
			    type: 'warning',
			    showCancelButton: true,
			    confirmButtonColor: '#3085d6',
			    cancelButtonColor: '#d33',
			    confirmButtonText: 'Yes',
			    cancelButtonText: 'No',
			    confirmButtonClass: 'confirm-class',
			    cancelButtonClass: 'cancel-class',
			    closeOnConfirm: false,
			    closeOnCancel: true
			}, function(isConfirm) {
			    if (isConfirm) {
			    	$.ajax({type: "POST", url: "/admin/fn/leads/changeLeadsPassword/",
						data: {clientID: '12295', leadID: '1615775', password: password, confirmPassword: confirmPassword},
						success: function(   data   ){
					   		var results = data.split("{|}");
					   		if(results[0] == "SUCCESS") {
					   			
					   			
					   			cancelShowChangePassword(type);
					   			
					   			
					   			swal({
									type: 'success',
									title: 'Success!',
									html: "The password has been successfully changed!",
									timer: 4000
								});
					   								   			
					   		} else {
					   			swal({
									type: 'error',
									title: 'Error',
									html: results[1]
								});
					   		}
						}
					});
			    } 
			});
	}
	
	function switchMultiDayEvent_lead(status) {
		var isChecked = status.is(":checked");
		if(isChecked) {
			$("#endDateDiv_lead").show();
		} else {
			$("#endDateDiv_lead").hide();
		}
	}
	
</script>
		<script type="text/javascript">
			function toggleConvertShowWorkflow(which) {
				if($(which).attr('checked')) {
					$("#workflowDIV").slideDown();
				} else {
					$("#workflowDIV").slideUp();
					$("#workflowmilestones").html('');
				}
			}
			function showWorkflowOptions() {
				$("#workflows").slideDown();
			}
				
			function getMileStones(workID) {
				$.ajax({	type: "GET",	url: "/admin/data/getMilestones/",
					data: {clientID: '12295', workID: workID},
					success: function(   data   ){
						$("#workflowmilestones").html(data);
						$("#associatemilestones_btn").hide();
					}
				});
			}
			
			function convert(type) {
				var workID = 						$('#workflowTemplateToApply').val(),
					milestoneID = 					$('input[name=milestones]:checked').val(),
					ignoreAutoItems = 				$('#ignoreAutoItems:checked').val(),
					ignorePastItems = 				$('#ignorePastAutoItems:checked').val();

					$("#convertLeadBtn").attr('disabled','disabled');
					
				$.ajax({	type: "POST", url: "/admin/fn/leads/convertLead/",
					data: {clientID: '12295', leadID: '1615775', workID: workID, milestoneID: milestoneID, ignoreAutoItems, ignorePastItems},
					success: function(data) {
						var results = 				data.split('{|}');
						if(results[0] == "SUCCESS") {
							var newID = 			results[1];
							if(type == "project") {
								location.href = 	'/admin/projects/' + newID + '/';
							} else {
								location.href = 	'/admin/events/' + newID + '/';
							}
						} else {
							
														
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
						$("#convertLeadBtn").attr('disabled',false);
					}
				});
			}
			function cancelLeadConvert() {
				modal.close();
			}
			function promptLeadConvert() {
				$.ajax({	type: "POST", url: "/admin/fn/leads/displayConvertLeadWindow/",
					data: {clientID: '12295', leadID: '1615775'},
					success: function(data) {
						var results = 				data.split('{|}');
						if(results[0] == "SUCCESS") {
							
							modalContent = 			'<div class="modalBorderBox" style="width: 750px;">';
							modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-reload-checked"></i> Convert Lead <span class="icon-arrow-2-right"></span> Client </div>';
							modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelLeadConvert();" ><span class="icon-cancel"></span></a></div>';
							modalContent += 				'</div>';
							modalContent += 				results[1];
							modalContent += 			'</div>';
							modal.open({content: modalContent});
							
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
			}
			
		
		</script>
		<input type="hidden" id="clientSubType" name="clientSubType" value="2" />
		<input type="hidden" id="eventType_lead" name="eventType" value="127925" />

		<div id="LeadInfo" align="center">
		    <div class="module-window" style="width: 100%;">
    <div class="module-header tabs">
      <div class="header-inner">
                  <div class="leftTitle"><span class="headerTitle headerTitleLight" ><i class="icon-user"></i> Lead Info: Test Lead </span></div>
                          <div class="rightTitle"><div class="btn-group toggle-group" style="float: left; margin-right: 10px;" ><a href="javascript:void(0);" id="viewHeaderBtn" class="btn btn-default green-jungle" onclick="toggleEditNew('view');"><span class="icon-info"></span>&nbsp; VIEW </a> <a href="javascript:void(0);" id="editHeaderBtn" class="btn btn-default" onclick="toggleEditNew('edit');"><span class="icon-file-edit"></span>&nbsp; EDIT</a></div>						<div class="btn-group pull-right">
				<button type="button" class="btn btn-fit-height grey-silver dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-delay="1000" data-close-others="true" aria-expanded="false"><i class="icon-energy"></i> Actions <i class="fa fa-angle-down"></i></button>
				<ul class="dropdown-menu pull-right" role="menu">
					<li>
						<a href="javascript:void(0);" onclick="promptLeadConvert();" ><i class="icon-reload-checked font-green-jungle"></i> Convert Lead into Client (book manually)</a>
					</li>
					<li>
						<a href="javascript:void(0);" onclick="showSharePanel();"><i class='icon-love' ></i> Share Lead</a>
					</li>
					<li>
						<a href="javascript:void(0);" onclick="archiveLeadReason();"><i class='icon-file-bookmark' ></i> Archive Lead</a>
					</li>
					<li>
						<a href="javascript:void(0);" onclick="showSharePricingPanel();"><i class='icon-basket-loaded' ></i> Share Pricing</a>
					</li>
					<li class="divider"></li>
					<li>
						<a href="javascript:void(0);" onclick="$('#priority').slideDown();" ><i class="icon-flag-1"></i> Change Priority</a>
					</li>
					<li>
						<a href="javascript:void(0);" onclick="displayStatusChooser();"><i class="icon-tag"></i> Change Status</a>
					</li>
					<li class="divider"></li>
					<li>
						<a href="javascript:void(0);" onclick="changeLeadType();" ><i class="icon-user-profile-2"></i> Change Lead Type</a>
					</li>
					
										<li class="divider"></li>
					<li>
						<a href="javascript:void(0);" onclick="deleteLead( '1615775' );" class=" font-red-flamingo"><i class='fa fa-times font-red-flamingo' ></i> Delete Lead</a>
					</li>
									</ul>
			</div>
						<div class="breadCrumbTrail">
													<div class="breadCrumbItems">
														<ul>
															<li>
															<a href="/admin/leads/">
																			<i class="icon-user"></i>
																Leads
															</a>
																			<i class="fa fa-angle-right"></i>
															</li>
															<li>
															<a href="/admin/leads/1615775/">
																
																Test Lead 
															</a>
																
															</li>		</ul>
										  			</div>
									  			</div></div>
              </div>
    </div>
    <div class="module-content">
    <div class="tabs">
    			<!-- Create Tabs Here -->
			<script type="text/javascript">
				$(function(){ 
					$("#leadsTabs").tabs();
					$("#LEADINFOEDIT").hide();
					
					$("#leadsTabs").tabs().on( "tabsactivate", function( event, ui ) {
				  		var tabID = 	$(ui.newPanel).attr('id');
			
						if(tabID == "timetrackerTab") {
							displayObjectTimeEntiresListing('lead','1615775');
				  		}
					});
					
										
					
				});
			  	
			  
				function toggleEditNew(view) {
				
					var index = $('#leadsTabs a[href="#leadInfoTab"]').parent().index();
						$("#leadsTabs").tabs('option','active',index);
					
					if(view == 'edit') {
						$('#LEADINFOEDIT').show();
						$('#LEADINFODISPLAY').hide();
						
						$("#editHeaderBtn").addClass('green-jungle');
						$("#viewHeaderBtn").removeClass('green-jungle');
						
						
					} else {
						$('#LEADINFOEDIT').hide();
						$('#LEADINFODISPLAY').show();
						
						$("#viewHeaderBtn").addClass('green-jungle');
						$("#editHeaderBtn").removeClass('green-jungle');
					}
				}
			  
			  
				function toggleEdit(status) {
					var isChecked = status.is(":checked");
					if(isChecked) {
						$('#LEADINFOEDIT').show();$('#LEADINFODISPLAY').hide();
					} else {
						$('#LEADINFOEDIT').hide();$('#LEADINFODISPLAY').show();
					}
				}
				function showSharePanel() {
					$("#sharingForm").slideDown();
				}
				function cancelSendShareLead() {
					$("#sharingForm").slideUp();
				}
				function getShareLeadTypeForm(value) {
					var error = 				"",
						vals = 					"",
						errorField = 			$("errorSharing");
						errorField.hide();
					if(value != "") {						
						vals = 				value.split(":");						
						$.ajax({	type: "POST",	url: "/admin/data/getShareLeadTypeForm/",
							data: {clientID: '12295', studioID: vals[0], shareID: vals[1]},
							success: function(   data   ){
								var results = data.split("{|}");
								if(results[0] == "SUCCESS") {
									$("#shareTypeDIV").html(results[1]);
								} else {
									swal({
										type: 'error',
										title: 'Error',
										html: results[1]
									});
								}
							}
						});
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: "Please choose a Studio to share with"
						});
					}
				}
				function sendShareLead() {
					var studioID = 				$("#shareStudio").val(),
						leadTypeID = 			$("#eventTypeShare").val(),
						error = 				"",						
						errorField = 			$("errorSharing");
						errorField.hide();
						
						error += 				(studioID == "") ? "Please choose a valid Studio to share this lead with.<br />" : "";
						error += 				(leadTypeID == "") ? "Please choose a valid lead type from their types.<br />" : "";
						
					if(error == "") {
						$.ajax({	type: "POST",	url: "/admin/data/shareLeadWithStudio/",
							data: {clientID: '12295', leadID: '1615775', studioID: studioID, leadTypeID: leadTypeID},
							success: function(   data   ){
								var results = data.split("{|}");
								if(results[0] == "SUCCESS") {
									cancelSendShareLead();
									$("#successSharing").slideDown();
									setTimeout(function(){
										$("#successSharing").fadeOut("fast", function () {
											$("#successSharing").hide();
										}); 
									}, 2000);
								} else {
									swal({
										type: 'error',
										title: 'Error',
										html: results[1]
									});
								}
							}
						});
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: error
						});
					}
				}
			</script>
			<div id="leadsTabs" class="ui-tabs"><!--class="grey-tab-area"-->
				<ul>
	                <li><a href="#leadInfoTab"><span><i class="icon-book-open"></i> Lead Info</span></a></li>
	                <li><a href="#proposalsTab"><span><i class="icon-note"></i> Proposals </span></a></li>
	                <li><a href="#communicationTab"><span><i class="icon-envelope-letter" ></i> Contact </span></a></li>
	                <li><a href="#questionnairesTab"><span><i class="icon-note"></i> Questionnaires </span></a></li>
	                <li><a href="#workflow"><span><i class="icon-shuffle"></i> Workflow</span></a></li>	                
	                <li><a href="#eventsAndLeadsTab"><span><i class="icon-calendar "></i> Leads & Events Calendar</span></a></li>
	                <li><a href="#timelineTab"><span><i class="fa fa-tasks "></i> Timelines </span></a></li>
	                <li><a href="#timetrackerTab"><span><i class="icon-timer-2"></i> Time </span></a></li>
	                <li><a href="#invoicesTab"><span><i class="icon-doc"></i> Estimates/Quotes </span></a></li> <!--   -->
            	</ul>
			
				  
	            
				<div id="leadInfoTab" >
					    <!-- Inner Content -->
    <div class="tab-content">
    				
															
					<style type="text/css">
#LEADINFODISPLAY .leftTitle {
    width: 190px;
    text-align: left;
    margin-right: 5px;
}
#LEADINFODISPLAY .rightTitle {
    text-align: left !important;
    float: left;
}
#customFieldsDIV .leftTitle {
    width: 190px;
    text-align: left;
    margin-right: 5px;
}
#customFieldsDIV .rightTitle {
    text-align: left !important;
    float: left;
}
.client-portlet .leftTitle {
    width: 90px !important;
    text-align: left;
    margin-right: 5px;
}
.client-portlet .rightTitle {
    text-align: left !important;
    float: left;
}
#leadEvents .leftTitle {
    width: 130px !important;
    text-align: left;
    margin-right: 5px;
}
#leadEvents .rightTitle {
    text-align: left !important;
    float: left;
}

#notesLeadFields ul {
    list-style-type: disc !important;
    padding-bottom: 0px;
    margin-block-start: 0em;
    margin-block-end: 0em;
}
#notesLeadFields ul li {
    float: unset !important;
    list-style: disc !important;
    margin-left: 4px;
    margin-right: 4px;
}

</style>

<div id="LEADINFODISPLAY">					
	<div class="col-md-7 col-sm-7 col-xs-7" style="padding-left: 0px; padding-right: 0px;">
	

		<link href="/admin/css/v4/bootstrap-editable.css" rel="stylesheet"/>
	<script src="/admin/js/new/plugins/bootstrap-editable/bootstrap-editable.js"></script>
	<script src="/admin/js/new/v4/custom.edit.fields.js.php?clientID=12295" type="text/javascript" ></script>
	<script type="text/javascript">
		
		function autoSyncValues(response,newValue,theObj) {
			var results = response.split("{|}");
				if(results[0] == "SUCCESS") {					
					var fieldID = 		$(theObj).attr('id').replace('af_',''),
						fieldParts = 	fieldID.split("{||}");
						
						if(fieldParts.length > 1) {
							var indx = 			0;
							//it's a multi-field
							for(var i in newValue) {
								$("#" + fieldParts[indx]).val(newValue[i]);
								$("#" + fieldParts[indx]).change();
								indx++;
							}
						} else {
							//just a single field
							if(newValue !== null && typeof newValue === 'object') {
								for(var z in newValue) {
									$("#" + fieldID).val(newValue[z]);
									$("#" + fieldID).change();
								}
							} else {
								$("#" + fieldID).val(newValue);
								$("#" + fieldID).change();
							}
						}
				}
		}
		
		function displayLeadConflicts() {
			$.ajax({type: "POST", url: "/admin/fn/leads/displayLeadConflicts/",
				data: {clientID: '12295', leadID: '1615775'},
				success: function(   data   ){
			   		var results = data.split("{|}");
			   		if(results[0] == "SUCCESS") {
			   			$("#leadConflicts").html(results[1]);
					} else {
			   			swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
			   		}
				}
			});
		}
		
		function linkLeadToExistingClient(theClientID) {
			let promptTitle = 			'Are you sure you want to link this lead to the existing client?';
			let promptSuccess = 		'Your lead has been successfully linked to the existing client!';
			if(theClientID == 0) {
				promptTitle = 			'Are you sure you want to remove the link from this lead?';
				promptSuccess = 		'Your lead has been successfully updated, just refresh the page to see the change.';
			}
			
			swal({
			    title: 'Are you sure?',
			    html: promptTitle,
			    type: 'warning',
			    showCancelButton: true,
			    confirmButtonColor: '#3085d6',
			    cancelButtonColor: '#d33',
			    confirmButtonText: 'Yes',
			    cancelButtonText: 'No',
			    confirmButtonClass: 'confirm-class',
			    cancelButtonClass: 'cancel-class',
			    closeOnConfirm: true,
			    closeOnCancel: true
			}, function(isConfirm) {
			    if (isConfirm) {
			    	
			    	$.ajax({type: "POST", url: "/admin/data/linkLeadToExistingClient/",
						data: {clientID: '12295', leadID: '1615775', theClientID: theClientID},
						success: function(   data   ){
					   		var results = data.split("{|}");
					   		if(results[0] == "SUCCESS") {
					   			
					   			//$("#duplicateBox").addClass('successful');
					   			//$("#duplicateBox").removeClass('note note-primary note-bordered note-shadow');
					   			//$("#duplicateBox").html('Successfully linked!');
					   					   			
					   			
					   			swal({
									type: 'success',
									title: 'Success!',
									html: promptSuccess,
									timer: 4000
								});
					   			
					   			
					   			//$("#duplicateBox").show();
					   			setTimeout(function(){
									$("#duplicateBox").fadeOut("fast", function () {
										$("#duplicateBox").hide();
									}); 
								}, 5000);
					   			
					   		} else {
					   			swal({
									type: 'error',
									title: 'Error',
									html: results[1]
								});
					   		}
						}
					});
			    	
			    } 
			});
			
		}
	
		$(function() {
		    //toggle `popup` / `inline` mode
		    $.fn.editable.defaults.mode = 'inline';     
		    $.fn.editable.defaults.showbuttons =  true;     
		    $.fn.editable.defaults.url =  '/admin/data/af/leaddata/';     
		    $.fn.editable.defaults.send =  'always';     
		    $.fn.editable.defaults.params = {clientID: '12295',objectID: '1615775'};     
		    $.fn.editable.defaults.clear = false;     
		    
		    //make username editable
		    $('.editable:not(.editable-address):not(.editable-date):not(.editable-event-type):not(.editable-lead-status):not(.editable-time):not(.editable-notes):not(.editable-brand):not(.editable-timezone)').editable({
		    	success: function(response, newValue) {
					autoSyncValues(response,newValue,this);
				}
		    });
		    $('.editable-address').editable({
		    	success: function(response, newValue) {
		    		autoSyncValues(response,newValue,this);
				}
		    });
		    $('.editable-date').editable({
		    	success: function(response, newValue) {
		    		autoSyncValues(response,newValue,this);
				}
		    });
		    $('.editable-notes').editable({
		    	showbuttons: true,
		    	onblur: false,
		    	success: function(response, newValue) {
		    		autoSyncValues(response,newValue,this);
				}
		    });

						$('.editable-timezone').editable({
				source: [{"value":"America\/Los_Angeles","text":"(GMT-08:00) Pacific Time (US & Canada); Tijuana"},{"value":"America\/Phoenix","text":"(GMT-07:00) Arizona"},{"value":"America\/Denver","text":"(GMT-07:00) Mountain Time (US & Canada)"},{"value":"America\/Chicago","text":"(GMT-06:00) Central Time (US & Canada)"},{"value":"America\/New_York","text":"(GMT-05:00) Eastern Time (US & Canada)"},{"value":"America\/Indiana\/Indianapolis","text":"(GMT-05:00) Indiana (East)"},{"value":"America\/Bogota","text":"(GMT-05:00) Bogota"},{"value":"America\/Mexico_City","text":"(GMT-06:00) Mexico City"},{"value":"America\/Regina","text":"(GMT-06:00) Saskatchewan"},{"value":"America\/Managua","text":"(GMT-06:00) Central America"},{"value":"America\/Chihuahua","text":"(GMT-07:00) Chihuahua"},{"value":"Pacific\/Wake","text":"(GMT-12:00) International Date Line West"},{"value":"Pacific\/Apia","text":"(GMT-11:00) Midway Island"},{"value":"Pacific\/Honolulu","text":"(GMT-10:00) Hawaii"},{"value":"America\/Anchorage","text":"(GMT-09:00) Alaska"},{"value":"America\/Halifax","text":"(GMT-04:00) Atlantic Time (Canada)"},{"value":"America\/Caracas","text":"(GMT-04:00) Caracas"},{"value":"America\/Santiago","text":"(GMT-04:00) Santiago"},{"value":"America\/St_Johns","text":"(GMT-03:30) Newfoundland"},{"value":"America\/Sao_Paulo","text":"(GMT-03:00) Brasilia"},{"value":"America\/Argentina\/Buenos_Aires","text":"(GMT-03:00) Buenos Aires"},{"value":"America\/Godthab","text":"(GMT-03:00) Greenland"},{"value":"America\/Noronha","text":"(GMT-02:00) Mid-Atlantic"},{"value":"Atlantic\/Azores","text":"(GMT-01:00) Azores"},{"value":"Atlantic\/Cape_Verde","text":"(GMT-01:00) Cape Verde Is."},{"value":"Africa\/Casablanca","text":"(GMT) Casablanca"},{"value":"Europe\/London","text":"(GMT) London"},{"value":"Africa\/Casablanca","text":"(GMT) Monrovia"},{"value":"Europe\/Belgrade","text":"(GMT+01:00) Belgrade"},{"value":"Europe\/Berlin","text":"(GMT+01:00) Berlin"},{"value":"Europe\/Paris","text":"(GMT+01:00) Paris"},{"value":"Europe\/Sarajevo","text":"(GMT+01:00) Sarajevo"},{"value":"Africa\/Lagos","text":"(GMT+01:00) West Central Africa"},{"value":"Europe\/Istanbul","text":"(GMT+02:00) Athens"},{"value":"Europe\/Bucharest","text":"(GMT+02:00) Bucharest"},{"value":"Africa\/Cairo","text":"(GMT+02:00) Cairo"},{"value":"Africa\/Johannesburg","text":"(GMT+02:00) Harare"},{"value":"Europe\/Helsinki","text":"(GMT+02:00) Helsinki"},{"value":"Europe\/Istanbul","text":"(GMT+02:00) Istanbul"},{"value":"Asia\/Jerusalem","text":"(GMT+02:00) Jerusalem"},{"value":"Asia\/Baghdad","text":"(GMT+03:00) Baghdad"},{"value":"Europe\/Moscow","text":"(GMT+03:00) Moscow"},{"value":"Africa\/Nairobi","text":"(GMT+03:00) Nairobi"},{"value":"Asia\/Riyadh","text":"(GMT+03:00) Riyadh"},{"value":"Asia\/Tehran","text":"(GMT+03:30) Tehran"},{"value":"Asia\/Muscat","text":"(GMT+04:00) Muscat"},{"value":"Asia\/Tbilisi","text":"(GMT+04:00) Tbilisi"},{"value":"Asia\/Kabul","text":"(GMT+04:30) Kabul"},{"value":"Asia\/Yekaterinburg","text":"(GMT+05:00) Ekaterinburg"},{"value":"Asia\/Karachi","text":"(GMT+05:00) Karachi"},{"value":"Asia\/Calcutta","text":"(GMT+05:30) Mumbai"},{"value":"Asia\/Katmandu","text":"(GMT+05:45) Kathmandu"},{"value":"Asia\/Novosibirsk","text":"(GMT+06:00) Almaty"},{"value":"Asia\/Dhaka","text":"(GMT+06:00) Dhaka"},{"value":"Asia\/Novosibirsk","text":"(GMT+06:00) Novosibirsk"},{"value":"Asia\/Colombo","text":"(GMT+06:00) Sri Jayawardenepura"},{"value":"Asia\/Rangoon","text":"(GMT+06:30) Rangoon"},{"value":"Asia\/Krasnoyarsk","text":"(GMT+07:00) Krasnoyarsk"},{"value":"Asia\/Hong_Kong","text":"(GMT+08:00) Hong Kong"},{"value":"Asia\/Irkutsk","text":"(GMT+08:00) Irkutsk"},{"value":"Australia\/Perth","text":"(GMT+08:00) Perth"},{"value":"Asia\/Singapore","text":"(GMT+08:00) Singapore"},{"value":"Asia\/Taipei","text":"(GMT+08:00) Taipei"},{"value":"Asia\/Irkutsk","text":"(GMT+08:00) Ulaan Bataar"},{"value":"Asia\/Hong_Kong","text":"(GMT+08:00) Urumqi"},{"value":"Asia\/Seoul","text":"(GMT+09:00) Seoul"},{"value":"Asia\/Tokyo","text":"(GMT+09:00) Tokyo"},{"value":"Asia\/Yakutsk","text":"(GMT+09:00) Yakutsk"},{"value":"Australia\/Adelaide","text":"(GMT+09:30) Adelaide"},{"value":"Australia\/Darwin","text":"(GMT+09:30) Darwin"},{"value":"Australia\/Brisbane","text":"(GMT+10:00) Brisbane"},{"value":"Australia\/Sydney","text":"(GMT+10:00) Canberra"},{"value":"Pacific\/Guam","text":"(GMT+10:00) Guam"},{"value":"Australia\/Hobart","text":"(GMT+10:00) Hobart"},{"value":"Australia\/Sydney","text":"(GMT+10:00) Melbourne"},{"value":"Australia\/Sydney","text":"(GMT+10:00) Sydney"},{"value":"Asia\/Vladivostok","text":"(GMT+10:00) Vladivostok"},{"value":"Asia\/Magadan","text":"(GMT+11:00) Magadan"},{"value":"Pacific\/Auckland","text":"(GMT+12:00) Auckland"},{"value":"Pacific\/Fiji","text":"(GMT+12:00) Fiji"},{"value":"Pacific\/Tongatapu","text":"(GMT+13:00) Nuku'alofa"}],
				success: function(response, newValue) {
					autoSyncValues(response,newValue,this);
				}
			});
		    
		    		    $('.editable-event-type').editable({
		    	source: [{"value":"127925","text":"NEWBORN INQUIRY"},{"value":"172873","text":"** BOOKING **"},{"value":"163469","text":"***HOLD***"},{"value":"246736","text":"HR HOLD DO NOT BOOK"},{"value":"221508","text":"HOLIIDAY"},{"value":"243387","text":"** FAMILY WORKSHOP **"},{"value":"237686","text":"SICK"},{"value":"222747","text":"** MODEL HOLD **"},{"value":"178703","text":"ATL NEWBORN"},{"value":"171881","text":"AUS NEWBORN"},{"value":"180542","text":"BOS NEWBORN"},{"value":"171890","text":"CHI NEWBORN"},{"value":"187392","text":"CLT NEWBORN"},{"value":"247412","text":"COS NEWBORN"},{"value":"171883","text":"DAL NEWBORN"},{"value":"179512","text":"DC NEWBORN"},{"value":"171857","text":"DEN NEWBORN"},{"value":"216013","text":"DET NEWBORN"},{"value":"171882","text":"HOU NEWBORN"},{"value":"247411","text":"JAX NEWBORN"},{"value":"171888","text":"KC NEWBORN"},{"value":"171885","text":"LA NEWBORN"},{"value":"210914","text":"LOU NEWBORN"},{"value":"217645","text":"LVN NEWBORN"},{"value":"216430","text":"MAN NEWBORN"},{"value":"198067","text":"MSP NEWBORN"},{"value":"213323","text":"NYNJ NEWBORN"},{"value":"171886","text":"OC NEWBORN"},{"value":"176693","text":"ORL NEWBORN"},{"value":"173600","text":"PHL NEWBORN"},{"value":"184091","text":"PHX NEWBORN"},{"value":"171891","text":"POR NEWBORN"},{"value":"187208","text":"RAL NEWBORN"},{"value":"243459","text":"RIV NEWBORN"},{"value":"179940","text":"SAC NEWBORN"},{"value":"209146","text":"SAT NEWBORN"},{"value":"171884","text":"SD NEWBORN"},{"value":"172749","text":"SEA NEWBORN"},{"value":"171887","text":"SF NEWBORN"},{"value":"196488","text":"SLC NEWBORN"},{"value":"192240","text":"TPA NEWBORN"},{"value":"129320","text":"TRAINING MODEL SESSION"},{"value":"178240","text":"IN HOME MODEL SESSION"},{"value":"182416","text":"ATL NEWBORN TWINS"},{"value":"243966","text":"ATL NEWBORN TRIPLETS "},{"value":"168838","text":"AUS NEWBORN TWINS"},{"value":"185050","text":"BOS NEWBORN  - TWINS"},{"value":"154013","text":"CHI NEWBORN TWINS"},{"value":"189979","text":"CHI-NEWBORN TRIPLETS"},{"value":"199711","text":"CLT NEWBORN TWINS"},{"value":"166759","text":"DAL NEWBORN TWINS"},{"value":"244788","text":"DAL NEWBORN - TRIPLETS"},{"value":"182142","text":"DC NEWBORN - TWINS"},{"value":"245442","text":"DC NEWBORN TRIPLETS"},{"value":"171892","text":"DEN NEWBORN TWINS"},{"value":"235188","text":"DET NEWBORN - TWINS"},{"value":"168747","text":"HOU NEWBORN TWINS"},{"value":"242223","text":"HOU NEWBORN - TRIPLETS"},{"value":"248751","text":"JAX NEWBORN TWINS"},{"value":"136193","text":"KC NEWBORN-TWINS"},{"value":"139685","text":"LA NEWBORN-TWINS"},{"value":"210915","text":"LOU NEWBORN TWINS"},{"value":"228705","text":"LVN NEWBORN - TWINS"},{"value":"221689","text":"MAN NEWBORN TWINS"},{"value":"205422","text":"MSP NEWBORN - TWINS"},{"value":"213492","text":"NYNJ NEWBORN TWINS"},{"value":"235478","text":"NYNJ NEWBORN TRIPLETS"},{"value":"136190","text":"OC NEWBORN-TWINS"},{"value":"232122","text":"OC NEWBORN  -TRIPLETS"},{"value":"184004","text":"ORL NEWBORN - TWINS"},{"value":"176146","text":"PHL NEWBORN TWINS"},{"value":"208921","text":"PHL NEWBORN TRIPLETS"},{"value":"188412","text":"PHX NEWBORN TWINS"},{"value":"171893","text":"POR NEWBORN TWINS"},{"value":"245707","text":"POR NEWBORN TRIPLETS"},{"value":"198296","text":"RAL NEWBORN  - TWINS"},{"value":"243460","text":"RIV NEWBORN - TWINS"},{"value":"186989","text":"SAC NEWBORN-TWINS"},{"value":"227701","text":"SAC NEWBORN - TRIPLETS"},{"value":"209147","text":"SAT NEWBORN - TWINs"},{"value":"180944","text":"SEA NEWBORN TWINS"},{"value":"158174","text":"SF NEWBORN TWINS"},{"value":"178448","text":"SD NEWBORN TWINS"},{"value":"136757","text":"SD NEWBORN-TRIPLETS"},{"value":"192241","text":"TPA NEWBORN - TWINS"},{"value":"149467","text":"PHOTOGRAPHER WORKSHOP"},{"value":"218775","text":"TENTATIVE Photographer Workshop"},{"value":"153844","text":"ONBOARDING"},{"value":"182492","text":"PAYROLL CLOSE OUT"},{"value":"182493","text":"TX SALES TAX DUE"},{"value":"182491","text":"TRAINING DATE"},{"value":"195437","text":"GIFT CARD PURCHASE"},{"value":"198857","text":"BOOKING STAFF TIME OFF"},{"value":"232699","text":"BUF NEWBORN"},{"value":"181877","text":"NAS NEWBORN"},{"value":"187393","text":"NAS NEWBORN - TWINS"},{"value":"209812","text":"RIC NEWBORN"},{"value":"209813","text":"RIC NEWBORN - TWINS"}],
		    	success: function(response, newValue) {
		    		autoSyncValues(response,newValue,this);
				}
		    });

						$('.editable-brand').editable({
				source: [{"value":"11473","text":"BOOKING"},{"value":"15793","text":"SESSIONS"},{"value":"18826","text":"SCHEDULE"},{"value":"19647","text":"RESERVE"},{"value":"11634","text":"(EDITING) EAST\/CENTRAL SMP "},{"value":"17159","text":"(EDITING) WEST SMP"},{"value":"14652","text":"Sweet Me Models"},{"value":"17956","text":"SMP JOBS"},{"value":"21064","text":"PC -SMP"},{"value":"17187","text":"ONBOARDING SMP"},{"value":"15121","text":"XXX DEFUNCT BRAND NAME XXX"},{"value":"17999","text":"Sweet Me Gift Cards"},{"value":"18626","text":"Sweet Me Staff Vacation Calendar"},{"value":"19691","text":"MELISSA TEST BRAND - DO NOT USE"}],
				success: function(response, newValue) {
					autoSyncValues(response,newValue,this);
				}
			});

		    
		    $('.editable-time').editable({
		    	onblur: 'ignore',
		    	success: function(response, newValue) {
		    		autoSyncValues(response,newValue,this);
				}
		    });
		    
		    
		    $('div[data-style="qtip-tipsy"]').qtip({
				style: { classes: 'qtip-rounded qtip-dark qtip-pixifi' },
				content: {
					attr: 'data-tooltip'
				},
				position: {
			        viewport: $(window)
			    },
	            hide: {
	                fixed: true,
	                delay: 300
	            }
			});
		    
			
			displayLeadConflicts();
			
		    
		    /*$('.editable[data-toggle="popover"]').popover({
				trigger: 'hover',
		        'placement': 'top',
		        'show': true,
		        container: 'body'
			});*/
		    
		    
		});
	
	</script>
		
		<div class="portlet light bordered" >
		<div id="leadConflicts"></div>
				<div id="duplicateBox" class="note note-primary note-bordered note-shadow">
				<h1 class="headerTitle"><i class="icon-user-following"></i> Possible Duplicate Client</h1> 
				<br />
				We've detected that you might have an existing client already with the same information.
				<br />
				<br />
				<div style="text-align: center;">
					<a href="/admin/clients/1637058/" style="color: #FFF;"><span class="icon-user"></span> <strong>Test Lead</strong></a> was found with similar info.<br />
				</div>
				<br />
				Click the button below to link this lead to your existing client to avoid duplicate records once you convert the lead.<br />
				<br />
				<div style="text-align: center;" >
					<button class="btn btn-info btn-sm" type="button" onclick="linkLeadToExistingClient('1637058');"> Click to Link </button>
				</div>
				<br />
			</div>
				
	<div id="leadError" class="failure hidden"></div>
	
	<h4 class="font-grey-gallery bold"><i class="icon-file-edit"></i> Other Info</h4>
	<hr class="hrSlim" />
	
			<div class="normalThinRowStyle" >
    	<div class='leftTitle' >Brand: </div>       	
        <div class='rightTitle' >
			<a href="javascript:void(0);" id="af_leadBrandID" data-type="select" data-value="BOOKING" data-title="Click to Edit" class="editable editable-click editable-brand" >
        		BOOKING			</a>
        </div>
        <div class="clearSmall" ></div><br style="clear: both; " />
	</div>
		<div class="normalThinRowStyle" >
		<div class='leftTitle' >Timezone: </div>
		<div class='rightTitle' >
			<a href="javascript:void(0);" id="af_leadTimezone" data-type="select" data-value="America/New_York" data-title="Select Timezone" class="editable editable-click editable-timezone" >
				(GMT-05:00) Eastern Time (US & Canada)			</a>
		</div>
		<div class="clearSmall" ></div><br style="clear: both; " />
	</div>
	<div class="normalThinRowStyle" >
    	<div class='leftTitle' >Status: </div>       	
        <div class='rightTitle' > 
        	<div id="current_status" onclick="displayStatusChooser();">
					<div id="18561_status" class="roundedTag roundedTagBig"   style="color: #468f34; background-color: #ffffff;" title="BABY HERE ADD QUESTIONNAIRE" >BABY HERE ADD QUESTIONNAIRE</div>
									<div class="smallText pull-right">last switched: <time class="timeago" datetime="2025-04-30T20:23:25" title="04/30/2025">04/30/2025</time></div>
							</div>				
        </div>
        <div class="clearSmall" ></div><br style="clear: both; " />
        <div id="status_div" class="hidden greenBorderBox" >
			
			    <select id="newLeadStatusToSwitchTo" name="newLeadStatusToSwitchTo" style="width: 200px;"  class="styled" >
    	<option value="" > -- </option>
<option value="18562"  >ADVANCE BABY ADD QUESTIONNAIRE</option>
<option value="17884"  >BABY HERE  FOLLOW UP</option>
<option value="17885"  >BABY NOT HERE - LONG TERM LEAD FOLLOW UP</option>
<option value="15624"  >FOLLOW UP CALL/TEXT</option>
<option value="13430"  >BOOKING!!!!!</option>
<option value="9585"  >***HOLD***</option>
<option value="18488"  >HOLD  DOUBLE SESSION ?</option>
<option value="18563"  >MANHATTAN BABY HERE ADD QUESTIONNAIRE</option>
<option value="18564"  >MANHATTAN ADVANCED BABY ADD QUESTIONNAIRE</option>
<option value="18554"  >MANHATTAN BABY HERE </option>
<option value="18555"  >MANHATTAN LONG TERM LEAD FOLLOW UP</option>
<option value="13803"  >GIFT CARD PURCHASE (INTERESTED)</option>
<option value="15578"  >SESSIONS ---HEATHER ATTN</option>
<option value="13047"  >JENNIFER ATTN!!!</option>
<option value="18029"  >BOOKING---LAUREN ATTN</option>
<option value="17644"  >SCHEDULE --JASMON ATTN</option>
<option value="18791"  >RESERVE --- KAILEE ATTN</option>
<option value="20787"  >CONFIRMING DOB</option>
<option value="11298"  >WAIT LISTED</option>
<option value="13424"  >LONG TERM LEAD FOLLOW UP STEP 2</option>
<option value="13431"  >MELISSA MANUAL FOLLOW UP</option>
<option value="13426"  >**NEW**</option>
<option value="13913"  >ARCHIVED</option>
<option value="14058"  >FUTURE MARKET POSSIBLY</option>
<option value="14930"  >MEDIUM (32-89 DAYS) LEAD FOLLOW UP STATUS 1</option>
<option value="14931"  >MEDIUM (32-89 DAYS) LEAD FOLLOW UP STATUS 2</option>
<option value="16395"  >GOOD FIT - MODEL</option>
<option value="17222"  >POSSIBLE FIT - MODEL</option>
<option value="17221"  >AUS MODEL - NOT ARRIVED</option>
<option value="17220"  >POSS POST TRAINING - MODEL</option>
<option value="16814"  >NEW PHOTOGRAPHER INQUIRY</option>
<option value="17340"  >NEVER OPENED!!!</option>
<option value="17798"  >NO FURTHER CONTACT!!!</option>
<option value="17872"  >ALL FOLLOW UPS COMPLETE - ARCHIVED</option>
<option value="17887"  >BACK-UP MODEL</option>
<option value="18234"  >KC 1 GOOD FIT</option>
<option value="18490"  >BABY HERE TENTATIVE BOOKING</option>
<option value="18588"  >ADVANCED TENTATIVE BOOKING</option>
<option value="18524"  >GOOD FIT2 - MODEL</option>
<option value="13422"  >SHORT TERM LEAD FOLLOW UP</option>
<option value="18109"  >LONG TERM LEAD FOLLOW UP</option>
<option value="18632"  >BABY HERE PAYMENT PAST DUE</option>
<option value="18589"  >ADVANCED BOOKING PAYMENT PAST DUE</option>
<option value="18629"  >ADVANCED LEAD DELETE INVOICE & REASSIGN TO DID NOT PAY INVOICE FOLLOW UP LEAD STATUS</option>
<option value="18633"  >BABY HERE LEAD DELETE INVOICE</option>
<option value="18634"  >DID NOT PAY INVOICE FOLLOW UP LEAD STATUS</option>
<option value="18950"  >PW MODELS - Future</option>
<option value="19129"  >G00D FIT2  - MODEL</option>
<option value="19408"  >Good Fit3 - Model</option>
<option value="19680"  >REVIEWED - NOT A FIT</option>
<option value="19681"  >REVIEWED - ASSESSING</option>
<option value="20059"  >REVIEWED - FUTURE CONSIDERATION</option>
<option value="20689"  >Content Model</option>
<option value="20715"  >Older Baby Model</option>
<option value="20717"  >KANSAS CITY - SESSION WANTED</option>
<option value="20999"  >MATERNITY MODEL</option>
    </select>
    			<br style="clear: both;" />
			<div class="rightTitle"> 
				<a href="javascript:void(0);" class="btn blue btn-xs" onclick="updateStatusOfLead('12295','1615775', $('#newLeadStatusToSwitchTo').val() , 'current_status' , 'status_div' );"> Save </a>
				<a href="javascript:void(0);" class="btn default btn-xs" onclick="$('#status_div').slideUp();"> Cancel </a>
			</div>
			<br style="clear: both;" />
	 	</div>
	</div>
	<div class="normalThinRowStyle" >
    	<div class='leftTitle' >Priority: </div>       	
        <div class='rightTitle' > 
        	<div id="current_priority" onclick="$('#priority').slideDown();" style="cursor: pointer;">
				 <i class='fa fa-circle font-red-flamingo' title='HIGH PRIORITY' alt='HIGH PRIORITY'></i> 			</div>				
        </div>
        <div class="clearSmall" ></div><br style="clear: both; " />
        <script type="text/javascript">
        	$(function() {
        		$('#current_priority i').qtip({
					style: { classes: 'qtip-rounded qtip-dark qtip-pixifi' },
					content: {
						attr: 'title'
					},
					position: {
				        viewport: $(window)
				    },
		            hide: {
		                fixed: true,
		                delay: 300
		            }
				});
        	});
        	function changePriority (priority) {		
				$.ajax({	type: "POST",	url: "/admin/data/updateLeadPriority/",
					data: {clientID: '12295', leadID: '1615775', priority: priority},
					success: function(   data   ){
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							$("#current_priority").html(results[1]);
							
							$('#current_priority i').qtip({
								style: { classes: 'qtip-rounded qtip-dark qtip-pixifi' },
								content: {
									attr: 'title'
								},
								position: {
							        viewport: $(window)
							    },
					            hide: {
					                fixed: true,
					                delay: 300
					            }
							});
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
				$('#priority').slideUp('slow');
			}
        </script>
        <div id="priority" class="hidden greenBorderBox">
			<div id="priorityChanger" >
				<div class="btn-group">
					<a href="javascript:void(0);" class="btn btn-default btn-sm" onclick="changePriority ('0');" >
						<i class='fa fa-circle font-green-jungle' title='No Priority' alt='No Priority'></i> no</a>
					<a href="javascript:void(0);" class="btn btn-default btn-sm" onclick="changePriority ('1');" >
						<i class='fa fa-circle font-yellow-lemon' title='Low Priority' alt='Low Priority'></i> low</a>
					<a href="javascript:void(0);" class="btn btn-default btn-sm" onclick="changePriority ('2');" >
						<i class='fa fa-circle font-yellow-gold' title='Medium Priority' alt='Medium Priority'></i> medium</a>
					<a href="javascript:void(0);" class="btn btn-default btn-sm" onclick="changePriority ('3');" >
						<i class='fa fa-circle font-red-flamingo' title='HIGH PRIORITY' alt='HIGH PRIORITY'></i> high</a> 
				</div>
				<br style="clear: both;" />
			 </div>
			 <br style="clear: both;" />
			<div class="rightTitle"> 
				<a href="javascript:void(0);" class="btn default btn-sm" onclick="$('#priority').slideUp();"> Cancel </a>
			</div>
			<br style="clear: both;" />
		 </div>
	</div>
	
		
		
	<div class="normalThinRowStyle" style="display: none;" >
		
		<div class="leftTitle">Workflow</div>
		<div class="rightTitle" style="width: 60%;">
			<div class="progress workflowProgressBar" style="margin-bottom: 0px; margin-top: 10px; height: 30px;">
			
			</div>
		</div>
		<div class="clearSmall"></div><br style="clear: both;">
	</div>
	
	<br style="clear: both;" />
	<br style="clear: both;" />
	<h4 class="font-grey-gallery bold" style="float: left;" ><i class="icon-user-profile-2"></i> Client Info</h4>	
	
		<br style="clear: both;" />
	<hr class="hrSlim" />
	
			<div id="client1InfoDiv" class="portlet light col-md-6 col-sm-6 client-portlet">
						<div id="_infoOverview"  >
				<div class="normalThinRowStyle" >
			   		<div class='leftTitle' >Client #1:</div>
			        <div class='rightTitle' > 
			        <span class="fa fa-star font-yellow-crusta" title="Primary Contact"></span>	 	 	 	 <a href="javascript:void(0);" id="af_leadBrideFirst{||}leadBrideLast" data-type="dualtext"  data-content="Click to Edit"  class="editable editable-click" data-value="Test{||}Lead">
	 	 	 	 	 Test Lead 
	 	 	 	 </a> 											</div>
					<div class="clearSmall" ></div><br style="clear: both; " />
			    </div>
			    <div class="normalThinRowStyle" >
			    	<div class='leftTitle' >Phone(s):</div>
			        <div class='rightTitle' style="text-align: right;" >
			        			        <a href="javascript:void(0);" id="af_leadBridePhone" data-type="tel"  data-content="Click to Edit"  class="editable editable-click" data-value="" ><span class="fa fa-phone"></span> </a> <br /><a href="javascript:void(0);" id="af_leadBrideMobilePhone" data-type="tel"  data-content="Click to Edit"  class="editable editable-click" data-value="(123) 456-7890"><span class="fa fa-phone"></span> Mobile: (123) 456-7890</a> <br />			        
			        </div>
					<div class="clearSmall" ></div><br style="clear: both; " />
			    </div>
			    <div class="normalThinRowStyle" >
			    	<div class='leftTitle' >E-mail(s):</div>
			        <div class='rightTitle' >
			        
			        				        
			        	<a href="javascript:void(0);" id="af_leadBrideEmail" data-type="email"  data-title="Enter E-mail" class="editable editable-click" data-value="test@sweetmephotography.com">test@sweetmephotography.com</a><br />
			        	<a href="javascript:void(0);" id="af_leadOneEmail2" data-type="email"  data-title="Enter E-mail" class="editable editable-click" data-value=""></a>			        </div>
					<div class="clearSmall" ></div><br style="clear: both; " />
			    </div>
			    			    <div class="normalThinRowStyle">
			    	<div class='leftTitle' >Social:</div>
			        <div class='rightTitle' style="text-align: right;" >
			    				No social network accounts have been added					    	</div>
			    	<div class="clearSmall" ></div><br style="clear: both; " />
			    </div>
			    			</div>
		</div>
			<div id="client2InfoDiv" class="portlet light col-md-6 col-sm-6 client-portlet" >
				<div id="_infoOverview"  >
			<div class="normalThinRowStyle" >
		   		<div class='leftTitle' >Client #2:</div>
		        <div class='rightTitle' >
		        		        <a href="javascript:void(0);" id="af_leadGroomFirst{||}leadGroomLast" data-type="dualtext"  data-content="Click to Edit"  class="editable editable-click" data-value="{||}">
				  
			</a> 									</div>
				<div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
		    <div class="normalThinRowStyle" >
		    	<div class='leftTitle' >Phone(s):</div>
		        <div class='rightTitle' style="text-align: right;" >
		        
		        		        <a href="javascript:void(0);" id="af_leadGroomPhone" data-type="tel"  data-content="Click to Edit"  class="editable editable-click" data-value="" ><span class="fa fa-phone"></span> </a> <br />		        
		        </div>
				<div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
		    <div class="normalThinRowStyle" >
		    	<div class='leftTitle' >E-mail(s):</div>
		        <div class='rightTitle' >
		        			        
		        	<a href="javascript:void(0);" id="af_leadGroomEmail" data-type="email"  data-title="Enter E-mail" class="editable editable-click" data-value="" ></a><br />
		        	<a href="javascript:void(0);" id="af_leadTwoEmail2" data-type="email"  data-title="Enter E-mail" class="editable editable-click" data-value="" ></a>		        </div>
				<div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
		    		    <div class="normalThinRowStyle">
		    	<div class='leftTitle' >Social:</div>
		        <div class='rightTitle' style="text-align: right;" >
		    				No social network accounts have been added				    	</div>
		    	<div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
		    		</div>
	</div>
	<br style="clear: both; " />
		<br style="clear: both;" />
	<div id="otherClientFields">
		
		<h4 class="font-grey-gallery bold"><i class="icon-location-3"></i> Address Info</h4>
		<hr class="hrSlim" />
		<div class="normalThinRowStyle" >
	    	<div class='leftTitle' >Primary Address:</div>
	        <div class='rightTitle' >
	        	<a href="javascript:void(0);" id="af_leadAddress{||}leadAddress1{||}leadCity{||}leadState{||}leadZip{||}leadCountry" data-type="address"  data-content="Click to Edit"  class="editable editable-click editable-address" data-value="{address:'',address1:'',city: 'New York City',state: '33',postal: '10110',country: '229'}">
					        	<br />
		        			        	New York City, NY  10110 ( United States )
	        	
	        		        	</a>
	        </div>
			<div class="clearSmall" ></div><br style="clear: both; " />
	    </div>
		<div class="normalThinRowStyle" >
	    	<div class='leftTitle' >Secondary Address:</div>
	        <div class='rightTitle' >
			<a href="javascript:void(0);" id="af_leadEmergContAddress{||}{||}leadEmergContCity{||}leadEmergContState{||}leadEmergContZip{||}leadEmergContCountry" data-type="address"  data-content="Click to Edit"  class="editable editable-click editable-address" data-value="{address:'',city: '',state: '',postal: '',country: ''}">
	        		        	</a>
	        </div>
			<div class="clearSmall" ></div><br style="clear: both; " />
	    </div>
	    
	    
	    <div id="notesLeadFields">
			 		    <br style="clear: both;" />
		    <br style="clear: both;" />
		    <h4 class="font-grey-gallery bold"><i class="icon-book-open"></i> Notes</h4>
			<hr class="hrSlim" />
		    
			<div class="normalThinRowStyle" >
				<div class='leftTitle' >Notes:</div>
				<div class='rightTitle' style="width: 100%; overflow: hidden;" > 
										<a href="javascript:void(0);" id="af_leadNotes" class="editable editable-click editable-notes" data-type="notesfield"  data-title="Enter Notes" class="editable editable-click"  >
						<p>This is a test lead.<br>PHOTOGRAPHER: This is a previous client. You will receive an email from clients@sweetmephotography with helpful information from the previous session and a link to the previous order.</p>					</a>
				</div>
				<div class="clearSmall" ></div><br style="clear: both; " />
			</div>
					</div>
	    
	    
	    	    <br style="clear: both;" />
	    <br style="clear: both;" />
	    <h4 class="font-grey-gallery bold"><i class="icon-user-female-profile"></i> Additional Info</h4>
		<hr class="hrSlim" />
	    
		<div class="normalThinRowStyle" >
			<div class='leftTitle' >Referred By:</div>
			<div class='rightTitle' ></div>
			<div class="clearSmall" ></div><br style="clear: both; " />
		</div>
		
		
		
		<div class="normalThinRowStyle" >
			<div class='leftTitle' >Date of first contact:</div>
			<div class='rightTitle' >
							
				<a href="javascript:void(0);" id="af_leadSignupDate" data-type="datepickerfield" data-format="mm/dd/yyyy"  data-content="Click to Edit"  class="editable editable-click editable-date" data-value="04/30/2025">04/30/2025</a>
			</div>
			<div class="clearSmall" ></div><br style="clear: both; " />
		</div>
			</div>
		<div id="customFieldsDIV">
		<div id="questitem_8225" class="normalThinRowStyle" >
		<div class="leftTitle" >
			<span id="item_8225_desc">BABY'S DUE DATE OR BIRTH DATE</span>
		</div>
		<div class="rightTitle">04/30/2025</div>
		<div class="clearSmall"></div><br style="clear: both;" />
	</div>
		</div>
		</div>
	
	
		
				<!-- ////////// TASKS ////////// -->
		<div class="portlet light bordered ">
			<div class="portlet-title">
				<div class="caption ">
					<i class="icon-clipboard-check"></i>
					<span class="caption-subject bold headerTitle">
						General Tasks
					</span>
					
				</div>
				<div class="actions">
										<div class="btn-group pull-right">
                        <button class="btn btn-default btn-sm dropdown-toggle" type="button" data-toggle="dropdown" aria-expanded="false"><span class="fa fa-plus font-green-jungle"></span> Add Task/Note
                            <i class="fa fa-angle-down"></i>
                        </button>
                        <ul class="dropdown-menu pull-right" role="menu">
                            <li>
                                <a href="javascript:;" onclick="getNewObjectTaskForm('12295', 'lead', '1615775',0);" ><span class="icon-clipboard-check"></span> Add Task </a>
                            </li>
                            <li>
                                <a href="javascript:;" onclick="getNewObjectTaskForm('12295', 'lead', '1615775',1);" ><span class="icon-note"></span> Add Note </a>
                            </li>
                        </ul>
                    </div>
									</div>
			</div>
			<div class="portlet-body">
				<div id="clientTasks" >
					<div id="lead_tasks_container" ><div id="no_tasks">There are no tasks...</div></div>				</div>
			</div>
		</div>
		<!-- ////////// TASKS ////////// -->
	
	
								<!-- ////////// ACTIVITY LOG ////////// -->
			<script type="text/javascript">
				$(function() {
					getObjectActivityLog('lead','1615775');
				});
			</script>
			<div class="portlet light bordered ">
				<div class="portlet-title">
					<div class="caption ">
						<i class="icon-heart-beat"></i> <span class="caption-subject bold headerTitle">	All Activity Log </span>
					</div>
					<div class="actions">
						<div id="loading_activity_log_lead" class="hidden" style="position: relative;right: 60px;">
							<div class="dot-container ">
								<div class="dot"></div>
								<div class="dot"></div>
								<div class="dot"></div>
								<div class="dot"></div>
								<div class="dot"></div>
							</div>
						</div>
					</div>
				</div>
				<div class="portlet-body">
					<div id="activity_log_lead" class="auditLog" >

					</div>
				</div>
			</div>
			
				<!-- ////////// ACTIVITY LOG ////////// -->
		
	
	
	</div><!-- ////////// end of col-7 ////////// -->
	
	
	<div id="actionPanel" class="col-md-5 col-sm-5 col-xs-5 portlet" style="padding-left:10px;" >

		<div id="sharingForm" class="portlet light bordered hidden">
			<div id="errorSharing" class="failure hidden" ></div>							
			<div class="normalRowStyle">
				<div class="leftTitle">Studio to send to: </div>
				<div class="rightTitle">
					    <select id="shareStudio" name="shareStudio" style="width: 200px;"  onchange="getShareLeadTypeForm(this.value);"  class="styled">
    	<option value="" > -- No Data to Display -- </option>    </select>
    				</div>
				<div class="clearSmall"></div><br style="clear: both;" />
			</div>
			<a href="javascript:void(0);" class="btn btn-default btn-sm" onclick="window.open('/admin/settings/sharing/');" ><span class="fa fa-external-link"></span> Manage Sharing</a>
			<div id="shareTypeDIV"></div>		
			<a href="javascript:void(0);" class="btn blue btn-sm" onclick="sendShareLead();" ><span class="fa fa-check"></span> Save</a>
			&nbsp; <a href="javascript:void(0);" class="btn default btn-sm" onclick="cancelSendShareLead();" > Cancel</a>		
		</div>
		
		
		<div id="archiveReasonDiv" class="hidden portlet light bordered">
			<br />
			<div style="float: left;" >Please choose a reason for archiving this lead: </div>
			    <select id="archiveReason" name="archiveReason" style="width: 300px;"  class="styled">
    	<option value="" > -- </option>
    				<optgroup label="User Created">
    				<option value="784"  >Attempted Booking - DATE</option>
<option value="783"  >Attempted Booking - ELEVATOR</option>
<option value="785"  >Attempted Booking - OTHER</option>
<option value="782"  >Attempted Booking - PARKING</option>
<option value="753"  >DID NOT PAY INVOICE</option>
<option value="779"  >No Elevator</option>
<option value="763"  >NO VACCINATED PHOTOGRAPHER AVAILABLE</option>
<option value="905"  >WANTING WEEKEND/AFTERNOON/EVENING</option>
<option value="544"  >Bad Zip Code</option>
<option value="737"  >PARKING</option>
<option value="709"  >PHOTOGRAPHER NEVER RESPONED TO REQUEST FOR TRAVEL</option>
<option value="637"  >Does not want to pay travel fee</option>
<option value="552"  >Duplicate</option>
<option value="543"  >Gift Card Info</option>
<option value="487"  >Lead Never Responded</option>
<option value="696"  >MODEL SESSION - DID NOT RESPOND WIHT QUESTIONNAIRE</option>
<option value="697"  >MODEL SESSION- NO QUESTIONNAIRE RECIEVED</option>
<option value="707"  >DO NOT CONTACT AGAIN</option>
<option value="562"  >No Longer Interested</option>
<option value="547"  >No Weekend Dates</option>
<option value="545"  >Too Far For Photographer</option>
<option value="689"  >TRAVEL FEE TURNED DOWN</option>
<option value="611"  >Wanted Grandparents (Extended Family)</option>
<option value="635"  >Wanted sooner date then we can provide</option>
<option value="546"  >Wanting Different Photography</option>
<option value="636"  >Wants Studio</option>
<option value="488"  >NO SMP Photographer Available</option>
<option value="350"  >Out of Service Area</option>
<option value="319"  >Baby Too Old</option>
<option value="508"  >Bad Email Address</option>
<option value="460"  >Area Not Ready</option>
<option value="749"  >Invoice Not Paid - Incomplete Booking</option>
<option value="499"  >MODEL - BABY NOT IN AGE RANGE</option>
<option value="534"  >CONVERTED TO MODEL SESSION</option>
<option value="502"  >MODEL SESSION - BACKED OUT</option>
<option value="509"  >MODEL SESSION - CANNOT USE THEM</option>
    				</optgroup>
    				    				<optgroup label="System Wide">
    				<option value="6"  >Already Booked</option>
<option value="2"  >Called Off</option>
<option value="4"  >Canceled by Studio</option>
<option value="5"  >Deceased</option>
<option value="3"  >Hired Competitor</option>
<option value="1"  >Lead Canceled</option>
<option value="9"  >Lost Contact</option>
<option value="10"  >Never Responded</option>
<option value="13"  >Other</option>
<option value="12"  >Out of Price Range/Budget</option>
<option value="7"  >Referred to Other Studio</option>
<option value="8"  >Spam/Junk</option>
<option value="11"  >Unavailable</option>
    				</optgroup>
    				    </select>
    			
			<br style="clear: both;" />
			<br style="clear: both;" />	
			<a href="javascript:void(0);" class="btn blue btn-sm" onclick="archiveLead('1615775');" ><span class="fa fa-check"></span> Archive</a> &nbsp; 
			<a href="javascript:void(0);" class="btn default btn-sm" onclick="cancelArchiveReason();" > Cancel</a>
		</div>
	
	
		<script type="text/javascript">
		$(function() {
			$('.roundedTag').qtip({
				style: { classes: 'qtip-rounded qtip-dark qtip-pixifi' },
				content: {
					attr: 'title'
				},
				position: {
			        viewport: $(window)
			    },
	            hide: {
	                fixed: true,
	                delay: 300
	            }
			});
		});
	
		function refreshLeadStaffListing() {
			$.ajax({	type: "POST",	url: "/admin/fn/leads/refreshLeadStaffListing/",
				data: {clientID: '12295', leadID: '1615775'},
				success: function(   data   ){			 
					var results = 			data.split("{|}");
					if(results[0] == "SUCCESS") {
						$("#staffListing").html(results[1]);
						
						$('.roundedTag').qtip({
							style: { classes: 'qtip-rounded qtip-dark qtip-pixifi' },
							content: {
								attr: 'title'
							},
							position: {
						        viewport: $(window)
						    },
				            hide: {
				                fixed: true,
				                delay: 300
				            }
						});
						
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		}
		function changeLeadStaffConfirmation(staffID) {
			$.ajax({	type: "POST",	url: "/admin/fn/leads/changeLeadStaffConfirmation/",
				data: {clientID: '12295',leadID: '1615775',staffID: staffID},
				success: function(   data   ){			 
					var results = 			data.split("{|}");
					if(results[0] == "SUCCESS") {
						
						
						modalContent = 			'<div class="modalBorderBox" style="width: 400px;">';
						modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-ID-card"></i> Change Staff Confirmation Status </div>';
						modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelSaveLeadStaffConfirmationStatus();" ><span class="icon-cancel"></span></a></div>';
						modalContent += 				'</div>';
						modalContent += 				results[1];
						modalContent += 			'</div>';
						modal.open({content: modalContent});
						
											
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		}
		function cancelSaveLeadStaffConfirmationStatus() {
			modal.close();
		}
		function saveLeadStaffConfirmationStatus(staffID,linkID) {
			var confirmationStatus = 			$("#eventStaffConfirmationStatus").val();
			
			$.ajax({	type: "POST",	url: "/admin/fn/leads/saveLeadStaffConfirmationStatus/",
				data: {clientID: '12295',leadID: '1615775', staffID: staffID, linkID: linkID, confirmationStatus: confirmationStatus},
				success: function(   data   ){			 
					var results = 			data.split("{|}");
					if(results[0] == "SUCCESS") {
						cancelSaveLeadStaffConfirmationStatus();
						refreshLeadStaffListing();
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		}
		function sendConfirmationStaffEmail(staffID) {
			$.ajax({	type: "POST",	url: "/admin/fn/leads/sendConfirmationLeadStaffEmail/",
				data: {clientID: '12295',leadID: '1615775', staffID: staffID},
				success: function(   data   ){			 
					var results = 			data.split("{|}");
					if(results[0] == "SUCCESS") {
						swal({
							type: 'success',
							title: 'Success!',
							html: "Your e-mail has been successfully sent",
							timer: 4000
						});
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
			
		}
		function showStaffAddForm() {
			$("#staffAddForm").slideDown();
		}
		function cancelAddStaff() {
			$("#staffAddForm").slideUp();
		}
		function cancelAddStaffToLead() {
			modal.close();
		}
		function refreshStaffRoleCombo(newValue) {
			$.ajax({	type: "POST",	url: "/admin/data/refreshStaffRoleCombo/",
				data: {clientID: '12295',comboName: 'eventStaffRoleID'},
				success: function(   data   ){			 
					var results = 			data.split("{|}");
					if(results[0] == "SUCCESS") {
						$("#addStaff_RoleComboHolder").html(results[1]);
						if(newValue != "") {
							$("#eventStaffRoleID").val(newValue);
							$("#eventStaffRoleID").change();
						}
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		}
		function showNewQuickLeadRole() {
			swal({
			    title: 'Add Staff Role',
			    html: '<p><div style="text-align: center; width: 250px; margin-left: auto; margin-right: auto;"><input id="quickStaffRoleName" class="form-control" /></div></p>',
			    showCancelButton: true,
			    closeOnConfirm: false
			},
			function(){
			    var title = 			$('#quickStaffRoleName').val(),
					error = 			"";
					
					error += 			(title == "") ? "Name is a required field<Br />" : "";
					
					if(error == "") {	
						
						$.ajax({	type: "POST",	url: "/admin/data/addEventStaffRole/",
							data: {clientID:'12295', title: title},
							success: function(   data   ){
								var results = 			data.split("{|}");
								if(results[0] == "SUCCESS") {
									
									refreshStaffRoleCombo(results[1]);
									//forcefully close the modal input window
									swal.closeModal();
									
								} else {
									swal({
										type: 'error',
										title: 'Error',
										html: results[1]
									});
								}
							}
						});
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: error
						});
					}
			});
		}
		function getAddStaffToLeadForm() {
			$.ajax({	type: "POST",	url: "/admin/fn/leads/getAddStaffToLeadForm/",
				data: {clientID: '12295',leadID: '1615775'},
				success: function(   data   ){
					var results = 			data.split("{|}");
					if(results[0] == "SUCCESS") {
						
						
						modalContent = 			'<div class="modalBorderBox" style="width: 500px;">';
						modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-ID-card"></i> Add Staff to Lead </div>';
						modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelAddStaffToLead();" ><span class="icon-cancel"></span></a></div>';
						modalContent += 				'</div>';
						modalContent += 				results[1];
						modalContent += 			'</div>';
						modal.open({content: modalContent});
						
						
						$('#modal [data-toggle="popover"]').popover({
							trigger: 'hover',
					        'placement': 'top',
					        'show': true,
					        container: 'body'
						});
						
						$("input[xclass=styled]:checkbox").iButton();
						
						$('#eventStaffID').selectize({
						    persist: false,
						    labelField: 'name',
						    searchField: ['name'],
						    render: {
						        option: function(item, escape) {
						        	let indx = 				item.$order;
						        	let childNodes = 		this.revertSettings.$children;
						        	let originalNode = 		'';//childNodes[indx];
						        	childNodes.each(function(i,e) {
						        		if(item.value == e.value) {
											originalNode = e;
										}
						        	});
						        	let colorStyle = 		"";
						        	
						        	if(originalNode.style.color != null && originalNode.style.color != undefined && originalNode.style.color != '') {
						        		colorStyle = 		" style='color: " + originalNode.style.color + " ' ";
						        	}
						            
						            return "<div>" +
						                "<span " + colorStyle + ">" + item.name + "</span>" +
						            "</div>";
						        }
						    },
						    onChange: function(value) {
								if (!value.length) return;
								checkStaffAvailabilityForLeadEvent(value);
						    }
						});
						
						/*var currentVal = 		$('#eventStaffID').val();
		   				$('#eventStaffID').combobox({
						  select: function( event, ui ) {
						  	
						  	var value = 		$(event.target).val();
						  	checkStaffAvailabilityForLeadEvent(value);
						  }
						});
		   				$('#eventStaffID').combobox('value', currentVal);*/
						
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		}
		function checkStaffAvailabilityForLeadEvent(staffID) {
			$("#leadStaffErrors").hide();
			$.ajax({	type: "POST",	url: "/admin/fn/leads/checkStaffAvailabilityForLeadEvent/",
				data: {clientID: '12295',leadID: '1615775',staffID: staffID},
				success: function(   data   ){
					var results = 			data.split("{|}");
					if(results[0] == "SUCCESS") {
						if(results[1] != '') {
							$("#leadStaffErrors").html(results[1]);
							$("#leadStaffErrors").slideDown('fast');
							
							$('.roundedTag').qtip({
								style: { classes: 'qtip-rounded qtip-dark qtip-pixifi' },
								content: {
									attr: 'title'
								},
								position: {
							        viewport: $(window)
							    },
					            hide: {
					                fixed: true,
					                delay: 300
					            }
							});
							
						}
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		}
		function addStaffMemberToLead() {
			var staffID = 			$('#eventStaffID').val(),
				roleID = 			$("#eventStaffRoleID").val(),
				autoConfirm = 		$("#eventStaffAutoConfirm:checked").val(),
				error = 			"";
				
				error += (staffID == "") ? "Please choose a Staff Member to assign to this Lead. <br />" : "";
				
				
			if(error == "") {	
				$.ajax({	type: "POST",	url: "/admin/fn/leads/assignStaffToLead/",
					data: {clientID: '12295',	leadID: '1615775', staffID: staffID, roleID: roleID, autoConfirm: autoConfirm},
					success: function(   data   ){
						var results = 			data.split("{|}");
						if(results[0] == "SUCCESS") {
							
							cancelAddStaffToLead();
							refreshLeadStaffListing();
							
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
			} else {
				swal({
					type: 'error',
					title: 'Error',
					html: error
				});
			}
		}
		
		function deleteStaffFromLead(staffLinkID) {
			swal({
			    title: 'Are you sure?',
			    html: 'Are you sure you want to remove this Staff Member from this Lead? <br /> This action can NOT be undone!',
			    type: 'warning',
			    showCancelButton: true,
			    confirmButtonColor: '#3085d6',
			    cancelButtonColor: '#d33',
			    confirmButtonText: 'Yes',
			    cancelButtonText: 'No',
			    confirmButtonClass: 'confirm-class',
			    cancelButtonClass: 'cancel-class',
			    closeOnConfirm: true,
			    closeOnCancel: true
			}, function(isConfirm) {
			    if (isConfirm) {
			    	$.ajax({type: 'POST',url: '/admin/fn/leads/removeStaffFromLead/',
						data: {clientID: '12295',	leadID: '1615775',staffLinkID: staffLinkID},
						success: function(data) {
							refreshLeadStaffListing();
						}
					});
			    } 
			});
		}
		function cancelEditStaffRole() {
			modal.close();
		}
		function showEditStaffRoleForm(staffID) {
			$.ajax({	type: "POST",	url: "/admin/fn/leads/getStaffToLeadRoleEditForm/",
				data: {clientID: '12295',leadID: '1615775',staffID: staffID},
				success: function(   data   ){
					var results = 			data.split("{|}");
					if(results[0] == "SUCCESS") {
						
						modalContent = 			'<div class="modalBorderBox" style="width: 500px;">';
						modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-ID-card"></i> Edit Staff Role for Lead </div>';
						modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelEditStaffRole();" ><span class="icon-cancel"></span></a></div>';
						modalContent += 				'</div>';
						modalContent += 				results[1];
						modalContent += 			'</div>';
						modal.open({content: modalContent});
	
											
						$('#modal [data-toggle="popover"]').popover({
							trigger: 'hover',
					        'placement': 'top',
					        'show': true,
					        container: 'body'
						});
											
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		}
		function updateStaffToLeadRole(staffID) {
			var roleID = 			$("#eventStaffRoleID").val();
			
			$.ajax({	type: "POST",	url: "/admin/fn/leads/updateStaffToLeadRole/",
				data: {clientID: '12295',leadID: '1615775', staffID: staffID, roleID: roleID},
				success: function(   data   ){			 
					var results = 			data.split("{|}");
					if(results[0] == "SUCCESS") {
						cancelEditStaffRole();
						refreshLeadStaffListing();
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		}
	
	</script>
    	
    
	<!-- Staff Info Module -->
		<div id="staff" class="portlet light bordered ">
		<div class="portlet-title">
			<div class="caption "><i class="icon-ID-card"></i><span class="caption-subject bold headerTitle">Staff</span></div>
			<div class="actions">
								<a href="javascript:;" onclick="getAddStaffToLeadForm();" class="btn btn-circle btn-default btn-sm">
					<i class="fa fa-plus font-green-jungle"></i> Assign Staff
				</a>
							</div>
		</div>
		<div class="portlet-body">
			<div id="staffListing">
					<div id="staff_670987" class="normalThinRowStyle" style="position: relative;">
		<div class="floatGrid" style="width: 80%;" class="smallText">
			<a href="/admin/staff/20040/" title="Click to view Staff Member in new window" target="_blank" >
								<strong>1 Pam  Funk </strong>
			</a>
			<br />PC PREVIOUS CLIENT COORDINATOR<br />			<div onclick="changeLeadStaffConfirmation('20040');" class="roundedTag" style="float: left; color: #ffffff; background-color: #26C281;">
        		<i class="icon-check-circle"></i> Confirmed: Yes    		</div>
    		    		    		


		</div>

			<div class="btn-group pull-right" style="position: absolute; right: 0px; top: 10px;">
				<button type="button" title="Actions" class="btn btn-xs btn-fit-height actionsBtn dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-delay="1000" data-close-others="true" aria-expanded="false">
					<i class="icon-more-circle actionsIcon"></i>
				</button>
				<ul class="dropdown-menu pull-right" role="menu">

											<li>
							<a href="javascript:void(0);" onclick="showEditStaffRoleForm('20040');" ><i class="icon-file-edit"></i> Edit Role </a>
						</li>

																		<li class="divider"></li>
						<li>
							<a href="javascript:void(0);" onclick="deleteStaffFromLead('670987');" class=" font-red-flamingo"> Remove Staff from Lead</a>
						</li>
															</ul>
			</div>

		<div class="clearSmall" ></div><br style="clear: both;" />

	</div>
				</div>
		</div>
	</div>
		<!-- Staff Info Module -->
<script type="text/javascript">
	function cancelInsertVariables() {
		modal.close();
	}
	function showInsertVariablesIntoLeadEventName() {
		$.ajax({	type: "POST", url: "/admin/data/showInsertVariablesIntoLeadEventName/",
			data: {clientID: '12295', leadID: '1615775'}, 
			success: function(   data   ){
				var results = data.split("{|}");			
				if(results[0]=="SUCCESS") {
										
					modalContent = 			'<div class="modalBorderBox" style="width: 550px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-rocket"></i> Insert Variables/Tokens </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelInsertVariables();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					updateVariablesList('eventName_variables', 'eventName_spinner');
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function updateVariablesList(varCombo, varSpinner) {
		$("#" + varSpinner).show();
		$.ajax({type: "GET", url: "/admin/data/getResponseVariables/",
			data: { clientID: '12295', type: 'lead' },
			success: function(   data   ){
		   		var results = data.split("{|}");
		   		var result = results[0];
		   		if(result == "SUCCESS") {
		   			var valuesObj = 		jQuery.parseJSON(results[1]);
		   			
		   			var variablesCombo = 	$('#' + varCombo);
		   				
		   			// First empty the combobox
		   			variablesCombo.empty();
		   			variablesCombo.append('<option value="" selected="selected"> -- </option>');
		   			
		   					   			
		   			var category = "";
		   			$.each(valuesObj, function(index, value) {
		   				
		   				if(category != value.category) {
							if(category != "") {
								variablesCombo.append('</optgroup>');
							}
							category = value.category;
							variablesCombo.append('<optgroup label="' + value.category + '">');
							
		   				}
		   				// Select optgroup by label, then append the new items to that group
		   				$('optgroup[label=' + value.category + ']',variablesCombo).append('<option value="' + value.varName + '">' + value.displayName + '</option>');
		   				
					});
					
					variablesCombo.change();
					
					$("#" + varSpinner).hide();
		   		}
			}
		});
	}

</script>


<div class="portlet light bordered " id="leadEvents">
	<div class="portlet-title">
		<div class="caption ">
		<i class="icon-calendar"></i><span class="caption-subject bold headerTitle"> Event Info</span>		</div>
		<div class="actions">
			
		</div>
	</div>
	<div class="portlet-body">
		
						<div class="normalThinRowStyle" >
					<div class='leftTitle' >Event Type:</div>
					<div class='rightTitle' >
						<a href="javascript:void(0);" id="af_leadType" data-type="select" data-value="127925" data-title="Select Event Type" class="editable editable-click editable-event-type" >
							NEWBORN INQUIRY						</a>
					</div>
					<div class="clearSmall" ></div><br style="clear: both; " />
				</div>
				<div class="normalThinRowStyle" >
					<div class='leftTitle' >Event Date:</div>
					<div class='rightTitle' > 
														<a href="javascript:void(0);" id="af_leadEventDate" data-type="datepickerfield" data-format="mm/dd/yyyy"  data-title="Choose Date" class="editable editable-click editable-date" data-value="">
																	</a> 												</div>
					<div class="clearSmall" ></div><br style="clear: both; " />
				</div>
				<div class="normalThinRowStyle" >
					<div class='leftTitle' >Event Start Time:</div>
					<div class='rightTitle' >
						<a href="javascript:void(0);" id="af_leadEventTimeStart" data-type="timepickerfield" data-title="Choose Time" class="editable editable-click editable-time" data-value="">
													</a>
					</div>
					<div class="clearSmall" ></div><br style="clear: both; " />
				</div>
				<div class="normalThinRowStyle" >
					<div class='leftTitle' >Event End Time:</div>
					<div class='rightTitle' >
						<a href="javascript:void(0);" id="af_leadEventTimeEnd" data-type="timepickerfield" data-title="Choose Time" class="editable editable-click editable-time" data-value="">
													</a>
					</div>
					<div class="clearSmall" ></div><br style="clear: both; " />
				</div>
				
				<div class="normalThinRowStyle" >
					<div class='leftTitle' >Event Name:</div>
					<div class='rightTitle' >
						<a href="javascript:void(0);" id="af_leadCustomEventName" data-type="text" data-title="Event Name" class="editable editable-click editable-time" data-value="Notes PC 1. Shawn Hughes">
							Notes PC 1. Shawn Hughes						</a>
					</div>
					<div class="clearSmall" ></div><br style="clear: both; " />
				</div>
				
				<br style="clear: both; " />
				<br style="clear: both; " />
					
	
	</div>
</div>
		<div class="normalThinRowStyle" >
		<div class="leftTitle" style="font-size: 11px;" >Read/Un-Read (New): <div id="status_view_1615775" style="display: none; float: right;"><img src="/admin/icons/indicator.gif" /></div></div>
		<div class="rightTitle" >	<input type="checkbox" id="leadRead_view" name="leadRead_view" class="{labelOn: 'Read', labelOff: 'Un-Read' , change: function(inputVal) { markAsReadUnread('1615775', inputVal , 'view' );$('#status_view_1615775').show(); } }" value="1" xclass="styled"    /> 	
			</div>
		<div class="clearSmall" ></div><br style="clear: both;" />
	</div>
		<script type="text/javascript">
		function showSharePricingPanel() {
			var error = 				"",
				vals = 					"",
				errorField = 			$("#errorPricingSharing");
				errorField.hide();
				
				
			$.ajax({	type: "POST",	url: "/admin/data/getSharePricingLeadForm/",
				data: {clientID: '12295', leadID: '1615775'},
				success: function(   data   ){
					var results = data.split("{|}");
					if(results[0] == "SUCCESS") {
						
						
						modalContent = 			'<div class="modalBorderBox" style="width: 900px;">';
						modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-basket-loaded"></i> Share Pricing </div>';
						modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelSendSharePricing();" ><span class="icon-cancel"></span></a></div>';
						modalContent += 				'</div>';
						modalContent += 				results[1];
						modalContent += 			'</div>';
						modal.open({content: modalContent});
						
											
						var editor = tinymce.get("lead_message");
						if(editor) {
							editor.destroy();
						}
						tinymce.init({
						    selector: "textarea.tinyMCEenable:not(.NoEditor)",
						    plugins: [
						        "advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
				                "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
				                "table directionality emoticons template textcolor paste textcolor" //contextmenu
						    ],
						    height: 400,
						    contextmenu: false,
						    browser_spellcheck: true,
						    toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | forecolor backcolor",
						    toolbar2: "styleselect formatselect fontselect fontsizeselect"
						});
						
						
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		}
		function cancelSendSharePricing() {
			modal.close();
		}
		function insertPricingPageURL() {
			var pricingPageID = 		$("#leadSharePricingID").val(),
				errorField = 			$("#errorPricingSharing");
				errorField.hide();
				
			if(pricingPageID != "") {
				
				
				var editor = tinymce.EditorManager.get('lead_message');
   				if(editor) {
					editor.insertContent('<a href="' + pricingPageID + '" target="_blank" >'+ pricingPageID + '</a>');
   				}
				
			} else {
				swal({
					type: 'error',
					title: 'Error',
					html: "Please choose which Pricing Page URL you'd like to insert into the message."
				});
				
			}
		}
		function populatePricingSendMessageWithData(clientID, objectName, objectID, responseID, messageField, subObjectType,subObjectID) {				
			applyEmailTemplateToObject(responseID,objectName,objectID,subObjectType,subObjectID,messageField);
		}
		function sendSharePricingPage() {
			var subject = 				$("#subject_pricing_send").val(),
				recipients = 			$("#recipient_pricing_send").val(),
				message = 				"",
				error = 				"",						
				errorField = 			$("#errorPricingSharing");
				errorField.hide();
				
				
				tinymce.triggerSave();
				message = 				$("textarea[name=lead_message]").val();				
				
				
				error += 			(recipients == "") ? "Please choose at least one recipient <br />" : "";
				error += 			(subject == "") ? "Subject is a required field <br />" : "";
				error += 			(message == "") ? "Message content is a required field <br />" : "";
								
			if(error == "") {
				$.ajax({	type: "POST",	url: "/admin/data/sharePricingPageWithLead/",
					data: {clientID: '12295', leadID: '1615775', brandID: '11473', subject: subject, message: message, recipients: recipients},
					success: function(   data   ){
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							cancelSendSharePricing();
							$("#successPricingSharing").slideDown();
							setTimeout(function(){
								$("#successPricingSharing").fadeOut("fast", function () {
									$("#successPricingSharing").hide();
								}); 
							}, 2000);
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
			} else {
				swal({
					type: 'error',
					title: 'Error',
					html: error
				});
			}
		}
		function insertEmailSignatureShare(messageField, studioID) {
			var brandID = 			$("#leadBrandID").val();
			
			//If the brandID is empty, just default to the normal signature
			if(brandID !== "") {
				$.ajax({type: 'POST',url: '/admin/data/getBrandEmailSignature/',
					data: {clientID:studioID, brandID: brandID},
					success: function(data) {
						var results = data.split("{|}");
				   		var result = results[0];
				   		if(result == "SUCCESS") {
				   			
				   			if(results[1] == "") {
				   				
				   				getNormalEmailSignatureShare(messageField, studioID);
				   				
				   			} else {
					   			var msg = "<br /><br />" + results[1];
					   			
					   			if(tinymce == undefined || tinymce == null) {
					   				$("#" + messageField).val(results[1]);	   				
					   			} else {
					   				var editor = tinymce.EditorManager.get(messageField)
					   				if(editor) {
										editor.insertContent(results[1]);
					   				} else {
					   					$("#" + messageField).val(results[1]);
					   				}
					   			}
				   			}
				   		} else {
				   			swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
				   		}
					}
				});
				
			} else {
				getNormalEmailSignatureShare(messageField, studioID);
			}
		}
		
		function getNormalEmailSignatureShare(messageField, studioID) {
			$.ajax({type: 'GET',url: '/admin/data/getSignature/',
				data: {clientID:studioID},
				success: function(data) {
					var results = data.split("{|}");
			   		var result = results[0];
			   		if(result == "SUCCESS") {
			   			var msg = "<br /><br />" + results[1];
			   			
			   			if(tinymce == undefined || tinymce == null) {
			   				$("#" + messageField).val(results[1]);	   				
			   			} else {
			   				var editor = tinymce.EditorManager.get(messageField)
			   				if(editor) {
								editor.insertContent(results[1]);
			   				} else {
			   					$("#" + messageField).val(results[1]);
			   				}
			   			}
			   		} else {
			   			swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
			   		}
				}
			});
		}
	</script>
	
	<div id="successPricingSharing" class="successful hidden" >Pricing Page has been shared successfully!</div>
	
	<div id="successSharing" class="successful hidden" >Lead has been shared successfully!</div>
	
	
	
	
		
		<!-- ////////// CATEGORIES ////////// -->
		<div class="portlet light bordered">
			<div class="portlet-title">
				<div class="caption "><i class="icon-tag "></i><span class="caption-subject bold headerTitle">Categories</span></div>
				<div class="actions">
										<a href="javascript:;" onclick="getAddObjectCategoryForm('lead','1615775');" class="btn btn-circle btn-default btn-sm"><i class="fa fa-plus font-green-jungle"></i> Add </a>
									</div>
			</div>
			<div class="portlet-body">
					<div id="categories" >

			<div id="errorCategory" class="failure hidden"></div>

		<br style="clear: both; " />
		<div id="categoryListing_1615775">
			<div id="none-categories" class="noneDIV">No categories have been added yet.</div>			</div>
		</div>
				</div>
		</div>
		<!-- ////////// CATEGORIES ////////// -->
		
		
		<script type="text/javascript">
	function populateFields (   globalLocID   ){
		if(globalLocID == "" || globalLocID == undefined ) {
			$('#editMasterLoc').attr('href' , "/admin/locations/");
		} else {
			$.ajax({	type: "POST",	url: "/admin/data/populateFieldsEventData/",
				data: {clientID: '12295', val: globalLocID },
				success: function(   data   ){
					var newArray = data.split("{|||}");
					$('#ppLocName').val(''+ newArray[0] +'');
					$('#ppLocDesc').val(''+ newArray[8] +'');
					$('#ppLocPhone').val(''+ newArray[7] +'');
					$('#ppLocAddress').val(''+ newArray[1] +'');
					$('#ppLocAddress1').val(''+ newArray[2] +'');
					$('#ppLocCity').val(''+ newArray[3] +'');
					$('#ppLocState').val(''+ newArray[4] +'');
					$('#ppLocState').change();
					$('#ppLocZip').val(''+ newArray[5] +'');
					$('#ppLocCountry').val(''+ newArray[6] +'');
					$('#ppLocCountry').change();
					$('#editMasterLoc').attr('href' , "/admin/locations/" + globalLocID + "/");
				}
			});
		}
	}

	function launchMasterLocation() {
		window.open($('#editMasterLoc').val());
	}
	function cancelShowAddLocation() {
		$("#addLocationForm").slideUp();
		modal.close();
		$("#errorLocation").hide();
	}
	function showAddLocation() {
		$("#locationLoading").show();
		$.ajax({type: 'POST', url: '/admin/fn/leads/getAddLocationToLeadForm/',
			data: {clientID: '12295', leadID: '1615775'},	//useModalWindow: 'yes'
			success: function (data) {
				var results = 			data.split("{|}");
				$("#locationLoading").hide();
				if (results[0] == "SUCCESS") {
					modalContent = 			'<div class="modalBorderBox" style="width: 530px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-directions"></i> Add Location </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelShowAddLocation();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					var input = document.getElementById('ppLocAddress');
					var autocomplete = new google.maps.places.Autocomplete(input);
					autocomplete.addListener('place_changed', function () {
						
						var place = autocomplete.getPlace();
						// place variable will have all the information you are looking for.
						//$('#lat').val(place.geometry['location'].lat());
						//$('#long').val(place.geometry['location'].lng());
						var address = 							"",
							city = 								"",
							state = 							"",
							postal = 							"",
							country = 							"";
							
						for (var i = 0; i < place.address_components.length; i++) {
							
							var addressType = place.address_components[i].types[0];
							
							switch(addressType) {
								case "street_number":
									address = 					place.address_components[i].short_name;
									break;
								case "route":
									address += 					" " + place.address_components[i].long_name;
									break;
								case "locality":
								case "neighborhood":
									city = 						place.address_components[i].long_name;
									break;
								case "administrative_area_level_1":
									state = 					place.address_components[i].long_name;
									break;
								case "postal_code":
									postal = 					place.address_components[i].short_name;
									break;
								case "country":
									country = 					place.address_components[i].long_name;
									break;
							}
						}
						let existingLocationName = 				$("#ppLocName").val();
						if(existingLocationName == '') {
							$("#ppLocName").val(place.name);
						}

						$("#ppLocAddress").val(address);
						$("#ppLocCity").val(city);
						$("#ppLocZip").val(postal);
						
						getCountryIDFromCountryName(country, function(countryID) {
							var currentVal = 			$("#ppLocCountry").val();
							if(countryID != currentVal) {
								$("#ppLocCountry").val(countryID);
								$("#ppLocCountry").change();
							}
							getStateIDFromStateName(state, function(stateID) {
								$("#ppLocState").val(stateID);
								$("#ppLocState").change();
							});
						});
					});
					
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function addLocation() {
		var name = 						$("#ppLocName").val(),
			desc = 						"",
			phone = 					$("#ppLocPhone").val(),
			address = 					$("#ppLocAddress").val(),
			address1 = 					$("#ppLocAddress1").val(),
			city = 						$("#ppLocCity").val(),
			state = 					$("#ppLocState").val(),
			postal = 					$("#ppLocZip").val(),
			country = 					$("#ppLocCountry").val(),
			time = 						$("#ppLocEventTime").val(),
			masterLocID = 				$("#masterLocID").val(),
			error = 					"";
			
			error += 					(address == "") ? "Address is required<br />" : "";
			error += 					(name == "") ? "Location Name is required<br />" : "";
			
			if(tinyMCE) {
				tinyMCE.triggerSave();
			}
			
			desc = 							$("textarea[name=ppLocDesc]").val();
			
		if(error == "") {
			$.ajax({	type: "POST",	url: "/admin/data/addLocationToLead/",
			   data: {clientID: '12295',leadID: '1615775', name: name, desc: desc, phone: phone, 
			   			address: address, address1: address1, city: city, state: state, postal: postal, 
			   			country: country, time: time, masterLocID: masterLocID},
			   success: function(   data   ){
			   		var results = data.split("{|}");
			   		if(results[0] == "SUCCESS") {

						refreshLeadLocationsListing();
				 		cancelShowAddLocation();
				 						 		
			   		} else {
			   			swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
			   		}				 					 
			   }
			 });
		} else {
			swal({
				type: 'error',
				title: 'Error',
				html: error
			});
		}
	}
	
	function editLeadLocation(locationID) {
		$.ajax({type: 'POST', url: '/admin/fn/leads/getEditLeadLocationForm/',
			data: {clientID: '12295', locationID: locationID, leadID: '1615775', useModalWindow: 'yes'},
			success: function (data) {
				var results = 			data.split("{|}");
				if (results[0] == "SUCCESS") {
					modalContent = 			'<div class="modalBorderBox" style="width: 530px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-directions"></i> Edit Location </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelShowAddLocation();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	
	function cancelEditLeadLocation(locationID) {
		$("#editLocation_" + locationID).slideUp();
		modal.close();
		$("#errorLocation").hide();
	}
	function updateLeadLocation(locationID) {
		var name = 						$("#ppLocName_" + locationID).val(),
			desc = 						"",
			phone = 					$("#ppLocPhone_" + locationID).val(),
			address = 					$("#ppLocAddress_" + locationID).val(),
			address1 = 					$("#ppLocAddress1_" + locationID).val(),
			city = 						$("#ppLocCity_" + locationID).val(),
			state = 					$("#ppLocState_" + locationID).val(),
			postal = 					$("#ppLocZip_" + locationID).val(),
			country = 					$("#ppLocCountry_" + locationID).val(),
			time = 						$("#ppLocEventTime_" + locationID).val(),
			error = 					"";
			
			error += 					(address == "") ? "Address is required<br />" : "";
			error += 					(name == "") ? "Location Name is required<br />" : "";
			
			if(tinyMCE) {
				tinyMCE.triggerSave();
			}
			
			desc = 						$("textarea[name=ppLocDesc_" + locationID + "]").val();
			
		if(error == "") {
			$.ajax({	type: "POST",	url: "/admin/data/editLeadLocation/",
			   data: {clientID: '12295',locationID: locationID, leadID: '1615775', name: name, desc: desc, phone: phone, 
			   			address: address, address1: address1, city: city, state: state, postal: postal, 
			   			country: country, time: time},
			   success: function(   data   ){
			   		var results = data.split("{|}");
			   		if(results[0] == "SUCCESS") {

						refreshLeadLocationsListing();
				 		cancelEditLeadLocation(locationID);
				 						 		
			   		} else {
			   			swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
			   		}				 					 
			   }
			 });
		} else {
			swal({
				type: 'error',
				title: 'Error',
				html: error
			});
		}
	}
	function removeLocationFromLead(locationID) {
		swal({
			title: 'Are you sure?',
			html: 'Are you sure you would like to delete this location? <br /> This action can NOT be undone!',
			type: 'warning',
			showCancelButton: true,
			confirmButtonColor: '#3085d6',
			cancelButtonColor: '#d33',
			confirmButtonText: 'Yes',
			cancelButtonText: 'No',
			confirmButtonClass: 'confirm-class',
			cancelButtonClass: 'cancel-class',
			closeOnConfirm: true,
			closeOnCancel: true
		}, function(isConfirm) {
			if (isConfirm) {
				$.ajax({	type: "POST",	url: "/admin/data/removeLocationFromLead/",
					data: {clientID: '12295',locationID: locationID, leadID: '1615775'},
					success: function(   data   ){
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							refreshLeadLocationsListing();
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
			}
		});
	}
	
	function createMasterLocationFromLeadLocation(locationID) {
		$.ajax({	type: "POST",	url: "/admin/data/createMasterLocationFromLeadLocation/",
		   data: { clientID: '12295', leadID: '1615775', locationID: locationID  },
		   success: function(   data   ){			 
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") { 
		   			swal({
						type: 'success',
						title: 'Success!',
						html: "Master Location created successfully!",
						timer: 4000
					});
			 	} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}				 
		   }
		 });
	}

	function refreshLeadLocationsListing() {
		$.ajax({	type: "POST",	url: "/admin/fn/leads/refreshLeadLocationsListing/",
			data: { clientID: '12295', leadID: '1615775'},
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#locations").html(results[1]);
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	$(function() {
		refreshLeadLocationsListing();
	});
</script>

<div class="portlet light bordered " id="leadLocations">
	<div class="portlet-title">
		<div class="caption "><i class="icon-directions"></i><span class="caption-subject bold headerTitle"> Locations</span></div>
		<div class="actions">
			<div id="locationLoading" class="hidden" style="float: right;"><img src="/admin/icons/tiny_spinner.gif" align="absmiddle" /></div>
							<a href="javascript:;" onclick="showAddLocation();" class="btn btn-circle btn-default btn-sm">
					<i class="fa fa-plus font-green-jungle"></i> Add 
				</a>
					</div>
	</div>
	<div class="portlet-body">
		<div id="locations">
		
					</div>
	
	
	</div>
</div>
		<script type="text/javascript">
	
	function cancelAddQuickVendor() {
		modal.close();
	}
	function showNewQuickVendorForm() {
		$.ajax({	type: "POST",	url: "/admin/fn/vendors/getQuickVendorForm/",
		   data: {	clientID: '12295',addToLead: 'yes'},
		   success: function(   data   ){
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					modalContent = 			'<div class="modalBorderBox" style="width: 900px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-people"></i> Add Quick Vendor </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelAddQuickVendor();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					$(".popover").remove();
					
					$('div#rating').raty({
						'hintList':		['1', '2', '3', '4', '5'], //['bad', 'poor', 'regular', 'good', 'gorgeous'],
						'number':       5,
						'readOnly':     false,
						'scoreName':    'rating-score',
						'cancel':   true,
						'showHalf':     false
					});
					
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
		   }
		});
	}
	function saveNewQuickVendor() {
		var brandID = 				$("#venBrandID").val(),
			type = 					$("#venType").val(),
			company = 				$("#venCompanyName").val(),
			address = 				$("#venAddress").val(),
			address1 = 				$("#venAddress1").val(),
			city = 					$("#venCity").val(),
			state = 				$("#venState").val(),
			postal = 				$("#venZip").val(),
			country = 				$("#venCountry").val(),
			phone = 				$("#venPhone").val(),
			phone1 = 				$("#venPhone1").val(),
			email = 				$("#venEmail").val(),
			email1 = 				$("#venEmail1").val(),
			contactFirst = 			$("#venContactFirst").val(),
			contactLast = 			$("#venContactLast").val(),
			contactTitle = 			$("#venContactTitle").val(),
			url = 					$.URLEncode($("#venURL").val()),
			notes = 				$("#venNotes").val(),
			rating = 				$("#rating-score").val();
		
			$.ajax({	type: "POST",	url: "/admin/fn/vendors/addVendor/",
			   data: {	clientID: '12295', brandID: brandID, type: type, company: company, address: address, address1: address1, city: city,
			   			state: state, postal: postal, country: country, phone: phone, phone1: phone1, email: email, email1: email1,
			   			contactFirst: contactFirst, contactLast: contactLast,  contactTitle: contactTitle, url: url, notes: notes, rating: rating },
			   success: function(   data   ){
					var results = data.split("{|}");
					if(results[0] == "SUCCESS") {
						  refreshVendorsCombo(results[2]);
						  cancelAddQuickVendor();
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: error
						});
					}
			   }
			});
	}

	function showVendorAddForm() {
		$.ajax({	type: "POST",	url: "/admin/fn/leads/getAddVendorToLeadForm/",
			data: {clientID: '12295',	leadID: '1615775'},
			success: function(   data   ){
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					
					modalContent = 			'<div class="modalBorderBox" style="width: 625px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-people"></i> Add Vendor </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelAddVendor();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					$('#modalContent [data-toggle="popover"]').popover({
						trigger: 'hover',
				        'placement': 'top',
				        'show': true,
				        container: 'body'
					});
					
					
					var currentVal = 		$('#vendorID').val();
		   				$('#vendorID').combobox();
		   				$('#vendorID').combobox('value', currentVal);
					
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
		
	}
	function cancelAddVendor() {
		modal.close();
	}
	function refreshVendorsCombo(newValue) {
		$.ajax({	type: "POST",	url: "/admin/fn/vendors/refreshVendorCombo/",
			data: {clientID: '12295',comboName: 'vendorID'},
			success: function(   data   ){			 
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#leadVendorLink_ComboHolder").html(results[1]);
					if(newValue != "") {
						$("#vendorID").val(newValue);
						$("#vendorID").change();
					}
					
					var currentVal = 		$('#vendorID').val();
		   				$('#vendorID').combobox();
		   				$('#vendorID').combobox('value', currentVal);
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function addVendorToLead() {
		var vendorID = 			$("#vendorID").val(),
			error = 			"",
			errorField = 		$("#errorVendor");
			errorField.hide();
			//Quick Validation
			error += (vendorID == "") ? "Please choose a vendor to add to this lead. <br />" : "";
		if(error == "") {	
			$.ajax({	type: "POST",	url: "/admin/fn/leads/addVendorToLead/",
				data: {clientID: '12295',	leadID: '1615775', vendorID: vendorID},
				success: function(   data   ){
					var results = 			data.split("{|}");
					if(results[0] == "SUCCESS") {
						cancelAddVendor();
						
						refreshLeadVendorsListing();
						
						
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		} else {
			swal({
				type: 'error',
				title: 'Error',
				html: error
			});
		}
	}
	function deleteVendorFromLead(vendorLinkID) {
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you want to remove this vendor from this lead? <br /> This action can NOT be undone!',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: true,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({type: 'POST',url: '/admin/fn/leads/deleteVendorFromLead/',
					data: {clientID: '12295',	leadID: '1615775',vendorLinkID: vendorLinkID},
					success: function(data) {
						refreshLeadVendorsListing();
					}
				});
		    } 
		});
	}
	function exportVendors() {
		window.open('/admin/leads/exportvendors/12295/1615775/');
	}
	
	
	
	function refreshLeadVendorsListing() {
		$.ajax({	type: "POST",	url: "/admin/fn/leads/refreshLeadVendorsListing/",
			data: {clientID: '12295', leadID: '1615775'},
			success: function(   data   ){			 
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#vendorListing").html(results[1]);
					
					$('.roundedTag').qtip({
						style: { classes: 'qtip-rounded qtip-dark qtip-pixifi' },
						content: {
							attr: 'title'
						},
						position: {
					        viewport: $(window)
					    },
			            hide: {
			                fixed: true,
			                delay: 300
			            }
					});
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	
	
	//Vendor Questionnaires
	function showAddQuestionnaireToVendor(vendorID) {
		$.ajax({	type: "POST",	url: "/admin/fn/quest/getAddQuestionnaireToObjectForm/",
			data: {clientID: '12295', objType: 'lead', objID: '1615775', subObjectType: 'vendor', subObjectID: vendorID},
			success: function(   data   ){			 
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					modalContent = 			'<div class="modalBorderBox" style="width: 800px;">';
					modalContent += 			'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-write-2"></i> Add Questionnaire to Vendor </div>';
					modalContent += 			'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelShowQuestionnaireLaterToVendor();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 			'</div>';
					modalContent += 			results[1];
					modalContent += 		'</div>';
					
					$("#globalQuestionnaireDialog").html(modalContent);
					$("#globalQuestionnaireDialog").popup({
						blur: false,
						opacity: 0.3,
						transition: 'all 0s'
					});
					$("#globalQuestionnaireDialog").popup('show');
					
					var editor = tinymce.get("message_questionnaire");
						if(editor) {
							editor.destroy();
						}
						tinymce.init({
						    selector: "#message_questionnaire",
						    plugins: [
						        "advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
				                "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
				                "table directionality emoticons template textcolor paste textcolor" //contextmenu
						    ],
						    browser_spellcheck: true,
						    toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | forecolor backcolor",
						    toolbar2: "styleselect formatselect fontselect fontsizeselect"
						});
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function saveQuestionnaireTemplateToVendor(objType, objID, customerID, subObjectType, subObjectID) {
		var brandID = 				$('#questionnaire_brand').val(), 
			templateID = 			$('#questionnairetemplate').val(),
			responseID = 			$('#responses_quest_send').val(),
			sendEmail = 			$("#sendQuestionnaireEmail").val(),
			recipients = 			$('#recipients_' + objType).val(),
			responseSubject = 		$('#subject_questionnaire').val(),
			messageField = 			'message_questionnaire',
			error = 				"",
			errorField = 			$("#errorQuest");
			
			errorField.hide();
			
			tinyMCE.triggerSave();
			
			
			tinyMCE.triggerSave();
			responseMsg = 			$("textarea[name="+ messageField +"]").val();
			
			
			error += 				(templateID == "") ? "You must choose a questionnaire template<br />" : "";
			error += 				(brandID == "") ? "You must choose a brand<br />" : "";
			
			if(sendEmail == "1") {
				error += 			(recipients == "") ? "Please choose or enter a recipient's e-mail address<br />" : "";
				error += 			(responseSubject == "") ? "Please enter a subject<br />" : "";
				error += 			(responseMsg == "") ? "Please enter something as the e-mail message.<br />" : "";
			}
			
			if(error == "") {
				$.ajax({	type: "POST",	url: "/admin/fn/quest/addQuestionnaireTemplateToObject/",
					data: {clientID: '12295', templateID: templateID, objType: objType, objID: objID, brandID: brandID, subObjectType: subObjectType, subObjectID: subObjectID,
							customerID: customerID, sendEmail: sendEmail, responseID: responseID, recipients: recipients, responseSubject: responseSubject, 
							responseMsg: responseMsg, responseType: 'questionnaire'},
					success: function(   data   ){			 
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							refreshQuestionnaireToObjectListing();
							cancelAddNewQuestionnaireToStaff();
							refreshEventVendorsListing();
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
			} else {
				swal({
					type: 'error',
					title: 'Error',
					html: error
				});
			}		
	}
	function cancelShowQuestionnaireLaterToVendor() { modal.close(); $("#globalQuestionnaireDialog").popup('hide'); }
	function showSendQuestionnaireLaterFilterToVendor(objectType,objectID, subObjectType, subObjectID,dateType) {
		$.ajax({type: 'POST',url: '/admin/fn/quest/showSendQuestionnaireLaterFilterForm/',
			data: {clientID:'12295', objectType: objectType, objectID: objectID, dateType: dateType, subObjectType: subObjectType, subObjectID: subObjectID},
			success: function(data) {
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			
		   			modalContent = 				'<div class="modalBorderBox" style="width: 300px; ">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-clock"></i> Send Later </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);"  onclick="cancelShowQuestionnaireLaterToVendor();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					$("#modal").css('z-index','567746');
					$("#overlay").css('z-index','299992');
					
					$('input.date_picker').jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	function sendNewObjectQuestionnaireLaterToVendor(objectType,objectID, subObjectType, subObjectID, dateType) {
		tinymce.triggerSave();
		var dateInput = 			$("#specificDate_" + objectType + "_" + objectID).val(),
			timeInput = 			$("#specificTime_" + objectType + "_" + objectID).val();
		
		var formData = 				$("#globalQuestionnaireDialog").find("select, textarea, input").serializeArray();
			formData.push({name: 'clientID',value:'12295'});
			formData.push({name: 'objectType',value: objectType});
			formData.push({name: 'objectID',value:objectID});
			formData.push({name: 'subObjectType',value: subObjectType});
			formData.push({name: 'subObjectID',value:subObjectID});
			formData.push({name: 'dateType',value:dateType});
			formData.push({name: 'dateInput',value:dateInput});
			formData.push({name: 'timeInput',value:timeInput});
		
			$("#sendEmailBtnTop").attr('disabled',true);
			$("#sendEmailBtn").attr('disabled',true);
			
			$("#objectEmailSendingLoad").show();
			
		$.ajax({type: 'POST',url: '/admin/fn/quest/sendNewObjectQuestionnaireLater/',
			data: formData,
			success: function(data) {
				
				$("#objectEmailSendingLoad").hide();
				
				cancelShowLater();
				
				$("#sendEmailBtnTop").attr('disabled',false);
				$("#sendEmailBtn").attr('disabled',false);
				
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			swal({
						type: 'success',
						title: 'Success!',
						html: "Scheduled to Send successfully!",
						timer: 4000
					});
					
					closeObjectEmailWindow();
					cancelAddNewQuestionnaireToStaff();
					cancelAddObjectQuestionnaire();
					
					refreshEventVendorsListing();
					
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	
</script>
<!-- Vendors Module -->
<div id="vendors" class="portlet light bordered ">
	<div class="portlet-title">
		<div class="caption "><i class="icon-people"></i><span class="caption-subject bold headerTitle">Vendors</span></div>
		<div class="actions">
						<a href="javascript:;" onclick="showVendorAddForm();" class="btn btn-circle btn-default btn-sm">
				<i class="fa fa-plus font-green-jungle"></i> Add Vendor
			</a>
			<a href="javascript:;" onclick="exportVendors();" class="btn btn-circle btn-default btn-sm">
				<i class="fa fa-external-link"></i> Export Vendors
			</a>
					</div>
	</div>
	<div class="portlet-body">
		<style type="text/css">
       		#leadVendorLink_ComboHolder .ui-combobox {
            	width: 420px !important;
       		}
        </style>
		<div id="vendorListing">
					</div>
	</div>
</div>
<!-- Vendors Module -->
		<script type="text/javascript">
	function saveNewEvent() {
		var brandID = 			$("#event_brandID").val(),
			customerID = 		$("#eventCustID").val(),
			eventDate = 		$("#dateofevent").val(),
			timeZoneID = 		$("#eventTimezone").val(),
			eventType = 		$("#eventType").val(),
			eventName = 		$("#eventName").val(),
			eventCustomJOBName = $("#eventCustomJobID").val(),	//added on [10.07.22] : TH
			eventStart = 		$("#eventTimeStart").val(),
			eventEnd = 			$("#eventTimeEnd").val(),
			eventArrivalTime = 	$("#eventArrivalTime").val(),
			bridalParty = 		$("#eventNumInBridalParty").val(),
			guests = 			$("#eventNumOfGuests").val(),
			notes = 			$("#eventNotes").val(),
			reminderTemplateID = $("#reminderTemplate_event").val(),
			workflowTemplateID = $("#workflowTemplate_event").val(),
			statusID = 			$("#eventStatusID").val(),
			locationIDs = 		$("#locationsToAdd").val(),
			categoryIDs = 		$("#category_event").val(),

			isMultiDay = 		$("input[name=eventIsMultiDay]:checked").val(),
			endDate = 			$("#eventEndDateTimeStamp").val();

			if(locationIDs !== undefined && locationIDs !== null) {
				if(locationIDs.length > 0) {
					locationIDs = 		locationIDs.join(",");
				}
			}
			if(categoryIDs !== undefined && categoryIDs !== null) {
				if(categoryIDs.length > 0) {
					categoryIDs = 		categoryIDs.join(",");
				}
			}
			
			$("#addEventBtnWindow").attr('disabled','disabled');
			$("#addEventBtnIcon").removeClass('fa-check');
			$("#addEventBtnIcon").addClass('fa-refresh fa-spin');
			
		$.ajax({type: "POST",url: "/admin/fn/events/addEvent/",
			data: {clientID: '12295', customerType: 'lead', brandID: brandID,customerID: customerID, date: eventDate, type: eventType,
					name: eventName, eventCustomJOBName: eventCustomJOBName, start: eventStart, end: eventEnd, eventArrivalTime: eventArrivalTime, bridalParty: bridalParty,
					guests: guests, notes: notes, isMultiDay: isMultiDay, endDate: endDate, reminderTemplateID: reminderTemplateID,
				workflowTemplateID: workflowTemplateID,locationIDs: locationIDs, categoryIDs: categoryIDs, statusID: statusID, timeZoneID: timeZoneID },
			success: function(   data   ){
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					cancelNewEvent();
					
					swal({
					    title: 'Success!',
					    html: 'Would you like to edit the new event now?',
					    type: 'success',
					    showCancelButton: true,
					    confirmButtonColor: '#3085d6',
					    cancelButtonColor: '#d33',
					    confirmButtonText: 'Yes',
					    cancelButtonText: 'No',
					    confirmButtonClass: 'confirm-class',
					    cancelButtonClass: 'cancel-class',
					    closeOnConfirm: true,
					    closeOnCancel: true
					}, function(isConfirm) {
					    if (isConfirm) {
					    	location.href="/admin/events/" + results[1] + "/";
					    } 
					});
				} else {
					swal({type: 'error',title: 'Error',html: results[1]});
				}
				
				$("#addEventBtnWindow").attr('disabled',false);
				$("#addEventBtnIcon").removeClass('fa-refresh fa-spin');
				$("#addEventBtnIcon").addClass('fa-check');
			}
  		});
	}
	function showAddEvent() {
		var error = 			"",
			errorField = 		$("#errorEvents");
			
			errorField.hide();
			
			$("#eventsLoading").show();
			
		$.ajax({type: 'POST', url: '/admin/fn/events/getAddEventForm/',
			data: {clientID: '12295', useModalWindow: 'yes',customerType:'lead',customerID: '1615775'},
			success: function (data) {
				var results = 			data.split("{|}");
				
				$("#eventsLoading").hide();
				
				if (results[0] == "SUCCESS") {					
					modal.open({content: '<div id="errorEventsModal" class="failure hidden"></div>' + results[1]});
					
					
					$("#locationsToAdd").multiselect({
						noneSelectedText: "Select Location(s)",
						header: false,
						selectedList: 1,
						height: 250
					});
					$("#category_event").multiselect({
						noneSelectedText: "Select Categories",
						header: false,
						selectedList: 1,
						height: 250
					});
					
					$("input[xclass=styled]:checkbox").iButton();
					$('#dateofevent.date_picker').jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					$('#eventEndDateTimeStamp.date_picker').jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					$('input.timepicker').timepicker({
						interval: 15,
						timeFormat: 'h:mm p',						scrollbar: true,
						change: function(time) {
				            var picker = $(this).timepicker({timeFormat: 'h:mm p'}),
				            	fieldID = 	$(this).attr('id').replace('_chooser','');
				            	$("#" + fieldID).val(formatAMPM(time));
				            	
				            	updateEndTime('eventTimeStart','eventTimeEnd','standard');
				            	
				        }
					});
					
					
									
				} else {
					swal({ 								type: 'error', 								title: 'Error', 								html: results[1] 							});
				}
			}
		});
	}
	function cancelNewEvent() {
		modal.close();
	}
	function switchMultiDayEvent(status) {
		var isChecked = status.is(":checked");
		if(isChecked) {
			$("#endDateDiv").show();
		} else {
			$("#endDateDiv").hide();
		}
	}
	function getEventTypeDuration(eventTypeID) {
		$.ajax({	type: "POST",	url: "/admin/fn/events/getEventTypeDuration/",
			data: {clientID: '12295', eventTypeID: eventTypeID},
			success: function(   data   ){			 
				var results = 		data.split("{|}");
		   		if(results[0] == "SUCCESS") {
					if(results[1] != "") {
						var dataArray = 	$.JSON.decode(results[1]);
						$("#durationAmount").val(dataArray.durationAmount);
						$("#durationType").val(dataArray.durationType);
					}
				}
			}
		});
	}
	function updateEndTime(fieldName,fieldToUpdate,timeFormat) {
		var durationAmount = 		$("#durationAmount").val(),
			durationType = 			$("#durationType").val(),
			theField = 				$("#" + fieldName),
			startTimeValue = 		theField.val().split(':'),
			ampmField = 			startTimeValue[2],
			theFieldUpdate = 		$("#" + fieldToUpdate),
			theTimeFieldUpdate = 	$("#" + fieldToUpdate + "_chooser"),						
			minutes = 				startTimeValue[1],
			hours = 				startTimeValue[0];
			
		if(durationType !== "") {				
			switch(durationType) {
				case "minutes":
					if((minutes + durationAmount) > 60) {
						minutes = 	((parseInt(minutes) + parseInt(durationAmount)) - 60);
						hours = 	(parseInt(hours) + 1);
					} else {
						minutes = 	(parseInt(minutes) + parseInt(durationAmount));
					}
					break;
				case "hours":
					hours = 		(parseInt(hours) + parseInt(durationAmount));
					if(minutes !== "") {
						minutes = 	parseInt(minutes);
					}
					break;	
			}
			
			if(timeFormat == "military") {
				if(hours > 12) {
					hourVal = 			(hours - 12);
					minVal = 			minutes;
					ampmVal = 			"pm";
				} else if(hours == 12) {
					hourVal = 			hours;
					minVal = 			minutes;
					ampmVal = 			"pm";
				} else {
					hourVal = 			hours;
					minVal = 			minutes;
					ampmVal = 			"am";
				}
			} else {
				hourVal = 				hours;
				minVal = 				minutes;
				ampmVal = 				ampmField;
			}
			
			if(isNaN(minVal)) {
				minVal = 				0;
			}
			minVal = 					padNumber(minVal);
			
			theFieldUpdate.val(hourVal + ":" + minVal + ":" + ampmVal);
			theTimeFieldUpdate.val(hourVal + ":" + minVal + " " + ampmVal);
			theTimeFieldUpdate.change();
		}
	}
	function padNumber(number) {
		return (number < 10 ? '0' : '') + number;
	}
</script>

<div class="portlet light bordered " id="leadEvents">
	<div class="portlet-title">
		<div class="caption">
			<i class="icon-calendar "></i><span class="caption-subject bold headerTitle"> Additional Events </span>
						<a href="javascript:void(0);" class="helpTip" data-titlebar="true" data-style="qtip-tipsy" data-tooltip="&lt;h2&gt;Additional Events:&lt;/h2&gt;&lt;br /&gt;This section is intended for any other type of sub-Event relative to your main Event.  For example, phone consultations, in-person appointments, or any other pre-booking meetings that you want on your Calendar, want to log mileage for, etc.  All of these additional Events will eventually be on record once your Lead officially books their event with your studio!&lt;br /&gt;" ><i class="fa fa-question-circle"></i></a>
		</div>
		<div class="actions">
			<div id="eventsLoading" class="hidden" style="float: right;"><img src="/admin/icons/tiny_spinner.gif" align="absmiddle" /></div>
						<a href="javascript:;" onclick="showAddEvent();" class="btn btn-circle btn-default btn-sm">
				<i class="fa fa-plus font-green-jungle"></i> Add 
			</a>
					</div>
	</div>
	<div class="portlet-body">
		
		
		
		<div id="errorEvents" class="hidden failure"></div>
		<div id="addEventsForm" class="hidden greenBorderBox"></div>	
		<div id="eventsListing" >
		
			<div id="none-loc" class="noneDIV">No events have been added yet.</div>		</div>
	
	
	</div>
</div>


	
		
		
		
		
		
		
		
		<!-- ////////// AUDIT LOG ////////// -->
		<script type="text/javascript">
			$(function() {
				getObjectAuditLog('lead','1615775');
			});
		</script>
		<div class="portlet light bordered ">
			<div class="portlet-title">
				<div class="caption ">
					<i class="icon-firewall-allert"></i>
					<span class="caption-subject bold headerTitle">
						Privacy Audit Log
					</span>
					
				</div>
			</div>
			<div class="portlet-body">
				<div id="audit_log_lead" class="auditLog" >
					
				</div>
			</div>
		</div>
		<!-- ////////// AUDIT LOG ////////// -->		
		
		
		
		
	</div>
	<br style="clear: both"/>
	<br style="clear: both"/>
	
	
	
	<script type="text/javascript">
	function refreshObjectRemindersListing() {
		$.ajax({	type: "POST",	url: "/admin/fn/reminders/refreshObjectRemindersListing/",
			data: {clientID: '12295',objectType:'lead',objectID: '1615775'},
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#reminderListing").html(results[1]);
					
					$('.roundedTag').qtip({
						style: { classes: 'qtip-rounded qtip-dark qtip-pixifi' },
						content: {
							attr: 'title'
						},
						position: {
					        viewport: $(window)
					    },
			            hide: {
			                fixed: true,
			                delay: 300
			            }
					});
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function resendObjectReminder(reminderID) {
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you want to schedule this reminder to resend again?',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: true,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({ type: 'POST', url: '/admin/fn/reminders/resendObjectReminder/',
					data: { clientID: '12295', reminderID: reminderID},
					success: function(data) {
						var results = 	data.split("{|}");
						if(results[0] == "SUCCESS") {		 
							
							refreshObjectRemindersListing();
							
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
		    } 
		});
	}
	function showReminderAddForm() {
		
		$.ajax({	type: "POST",	url: "/admin/fn/reminders/showReminderAddForm/",
			data: {clientID: '12295',objectType:'lead',objectID: '1615775'},
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					
					modalContent = 			'<div class="modalBorderBox" style="width: 800px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-email-star"></i> Schedule Reminders </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelAddReminder();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					
					
					$("#dateToSend_lead").jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					
					$("#timeToSend_lead_chooser").timepicker('destroy',true);
					$('#timeToSend_lead_chooser').timepicker({
						interval: 30,
						startHour:8,
						timeFormat: 'h:mm p',						scrollbar: true,
						change: function(time) {
				            var picker = $(this).timepicker({timeFormat: 'h:mm p'}),
				            	fieldID = 	$(this).attr('id').replace('_chooser','');
				            	$("#" + fieldID).val(formatAMPM(time));
				        }
					});
					
					$('#modalContent [data-toggle="popover"]').popover({
						trigger: 'hover',
				        'placement': 'top',
				        'show': true,
				        container: 'body'
					});
					
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function cancelAddReminder() {
		modal.close();
	}
	function populateRemindersFromTemplate(objectType, objectID) {
		var templateID = 				$("#reminderTemplate_" + objectType).val(),
			error = 					"",
			errorField = 				$("#errorReminder");
			
			errorField.hide();									
			error += (templateID == "") ? "Please choose a template to populate from <br />": "";
			
		if(error == "") {									
			$.ajax({	type: "POST",	url: "/admin/fn/reminders/populateObjectFromTemplate/",
				data: { clientID: '12295', objectType: 'lead', objectID: objectID, templateID: templateID},
				success: function(   data   ) {
					var results = 	data.split("{|}");
					if(results[0] == "SUCCESS") {
						refreshObjectRemindersListing();
						cancelAddReminder();
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
						refreshObjectRemindersListing();
					}
				}
			});									
		} else {
			swal({
				type: 'error',
				title: 'Error',
				html: error
			});
		}
	}
	
	/***** 
	added on [12.15.2k16] : TH 
	updated on [08.22.2k18] : TH
	*****/
	function switchAutomaticWho(which) {
		if(which == "staffspecific") {
			$("#whoSpecificDIV").slideDown();
			$("#vendorSpecificDIV").slideUp();
		} else if(which == "vendorspecific") {
			$("#vendorSpecificDIV").slideDown();
			$("#whoSpecificDIV").slideUp();
		} else {
			$("#whoSpecificDIV").slideUp();
			$("#vendorSpecificDIV").slideUp();
		}
	}
	function refreshStaffRoleComboReminder(newValue,objectType) {
		$.ajax({	type: "POST",	url: "/admin/fn/events/refreshStaffRoleCombo/",
			data: {clientID: '12295',comboName: 'staffEventRoleID_' + objectType},
			success: function(   data   ){			 
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#addStaff_RoleComboHolder").html(results[1]);
					if(newValue != "") {
						$("#staffEventRoleID_" + objectType).val(newValue);
						$("#staffEventRoleID_" + objectType).change();
					}
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function showNewQuickEventRoleReminder(objectType) {
		swal({
		    title: 'Add Staff Role',
		    html: '<p><div style="text-align: center; width: 250px; margin-left: auto; margin-right: auto;"><input id="quickStaffRoleName" class="form-control" /></div></p>',
		    showCancelButton: true,
		    closeOnConfirm: false
		},
		function(){
		    var title = 			$('#quickStaffRoleName').val(),
				error = 			"";
				
				error += 			(title == "") ? "Name is a required field<Br />" : "";
				
				if(error == "") {	
					
					$.ajax({	type: "POST",	url: "/admin/fn/events/addEventStaffRole/",
						data: {clientID:'12295', title: title},
						success: function(   data   ){
							var results = 			data.split("{|}");
							if(results[0] == "SUCCESS") {
								
								refreshStaffRoleComboReminder(results[1],objectType);
								//forcefully close the modal input window
								swal.closeModal();
								
							} else {
								swal({
									type: 'error',
									title: 'Error',
									html: results[1]
								});
							}
						}
					});
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: error
					});
				}
		});
	}
	/**********/
	function switchCommunicationType(which,objectType) {
		switch(which) {
			case "0": //email
				$("#emailTemplateToSend_" + objectType).show();
				$("#smsTemplateToSend_" + objectType).hide();
				
				$("#email_whotosendfrom_" + objectType).slideDown('fast');
				
				break;
			case "1": //SMS
				$("#emailTemplateToSend_" + objectType).hide();
				$("#smsTemplateToSend_" + objectType).show();
				
				$("#email_whotosendfrom_" + objectType).hide();
				break;
		}
	}
	
	function switchSendFromCombo(value,whichDIV) {
		switch(value) {
			case "staff":
				$("#" + whichDIV).slideDown('fast');
				break;
			case "":
			default:
				$("#" + whichDIV).slideUp('fast');
				break;
		}
	}
	
	function populateReminderManually(objectType, objectID) {
		var responseID = 				$("#responseToSend_" + objectType).val(),
			dateToSend = 				$("#dateToSend_" + objectType).val(),
			timeToSend = 				$("#timeToSend_" + objectType).val(),
			commType = 					$("#commType_" + objectType).val(),
			whoToNotify = 				$("#whoToSend_" + objectType).val(),
			whoToNotifyRoleID = 		$("#staffEventRoleID_"  + objectType).val(),
			
			whoFromType = 				$('#whoToSendFrom_' + objectType).val(),	//added on [10.04.2k18] : TH
			whoFromID = 				$('#whoToSendFromID_' + objectType).val(),	
			
			error = 					"";
			
			if(whoToNotify == "vendorspecific") {
				whoToNotifyRoleID = 	$("#vendorEventTypeID_"  + objectType).val();
			}
			
			
			if(commType == '1') {
				responseID = 			$('#responseToSend_sms_' + objectType).val();
				
				error += (responseID == "") ? 		"Please choose an SMS/Text template to send. <br />" : "";
				
			} else {
				error += (responseID == "") ? 		"Please choose an Email template to send. <br />" : "";
			}
			
			
			error += (dateToSend == "") ? "Please choose a date to send. <br />": "";
			
		if(error == "") {									
			$.ajax({	type: "POST",	url: "/admin/fn/reminders/populateObjectReminderManually/",
				data: { clientID: '12295', objectType: objectType, objectID: objectID, responseID: responseID, 
						dateToSend: dateToSend, whoToNotify: whoToNotify, whoToNotifyRoleID: whoToNotifyRoleID, 
						timeToSend: timeToSend, commType: commType, whoFromType: whoFromType, whoFromID: whoFromID },
				success: function(   data   ) {
					var results = 	data.split("{|}");
					if(results[0] == "SUCCESS") {
						refreshObjectRemindersListing();
						cancelAddReminder();
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});									
		} else {
			swal({
				type: 'error',
				title: 'Error',
				html: error
			});
		}
	}
	function addReminderToObject(objectType, objectID) {
		var type = 					$("#howtocreate_" + objectType).val();
		switch(type) {
			case "template":
				populateRemindersFromTemplate(objectType, objectID);
				break;
			case "manual":
				populateReminderManually(objectType, objectID);
				break;
			default:
				break;
		}
	}
	function removeAllRemindersFromObject() {
		var error = 					"",
			errorField = 				$("#errorReminder");
			
			errorField.hide();
			
			swal({
			    title: 'Are you sure?',
			    html: 'Are you sure you want to delete all of the reminders? <br /> This action can NOT be undone!',
			    type: 'warning',
			    showCancelButton: true,
			    confirmButtonColor: '#3085d6',
			    cancelButtonColor: '#d33',
			    confirmButtonText: 'Yes',
			    cancelButtonText: 'No',
			    confirmButtonClass: 'confirm-class',
			    cancelButtonClass: 'cancel-class',
			    closeOnConfirm: true,
			    closeOnCancel: true
			}, function(isConfirm) {
			    if (isConfirm) {
			    	$.ajax({ type: 'POST', url: '/admin/fn/reminders/removeAllRemindersFromObject/',
						data: { clientID: '12295', objectType: 'lead', objectID: '1615775'},
						success: function(data) {
							var results = 	data.split("{|}");
							if(results[0] == "SUCCESS") {		 
								refreshObjectRemindersListing();
							} else {
								swal({
									type: 'error',
									title: 'Error',
									html: results[1]
								});
							}
						}
					});
			    } 
			});
	}
	function postponeAllRemindersForObject() {
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you want to Postpone all of the reminders?',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: true,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({ type: 'POST', url: '/admin/fn/reminders/postponeAllRemindersForObject/',
					data: { clientID: '12295', objectType: 'lead', objectID: '1615775'},
					success: function(data) {
						var results = 	data.split("{|}");
						if(results[0] == "SUCCESS") {		 
							refreshObjectRemindersListing();
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
		    } 
		});
	}
	function resumeAllRemindersForObject() {
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you want to Resume all of the reminders? <br /> They will all send on their send-on dates, so be sure they have been udpated with the actual dates you want them sent on. <br /> <em>(if the date is in the past it will send right away)</em>',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: true,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({ type: 'POST', url: '/admin/fn/reminders/resumeAllRemindersForObject/',
					data: { clientID: '12295', objectType: 'lead', objectID: '1615775'},
					success: function(data) {
						var results = 	data.split("{|}");
						if(results[0] == "SUCCESS") {		 
							refreshObjectRemindersListing();
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
		    } 
		});
	}
	function removeReminderFromObject(objectType, objectID, reminderID) {
		var error = 					"",
			errorField = 				$("#errorReminder");
			
			errorField.hide();
			
			swal({
			    title: 'Are you sure?',
			    html: 'Are you sure you want to delete this reminder? <br /> This action can NOT be undone!',
			    type: 'warning',
			    showCancelButton: true,
			    confirmButtonColor: '#3085d6',
			    cancelButtonColor: '#d33',
			    confirmButtonText: 'Yes',
			    cancelButtonText: 'No',
			    confirmButtonClass: 'confirm-class',
			    cancelButtonClass: 'cancel-class',
			    closeOnConfirm: true,
			    closeOnCancel: true
			}, function(isConfirm) {
			    if (isConfirm) {
			    	$.ajax({ type: 'POST', url: '/admin/fn/reminders/removeReminderFromObject/',
						data: { clientID: '12295', objectType: objectType, objectID: objectID, reminderID: reminderID},
						success: function(data) {
							var results = 	data.split("{|}");
							if(results[0] == "SUCCESS") {		 
								refreshObjectRemindersListing();
							} else {
								swal({
									type: 'error',
									title: 'Error',
									html: results[1]
								});
							}
						}
					});
			    } 
			});
	}
	function switchInputType(objectType, objectID, inputType) {
		switch(inputType) {
			case "template":
				$("#templateDIV_" + objectType).slideDown('fast',function() {
					modal.center();
				});
				$("#manualDIV_" + objectType).hide();
				break;
			case "manual":
				$("#templateDIV_" + objectType).hide();
				$("#manualDIV_" + objectType).slideDown('fast',function() {
					modal.center();
				});
				break;
			default:
				$("#templateDIV_" + objectType).hide();
				$("#manualDIV_" + objectType).hide();
				modal.center();
				break;
		}
	}
	
	
	function editObjectReminderDate(reminderID) {
		$("#reminder_date_"+reminderID).slideDown();
		
		//Only add the date picker once...
		if(!$('#reminder_senddate_' + reminderID).parent().hasClass('jdpicker_w')) {
			$('#reminder_senddate_' + reminderID).jdPicker({
				date_format: 'mm/dd/YYYY',
				start_of_week: 0			});
		}
		
		$('#reminder_sendtime_' + reminderID + "_chooser").timepicker('destroy',true);
		$('#reminder_sendtime_' + reminderID + "_chooser").timepicker({
			interval: 30,
			startHour:8,
			timeFormat: 'h:mm p',			scrollbar: true,
			change: function(time) {
	            var picker = $(this).timepicker({timeFormat: 'h:mm p'}),
	            	fieldID = 	$(this).attr('id').replace('_chooser','');
	            	$("#" + fieldID).val(formatAMPM(time));
	        }
		});
		
		
	}
	function updateObjectReminderDate(reminderID) {
		var newDate = 			$('#reminder_senddate_' + reminderID).val(),
			newTime = 			$('#reminder_sendtime_' + reminderID).val(),
			error = 			"";
			
		$.ajax({ type: 'POST', url: '/admin/fn/reminders/updateObjectReminderDueDate/',
			data: { clientID: '12295', reminderID: reminderID, newDate: newDate, newTime: newTime},
			success: function(data) {
				var results = 	data.split("{|}");
				if(results[0] == "SUCCESS") {		 
					/*$("#reminder_date_display_" + reminderID).html('<span class="icon-file-edit"></span> ' + newDate + ' ' + results[1]);
					cancelEditObjectReminderDate(reminderID);*/
					refreshObjectRemindersListing();
					
					if(typeof refreshObjectRemindersListingQ === 'function') {
						refreshObjectRemindersListingQ('lead', '1615775');
					}
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
			
	}
	function cancelEditObjectReminderDate(reminderID) {
		$("#reminder_date_"+reminderID).slideUp();
	}
	
	
	
	function getObjectReminderTextOverrideForm(reminderID) {
		$.ajax({ type: 'POST', url: '/admin/fn/reminders/getObjectReminderTextOverrideForm/',
			data: { clientID: '12295', reminderID: reminderID},
			success: function(data) {
				var results = 	data.split("{|}");
				if(results[0] == "SUCCESS") {		 
					
					$("#editResponseForm_" + reminderID).html(results[1]);
					$("#editResponseForm_" + reminderID).slideDown();
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function changeTheReminderForOverride(reminderID,value) {
		var shouldWeUpdate = 			$("#choose_override_" + reminderID).val();
		if(shouldWeUpdate != "") {
			applyEmailTemplateToObject(value,'lead','1615775','','',"customResponse_" + reminderID,shouldWeUpdate);
			//populateMessageWithData('12295', 'lead', '1615775', value, "customResponse_" + reminderID, '','');
		}
	}
	function populateOverrideFormAndShow(value,reminderID,dontPopulate) {
		if(value == "") {
			$("#theCustomResponse_" + reminderID).slideUp();
			
			var editor = tinymce.get("customResponse_" + reminderID);
			if(editor) {
				editor.destroy();
			}
			$("textarea[name=customResponse_" + reminderID + "]").val('');
			
		} else {
			$("#theCustomResponse_" + reminderID).slideDown();
			
			var editor = tinymce.get("customResponse_" + reminderID);
			if(editor) {
				editor.destroy();
			}
			tinymce.init({
			    selector: "#customResponse_" + reminderID,
			    plugins: [
			        "advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
	                "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
	                "table directionality emoticons template textcolor paste textcolor" //contextmenu
			    ],
			    browser_spellcheck: true,
			    toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | forecolor backcolor",
			    toolbar2: "styleselect formatselect fontselect fontsizeselect"
			});
			if(dontPopulate == undefined || dontPopulate == null) {
				applyEmailTemplateToObject($("#responseToSend_" + reminderID).val(),'lead','1615775','','',"customResponse_" + reminderID,dontPopulate);
				
				//populateMessageWithData('12295', 'lead', '1615775', $("#responseToSend_" + reminderID).val(), "customResponse_" + reminderID, '','');
			}
			
		}
	}
	function cancelUpdateObjectReminderWithOverride(reminderID) {
		$("#editResponseForm_" + reminderID).slideUp();
		var editor = tinymce.get("customResponse_" + reminderID);
		if(editor) {
			editor.destroy();
		}
		$("textarea[name=customResponse_" + reminderID + "]").val('');
		$("#theCustomResponse_" + reminderID).html('');
	}
	function updateObjectReminderWithOverride(reminderID) {
		var responseID = 						$("#responseToSend_" + reminderID).val(),
			responseOverrideText = 				"",
			errorField = 						$("#errorReminder_" + reminderID);
			
			errorField.hide();
			
			tinymce.triggerSave();
			responseOverrideText = 						$("textarea[name=customResponse_" + reminderID + "]").val();
			$.ajax({ type: 'POST', url: '/admin/fn/reminders/updateObjectReminderWithOverride/',
				data: { clientID: '12295', reminderID: reminderID, responseID: responseID, responseOverrideText: responseOverrideText},
				success: function(data) {
					var results = 	data.split("{|}");
					if(results[0] == "SUCCESS") {		 
						
						cancelUpdateObjectReminderWithOverride(reminderID);
						refreshObjectRemindersListing();
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
	}
	
	function cancelBatchShiftDates() { modal.close(); }
	function getBatchShiftDatesForObjectForm() {
		$.ajax({ type: 'POST', url: '/admin/fn/reminders/getBatchShiftDatesForObjectForm/',
			data: { clientID: '12295', objectType: 'lead', objectID: '1615775'},
			success: function(data) {
				var results = 	data.split("{|}");
				if(results[0] == "SUCCESS") {		 
					
					modalContent = 				'<div class="modalBorderBox" style="width: 550px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-calendar-time"></i> Shift Dates/ Reschedule </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelBatchShiftDates();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	
	function batchShiftDatesForObject() {
		let direction = 				$("#direction").val(),
			amount = 					$("#amount").val(),
			timeType = 					$("#timeType").val();
			
		$.ajax({ type: 'POST', url: '/admin/fn/reminders/batchShiftDatesForObject/',
			data: { clientID: '12295', objectType: 'lead', objectID: '1615775', direction: direction, amount: amount, timeType: timeType},
			success: function(data) {
				var results = 	data.split("{|}");
				if(results[0] == "SUCCESS") {		 
					
					cancelBatchShiftDates();
					refreshObjectRemindersListing();
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	
</script>
<div id="scheduleReminders" class="portlet light bordered">
	<div class="portlet-title">
		<div class="caption ">
			<i class="icon-envelope-letter"></i> <span class="caption-subject bold headerTitle">Lead Followup Reminders</span>
		</div>
		<div class="actions">
			
			<div class="btn-group pull-right">
                <button class="btn btn-circle btn-default btn-sm dropdown-toggle" type="button" data-toggle="dropdown" aria-expanded="true"><i class="icon-energy"></i> Actions 
                    <i class="fa fa-angle-down"></i>
                </button>
                <ul class="dropdown-menu pull-right" role="menu">
                    <li>
                    								<a href="javascript:void(0);" onclick="showReminderAddForm();"><i class="fa fa-plus font-green-jungle"></i> Add Reminders</a>
						                    </li>
                                        
                    <li>
                        <a href="javascript:void(0);" onclick="postponeAllRemindersForObject();" ><span class="icon-pause"></span> Postpone All </a>
                    </li>
                    <li>
                        <a href="javascript:void(0);" onclick="resumeAllRemindersForObject();" ><span class="icon-refresh"></span> Resume All Postponed </a>
                    </li>
                    <li>
                        <a href="javascript:void(0);" onclick="getBatchShiftDatesForObjectForm();" ><span class="icon-calendar-time"></span> Shift Dates/Reschedule </a>
                    </li>
                    
                    <li class="divider"></li>
                    <li>
                        <a href="javascript:void(0);" onclick="removeAllRemindersFromObject();"><span class="fa fa-times font-red-flamingo"></span> Remove All</a>
                    </li>
                                    </ul>
            </div>
						
		</div>
	</div>
	<!-- portlet BODY -->
	<div class="portlet-body">
		<div class="tableHeaderDIV alternateThinRowStyle">
			<div class="floatHeader" style="width: 75px;">Status</div>
			<div class="floatHeader" style="width: 80px;">Date to send</div>
			<div class="floatHeader" style="width: 30%;">Response to Send</div>
			<div class="floatHeader" style="width: 15%;">Who To Notify</div>
			<div class="floatHeader" style="width: 14%;">Type</div>
			<div class="clearSmall"></div><br style="clear: both;">
		</div>
		<div id="reminderListing">
		
		<div id="none-remind" class="noneDIV">No reminders have been scheduled.</div>		
		</div>
	</div>
	<!-- end portlet BODY -->
</div>
	
	<br style="clear: both"/>
	<br style="clear: both"/>
	
		
	<div id="docsHolder">
		<link rel="stylesheet" href="/admin/css/styles/jqx.base.css" type="text/css" />
<script type="text/javascript" src="/admin/js/jqwidgets/jqx-custom.js"></script>
<script type="text/javascript">
	function populateNameField(value) {
		$("#fileName").val($("#fileID :selected").text());
	}
	function showAddURLForm() {
		$("#urlAddForm").slideDown();
	}
	function cancelAddURLForm() {
		$("#urlAddForm").slideUp();
	}
	
	function showAddBoxForm() {
		$("#boxAddForm").slideDown();
	}
	function cancelAddBoxForm() {
		$("#boxAddForm").slideUp();
	}
	
	function cancelUpdateObjectDocument(documentID) {
		$("#editDocument_" + documentID).hide();
	}
	function editObjectDocument(documentID) {
		var error = 					'',
			errorField = 				$("#documentError");
			errorField.hide();
			$("#documentLoading").show();
					
		$.ajax({	type: "POST",	url: "/admin/data/getObjectDocumentEditForm/",
			data: {clientID: '12295', documentID: documentID},
			success: function(   data   ){
				$("#documentLoading").hide();
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#editDocument_" + documentID).html(results[1]);
					$("#editDocument_" + documentID).show();
					$("select.styled").select_skin();					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function updateObjectDocument(documentID) {
		var name = 						$("#docFileName_" + documentID).val(),			
			fileVisibility = 			$("#docPublic_" + documentID).val(),			
			error = 					'',
			errorField = 				$("#documentError");
			
			errorField.hide();			
			
			error += 					(name == "") ? "Please enter a Name<br />" : "";
			error += 					(fileVisibility == "") ? "Please choose the document's Visibility<br />" : "";
			
			if(error == "") {
				
				$("#documentLoading").show();
				
				$.ajax({	type: "POST",	url: "/admin/data/updateObjectDocument/",
					data: {clientID: '12295', documentID: documentID, documentName: name, privacy: fileVisibility },
					success: function(   data   ){
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							$("#doc_" + documentID).html(results[1]);
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
						$("#documentLoading").hide();
					}
				});
			} else {
				swal({
					type: 'error',
					title: 'Error',
					html: error
				});
				$("#documentLoading").hide();
			}
	}
	

	function getBoxDocumentCombo(folderID) {
		if(folderID != "") {
			var error = 					'',
				errorField = 				$("#documentError");
			
			$("#documentComboHolder").html('');
			$("#documentComboLoading").show();
			
			$.ajax({	type: "POST",	url: "/admin/data/getBoxDocumentsCombo/",
				data: {clientID: '12295', folderID: folderID, changeFn: 'populateNameField(this.value);'},
				success: function(   data   ){
					var results = data.split("{|}");
					if(results[0] == "SUCCESS") {
						
						$("#documentComboHolder").html(results[1]);
						$("select.styled").select_skin();
						
						$("#documentComboLoading").hide();
						
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		}
	}
	function saveNewURLDocument() {
		var itemType = 					'url',
			name = 						$("#fileName_url").val(),
			size = 						'',
			idURL = 					$("#fileURL_url").val(),
			fileVisibility = 			$("#fileVisibility_url").val(),
			created_date = 				'',
			thumbURL = 					'',
			error = 					'',
			errorField = 				$("#documentError");
			
			errorField.hide();			
			
			error += 					(name == "") ? "Please enter a Name<br />" : "";
			error += 					(idURL == "" || idURL == "http://") ? "Please enter a URL<br />" : "";
			
			if(error == "") {
				
				$("#documentLoading").show();
				
				$.ajax({	type: "POST",	url: "/admin/fn/docs/newObjectDocument/",
					data: {clientID: '12295', objType: 'lead', objID: '1615775', itemType: itemType, 
							name: name, size: size, idURL: idURL, created_date: created_date, thumbURL: thumbURL, fileVisibility: fileVisibility },
					success: function(   data   ){
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							
							$("#objectDocumentListing").append(results[1]);
							$("#none-docs").html('');
							$("#none-docs").remove();
							
							cancelAddURLForm();
							
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
						$("#documentLoading").hide();
					}
				});
			} else {
				swal({
					type: 'error',
					title: 'Error',
					html: error
				});
				$("#documentLoading").hide();
			}
	}
	function saveNewBoxDocument() {
		var itemType = 					'box',
			name = 						$("#fileName").val(),
			size = 						'',
			idURL = 					$("#fileID").val(),
			fileVisibility = 			$("#fileVisibility").val(),
			created_date = 				'',
			thumbURL = 					'',
			error = 					'',
			errorField = 				$("#documentError");
			
			errorField.hide();
			
			error += 					(idURL == "") ? "Please choose a File<br />" : "";
			
			if(error == "") {
				
				$("#documentLoading").show();
				$.ajax({	type: "POST",	url: "/admin/fn/docs/newObjectDocument/",
					data: {clientID: '12295', objType: 'lead', objID: '1615775', itemType: itemType, 
							name: name, size: size, idURL: idURL, created_date: created_date, thumbURL: thumbURL, fileVisibility: fileVisibility },
					success: function(   data   ){
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							
							$("#objectDocumentListing").append(results[1]);
							$("#none-docs").html('');
							$("#none-docs").remove();
							
							cancelAddBoxForm();
							
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
						$("#documentLoading").hide();
					}
				});
			} else {
				swal({
					type: 'error',
					title: 'Error',
					html: error
				});
				$("#documentLoading").hide();
			}
	}
	function deleteDocument(documentID) {
		swal({
			title: 'Are you sure?',
			html: 'Are you sure you would like to delete this document/link? <br /> This action can NOT be undone!',
			type: 'warning',
			showCancelButton: true,
			confirmButtonColor: '#3085d6',
			cancelButtonColor: '#d33',
			confirmButtonText: 'Yes',
			cancelButtonText: 'No',
			confirmButtonClass: 'confirm-class',
			cancelButtonClass: 'cancel-class',
			closeOnConfirm: true,
			closeOnCancel: true
		}, function(isConfirm) {
			if (isConfirm) {
				$.ajax({	type: "POST",	url: "/admin/fn/docs/deleteObjectDocument/",
					data: {clientID: '12295', objType: 'lead', objID: '1615775', itemID: documentID},
					success: function(   data   ){
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {

							$("#doc_" + documentID).html('');
							$("#doc_" + documentID).remove();

						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
						$("#documentLoading").hide();
					}
				});
			}
		});
	}
	
	
	function showAddDropboxForm() {
		$("#dropboxAddForm").slideDown();
		loadDropboxComboWidget();
	}
	function cancelAddDropboxForm() {
		$("#dropboxAddForm").slideUp();
	}
	
	
	
	function loadDropboxComboWidget() {
		var theme = 		getTheme(),
	    	tree = 			$('#jqxTree_dropbox'),
	    	button = 		$("#pixifiButton_dropbox"),
	    	source = 		[];
	    
	    button.jqxDropDownButton({ width: 200, height: 30, theme: "pixifi", enableHover: false, enableBrowserBoundsDetection: true });
	    tree.jqxTree({ source: source, theme: theme, width: 200, height: 200, enableHover: false });
	    tree.bind('select', function (event) {
	        var args = 		event.args,
	        	item = 		tree.jqxTree('getItem', event.args.element),
				dropDownContent = '<div style="position: relative; margin-left: 3px; margin-top: 5px;">' + item.label + '</div>';
	            button.jqxDropDownButton('setContent', dropDownContent);
				getDropboxDocumentCombo(item.value);
				button.jqxDropDownButton('close');
	    });
		tree.bind('expand', function (event) {
	        var $element = $(event.args.element);
	        var loader = false;
	        var loaderItem = null;
	        var children = $element.find('li');
	        $.each(children, function () {
	            var item = tree.jqxTree('getItem', this);
	            if (item.label == 'Loading...') {
	                loaderItem = item;
	                loader = true;
	                return false
	            };
	        });
	        if (loader) {
	            $.ajax({type: 'POST', url: '/admin/fn/misc/getDropboxFolderListingJson/',
	                data: {clientID: '12295' ,path: loaderItem.value},
	                success: function (data, status, xhr) {
	                    var results = 		data.split("{|}");
						if(results[0] == "SUCCESS") {
	                    	var items = jQuery.parseJSON(results[1]);
	                        tree.jqxTree('addTo', items, $element[0]);
	                        tree.jqxTree('removeItem', loaderItem.element);
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
	                }
	            });
	        }
	    });
	    $.ajax({type: 'POST', url: '/admin/fn/misc/getDropboxFolderListingJson/',
	        data: {clientID: '12295' ,path: "/"},
	        success: function (data, status, xhr) {
	            var results = 		data.split("{|}");
				if(results[0] == "SUCCESS") {
	            	var items = jQuery.parseJSON(results[1]);
	                tree.jqxTree('addTo', items);
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
	        }
	    });
	}
	function getDropboxDocumentCombo(folderID) {
		if(folderID != "") {
			var error = 					'',
				errorField = 				$("#documentError");
			
			$("#documentComboHolder_dropbox").html('');
			$("#documentComboLoading_dropbox").show();
			
			$.ajax({	type: "POST",	url: "/admin/fn/docs/getDropboxDocumentsCombo/",
				data: {clientID: '12295', folderID: folderID, changeFn: 'populateNameField(this.value);'},
				success: function(   data   ){
					var results = data.split("{|}");
					if(results[0] == "SUCCESS") {
						
						$("#documentComboHolder_dropbox").html(results[1]);
						$("select.styled").select_skin();
						
						$("#documentComboLoading_dropbox").hide();
						
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		}
	}
	function saveNewDropboxDocument(itemType) {
		var itemType = 					'dropbox',
			name = 						$("#fileName_drop").val(),
			size = 						'',
			idURL = 					$("#fileID_drop").val(),
			fileVisibility = 			$("#fileVisibility_drop").val(),
			created_date = 				'',
			thumbURL = 					'',
			error = 					'',
			errorField = 				$("#documentError");
			
			errorField.hide();
			
			error += 					(idURL == "") ? "Please choose a File<br />" : "";
			
			if(error == "") {
				
				$("#documentLoading").show();
				$.ajax({	type: "POST",	url: "/admin/fn/docs/newObjectDocument/",
					data: {clientID: '12295', objType: 'lead', objID: '1615775', itemType: itemType, 
							name: name, size: size, idURL: idURL, created_date: created_date, thumbURL: thumbURL, fileVisibility: fileVisibility },
					success: function(   data   ){
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							
							$("#objectDocumentListing").append(results[1]);
							$("#none-docs").html('');
							$("#none-docs").remove();
							
							cancelAddDropboxForm();
							
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
						$("#documentLoading").hide();
					}
				});
			} else {
				swal({
					type: 'error',
					title: 'Error',
					html: error
				});
				$("#documentLoading").hide();
			}
	}

	
	function showAddGoogleDriveForm() {
		$("#googleDriveAddForm").slideDown();
		loadGoogleDriveComboWidget();
	}
	function cancelAddGoogleDriveForm() {
		$("#googleDriveAddForm").slideUp();
	}
	function saveNewGoogleDriveDocument(itemType) {
		var itemType = 					'google',
			name = 						$("#fileName_google").val(),
			size = 						'',
			idURL = 					$("#fileID_google").val(),
			fileVisibility = 			$("#fileVisibility_google").val(),
			created_date = 				'',
			thumbURL = 					'',
			error = 					'',
			errorField = 				$("#documentError");
			
			errorField.hide();
			
			error += 					(idURL == "") ? "Please choose a File<br />" : "";
			
			if(error == "") {
				
				$("#documentLoading").show();
				$.ajax({	type: "POST",	url: "/admin/fn/docs/newObjectDocument/",
					data: {clientID: '12295', objType: 'lead', objID: '1615775', itemType: itemType, 
							name: name, size: size, idURL: idURL, created_date: created_date, thumbURL: thumbURL, fileVisibility: fileVisibility },
					success: function(   data   ){
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							
							$("#objectDocumentListing").append(results[1]);
							$("#none-docs").html('');
							$("#none-docs").remove();
							
							cancelAddGoogleDriveForm();
							
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
						$("#documentLoading").hide();
					}
				});
			} else {
				swal({
					type: 'error',
					title: 'Error',
					html: error
				});
			}
	}
	function loadGoogleDriveComboWidget() {
		var theme = 		getTheme(),
	    	tree = 			$('#jqxTree_google'),
	    	button = 		$("#pixifiButton_google"),
	    	source = 		[];
	    
	    button.jqxDropDownButton({ width: 200, height: 30, theme: "pixifi", enableHover: false, enableBrowserBoundsDetection: true });
	    tree.jqxTree({ source: source, theme: theme, width: 200, height: 200, enableHover: false });
	    tree.bind('select', function (event) {
	        var args = 		event.args,
	        	item = 		tree.jqxTree('getItem', event.args.element),
				dropDownContent = '<div style="position: relative; margin-left: 3px; margin-top: 5px;">' + item.label + '</div>';
	            button.jqxDropDownButton('setContent', dropDownContent);
				getGoogleDriveDocumentCombo(item.value);
				button.jqxDropDownButton('close');
	    });
		tree.bind('expand', function (event) {
	        var $element = $(event.args.element);
	        var loader = false;
	        var loaderItem = null;
	        var children = $element.find('li');
	        $.each(children, function () {
	            var item = tree.jqxTree('getItem', this);
	            if (item.label == 'Loading...') {
	                loaderItem = item;
	                loader = true;
	                return false
	            };
	        });
	        if (loader) {
	            $.ajax({type: 'POST', url: '/admin/fn/docs/getGoogleDriveFolderListingJson/',
	                data: {clientID: '12295' ,path: loaderItem.value},
	                success: function (data, status, xhr) {
	                    var results = 		data.split("{|}");
						if(results[0] == "SUCCESS") {
	                    	var items = jQuery.parseJSON(results[1]);
	                        tree.jqxTree('addTo', items, $element[0]);
	                        tree.jqxTree('removeItem', loaderItem.element);
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
	                }
	            });
	        }
	    });
	    $.ajax({type: 'POST', url: '/admin/fn/docs/getGoogleDriveFolderListingJson/',
	        data: {clientID: '12295' ,path: "/"},
	        success: function (data, status, xhr) {
	            var results = 		data.split("{|}");
				if(results[0] == "SUCCESS") {
	            	var items = jQuery.parseJSON(results[1]);
	                tree.jqxTree('addTo', items);
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
	        }
	    });
	}
	function getGoogleDriveDocumentCombo(folderID) {
		if(folderID != "") {
			var error = 					'',
				errorField = 				$("#documentError");
			
			$("#documentComboHolder_google").html('');
			$("#documentComboLoading_google").show();
			
			$.ajax({	type: "POST",	url: "/admin/fn/docs/getGoogleDriveDocumentsCombo/",
				data: {clientID: '12295', folderID: folderID, changeFn: 'populateNameField(this.value);'},
				success: function(   data   ){
					var results = data.split("{|}");
					if(results[0] == "SUCCESS") {
						
						$("#documentComboHolder_google").html(results[1]);
						
						var currentVal = 		$('#fileID_google').val();
			   				$('#fileID_google').combobox();
			   				$('#fileID_google').combobox('value', currentVal);
						
						$("#documentComboLoading_google").hide();
						
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		}
	}
	
	
	
	
	
	
	function getObjectDocumentAddForm(type) {
		$.ajax({	type: "POST",	url: "/admin/fn/docs/getObjectDocumentAddForm/",
			data: {clientID: '12295', type: type},
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					switch(type) {
						case "box":
							$("#boxAddForm").html(results[1]);
							$("#boxAddForm").slideDown();
							break;
						case "dropbox":
							$("#dropboxAddForm").html(results[1]);
							$("#dropboxAddForm").slideDown();
							loadDropboxComboWidget();
							break;
						case "copy":
							$("#copyAddForm").html(results[1]);
							$("#copyAddForm").slideDown();
							loadCopyComboWidget();
							break;
						case "googledrive":
							$("#googleDriveAddForm").html(results[1]);
							$("#googleDriveAddForm").slideDown();
							loadGoogleDriveComboWidget();
							break;
					}
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
			
	}
	
	function showAddUploadForm() {
		$("#urlUploadForm").slideDown();
	}
	function cancelAddUploadForm() {
		$("#urlUploadForm").slideUp();
	}
	function saveNewUploadDocument() {
		var itemType = 					'file',
			name = 						$("#fileName_upload").val(),
			size = 						'',
			idURL = 					$("#fileURL_upload").val(),
			fileVisibility = 			$("#fileVisibility_upload").val(),
			created_date = 				'',
			thumbURL = 					'',
			error = 					'';
			
			error += 					(name == "") ? "Please enter a Name<br />" : "";
			error += 					(idURL == "" || idURL == "http://") ? "Please choose a file<br />" : "";
			
			if(error == "") {
				
				$("#documentLoading").show();
				
				$.ajax({	type: "POST",	url: "/admin/fn/docs/newObjectDocument/",
					data: {clientID: '12295', objType: 'lead', objID: '1615775', itemType: itemType, 
							name: name, size: size, idURL: idURL, created_date: created_date, thumbURL: thumbURL, fileVisibility: fileVisibility },
					success: function(   data   ){
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							console.log("success log");
							
							$("#objectDocumentListing").append(results[1]);
							$("#none-docs").html('');
							$("#none-docs").remove();
							
							cancelAddUploadForm();
							
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
						$("#documentLoading").hide();
					}
				});
			} else {
				swal({
					type: 'error',
					title: 'Error',
					html: error
				});
				$("#documentLoading").hide();
			}
	}
</script>
	
	<div class="portlet light bordered">
		<div class="portlet-title">
							<div class="caption ">
					<i class="icon-docs"></i> <span class="caption-subject bold headerTitle">Documents</span>
				</div>
							<div class="actions">
												<a href="javascript:void(0);" class="btn btn-circle btn-default btn-sm" onclick="showAddUploadForm();"><i class="fa fa-upload font-green-jungle"></i> Upload File</a>
								<a href="javascript:void(0);" class="btn btn-circle btn-default btn-sm" onclick="showAddURLForm();"><i class="fa fa-plus font-green-jungle"></i> Add URL</a>
				<a href="javascript:void(0);" class="btn btn-circle btn-default btn-sm" onclick="getObjectDocumentAddForm('googledrive');"><i class="fa fa-plus font-green-jungle"></i> Add <img src="/admin/icons/google_drive_tiny_logo.png" align="absmiddle"></a>
				<!--<a href="javascript:void(0);" class="btn btn-circle btn-default btn-sm" onclick="getObjectDocumentAddForm('copy');"><i class="fa fa-plus font-green-jungle"></i> Add <img src="/admin/icons/copy_tiny_logo.png" align="absmiddle" width="16" /></a>-->
				<a href="javascript:void(0);" class="btn btn-circle btn-default btn-sm" onclick="getObjectDocumentAddForm('dropbox');"><i class="fa fa-plus font-green-jungle"></i> Add <img src="/admin/icons/dropbox_tiny_logo.png" align="absmiddle" /></a>
				<a href="javascript:void(0);" class="btn btn-circle btn-default btn-sm" onclick="getObjectDocumentAddForm('box');"><i class="fa fa-plus font-green-jungle"></i> Add <img src="/admin/icons/box_tiny_logo.png" align="absmiddle" /></a>
							</div>
		</div>
		<!-- portlet BODY -->
		<div class="portlet-body">
			
			<div class="alternateThinRowStyle tableHeaderDIV">
				<div class="floatHeader" style="width: 250px;">Document:</div>
				<div class="floatHeader" style="width: 150px;">Size:</div>
				<div class="floatHeader" style="width: 150px;">Link:</div>
				<div class="floatHeader" style="width: 150px;">Visibility:</div>
				<br style="clear: both;" />
			</div>
			<div id="documentError" class="failure hidden"></div>
			<div id="documentLoading" class="hidden" ><img src="/admin/icons/tiny_spinner.gif" align="absmiddle" /></div>
			
			<div id="urlUploadForm" class="hidden portlet light bordered">
				<div class="alternateThinRowStyleLight">
					<div class="leftTitle"></div>
					<div class="rightTitle">
							
						<div class="input-group input-xlarge">
				            <span class="input-group-btn" style="font-size: 12px !important;">
								<button type="button" class="btn btn-default btn-sm" onclick="getObjectUploadsDialog('documents','fileURL_upload','fileName_upload');"><span class="icon-cloud-upload"></span> select/upload</button>
				            </span>
				            <input type="text" id="fileName_upload" name="fileName_upload" size="45" class="form-control" maxlength="" value=""   />						</div>
						<input type="hidden" id="fileURL_upload" name="fileURL_upload" size="65" class="textBlock" maxlength="" value=""  title="" placeholder="http://"  />					</div>
					<div class="clearSmall"></div><br style="clear: both;" />
				</div>
				<div class="normalThinRowStyle">
					<div class="leftTitle">Visibility:</div>
					<div class="rightTitle">
						    <select id="fileVisibility_upload" name="fileVisibility_upload" style="width: 150px;"  class="styled">
    	<option value="" > -- </option>
<option value="0" selected="selected"  >Private</option>
<option value="1"   >Public</option>
    </select>
    					</div>
					<div class="clearSmall"></div><br style="clear: both;" />
				</div>
				
				<br style="clear: both;" />
				<br style="clear: both;" />
				<div class="btn-group save-cancel-group">
					<a href="javascript:void(0);" class="btn blue btn-sm" onclick="saveNewUploadDocument();" ><span class="fa fa-check"></span> Save File </a>
					<a href="javascript:void(0);" class="btn default btn-sm" onclick="cancelAddUploadForm();" >Cancel</a>
				</div>
			</div>
			
			<div id="urlAddForm" class="hidden portlet light bordered">
				<div class="normalThinRowStyle">
					<div class="leftTitle">Document Name:</div>
					<div class="rightTitle">
						<input type="text" id="fileName_url" name="fileName_url" size="45" class="textBlock" maxlength="" value=""   />					</div>
					<div class="clearSmall"></div><br style="clear: both;" />
				</div>
				<div class="alternateThinRowStyleLight">
					<div class="leftTitle">Document URL:</div>
					<div class="rightTitle">
						<input type="text" id="fileURL_url" name="fileURL_url" size="65" class="textBlock" maxlength="" value=""  title="" placeholder="https://"  />					</div>
					<div class="clearSmall"></div><br style="clear: both;" />
				</div>
				<div class="normalThinRowStyle">
					<div class="leftTitle">Visibility:</div>
					<div class="rightTitle">
						    <select id="fileVisibility_url" name="fileVisibility_url" style="width: 150px;"  class="styled">
    	<option value="" > -- </option>
<option value="0" selected="selected"  >Private</option>
<option value="1"   >Public</option>
    </select>
    					</div>
					<div class="clearSmall"></div><br style="clear: both;" />
				</div>
				
				<br style="clear: both;" />
				<br style="clear: both;" />
				<div class="btn-group save-cancel-group">
					<a href="javascript:void(0);" class="btn blue btn-sm" onclick="saveNewURLDocument();" ><span class="fa fa-check"></span> Add URL</a>
					<a href="javascript:void(0);" class="btn default btn-sm" onclick="cancelAddURLForm();" >Cancel</a>
				</div>
			</div>
			
			<div id="googleDriveAddForm" class="hidden greenBorderBox"></div>
			<div id="copyAddForm" class="hidden greenBorderBox"></div>
			<div id="dropboxAddForm" class="hidden greenBorderBox"></div>
			<div id="boxAddForm" class="hidden greenBorderBox"></div>
				
			<div id="objectDocumentListing">
										<div id="none-docs" class="noneDIV">No documents have been added yet.</div>
									</div>
			
		
		
		</div>
		<!-- end portlet BODY -->
	</div>

	</div>
</div>
<div id="LEADINFOEDIT" >			
		
	<script type="text/javascript">
	$(function() {
		$("#primaryContactCombo").multiselect({
			noneSelectedText: "Select Primary Contact(s)",
			header: false,
			selectedList: 2,
			height: 125,
			click: function(event,ui) {
				var checkedItems = 	$(this).multiselect("getChecked"),
					checkCount = 	checkedItems.length;
			    if ( checkCount > 2 ) {
					alert( "Limit is 2" );
					event.preventDefault();
					return false;
				}
			}
		});
		
		switchState('leadState' , 'leadCountry');
		switchState('leadEmergContState' , 'leadEmergContCountry');
		
	});
	
	function submitForm() {
		var primaryContact = 	$("#primaryContactCombo").val();
		if(primaryContact !== undefined && primaryContact !== null) {
			if(primaryContact.length > 0) {
				$("#leadPrimaryContactFields").val(primaryContact.join(","));
			}
		}
		tinymce.triggerSave();
		
		$("#update").attr('disabled','disabled');
		$("#updateBtnIcon").addClass('fa-spin fa-refresh');
		$("#updateBtnIcon").removeClass('fa-check');
		$("#updateText").html('Updating...');
		
		//Now submit the form
		$('form').submit();
	}
	
	function checkUserName(val, field) {		
		$("#username_non_status").hide();
		$("#username_status").hide();
		if(val != '') {
			$.ajax({	type: "POST",	url: "/admin/data/checkCustomerUserName/",
			   data: {clientID: '12295' ,customerID: '1615775', username: val},
			   success: function(   data   ){
			   		var results = 		data.split("{|}");
					if(results[0] == "SUCCESS") {
						$("#username_status").show();
						$("#username_status").removeClass('failure');
						$("#username_status").addClass('note note-success note-bordered');
						$("#username_status").html('Username is available');
						$("#username_status").width(150);					
					} else {
						$("#username_status").show();
						$("#username_status").removeClass('note note-success note-bordered');
						$("#username_status").addClass('failure');
						$("#username_status").html(results[1]);
						$("#username_status").width(550);
					}
				}
			});
		}
	}
	function manageRoles() {
		window.open('/admin/clients/#clientRolesTab');
	}
	function toggleAllSections() {
		$(".fieldsContainer").each(function(indx,item){
			var buttonHtml =		($(item).css('display') == "block") ? '&#9660;' : '&#9650;';
			$(item).parent('.greenBorderBox').children('.rightTitle').children('.btnMini-blue').html(buttonHtml);
			$(item).toggle();
		});
	}
	function toggleSection(btn) {
		var container = 			$(btn).closest('.greenBorderBox').children('.fieldsContainer');
		if($(btn).closest('.greenBorderBox').length > 0) {
			if(container.css('display') == "block") {
				$(btn).html('&#9660;');
			} else {
				$(btn).html('&#9650;');
			}
			container.toggle();
		}
	}
	
	function switchType(which) {
		var data = 				which.split(":"),
			subType = 			"",
			type = 				"";
			
			type = 				data[1];
			
		switch(type) {
			case "1":		subType = 		"wedding";		break;
			case "2":		subType = 		"nonwedding";	break;
		}
		
		var eventType = 				which,
		brandID = 						$("#leadBrandID").val();
		updateRoleCombos(subType);
		$.ajax({	type: "POST",	url: "/admin/data/refreshAttributeFields/",
			data: {clientID: '12295',objType: 'lead', objSubType: subType, objID: '1615775', eventType: eventType, brandID: brandID},
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {					
					$("#customFieldsHolder").html(results[1]);
					if(results[1] != "") {
						$("#customFieldsHolder").show();
					}
					$("#clientSubType").val(type);
					$("input[xclass=styled]:checkbox").iButton();
					$('input.date_picker').jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					$("select.styled").select_skin();
				}
			}
		});
	}
	function updateRoleCombos(subType) {
		//Also update the Role Combos
		$.ajax({	type: "POST",	url: "/admin/data/getClientRolesComboValues/",
			data: {clientID: '12295', roleType: subType},
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					var dataArray = 		jQuery.parseJSON(results[1]);
					//Now do this for each combobox
					$("#leadOneRoleID").children().remove();
					$("#leadTwoRoleID").children().remove();
					$("#leadThreeRoleID").children().remove();
					$("#leadFourRoleID").children().remove();												
					$.each(dataArray, function(item) {
						$("#leadOneRoleID").append($("<option></option>").attr("value",this.id).text(this.value));
						$("#leadTwoRoleID").append($("<option></option>").attr("value",this.id).text(this.value));
						$("#leadThreeRoleID").append($("<option></option>").attr("value",this.id).text(this.value));
						$("#leadFourRoleID").append($("<option></option>").attr("value",this.id).text(this.value));
					});
					$("#leadOneRoleID").val();
					$("#leadTwoRoleID").val();
					$("#leadThreeRoleID").val();
					$("#leadFourRoleID").val();					
					$("#leadOneRoleID").change();
					$("#leadTwoRoleID").change();
					$("#leadThreeRoleID").change();
					$("#leadFourRoleID").change();
				}
			}
		});	
	}
	</script>
	
	<div class="row">

		<div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
			<div class="portlet light bordered" >
				<div class="portlet-title">
					<div class="caption"><span class="caption-subject bold headerTitle">Contact Info</span></div>
				</div>
				<div class="portlet-body">
					<div class="tabbable">
						<ul class="nav nav-tabs">
															<li class="active">
									<a href="#tab_contact1" data-toggle="tab" > Contact #1</a>
								</li>
																							<li class="">
									<a href="#tab_contact2" data-toggle="tab" > Contact #2</a>
								</li>
																							<li class="">
									<a href="#tab_contact3" data-toggle="tab" > Contact #3</a>
								</li>
																							<li class="">
									<a href="#tab_contact4" data-toggle="tab" > Contact #4</a>
								</li>
														</ul>
						<div class="tab-content">
							<div class="tab-pane active" id="tab_contact1">
									<div  id="contact1Fields">
	    <div class="fieldsContainer">
	    	<br style="clear: both; " />
				    	<div class="alternateThinRowStyle" >
			    <div class="leftTitle" >Role: </div>
			    <div class="rightTitle" >
			    		<div style="float: left; margin-right: 10px;">
		<a href="javascript:void(0);" class="btn btn-default btn-sm" onclick="manageRoles();" >
			<span class="icon-file-edit"></span> Manage Roles
		</a>
	</div>
				   		    <select id="leadOneRoleID" name="leadOneRoleID" style="width: px;"  class="styled" >
    	<option value="" > -- </option>
<option value="65261"  >Mother</option>
<option value="65488"  >Father</option>
<option value="65489"  >Sister</option>
<option value="65490"  >Brother</option>
<option value="65491"  >Aunt</option>
<option value="65492"  >Uncle</option>
<option value="65493"  >Grandmother</option>
<option value="65494"  >Grandfather</option>
    </select>
    			    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
							    	<div class="alternateThinRowStyle" >
			    <div class="leftTitle" >Pronoun: </div>
			    <div class="rightTitle" >
			    		<div class="rightTitle">
		    <select id="leadContact1Pronoun" name="leadContact1Pronoun" style="width: 300px;"  onchange="switchOtherPronounField('leadContact1Pronoun',this.value);"  class="styled">
    	<option value="" > -- </option>
<option value="she/her/hers"   >she/her/hers</option>
<option value="he/him/his"   >he/him/his</option>
<option value="they/them/theirs"   >they/them/theirs</option>
<option value="ae/aer/aers"   >ae/aer/aers</option>
<option value="fae/faer/faers"   >fae/faer/faers</option>
<option value="e/em/eirs"   >e/em/eirs</option>
<option value="ey/em/eirs"   >ey/em/eirs</option>
<option value="per/per/pers"   >per/per/pers</option>
<option value="tey/ter/ters"   >tey/ter/ters</option>
<option value="sie/sie/hirs"   >sie/sie/hirs</option>
<option value="ve/ver/vis"   >ve/ver/vis</option>
<option value="xe/xem/xyrs"   >xe/xem/xyrs</option>
<option value="zie/zim/hirs"   >zie/zim/hirs</option>
<option value="no preference"   >no preference</option>
<option value="other/custom"   >other/custom</option>
    </select>
    		<div id="leadContact1Pronoun_otherField" class=" hidden ">
			<input type="text" id="leadContact1Pronoun_other" name="leadContact1Pronoun_other" size="45" class="form-control" maxlength="" value=""   />		</div>
	</div>
				    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
		    						<div class="normalThinRowStyle" >
			    <div class="leftTitle" >Full Name: </div>
			    <div class="pull-right form-inline" >
			    <input type="text" id="leadBrideFirst" name="leadBrideFirst" size="10" class="form-control" maxlength="" value="Test"   />			    <input type="text" id="leadBrideMiddle" name="leadBrideMiddle" size="6" class="form-control" maxlength="" value=""   />			    <input type="text" id="leadBrideLast" name="leadBrideLast" size="10" class="form-control" maxlength="" value="Lead"   />			    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
								    <div class="alternateThinRowStyle" >
			    <div class="leftTitle" >Main Phone: </div>
			    <div class="rightTitle" >
			    <input type="text" id="leadBridePhone" name="leadBridePhone" size="35" class="form-control" maxlength="" value=""   /></div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
								    <div class="rightTitle" >
			    <div id="contact1PhoneLink" style="margin-top: 5px;" >
			    	<a href="javascript:void(0);" class="btn blue btn-sm" onclick="showOtherPhones('contact1PhoneLink','contact1OtherPhones');" ><span class="icon-file-edit"></span> Edit Other Phones</a>			    </div>
		    </div>
		    <br style="clear: both;" />
		    <div id="contact1OtherPhones" class="hidden">
		    	<div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" style="padding-left: 0px; padding-right: 0px;" >
				    <div class="normalThinRowStyle" >
					    <div class="leftTitle" >Alternate Phone: </div>
					    <div class="rightTitle" >
					    <input type="text" id="leadBrideAltPhone" name="leadBrideAltPhone" size="35" class="form-control" maxlength="" value=""   /></div>
					    <div class="clearSmall" ></div><br style="clear: both; " />
				    </div>
				    <div class="normalThinRowStyle" >
					    <div class="leftTitle" >Mobile Phone: </div>
					    <div class="rightTitle" >
					    	<div class="input-group">
							   <input type="text" id="leadBrideMobilePhone" name="leadBrideMobilePhone" size="35" class="form-control" maxlength="" value="(123) 456-7890"   />							   <span class="input-group-addon" title="You can Opt-In to receive SMS/Text notifications"><input type="checkbox" id="leadOneMobileTextingOptIn" name="leadOneMobileTextingOptIn" class="" value="1"   align="middle" style="vertical-align: middle;"  /> Opt-In</span>
							</div>
					    </div>
					    <div class="clearSmall" ></div><br style="clear: both; " />
				    </div>
			    </div>
			    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" style="padding-right: 0px;">
				     <div class="normalThinRowStyle" >
					    <div class="leftTitle" >Home Phone: </div>
					    <div class="rightTitle" >
					    <input type="text" id="leadBrideHomePhone" name="leadBrideHomePhone" size="35" class="form-control" maxlength="" value=""   /></div>
					    <div class="clearSmall" ></div><br style="clear: both; " />
				    </div>
				    <div class="normalThinRowStyle" >
					    <div class="leftTitle" >Fax: </div>
					    <div class="rightTitle" >
					    <input type="text" id="leadBrideFax" name="leadBrideFax" size="35" class="form-control" maxlength="" value=""   /></div>
					    <div class="clearSmall" ></div><br style="clear: both; " />
				    </div>
			    </div>
				<br style="clear: both;" />
				<br style="clear: both;" />
		    </div>
								    <div class="normalThinRowStyle" >
			    <div class="leftTitle" >Email: </div>
			    <div class="pull-right col-md-8 col-sm-8 col-xs-8 input-group" >
			    	<div class="input-group">
			    		<input type="text" id="leadBrideEmail" name="leadBrideEmail" size="45" class="form-control" maxlength="" value="test@sweetmephotography.com"   />			    		<span class="input-group-addon" title="You can Opt-In to receive marketing communications and notifications"><input type="checkbox" id="leadOneEmail1OptIn" name="leadOneEmail1OptIn" class="" value="1"   align="middle" style="vertical-align: middle;"  /> Opt-In</span>
			    	</div>
			    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
					    		    <div class="alternateThinRowStyle" >
			    <div class="leftTitle" >Email 2: </div>
			    <div class="pull-right col-md-8 col-sm-8 col-xs-8 input-group" >
			    	<div class="input-group">
			    		<input type="text" id="leadOneEmail2" name="leadOneEmail2" size="45" class="form-control" maxlength="" value=""   />			    		<span class="input-group-addon" title="You can Opt-In to receive marketing communications and notifications"><input type="checkbox" id="leadOneEmail2OptIn" name="leadOneEmail2OptIn" class="" value="1"   align="middle" style="vertical-align: middle;"  /> Opt-In</span>
			    	</div>
			    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
					    		    <div class="normalThinRowStyle" >
			    <div class="leftTitle" >Social Network(s): </div>
			    <div class="rightTitle" >
			    	<div id="social_listing_1615775_1" class="noneDIV smallText">			No social network accounts have been added		</div>			    	<br style="clear: both; " />
			    	<div class="rightTitle">
			    		<a href="javascript:void(0);" class="btn btn-default btn-sm" onclick="showAddSocialAccount('lead','1615775','1');" ><span class="fa fa-plus"></span> Add </a>
			    	</div><br style="clear: both; " />
			    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
			    <div id="addSocialNetworks_lead_1615775_1" class="hidden greenBorderBox"></div>
		    </div>
		    	    </div>
    </div>
								</div>
							<div class="tab-pane" id="tab_contact2">
									<div id="contact2Fields">
		<div class="fieldsContainer">
			<br style="clear: both; " />
						<div class="alternateThinRowStyle" >
			    <div class="leftTitle" >Role: </div>
			    <div class="rightTitle" >
			    		<div style="float: left; margin-right: 10px;">
		<a href="javascript:void(0);" class="btn btn-default btn-sm" onclick="manageRoles();" >
			<span class="icon-file-edit"></span> Manage Roles
		</a>
	</div>
				   		    <select id="leadTwoRoleID" name="leadTwoRoleID" style="width: px;"  class="styled" >
    	<option value="" > -- </option>
<option value="65261"  >Mother</option>
<option value="65488"  >Father</option>
<option value="65489"  >Sister</option>
<option value="65490"  >Brother</option>
<option value="65491"  >Aunt</option>
<option value="65492"  >Uncle</option>
<option value="65493"  >Grandmother</option>
<option value="65494"  >Grandfather</option>
    </select>
    			    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
							    	<div class="alternateThinRowStyle" >
			    <div class="leftTitle" >Pronoun: </div>
			    <div class="rightTitle" >
			    		<div class="rightTitle">
		    <select id="leadContact2Pronoun" name="leadContact2Pronoun" style="width: 300px;"  onchange="switchOtherPronounField('leadContact2Pronoun',this.value);"  class="styled">
    	<option value="" > -- </option>
<option value="she/her/hers"   >she/her/hers</option>
<option value="he/him/his"   >he/him/his</option>
<option value="they/them/theirs"   >they/them/theirs</option>
<option value="ae/aer/aers"   >ae/aer/aers</option>
<option value="fae/faer/faers"   >fae/faer/faers</option>
<option value="e/em/eirs"   >e/em/eirs</option>
<option value="ey/em/eirs"   >ey/em/eirs</option>
<option value="per/per/pers"   >per/per/pers</option>
<option value="tey/ter/ters"   >tey/ter/ters</option>
<option value="sie/sie/hirs"   >sie/sie/hirs</option>
<option value="ve/ver/vis"   >ve/ver/vis</option>
<option value="xe/xem/xyrs"   >xe/xem/xyrs</option>
<option value="zie/zim/hirs"   >zie/zim/hirs</option>
<option value="no preference"   >no preference</option>
<option value="other/custom"   >other/custom</option>
    </select>
    		<div id="leadContact2Pronoun_otherField" class=" hidden ">
			<input type="text" id="leadContact2Pronoun_other" name="leadContact2Pronoun_other" size="45" class="form-control" maxlength="" value=""   />		</div>
	</div>
				    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
		    		    			<div class="normalThinRowStyle" >
			    <div class="leftTitle" >Full Name: </div>
			    <div class="pull-right form-inline" >
				    <input type="text" id="leadGroomFirst" name="leadGroomFirst" size="10" class="form-control" maxlength="" value=""   />				    <input type="text" id="leadGroomMiddle" name="leadGroomMiddle" size="6" class="form-control" maxlength="" value=""   />				    <input type="text" id="leadGroomLast" name="leadGroomLast" size="10" class="form-control" maxlength="" value=""   />			   	</div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
					    		    <div class="alternateThinRowStyle" >
			    <div class="leftTitle" >Main Phone: </div>
			    <div class="rightTitle" >
			    <input type="text" id="leadGroomPhone" name="leadGroomPhone" size="35" class="form-control" maxlength="" value=""   /> </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
					    		    <div class="rightTitle" >
		    	<div id="contact2PhoneLink" style="margin-top: 5px;" >
		    		<a href="javascript:void(0);" class="btn blue btn-sm" onclick="showOtherPhones('contact2PhoneLink','contact2OtherPhones');" ><span class="icon-file-edit"></span> Edit Other Phones</a>		    	</div>
		    </div>
		    <br style="clear: both;" />
		    <div id="contact2OtherPhones" class="hidden">
		    	<div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" style="padding-left: 0px; padding-right: 0px;" >
				    <div class="normalThinRowStyle" >
					    <div class="leftTitle" >Alternate Phone: </div>
					    <div class="rightTitle" >
					    <input type="text" id="leadGroomAltPhone" name="leadGroomAltPhone" size="35" class="form-control" maxlength="" value=""   /></div>
					    <div class="clearSmall" ></div><br style="clear: both; " />
				    </div>
				    <div class="normalThinRowStyle" >
					    <div class="leftTitle" >Mobile Phone: </div>
					    <div class="rightTitle" >
					    	<div class="input-group">
							   <input type="text" id="leadGroomMobilePhone" name="leadGroomMobilePhone" size="35" class="form-control" maxlength="" value=""   />							   <span class="input-group-addon" title="You can Opt-In to receive SMS/Text notifications"><input type="checkbox" id="leadTwoMobileTextingOptIn" name="leadTwoMobileTextingOptIn" class="" value="1"   align="middle" style="vertical-align: middle;"  /> Opt-In</span>
							</div>
					    </div>
					    <div class="clearSmall" ></div><br style="clear: both; " />
				    </div>
			    </div>
			    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" style="padding-right: 0px;">
				     <div class="normalThinRowStyle" >
					    <div class="leftTitle" >Home Phone: </div>
					    <div class="rightTitle" >
					    <input type="text" id="leadGroomHomePhone" name="leadGroomHomePhone" size="35" class="form-control" maxlength="" value=""   /></div>
					    <div class="clearSmall" ></div><br style="clear: both; " />
				    </div>
				    <div class="normalThinRowStyle" >
					    <div class="leftTitle" >Fax: </div>
					    <div class="rightTitle" >
					    <input type="text" id="leadGroomFax" name="leadGroomFax" size="35" class="form-control" maxlength="" value=""   /></div>
					    <div class="clearSmall" ></div><br style="clear: both; " />
				    </div>
			    </div>
				<br style="clear: both;" />
				<br style="clear: both;" />
		    </div>
					    		    <div class="normalThinRowStyle" >
			    <div class="leftTitle" >Email: </div>
			    <div class="pull-right col-md-8 col-sm-8 col-xs-8 input-group" >
			    	<div class="input-group">
			    		<input type="text" id="leadGroomEmail" name="leadGroomEmail" size="45" class="form-control" maxlength="" value=""   />			    		<span class="input-group-addon" title="You can Opt-In to receive marketing communications and notifications"><input type="checkbox" id="leadTwoEmail1OptIn" name="leadTwoEmail1OptIn" class="" value="1"   align="middle" style="vertical-align: middle;"  /> Opt-In</span>
			    	</div>
			    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
					    		   	<div class="alternateThinRowStyle" >
			    <div class="leftTitle" >Email 2: </div>
			    <div class="pull-right col-md-8 col-sm-8 col-xs-8 input-group" >
			    	<div class="input-group">
			    		<input type="text" id="leadTwoEmail2" name="leadTwoEmail2" size="45" class="form-control" maxlength="" value=""   />			    		<span class="input-group-addon" title="You can Opt-In to receive marketing communications and notifications"><input type="checkbox" id="leadTwoEmail2OptIn" name="leadTwoEmail2OptIn" class="" value="1"   align="middle" style="vertical-align: middle;"  /> Opt-In</span>
			    	</div>
			   	</div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
					    		    <div class="normalThinRowStyle" >
			    <div class="leftTitle" >Social Network(s): </div>
			    <div class="rightTitle" >
			    	<div id="social_listing_1615775_2" class="noneDIV smallText">			No social network accounts have been added		</div>			    	<br style="clear: both; " />
			    	<div class="rightTitle">
			    		<a href="javascript:void(0);" class="btn btn-default btn-sm" onclick="showAddSocialAccount('lead','1615775','2');" ><span class="fa fa-plus"></span> Add </a>
			    	</div><br style="clear: both; " />
			    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
			    <div id="addSocialNetworks_lead_1615775_2" class="hidden greenBorderBox"></div>
		    </div>
		    		</div>
	</div>
								</div>
							<div class="tab-pane" id="tab_contact3">
									<div id="contact3Fields">
		<div class="fieldsContainer">
			<br style="clear: both; " />
					    <div class="alternateThinRowStyle" >
			    <div class="leftTitle" >Role: </div>
			    <div class="rightTitle" >
			    		<div style="float: left; margin-right: 10px;">
		<a href="javascript:void(0);" class="btn btn-default btn-sm" onclick="manageRoles();" >
			<span class="icon-file-edit"></span> Manage Roles
		</a>
	</div>
				   		    <select id="leadThreeRoleID" name="leadThreeRoleID" style="width: px;"  class="styled" >
    	<option value="" > -- </option>
<option value="65261"  >Mother</option>
<option value="65488"  >Father</option>
<option value="65489"  >Sister</option>
<option value="65490"  >Brother</option>
<option value="65491"  >Aunt</option>
<option value="65492"  >Uncle</option>
<option value="65493"  >Grandmother</option>
<option value="65494"  >Grandfather</option>
    </select>
    			    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
							    	<div class="alternateThinRowStyle" >
			    <div class="leftTitle" >Pronoun: </div>
			    <div class="rightTitle" >
			    		<div class="rightTitle">
		    <select id="leadContact3Pronoun" name="leadContact3Pronoun" style="width: 300px;"  onchange="switchOtherPronounField('leadContact3Pronoun',this.value);"  class="styled">
    	<option value="" > -- </option>
<option value="she/her/hers"   >she/her/hers</option>
<option value="he/him/his"   >he/him/his</option>
<option value="they/them/theirs"   >they/them/theirs</option>
<option value="ae/aer/aers"   >ae/aer/aers</option>
<option value="fae/faer/faers"   >fae/faer/faers</option>
<option value="e/em/eirs"   >e/em/eirs</option>
<option value="ey/em/eirs"   >ey/em/eirs</option>
<option value="per/per/pers"   >per/per/pers</option>
<option value="tey/ter/ters"   >tey/ter/ters</option>
<option value="sie/sie/hirs"   >sie/sie/hirs</option>
<option value="ve/ver/vis"   >ve/ver/vis</option>
<option value="xe/xem/xyrs"   >xe/xem/xyrs</option>
<option value="zie/zim/hirs"   >zie/zim/hirs</option>
<option value="no preference"   >no preference</option>
<option value="other/custom"   >other/custom</option>
    </select>
    		<div id="leadContact3Pronoun_otherField" class=" hidden ">
			<input type="text" id="leadContact3Pronoun_other" name="leadContact3Pronoun_other" size="45" class="form-control" maxlength="" value=""   />		</div>
	</div>
				    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
		    		    			<div class="normalThinRowStyle" >
			    <div class="leftTitle" >Full Name: </div>
				<div class="pull-right form-inline" >
				    <input type="text" id="leadEmergContFirstName" name="leadEmergContFirstName" size="15" class="form-control" maxlength="" value=""   />				    <input type="text" id="leadEmergContLastName" name="leadEmergContLastName" size="15" class="form-control" maxlength="" value=""   />			    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
		    		    		    <div class="alternateThinRowStyle" >
			    <div class="leftTitle" >Phone: </div>
			    <div class="rightTitle" >
			    <input type="text" id="leadEmergContPhone" name="leadEmergContPhone" size="45" class="form-control" maxlength="" value=""   /></div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
		    		    		    <div class="normalThinRowStyle" >
			    <div class="leftTitle" >Email: </div>
			    <div class="pull-right col-md-8 col-sm-8 col-xs-8 input-group" >
			    	<div class="input-group">
			    		<input type="text" id="leadEmergContEmail" name="leadEmergContEmail" size="45" class="form-control" maxlength="" value=""   />			    		<span class="input-group-addon" title="You can Opt-In to receive marketing communications and notifications"><input type="checkbox" id="leadThreeEmail1OptIn" name="leadThreeEmail1OptIn" class="" value="1"   align="middle" style="vertical-align: middle;"  /> Opt-In</span>
			    	</div>
			    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
					    		    <div class="alternateThinRowStyle" >
			    <div class="leftTitle" >Email 2: </div>
			    <div class="pull-right col-md-8 col-sm-8 col-xs-8 input-group" >
			    	<div class="input-group">
			    		<input type="text" id="leadThreeEmail2" name="leadThreeEmail2" size="45" class="form-control" maxlength="" value=""   />			    		<span class="input-group-addon" title="You can Opt-In to receive marketing communications and notifications"><input type="checkbox" id="leadThreeEmail2OptIn" name="leadThreeEmail2OptIn" class="" value="1"   align="middle" style="vertical-align: middle;"  /> Opt-In</span>
			    	</div>
			    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
					    		    <div class="normalThinRowStyle" >
			    <div class="leftTitle" >Social Network(s): </div>
			    <div class="rightTitle" >
			    	<div id="social_listing_1615775_3" class="noneDIV smallText">			No social network accounts have been added		</div>			    	<br style="clear: both; " />
			    	<div class="rightTitle">
			    		<a href="javascript:void(0);" class="btn btn-default btn-sm" onclick="showAddSocialAccount('lead','1615775','3');" ><span class="fa fa-plus"></span> Add </a>
			    	</div><br style="clear: both; " />
			    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
			    <div id="addSocialNetworks_lead_1615775_3" class="hidden greenBorderBox"></div>
		    </div>
		    	    </div>
    </div>
								</div>
							<div class="tab-pane" id="tab_contact4">
									<div id="contact4Fields">
		<div class="fieldsContainer">
			<br style="clear: both; " />
						<div class="alternateThinRowStyle" >
			    <div class="leftTitle" >Role: </div>
			    <div class="rightTitle" >
			    		<div style="float: left; margin-right: 10px;">
		<a href="javascript:void(0);" class="btn btn-default btn-sm" onclick="manageRoles();" >
			<span class="icon-file-edit"></span> Manage Roles
		</a>
	</div>
				   		    <select id="leadFourRoleID" name="leadFourRoleID" style="width: px;"  class="styled" >
    	<option value="" > -- </option>
<option value="65261"  >Mother</option>
<option value="65488"  >Father</option>
<option value="65489"  >Sister</option>
<option value="65490"  >Brother</option>
<option value="65491"  >Aunt</option>
<option value="65492"  >Uncle</option>
<option value="65493"  >Grandmother</option>
<option value="65494"  >Grandfather</option>
    </select>
    			    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
							    	<div class="alternateThinRowStyle" >
			    <div class="leftTitle" >Pronoun: </div>
			    <div class="rightTitle" >
			    		<div class="rightTitle">
		    <select id="leadContact4Pronoun" name="leadContact4Pronoun" style="width: 300px;"  onchange="switchOtherPronounField('leadContact4Pronoun',this.value);"  class="styled">
    	<option value="" > -- </option>
<option value="she/her/hers"   >she/her/hers</option>
<option value="he/him/his"   >he/him/his</option>
<option value="they/them/theirs"   >they/them/theirs</option>
<option value="ae/aer/aers"   >ae/aer/aers</option>
<option value="fae/faer/faers"   >fae/faer/faers</option>
<option value="e/em/eirs"   >e/em/eirs</option>
<option value="ey/em/eirs"   >ey/em/eirs</option>
<option value="per/per/pers"   >per/per/pers</option>
<option value="tey/ter/ters"   >tey/ter/ters</option>
<option value="sie/sie/hirs"   >sie/sie/hirs</option>
<option value="ve/ver/vis"   >ve/ver/vis</option>
<option value="xe/xem/xyrs"   >xe/xem/xyrs</option>
<option value="zie/zim/hirs"   >zie/zim/hirs</option>
<option value="no preference"   >no preference</option>
<option value="other/custom"   >other/custom</option>
    </select>
    		<div id="leadContact4Pronoun_otherField" class=" hidden ">
			<input type="text" id="leadContact4Pronoun_other" name="leadContact4Pronoun_other" size="45" class="form-control" maxlength="" value=""   />		</div>
	</div>
				    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
		    		    	    	<div class="normalThinRowStyle" >
			    <div class="leftTitle" >Full Name: </div>
			    <div class="pull-right form-inline" >
				    <input type="text" id="leadFirst" name="leadFirst" size="15" class="form-control" maxlength="" value=""   />				    <input type="text" id="leadLast" name="leadLast" size="15" class="form-control" maxlength="" value=""   />				</div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
					    		    <div class="alternateThinRowStyle" >
			    <div class="leftTitle" >Main Phone: </div>
			    <div class="rightTitle" >
			    <input type="text" id="leadPhone" name="leadPhone" size="35" class="form-control" maxlength="" value=""   /></div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
		    					    <div class="rightTitle" >
		    	<div id="contact4PhoneLink" style="margin-top: 5px;" >
		    		<a href="javascript:void(0);" class="btn blue btn-sm" onclick="showOtherPhones('contact4PhoneLink','contact4OtherPhones');" ><span class="icon-file-edit"></span> Edit Other Phones</a>		    	</div>
		    </div>

		    <br style="clear: both;" />

		    <div id="contact4OtherPhones" class="hidden">
		    	<div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" style="padding-left: 0px; padding-right: 0px;" >
				    <div class="normalThinRowStyle" >
					    <div class="leftTitle" >Alternate Phone: </div>
					    <div class="rightTitle" >
					    <input type="text" id="leadAltPhone" name="leadAltPhone" size="35" class="form-control" maxlength="" value=""   /></div>
					    <div class="clearSmall" ></div><br style="clear: both; " />
				    </div>
				    <div class="normalThinRowStyle" >
					    <div class="leftTitle" >Mobile Phone: </div>
					    <div class="rightTitle" >
					    	<div class="input-group">
							   <input type="text" id="leadMobilePhone" name="leadMobilePhone" size="35" class="form-control" maxlength="" value=""   />							   <span class="input-group-addon" title="You can Opt-In to receive SMS/Text notifications"><input type="checkbox" id="leadFourMobileTextingOptIn" name="leadFourMobileTextingOptIn" class="" value="1"   align="middle" style="vertical-align: middle;"  /> Opt-In</span>
							</div>
					    </div>
					    <div class="clearSmall" ></div><br style="clear: both; " />
				    </div>
			    </div>
			    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" style="padding-right: 0px;">
				     <div class="normalThinRowStyle" >
					    <div class="leftTitle" >Home Phone: </div>
					    <div class="rightTitle" >
					    <input type="text" id="leadHomePhone" name="leadHomePhone" size="35" class="form-control" maxlength="" value=""   /></div>
					    <div class="clearSmall" ></div><br style="clear: both; " />
				    </div>
				    <div class="normalThinRowStyle" >
					    <div class="leftTitle" >Fax: </div>
					    <div class="rightTitle" >
					    <input type="text" id="leadFax" name="leadFax" size="35" class="form-control" maxlength="" value=""   /></div>
					    <div class="clearSmall" ></div><br style="clear: both; " />
				    </div>
			    </div>
				<br style="clear: both;" />
				<br style="clear: both;" />
		    </div>
		    		    		    <div class="normalThinRowStyle" >
			    <div class="leftTitle" >Email: </div>
			    <div class="pull-right col-md-8 col-sm-8 col-xs-8 input-group" >
			    	<div class="input-group">
			    		<input type="text" id="leadEmail" name="leadEmail" size="45" class="form-control" maxlength="" value=""   />			    		<span class="input-group-addon" title="You can Opt-In to receive marketing communications and notifications"><input type="checkbox" id="leadFourEmail1OptIn" name="leadFourEmail1OptIn" class="" value="1"   align="middle" style="vertical-align: middle;"  /> Opt-In</span>
			    	</div>
			    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
					    		    <div class="alternateThinRowStyle" >
			    <div class="leftTitle" >Email 2: </div>
			    <div class="pull-right col-md-8 col-sm-8 col-xs-8 input-group" >
			    	<div class="input-group">
			    		<input type="text" id="leadFourEmail2" name="leadFourEmail2" size="45" class="form-control" maxlength="" value=""   />			    		<span class="input-group-addon" title="You can Opt-In to receive marketing communications and notifications"><input type="checkbox" id="leadFourEmail2OptIn" name="leadFourEmail2OptIn" class="" value="1"   align="middle" style="vertical-align: middle;"  /> Opt-In</span>
			    	</div>
			    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
					    			<div class="normalThinRowStyle" >
			    <div class="leftTitle" >Social Network(s): </div>
			    <div class="rightTitle" >
			    	<div id="social_listing_1615775_4" class="noneDIV smallText">			No social network accounts have been added		</div>			    	<br style="clear: both; " />
			    	<div class="rightTitle">
			    		<a href="javascript:void(0);" class="btn btn-default btn-sm" onclick="showAddSocialAccount('lead','1615775','4');" ><span class="fa fa-plus"></span> Add </a>
			    	</div><br style="clear: both; " />
			    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
			    <div id="addSocialNetworks_lead_1615775_4" class="hidden greenBorderBox"></div>
		    </div>
		    		</div>
    </div>
								</div>
						</div> <!-- end of tabcontent -->
					</div> <!-- end of tabblable -->
				</div> <!-- end of portlet body -->
			</div> <!-- end of portlet -->
		</div>

		<div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
			<div class="portlet light bordered" >
				<div class="portlet-title">
					<div class="caption">
					
					<i class="icon-calendar"></i><span class="caption-subject bold headerTitle"> Event Info</span>					</div>
				</div>
				<div class="portlet-body">
							<div class="normalThinRowStyle" >
			<div class="leftTitle" >Read/Un-Read (New): <div id="status_1615775" style="display: none; float: right;"><img src="/admin/icons/indicator.gif" align="absmiddle" /></div></div>
			<div class="rightTitle" >	<input type="checkbox" id="leadRead" name="leadRead" class="{labelOn: 'Read', labelOff: 'Un-Read' , change: function(inputVal) { markAsReadUnread('1615775', inputVal );$('#status_1615775').show(); } }" value="1" xclass="styled"    /> 	
				</div>
			<div class="clearSmall" ></div><br style="clear:both;" />
		</div>
							<div class="normalThinRowStyle" >
						<div class="leftTitle" >Lead Type: </div>
						<div class="rightTitle" >    <select id="clientType_lead" name="clientType_lead" style="width: 250px;"  onchange="switchType(this.value);"  class="styled" >
    	<option value="" > -- </option>
<option value="127925:2" selected="selected" >NEWBORN INQUIRY</option>
<option value="172873:2"  >** BOOKING **</option>
<option value="163469:2"  >***HOLD***</option>
<option value="246736:2"  >HR HOLD DO NOT BOOK</option>
<option value="221508:2"  >HOLIIDAY</option>
<option value="243387:2"  >** FAMILY WORKSHOP **</option>
<option value="237686:2"  >SICK</option>
<option value="222747:2"  >** MODEL HOLD **</option>
<option value="178703:2"  >ATL NEWBORN</option>
<option value="171881:2"  >AUS NEWBORN</option>
<option value="180542:2"  >BOS NEWBORN</option>
<option value="171890:2"  >CHI NEWBORN</option>
<option value="187392:2"  >CLT NEWBORN</option>
<option value="247412:2"  >COS NEWBORN</option>
<option value="171883:2"  >DAL NEWBORN</option>
<option value="179512:2"  >DC NEWBORN</option>
<option value="171857:2"  >DEN NEWBORN</option>
<option value="216013:2"  >DET NEWBORN</option>
<option value="171882:2"  >HOU NEWBORN</option>
<option value="247411:2"  >JAX NEWBORN</option>
<option value="171888:2"  >KC NEWBORN</option>
<option value="171885:2"  >LA NEWBORN</option>
<option value="210914:2"  >LOU NEWBORN</option>
<option value="217645:2"  >LVN NEWBORN</option>
<option value="216430:2"  >MAN NEWBORN</option>
<option value="198067:2"  >MSP NEWBORN</option>
<option value="213323:2"  >NYNJ NEWBORN</option>
<option value="171886:2"  >OC NEWBORN</option>
<option value="176693:2"  >ORL NEWBORN</option>
<option value="173600:2"  >PHL NEWBORN</option>
<option value="184091:2"  >PHX NEWBORN</option>
<option value="171891:2"  >POR NEWBORN</option>
<option value="187208:2"  >RAL NEWBORN</option>
<option value="243459:2"  >RIV NEWBORN</option>
<option value="179940:2"  >SAC NEWBORN</option>
<option value="209146:2"  >SAT NEWBORN</option>
<option value="171884:2"  >SD NEWBORN</option>
<option value="172749:2"  >SEA NEWBORN</option>
<option value="171887:2"  >SF NEWBORN</option>
<option value="196488:2"  >SLC NEWBORN</option>
<option value="192240:2"  >TPA NEWBORN</option>
<option value="129320:2"  >TRAINING MODEL SESSION</option>
<option value="178240:2"  >IN HOME MODEL SESSION</option>
<option value="182416:2"  >ATL NEWBORN TWINS</option>
<option value="243966:2"  >ATL NEWBORN TRIPLETS </option>
<option value="168838:2"  >AUS NEWBORN TWINS</option>
<option value="185050:2"  >BOS NEWBORN  - TWINS</option>
<option value="154013:2"  >CHI NEWBORN TWINS</option>
<option value="189979:2"  >CHI-NEWBORN TRIPLETS</option>
<option value="199711:2"  >CLT NEWBORN TWINS</option>
<option value="166759:2"  >DAL NEWBORN TWINS</option>
<option value="244788:2"  >DAL NEWBORN - TRIPLETS</option>
<option value="182142:2"  >DC NEWBORN - TWINS</option>
<option value="245442:2"  >DC NEWBORN TRIPLETS</option>
<option value="171892:2"  >DEN NEWBORN TWINS</option>
<option value="235188:2"  >DET NEWBORN - TWINS</option>
<option value="168747:2"  >HOU NEWBORN TWINS</option>
<option value="242223:2"  >HOU NEWBORN - TRIPLETS</option>
<option value="248751:2"  >JAX NEWBORN TWINS</option>
<option value="136193:2"  >KC NEWBORN-TWINS</option>
<option value="139685:2"  >LA NEWBORN-TWINS</option>
<option value="210915:2"  >LOU NEWBORN TWINS</option>
<option value="228705:2"  >LVN NEWBORN - TWINS</option>
<option value="221689:2"  >MAN NEWBORN TWINS</option>
<option value="205422:2"  >MSP NEWBORN - TWINS</option>
<option value="213492:2"  >NYNJ NEWBORN TWINS</option>
<option value="235478:2"  >NYNJ NEWBORN TRIPLETS</option>
<option value="136190:2"  >OC NEWBORN-TWINS</option>
<option value="232122:2"  >OC NEWBORN  -TRIPLETS</option>
<option value="184004:2"  >ORL NEWBORN - TWINS</option>
<option value="176146:2"  >PHL NEWBORN TWINS</option>
<option value="208921:2"  >PHL NEWBORN TRIPLETS</option>
<option value="188412:2"  >PHX NEWBORN TWINS</option>
<option value="171893:2"  >POR NEWBORN TWINS</option>
<option value="245707:2"  >POR NEWBORN TRIPLETS</option>
<option value="198296:2"  >RAL NEWBORN  - TWINS</option>
<option value="243460:2"  >RIV NEWBORN - TWINS</option>
<option value="186989:2"  >SAC NEWBORN-TWINS</option>
<option value="227701:2"  >SAC NEWBORN - TRIPLETS</option>
<option value="209147:2"  >SAT NEWBORN - TWINs</option>
<option value="180944:2"  >SEA NEWBORN TWINS</option>
<option value="158174:2"  >SF NEWBORN TWINS</option>
<option value="178448:2"  >SD NEWBORN TWINS</option>
<option value="136757:2"  >SD NEWBORN-TRIPLETS</option>
<option value="192241:2"  >TPA NEWBORN - TWINS</option>
<option value="149467:2"  >PHOTOGRAPHER WORKSHOP</option>
<option value="218775:2"  >TENTATIVE Photographer Workshop</option>
<option value="153844:2"  >ONBOARDING</option>
<option value="182492:2"  >PAYROLL CLOSE OUT</option>
<option value="182493:2"  >TX SALES TAX DUE</option>
<option value="182491:2"  >TRAINING DATE</option>
<option value="195437:2"  >GIFT CARD PURCHASE</option>
<option value="198857:2"  >BOOKING STAFF TIME OFF</option>
<option value="232699:2"  >BUF NEWBORN</option>
<option value="181877:2"  >NAS NEWBORN</option>
<option value="187393:2"  >NAS NEWBORN - TWINS</option>
<option value="209812:2"  >RIC NEWBORN</option>
<option value="209813:2"  >RIC NEWBORN - TWINS</option>
    </select>
    </div>
						<div class="clearSmall" ></div><br style="clear:both;" />
					</div>

					<div class="normalThinRowStyle" >
					    <div class="leftTitle" >Multi-Day Event: </div>
					    <div class="rightTitle" >
					    	<input type="checkbox" id="isMultiDay_lead" name="isMultiDay_lead" class="{labelOn: 'Yes', labelOff: 'No' , change: function(inputVal) {  switchMultiDayEvent_lead(inputVal);  } }" value="1" xclass="styled"    /> 	
	</div>
					    <div class="clearSmall" ></div><br style="clear: both;" />
				    </div>

					<div class="normalThinRowStyle" >
						<div class="leftTitle" >Event Date: </div>
						<div class="rightTitle" ><input type="text" id="eventDate_lead" name="eventDate_lead" size="25" class="textBlock date_picker textBlock" maxlength="" value=""  data-role="none"  autocomplete="new-password"   /></div>
						<div class="clearSmall" ></div><br style="clear:both;" />
					</div>
					<div id="endDateDiv_lead" class="hidden" >
					    <div class="normalThinRowStyle" >
						    <div class="leftTitle" >End Date:</div>
						    <div class="rightTitle" >
						    <input type="text" id="endDate_lead" name="endDate_lead" size="25" class="textBlock date_picker textBlock" maxlength="" value=""  data-role="none"  autocomplete="new-password"   /></div><br />
						    <div class="clearSmall" ></div><br style="clear: both;" />
					    </div>
				    </div>

					<div class="normalThinRowStyle" >
						<div class="leftTitle" >Event Start:</div>
						<div class="rightTitle" >	<div class="timepicker_wrapper">
		<input type="text" id="leadEventTimeStart_lead_chooser" name="leadEventTimeStart_lead_chooser" size="15" class="timepicker" maxlength="" value=""  data-role="none"   /><input type="hidden" id="leadEventTimeStart_lead" name="leadEventTimeStart_lead" size="" class="" maxlength="" value=""   />	</div>
	 </div>
						<div class="clearSmall" ></div><br style="clear: both;" />
					</div>
					<div class="normalThinRowStyle" >
						<div class="leftTitle" >Event End:</div>
						<div class="rightTitle" >	<div class="timepicker_wrapper">
		<input type="text" id="leadEventTimeEnd_lead_chooser" name="leadEventTimeEnd_lead_chooser" size="15" class="timepicker" maxlength="" value=""  data-role="none"   /><input type="hidden" id="leadEventTimeEnd_lead" name="leadEventTimeEnd_lead" size="" class="" maxlength="" value=""   />	</div>
	 </div>
						<div class="clearSmall" ></div><br style="clear: both;" />
					</div>

					<div class="normalThinRowStyle" >
						<div class="leftTitle" >Event Name:</div>
						<div class="rightTitle" >


							<div style="float: left; margin-right: 10px;">
			                	<button type="button" class="btn btn-default btn-sm" onclick="showInsertVariablesIntoLeadEventName();" data-toggle="popover" data-html="true" data-content="<i class=&quot;icon-rocket&quot;></i> Click to insert Variables/Tokens" data-original-title=""><span class="icon-rocket font-green-jungle"></span></button>
			                </div>
			                <div style="float: left;">
								<input type="text" id="leadCustomEventName_lead" name="leadCustomEventName_lead" size="35" class="form-control" maxlength="" value="Notes PC 1. Shawn Hughes"  data-role="none"   />							</div>
						</div>
						<div class="clearSmall" ></div><br style="clear: both;" />
					</div>

				
 	<div class="alternateThinRowStyle" >
		<div class="leftTitle" >Timezone:</div>
	    <div class="rightTitle" >
	    				    <select id="leadTimezone" name="leadTimezone" style="width: 300px;"  class="styled">
    	<option value="" > -- </option>
<option value="America/Los_Angeles"   >(GMT-08:00) Pacific Time (US & Canada); Tijuana</option>
<option value="America/Phoenix"   >(GMT-07:00) Arizona</option>
<option value="America/Denver"   >(GMT-07:00) Mountain Time (US & Canada)</option>
<option value="America/Chicago"   >(GMT-06:00) Central Time (US & Canada)</option>
<option value="America/New_York" selected="selected"  >(GMT-05:00) Eastern Time (US & Canada)</option>
<option value="America/Indiana/Indianapolis"   >(GMT-05:00) Indiana (East)</option>
<option value="America/Bogota"   >(GMT-05:00) Bogota</option>
<option value="America/Mexico_City"   >(GMT-06:00) Mexico City</option>
<option value="America/Regina"   >(GMT-06:00) Saskatchewan</option>
<option value="America/Managua"   >(GMT-06:00) Central America</option>
<option value="America/Chihuahua"   >(GMT-07:00) Chihuahua</option>
<option value="Pacific/Wake"   >(GMT-12:00) International Date Line West</option>
<option value="Pacific/Apia"   >(GMT-11:00) Midway Island</option>
<option value="Pacific/Honolulu"   >(GMT-10:00) Hawaii</option>
<option value="America/Anchorage"   >(GMT-09:00) Alaska</option>
<option value="America/Halifax"   >(GMT-04:00) Atlantic Time (Canada)</option>
<option value="America/Caracas"   >(GMT-04:00) Caracas</option>
<option value="America/Santiago"   >(GMT-04:00) Santiago</option>
<option value="America/St_Johns"   >(GMT-03:30) Newfoundland</option>
<option value="America/Sao_Paulo"   >(GMT-03:00) Brasilia</option>
<option value="America/Argentina/Buenos_Aires"   >(GMT-03:00) Buenos Aires</option>
<option value="America/Godthab"   >(GMT-03:00) Greenland</option>
<option value="America/Noronha"   >(GMT-02:00) Mid-Atlantic</option>
<option value="Atlantic/Azores"   >(GMT-01:00) Azores</option>
<option value="Atlantic/Cape_Verde"   >(GMT-01:00) Cape Verde Is.</option>
<option value="Africa/Casablanca"   >(GMT) Casablanca</option>
<option value="Europe/London"   >(GMT) London</option>
<option value="Africa/Casablanca"   >(GMT) Monrovia</option>
<option value="Europe/Belgrade"   >(GMT+01:00) Belgrade</option>
<option value="Europe/Berlin"   >(GMT+01:00) Berlin</option>
<option value="Europe/Paris"   >(GMT+01:00) Paris</option>
<option value="Europe/Sarajevo"   >(GMT+01:00) Sarajevo</option>
<option value="Africa/Lagos"   >(GMT+01:00) West Central Africa</option>
<option value="Europe/Istanbul"   >(GMT+02:00) Athens</option>
<option value="Europe/Bucharest"   >(GMT+02:00) Bucharest</option>
<option value="Africa/Cairo"   >(GMT+02:00) Cairo</option>
<option value="Africa/Johannesburg"   >(GMT+02:00) Harare</option>
<option value="Europe/Helsinki"   >(GMT+02:00) Helsinki</option>
<option value="Europe/Istanbul"   >(GMT+02:00) Istanbul</option>
<option value="Asia/Jerusalem"   >(GMT+02:00) Jerusalem</option>
<option value="Asia/Baghdad"   >(GMT+03:00) Baghdad</option>
<option value="Europe/Moscow"   >(GMT+03:00) Moscow</option>
<option value="Africa/Nairobi"   >(GMT+03:00) Nairobi</option>
<option value="Asia/Riyadh"   >(GMT+03:00) Riyadh</option>
<option value="Asia/Tehran"   >(GMT+03:30) Tehran</option>
<option value="Asia/Muscat"   >(GMT+04:00) Muscat</option>
<option value="Asia/Tbilisi"   >(GMT+04:00) Tbilisi</option>
<option value="Asia/Kabul"   >(GMT+04:30) Kabul</option>
<option value="Asia/Yekaterinburg"   >(GMT+05:00) Ekaterinburg</option>
<option value="Asia/Karachi"   >(GMT+05:00) Karachi</option>
<option value="Asia/Calcutta"   >(GMT+05:30) Mumbai</option>
<option value="Asia/Katmandu"   >(GMT+05:45) Kathmandu</option>
<option value="Asia/Novosibirsk"   >(GMT+06:00) Almaty</option>
<option value="Asia/Dhaka"   >(GMT+06:00) Dhaka</option>
<option value="Asia/Novosibirsk"   >(GMT+06:00) Novosibirsk</option>
<option value="Asia/Colombo"   >(GMT+06:00) Sri Jayawardenepura</option>
<option value="Asia/Rangoon"   >(GMT+06:30) Rangoon</option>
<option value="Asia/Krasnoyarsk"   >(GMT+07:00) Krasnoyarsk</option>
<option value="Asia/Hong_Kong"   >(GMT+08:00) Hong Kong</option>
<option value="Asia/Irkutsk"   >(GMT+08:00) Irkutsk</option>
<option value="Australia/Perth"   >(GMT+08:00) Perth</option>
<option value="Asia/Singapore"   >(GMT+08:00) Singapore</option>
<option value="Asia/Taipei"   >(GMT+08:00) Taipei</option>
<option value="Asia/Irkutsk"   >(GMT+08:00) Ulaan Bataar</option>
<option value="Asia/Hong_Kong"   >(GMT+08:00) Urumqi</option>
<option value="Asia/Seoul"   >(GMT+09:00) Seoul</option>
<option value="Asia/Tokyo"   >(GMT+09:00) Tokyo</option>
<option value="Asia/Yakutsk"   >(GMT+09:00) Yakutsk</option>
<option value="Australia/Adelaide"   >(GMT+09:30) Adelaide</option>
<option value="Australia/Darwin"   >(GMT+09:30) Darwin</option>
<option value="Australia/Brisbane"   >(GMT+10:00) Brisbane</option>
<option value="Australia/Sydney"   >(GMT+10:00) Canberra</option>
<option value="Pacific/Guam"   >(GMT+10:00) Guam</option>
<option value="Australia/Hobart"   >(GMT+10:00) Hobart</option>
<option value="Australia/Sydney"   >(GMT+10:00) Melbourne</option>
<option value="Australia/Sydney"   >(GMT+10:00) Sydney</option>
<option value="Asia/Vladivostok"   >(GMT+10:00) Vladivostok</option>
<option value="Asia/Magadan"   >(GMT+11:00) Magadan</option>
<option value="Pacific/Auckland"   >(GMT+12:00) Auckland</option>
<option value="Pacific/Fiji"   >(GMT+12:00) Fiji</option>
<option value="Pacific/Tongatapu"   >(GMT+13:00) Nuku'alofa</option>
    </select>
    
	    </div>
	    <div class="clearSmall" ></div><br style="clear: both; " />
	</div>

	<div class="normalThinRowStyle" >
		<div class="leftTitle" >Primary Contact(s): <span class="smallText">(limit 2 max)</span></div>
	    <div class="rightTitle" >
	    	    <select id="primaryContactCombo" name="primaryContactCombo" style="width: 250px;"  multiple="multiple" data-role="none"  class="">
    	<option value="1" selected="selected"  >Contact #1</option>
<option value="2"   >Contact #2</option>
<option value="3"   >Contact #3</option>
<option value="4"   >Contact #4</option>
    </select>
    	    	<input type="hidden" id="leadPrimaryContactFields" name="leadPrimaryContactFields" size="" class="" maxlength="" value="1"   />	    </div>
	    <div class="clearSmall" ></div><br style="clear: both; " />
	</div>
	<div class="alternateThinRowStyle" >
		<div class="leftTitle" >Brand:</div>
	    <div class="rightTitle" >
	    				    <select id="leadBrandID" name="leadBrandID" style="width: 300px;"  class="styled">
    	<option value="" > -- </option>
<option value="11473" selected="selected"  >BOOKING</option>
<option value="15793"   >SESSIONS</option>
<option value="18826"   >SCHEDULE</option>
<option value="19647"   >RESERVE</option>
<option value="11634"   >(EDITING) EAST/CENTRAL SMP </option>
<option value="17159"   >(EDITING) WEST SMP</option>
<option value="14652"   >Sweet Me Models</option>
<option value="17956"   >SMP JOBS</option>
<option value="21064"   >PC -SMP</option>
<option value="17187"   >ONBOARDING SMP</option>
<option value="15121"   >XXX DEFUNCT BRAND NAME XXX</option>
<option value="17999"   >Sweet Me Gift Cards</option>
<option value="18626"   >Sweet Me Staff Vacation Calendar</option>
<option value="19691"   >MELISSA TEST BRAND - DO NOT USE</option>
    </select>
    
	    </div>
	    <div class="clearSmall" ></div><br style="clear: both; " />
	</div>
	
	<div class="normalThinRowStyle">
		<div class="leftTitle"><span class="roundedTag opt-out-inline"><i class="icon-firewall-allert" style="font-size: 16px;"></i></span> Require Strict Privacy (via EU GDPR laws)</div>
		<div class="rightTitle">
			    <select id="leadRequireStrictPrivacy" name="leadRequireStrictPrivacy" style="width: 120px;"  class="styled">
    	<option value="" > -- </option>
<option value="0" selected="selected"  >No</option>
<option value="1"   >Yes</option>
    </select>
    		</div>
		<div class="clearSmall"></div><br style="clear: both;">
	</div>

	<br style="clear: both; " />
					</div><!-- end portlet body -->
			</div>
		</div>

	</div>
	<div class="row">

		<div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
			<div class="portlet light bordered" >
				<div class="portlet-title">
					<div class="caption"><span class="caption-subject bold headerTitle">Address Info</span></div>
				</div>
				<div class="portlet-body">
					<div class="tabbable">
						<ul class="nav nav-tabs">
															<li class="active">
									<a href="#tab_primary" data-toggle="tab" > Primary Address</a>
								</li>
																							<li class="">
									<a href="#tab_secondary" data-toggle="tab" >	Secondary Address</a>
								</li>
								
						</ul>
						<div class="tab-content">
							<div class="tab-pane active" id="tab_primary">
								<div >
		<div class="fieldsContainer">
			<br style="clear: both; " />
						<div class="normalThinRowStyle" >
			    <div class="leftTitle" >Address: </div>
			    <div class="rightTitle" >
			    <input type="text" id="leadAddress" name="leadAddress" size="35" class="form-control" maxlength="" value=""   /></div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
					    		    <div class="alternateThinRowStyle" >
			    <div class="leftTitle" >Address1: </div>
			    <div class="rightTitle" >
			    <input type="text" id="leadAddress1" name="leadAddress1" size="35" class="form-control" maxlength="" value=""   /></div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
					    			<div class="normalThinRowStyle" >
			    <div class="leftTitle" >Zip/Postal Code: </div>
			    <div class="rightTitle" >
			    <input type="text" id="leadZip" name="leadZip" size="15" class="form-control" maxlength="20" value="10110"  onKeyUp="javascript:getZip(this.value,'leadCity','leadState','leadCountry');" onblur="javascript:getZip(this.value,'leadCity','leadState','leadCountry');"    /></div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
					    		    <div class="alternateThinRowStyle" >
			    <div class="leftTitle" >City/Town: </div>
			    <div class="rightTitle" >
			    <input type="text" id="leadCity" name="leadCity" size="35" class="form-control" maxlength="" value="New York City"   /></div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
					    		    <div class="normalThinRowStyle" id="leadStateDIV" >
			    <div class="leftTitle" >State/Province: </div>
			    <div class="rightTitle" id="leadState_field">
			    	<input type="hidden" id="leadState" name="leadState" size="" class="" maxlength="" value="33"   />			    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
					    		    <div class="alternateThinRowStyle" >
			    <div class="leftTitle" >Country: </div>
			    <div class="rightTitle" >
			        <select id="leadCountry" name="leadCountry" style="width: 200px;"  onchange="javascript:switchState('leadState' , 'leadCountry');"  class="styled" >
    	<option value="" > -- </option>
<option value="1"  >Afghanistan, Islamic State of</option>
<option value="2"  >Albania</option>
<option value="3"  >Algeria</option>
<option value="4"  >American Samoa</option>
<option value="5"  >Andorra, Principality of</option>
<option value="6"  >Angola</option>
<option value="7"  >Anguilla</option>
<option value="8"  >Antarctica</option>
<option value="9"  >Antigua and Barbuda</option>
<option value="10"  >Argentina</option>
<option value="11"  >Armenia</option>
<option value="12"  >Aruba</option>
<option value="13"  >Australia</option>
<option value="14"  >Austria</option>
<option value="15"  >Azerbaijan</option>
<option value="16"  >Bahamas</option>
<option value="17"  >Bahrain</option>
<option value="18"  >Bangladesh</option>
<option value="19"  >Barbados</option>
<option value="20"  >Belarus</option>
<option value="21"  >Belgium</option>
<option value="22"  >Belize</option>
<option value="23"  >Benin</option>
<option value="24"  >Bermuda</option>
<option value="25"  >Bhutan</option>
<option value="26"  >Bolivia</option>
<option value="27"  >Bosnia-Herzegovina</option>
<option value="28"  >Botswana</option>
<option value="29"  >Bouvet Island</option>
<option value="30"  >Brazil</option>
<option value="31"  >British Indian Ocean Territory</option>
<option value="32"  >Brunei Darussalam</option>
<option value="33"  >Bulgaria</option>
<option value="34"  >Burkina Faso</option>
<option value="35"  >Burundi</option>
<option value="36"  >Cambodia, Kingdom of</option>
<option value="37"  >Cameroon</option>
<option value="38"  >Canada</option>
<option value="39"  >Cape Verde</option>
<option value="40"  >Cayman Islands</option>
<option value="41"  >Central African Republic</option>
<option value="42"  >Chad</option>
<option value="43"  >Chile</option>
<option value="44"  >China</option>
<option value="45"  >Christmas Island</option>
<option value="46"  >Cocos (Keeling) Islands</option>
<option value="47"  >Colombia</option>
<option value="48"  >Comoros</option>
<option value="49"  >Congo</option>
<option value="50"  >Congo, The Democratic Republic of the</option>
<option value="51"  >Cook Islands</option>
<option value="52"  >Costa Rica</option>
<option value="53"  >Croatia</option>
<option value="54"  >Cuba</option>
<option value="55"  >Cyprus</option>
<option value="56"  >Czech Republic</option>
<option value="57"  >Denmark</option>
<option value="58"  >Djibouti</option>
<option value="59"  >Dominica</option>
<option value="60"  >Dominican Republic</option>
<option value="61"  >East Timor</option>
<option value="62"  >Ecuador</option>
<option value="63"  >Egypt</option>
<option value="64"  >El Salvador</option>
<option value="65"  >Equatorial Guinea</option>
<option value="66"  >Eritrea</option>
<option value="67"  >Estonia</option>
<option value="68"  >Ethiopia</option>
<option value="69"  >Falkland Islands</option>
<option value="70"  >Faroe Islands</option>
<option value="71"  >Fiji</option>
<option value="72"  >Finland</option>
<option value="73"  >Former Czechoslovakia</option>
<option value="74"  >Former USSR</option>
<option value="75"  >France</option>
<option value="76"  >France (European Territory)</option>
<option value="77"  >French Guyana</option>
<option value="78"  >French Southern Territories</option>
<option value="79"  >Gabon</option>
<option value="80"  >Gambia</option>
<option value="81"  >Georgia</option>
<option value="82"  >Germany</option>
<option value="83"  >Ghana</option>
<option value="84"  >Gibraltar</option>
<option value="85"  >Great Britain</option>
<option value="86"  >Greece</option>
<option value="87"  >Greenland</option>
<option value="88"  >Grenada</option>
<option value="89"  >Guadeloupe (French)</option>
<option value="90"  >Guam (USA)</option>
<option value="91"  >Guatemala</option>
<option value="92"  >Guinea</option>
<option value="93"  >Guinea Bissau</option>
<option value="94"  >Guyana</option>
<option value="95"  >Haiti</option>
<option value="96"  >Heard and McDonald Islands</option>
<option value="97"  >Holy See (Vatican City State)</option>
<option value="98"  >Honduras</option>
<option value="99"  >Hong Kong</option>
<option value="100"  >Hungary</option>
<option value="101"  >Iceland</option>
<option value="102"  >India</option>
<option value="103"  >Indonesia</option>
<option value="104"  >Iran</option>
<option value="105"  >Iraq</option>
<option value="106"  >Ireland</option>
<option value="107"  >Israel</option>
<option value="108"  >Italy</option>
<option value="109"  >Ivory Coast (Cote D'Ivoire)</option>
<option value="110"  >Jamaica</option>
<option value="111"  >Japan</option>
<option value="112"  >Jordan</option>
<option value="113"  >Kazakhstan</option>
<option value="114"  >Kenya</option>
<option value="115"  >Kiribati</option>
<option value="116"  >Kuwait</option>
<option value="117"  >Kyrgyz Republic (Kyrgyzstan)</option>
<option value="118"  >Laos</option>
<option value="119"  >Latvia</option>
<option value="120"  >Lebanon</option>
<option value="121"  >Lesotho</option>
<option value="122"  >Liberia</option>
<option value="123"  >Libya</option>
<option value="124"  >Liechtenstein</option>
<option value="125"  >Lithuania</option>
<option value="126"  >Luxembourg</option>
<option value="127"  >Macau</option>
<option value="128"  >Macedonia</option>
<option value="129"  >Madagascar</option>
<option value="130"  >Malawi</option>
<option value="131"  >Malaysia</option>
<option value="132"  >Maldives</option>
<option value="133"  >Mali</option>
<option value="134"  >Malta</option>
<option value="135"  >Marshall Islands</option>
<option value="136"  >Martinique (French)</option>
<option value="137"  >Mauritania</option>
<option value="138"  >Mauritius</option>
<option value="139"  >Mayotte</option>
<option value="140"  >Mexico</option>
<option value="141"  >Micronesia</option>
<option value="142"  >Moldavia</option>
<option value="143"  >Monaco</option>
<option value="144"  >Mongolia</option>
<option value="145"  >Montserrat</option>
<option value="146"  >Morocco</option>
<option value="147"  >Mozambique</option>
<option value="148"  >Myanmar</option>
<option value="149"  >Namibia</option>
<option value="150"  >Nauru</option>
<option value="151"  >Nepal</option>
<option value="152"  >Netherlands</option>
<option value="153"  >Netherlands Antilles</option>
<option value="154"  >Neutral Zone</option>
<option value="155"  >New Caledonia (French)</option>
<option value="156"  >New Zealand</option>
<option value="157"  >Nicaragua</option>
<option value="158"  >Niger</option>
<option value="159"  >Nigeria</option>
<option value="160"  >Niue</option>
<option value="161"  >Norfolk Island</option>
<option value="162"  >North Korea</option>
<option value="163"  >Northern Mariana Islands</option>
<option value="164"  >Norway</option>
<option value="165"  >Oman</option>
<option value="166"  >Pakistan</option>
<option value="167"  >Palau</option>
<option value="168"  >Panama</option>
<option value="169"  >Papua New Guinea</option>
<option value="170"  >Paraguay</option>
<option value="171"  >Peru</option>
<option value="172"  >Philippines</option>
<option value="173"  >Pitcairn Island</option>
<option value="174"  >Poland</option>
<option value="175"  >Polynesia (French)</option>
<option value="176"  >Portugal</option>
<option value="178"  >Qatar</option>
<option value="179"  >Reunion (French)</option>
<option value="180"  >Romania</option>
<option value="181"  >Russian Federation</option>
<option value="182"  >Rwanda</option>
<option value="183"  >S. Georgia & S. Sandwich Isls.</option>
<option value="184"  >Saint Helena</option>
<option value="185"  >Saint Kitts & Nevis Anguilla</option>
<option value="186"  >Saint Lucia</option>
<option value="187"  >Saint Pierre and Miquelon</option>
<option value="188"  >Saint Tome (Sao Tome) and Principe</option>
<option value="189"  >Saint Vincent & Grenadines</option>
<option value="190"  >Samoa</option>
<option value="191"  >San Marino</option>
<option value="192"  >Saudi Arabia</option>
<option value="193"  >Senegal</option>
<option value="194"  >Seychelles</option>
<option value="195"  >Sierra Leone</option>
<option value="196"  >Singapore</option>
<option value="197"  >Slovak Republic</option>
<option value="198"  >Slovenia</option>
<option value="199"  >Solomon Islands</option>
<option value="200"  >Somalia</option>
<option value="201"  >South Africa</option>
<option value="202"  >South Korea</option>
<option value="203"  >Spain</option>
<option value="204"  >Sri Lanka</option>
<option value="205"  >Sudan</option>
<option value="206"  >Suriname</option>
<option value="207"  >Svalbard and Jan Mayen Islands</option>
<option value="208"  >Swaziland</option>
<option value="209"  >Sweden</option>
<option value="210"  >Switzerland</option>
<option value="211"  >Syria</option>
<option value="212"  >Tajikistan</option>
<option value="213"  >Taiwan</option>
<option value="214"  >Tanzania</option>
<option value="215"  >Thailand</option>
<option value="216"  >Togo</option>
<option value="217"  >Tokelau</option>
<option value="218"  >Tonga</option>
<option value="219"  >Trinidad and Tobago</option>
<option value="220"  >Tunisia</option>
<option value="221"  >Turkey</option>
<option value="222"  >Turkmenistan</option>
<option value="223"  >Turks and Caicos Islands</option>
<option value="224"  >Tuvalu</option>
<option value="225"  >Uganda</option>
<option value="226"  >Ukraine</option>
<option value="227"  >United Arab Emirates</option>
<option value="228"  >United Kingdom</option>
<option value="229" selected="selected" >United States</option>
<option value="230"  >Uruguay</option>
<option value="231"  >USA Minor Outlying Islands</option>
<option value="232"  >Uzbekistan</option>
<option value="233"  >Vanuatu</option>
<option value="234"  >Venezuela</option>
<option value="235"  >Vietnam</option>
<option value="236"  >Virgin Islands (British)</option>
<option value="237"  >Virgin Islands (USA)</option>
<option value="238"  >Wallis and Futuna Islands</option>
<option value="239"  >Western Sahara</option>
<option value="240"  >Yemen</option>
<option value="243"  >Zambia</option>
<option value="244"  >Zimbabwe</option>
    </select>
    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
					</div>
	</div>
								</div>
							<div class="tab-pane" id="tab_secondary">
								<div id="secondaryAddressFields">
		<div class="fieldsContainer">

			<br style="clear: both; " />
						<div class="normalThinRowStyle" >
			    <div class="leftTitle" >Address: </div>
			    <div class="rightTitle" >
			    <input type="text" id="leadEmergContAddress" name="leadEmergContAddress" size="35" class="form-control" maxlength="" value=""   /></div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
		    		    		    <div class="alternateThinRowStyle" >
			    <div class="leftTitle" >Zip/Postal Code: </div>
			    <div class="rightTitle" >
			    <input type="text" id="leadEmergContZip" name="leadEmergContZip" size="15" class="form-control" maxlength="20" value=""  onKeyUp="javascript:getZip(this.value,'leadEmergContCity','leadEmergContState','leadEmergContCountry');" onblur="javascript:getZip(this.value,'leadEmergContCity','leadEmergContState','leadEmergContCountry');"    /></div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
		    		    		    <div class="normalThinRowStyle" >
			    <div class="leftTitle" >City/Town: </div>
			    <div class="rightTitle" >
			    <input type="text" id="leadEmergContCity" name="leadEmergContCity" size="35" class="form-control" maxlength="" value=""   /></div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
		    		    		    <div class="alternateThinRowStyle" id="custEmergContStateDIV" >
			    <div class="leftTitle" >State/Province: </div>
			    <div class="rightTitle" id="custEmergContState_field">
			    	<input type="hidden" id="leadEmergContState" name="leadEmergContState" size="" class="" maxlength="" value=""   />			    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
		    		    		    <div class="normalThinRowStyle" >
			    <div class="leftTitle" >Country: </div>
			    <div class="rightTitle" >
			        <select id="leadEmergContCountry" name="leadEmergContCountry" style="width: 200px;"  onchange="javascript:switchState('leadEmergContState' , 'leadEmergContCountry');"  class="styled" >
    	<option value="" > -- </option>
<option value="1"  >Afghanistan, Islamic State of</option>
<option value="2"  >Albania</option>
<option value="3"  >Algeria</option>
<option value="4"  >American Samoa</option>
<option value="5"  >Andorra, Principality of</option>
<option value="6"  >Angola</option>
<option value="7"  >Anguilla</option>
<option value="8"  >Antarctica</option>
<option value="9"  >Antigua and Barbuda</option>
<option value="10"  >Argentina</option>
<option value="11"  >Armenia</option>
<option value="12"  >Aruba</option>
<option value="13"  >Australia</option>
<option value="14"  >Austria</option>
<option value="15"  >Azerbaijan</option>
<option value="16"  >Bahamas</option>
<option value="17"  >Bahrain</option>
<option value="18"  >Bangladesh</option>
<option value="19"  >Barbados</option>
<option value="20"  >Belarus</option>
<option value="21"  >Belgium</option>
<option value="22"  >Belize</option>
<option value="23"  >Benin</option>
<option value="24"  >Bermuda</option>
<option value="25"  >Bhutan</option>
<option value="26"  >Bolivia</option>
<option value="27"  >Bosnia-Herzegovina</option>
<option value="28"  >Botswana</option>
<option value="29"  >Bouvet Island</option>
<option value="30"  >Brazil</option>
<option value="31"  >British Indian Ocean Territory</option>
<option value="32"  >Brunei Darussalam</option>
<option value="33"  >Bulgaria</option>
<option value="34"  >Burkina Faso</option>
<option value="35"  >Burundi</option>
<option value="36"  >Cambodia, Kingdom of</option>
<option value="37"  >Cameroon</option>
<option value="38"  >Canada</option>
<option value="39"  >Cape Verde</option>
<option value="40"  >Cayman Islands</option>
<option value="41"  >Central African Republic</option>
<option value="42"  >Chad</option>
<option value="43"  >Chile</option>
<option value="44"  >China</option>
<option value="45"  >Christmas Island</option>
<option value="46"  >Cocos (Keeling) Islands</option>
<option value="47"  >Colombia</option>
<option value="48"  >Comoros</option>
<option value="49"  >Congo</option>
<option value="50"  >Congo, The Democratic Republic of the</option>
<option value="51"  >Cook Islands</option>
<option value="52"  >Costa Rica</option>
<option value="53"  >Croatia</option>
<option value="54"  >Cuba</option>
<option value="55"  >Cyprus</option>
<option value="56"  >Czech Republic</option>
<option value="57"  >Denmark</option>
<option value="58"  >Djibouti</option>
<option value="59"  >Dominica</option>
<option value="60"  >Dominican Republic</option>
<option value="61"  >East Timor</option>
<option value="62"  >Ecuador</option>
<option value="63"  >Egypt</option>
<option value="64"  >El Salvador</option>
<option value="65"  >Equatorial Guinea</option>
<option value="66"  >Eritrea</option>
<option value="67"  >Estonia</option>
<option value="68"  >Ethiopia</option>
<option value="69"  >Falkland Islands</option>
<option value="70"  >Faroe Islands</option>
<option value="71"  >Fiji</option>
<option value="72"  >Finland</option>
<option value="73"  >Former Czechoslovakia</option>
<option value="74"  >Former USSR</option>
<option value="75"  >France</option>
<option value="76"  >France (European Territory)</option>
<option value="77"  >French Guyana</option>
<option value="78"  >French Southern Territories</option>
<option value="79"  >Gabon</option>
<option value="80"  >Gambia</option>
<option value="81"  >Georgia</option>
<option value="82"  >Germany</option>
<option value="83"  >Ghana</option>
<option value="84"  >Gibraltar</option>
<option value="85"  >Great Britain</option>
<option value="86"  >Greece</option>
<option value="87"  >Greenland</option>
<option value="88"  >Grenada</option>
<option value="89"  >Guadeloupe (French)</option>
<option value="90"  >Guam (USA)</option>
<option value="91"  >Guatemala</option>
<option value="92"  >Guinea</option>
<option value="93"  >Guinea Bissau</option>
<option value="94"  >Guyana</option>
<option value="95"  >Haiti</option>
<option value="96"  >Heard and McDonald Islands</option>
<option value="97"  >Holy See (Vatican City State)</option>
<option value="98"  >Honduras</option>
<option value="99"  >Hong Kong</option>
<option value="100"  >Hungary</option>
<option value="101"  >Iceland</option>
<option value="102"  >India</option>
<option value="103"  >Indonesia</option>
<option value="104"  >Iran</option>
<option value="105"  >Iraq</option>
<option value="106"  >Ireland</option>
<option value="107"  >Israel</option>
<option value="108"  >Italy</option>
<option value="109"  >Ivory Coast (Cote D'Ivoire)</option>
<option value="110"  >Jamaica</option>
<option value="111"  >Japan</option>
<option value="112"  >Jordan</option>
<option value="113"  >Kazakhstan</option>
<option value="114"  >Kenya</option>
<option value="115"  >Kiribati</option>
<option value="116"  >Kuwait</option>
<option value="117"  >Kyrgyz Republic (Kyrgyzstan)</option>
<option value="118"  >Laos</option>
<option value="119"  >Latvia</option>
<option value="120"  >Lebanon</option>
<option value="121"  >Lesotho</option>
<option value="122"  >Liberia</option>
<option value="123"  >Libya</option>
<option value="124"  >Liechtenstein</option>
<option value="125"  >Lithuania</option>
<option value="126"  >Luxembourg</option>
<option value="127"  >Macau</option>
<option value="128"  >Macedonia</option>
<option value="129"  >Madagascar</option>
<option value="130"  >Malawi</option>
<option value="131"  >Malaysia</option>
<option value="132"  >Maldives</option>
<option value="133"  >Mali</option>
<option value="134"  >Malta</option>
<option value="135"  >Marshall Islands</option>
<option value="136"  >Martinique (French)</option>
<option value="137"  >Mauritania</option>
<option value="138"  >Mauritius</option>
<option value="139"  >Mayotte</option>
<option value="140"  >Mexico</option>
<option value="141"  >Micronesia</option>
<option value="142"  >Moldavia</option>
<option value="143"  >Monaco</option>
<option value="144"  >Mongolia</option>
<option value="145"  >Montserrat</option>
<option value="146"  >Morocco</option>
<option value="147"  >Mozambique</option>
<option value="148"  >Myanmar</option>
<option value="149"  >Namibia</option>
<option value="150"  >Nauru</option>
<option value="151"  >Nepal</option>
<option value="152"  >Netherlands</option>
<option value="153"  >Netherlands Antilles</option>
<option value="154"  >Neutral Zone</option>
<option value="155"  >New Caledonia (French)</option>
<option value="156"  >New Zealand</option>
<option value="157"  >Nicaragua</option>
<option value="158"  >Niger</option>
<option value="159"  >Nigeria</option>
<option value="160"  >Niue</option>
<option value="161"  >Norfolk Island</option>
<option value="162"  >North Korea</option>
<option value="163"  >Northern Mariana Islands</option>
<option value="164"  >Norway</option>
<option value="165"  >Oman</option>
<option value="166"  >Pakistan</option>
<option value="167"  >Palau</option>
<option value="168"  >Panama</option>
<option value="169"  >Papua New Guinea</option>
<option value="170"  >Paraguay</option>
<option value="171"  >Peru</option>
<option value="172"  >Philippines</option>
<option value="173"  >Pitcairn Island</option>
<option value="174"  >Poland</option>
<option value="175"  >Polynesia (French)</option>
<option value="176"  >Portugal</option>
<option value="178"  >Qatar</option>
<option value="179"  >Reunion (French)</option>
<option value="180"  >Romania</option>
<option value="181"  >Russian Federation</option>
<option value="182"  >Rwanda</option>
<option value="183"  >S. Georgia & S. Sandwich Isls.</option>
<option value="184"  >Saint Helena</option>
<option value="185"  >Saint Kitts & Nevis Anguilla</option>
<option value="186"  >Saint Lucia</option>
<option value="187"  >Saint Pierre and Miquelon</option>
<option value="188"  >Saint Tome (Sao Tome) and Principe</option>
<option value="189"  >Saint Vincent & Grenadines</option>
<option value="190"  >Samoa</option>
<option value="191"  >San Marino</option>
<option value="192"  >Saudi Arabia</option>
<option value="193"  >Senegal</option>
<option value="194"  >Seychelles</option>
<option value="195"  >Sierra Leone</option>
<option value="196"  >Singapore</option>
<option value="197"  >Slovak Republic</option>
<option value="198"  >Slovenia</option>
<option value="199"  >Solomon Islands</option>
<option value="200"  >Somalia</option>
<option value="201"  >South Africa</option>
<option value="202"  >South Korea</option>
<option value="203"  >Spain</option>
<option value="204"  >Sri Lanka</option>
<option value="205"  >Sudan</option>
<option value="206"  >Suriname</option>
<option value="207"  >Svalbard and Jan Mayen Islands</option>
<option value="208"  >Swaziland</option>
<option value="209"  >Sweden</option>
<option value="210"  >Switzerland</option>
<option value="211"  >Syria</option>
<option value="212"  >Tajikistan</option>
<option value="213"  >Taiwan</option>
<option value="214"  >Tanzania</option>
<option value="215"  >Thailand</option>
<option value="216"  >Togo</option>
<option value="217"  >Tokelau</option>
<option value="218"  >Tonga</option>
<option value="219"  >Trinidad and Tobago</option>
<option value="220"  >Tunisia</option>
<option value="221"  >Turkey</option>
<option value="222"  >Turkmenistan</option>
<option value="223"  >Turks and Caicos Islands</option>
<option value="224"  >Tuvalu</option>
<option value="225"  >Uganda</option>
<option value="226"  >Ukraine</option>
<option value="227"  >United Arab Emirates</option>
<option value="228"  >United Kingdom</option>
<option value="229"  >United States</option>
<option value="230"  >Uruguay</option>
<option value="231"  >USA Minor Outlying Islands</option>
<option value="232"  >Uzbekistan</option>
<option value="233"  >Vanuatu</option>
<option value="234"  >Venezuela</option>
<option value="235"  >Vietnam</option>
<option value="236"  >Virgin Islands (British)</option>
<option value="237"  >Virgin Islands (USA)</option>
<option value="238"  >Wallis and Futuna Islands</option>
<option value="239"  >Western Sahara</option>
<option value="240"  >Yemen</option>
<option value="243"  >Zambia</option>
<option value="244"  >Zimbabwe</option>
    </select>
    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
					</div>
	</div>
								</div>
						</div> <!-- end of tabcontent -->
					</div> <!-- end of tabbable -->
				</div> <!-- end of portletbody -->
			</div>
		</div>


		<div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
			<div class="portlet light bordered" >
				<div class="portlet-title">
					<div class="caption"><span class="caption-subject bold headerTitle">Other Info</span></div>
				</div>
				<div class="portlet-body">
					<div>
		<div class="fieldsContainer">
   			<br style="clear: both; " />

   			<!-- fake fields are a workaround for chrome autofill getting the wrong fields -->
			<input style="display:none" type="text" name="fakeusernameremembered"/>
			<input style="display:none" type="password" name="fakepasswordremembered"/>

   			   			<div class="normalThinRowStyle" >
			    <div class="leftTitle" >Company Name: </div>
			    <div class="rightTitle" >
			    	<textarea id="leadCompany" name="leadCompany" cols="35" rows="1" class="form-control NoEditor" resize=""  autocomplete="new-password" onkeypress="if(event.keyCode==13){return false;}"   ></textarea>			    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
								    <div class="alternateThinRowStyle" >
			    <div class="leftTitle" >Display Company Name in Listing: </div>
			    <div class="rightTitle" >    <select id="leadCompanyNameInListing" name="leadCompanyNameInListing" style="width: 80px;"  class="styled">
    	<option value="" > -- </option>
<option value="0" selected="selected"  >No</option>
<option value="1"   >Yes</option>
    </select>
    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
		    					    <div class="normalThinRowStyle" >
			    <div class="leftTitle" >Company Website URL: </div>
			    <div class="rightTitle" >
			    	<textarea id="leadURL" name="leadURL" cols="35" rows="1" class="form-control NoEditor" resize=""  autocomplete="new-password" onkeypress="if(event.keyCode==13){return false;}"   ></textarea>			    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
					    		    <div class="alternateThinRowStyle" >
			    <div class="leftTitle" >Client Portal Username: </div>
			    <div class="rightTitle" >
			    <textarea id="leadUser" name="leadUser" cols="35" rows="1" class="form-control NoEditor" resize=""  onblur="checkUserName(this.value, 'wedding');"  autocomplete="new-password" onkeypress="if(event.keyCode==13){return false;}"   ></textarea></div>
			    <div class="clearSmall" ></div><br style="clear: both; " />

			    <div id="username_status" class="hidden"></div>
		    </div>
					    		    <div class="normalThinRowStyle" >
		    	<div class="leftTitle" >Change Password: </div>
		   		<div class="rightTitle">
		   			<a href="javascript:void(0);" class="btn blue btn-sm" onclick="showChangePassword('');" ><span class="icon-firewall-allert"></span> Change Password</a>
		    	</div>
		    	<div class="clearSmall" ></div><br style="clear: both;" />
		    </div>
		    		    <div class="alternateThinRowStyle" >
			    <div class="leftTitle" >Date of first contact: </div>
			    <div class="rightTitle" ><input type="text" id="leadSignupDate" name="leadSignupDate" size="25" class="textBlock date_picker form-control" maxlength="" value="04/30/2025"  data-role="none"  autocomplete="new-password"   /></div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>

		    		    <div class="normalThinRowStyle" >
			    <div class="leftTitle" >Referred By: </div>

			    	<div id="leadReferredBy_errorField" class="failure hidden" ></div>
		<div id="leadReferredBy_current_referrer" class=" hidden  rightTitle currentReferrerDIV">
		<a href="javascript:void(0);" class="btn green-jungle btn-sm" onclick="viewGlobalReferrerChooseWindow('lead','1615775','','leadReferredBy','');" >
			<span class="icon-file-edit"></span> <span id="leadReferredBy_12295_referText" class="referrerText" ></span>
		</a>
	</div>
	<div class="rightTitle  " id="leadReferredBy_referrer_button" ><br />
		<a href="javascript:void(0);" onclick="viewGlobalReferrerChooseWindow('lead','1615775','','leadReferredBy','');" class="btn blue btn-sm" ><span class="fa fa-plus"></span> Associate Referrer</a>
	</div>
	<br style="clear: both; " />
			    </div>
		    		    <div class="normalThinRowStyle" >
			    <div class="leftTitle" >Internal Warning:
			    						<a href="javascript:void(0);" class="helpTip" data-titlebar="true" data-style="qtip-tipsy" data-tooltip="&lt;h2&gt;Internal Warning:&lt;/h2&gt;&lt;br /&gt;You can set a custom message that will display boldly everytime you open this client&#039;s
																		record to remind you or your staff about something that is important before you contact them.&lt;br /&gt;"  ><i class="fa fa-question-circle"></i></a>
			    </div>
			    <div class="rightTitle">
			    	<textarea id="leadCallWarning" name="leadCallWarning" cols="65" rows="2" class="form-control NoEditor" resize=""   ></textarea>			    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
		    
		    <div class="normalThinRowStyle" >
			    <div class="leftTitle" >Notes: </div>
			    <div class="rightTitle" style="background-color: #FFF;">
			    <textarea id="leadNotes" name="leadNotes" cols="35" rows="10" class="leadNotesEditor NoEditor" resize=""   ><p>This is a test lead.<br>PHOTOGRAPHER: This is a previous client. You will receive an email from clients@sweetmephotography with helpful information from the previous session and a link to the previous order.</p></textarea>			    <input type="hidden" id="leadNotesUpdated" name="leadNotesUpdated" size="" class="" maxlength="" value=""   />			    </div>
			    <div class="clearSmall" ></div><br style="clear: both; " />
		    </div>
		    	    </div>
    </div>
					</div> <!-- end of portletbody -->
			</div>
		</div>


	</div>
	<div class="leadsCustomFieldsWrapper">
			<div id="customFieldsHolder" class=" portlet light bordered">
	    		
		<div id="clientCustomFieldsHeader" class="headerTitle">Client Custom Fields:</div>
		<hr class="hrSlim" />
		<br style="clear: both;" />
		<br style="clear: both; " />
				<div id="questitem_17258" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_17258_desc">Event Date</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_17258" name="item_17258" size="25" class="textBlock date_picker form-control-updated" maxlength="" value=""   autocomplete="new-password"   /><input type="hidden" id="item_17258_required" name="item_17258_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_17258_type" name="item_17258_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_17258_subType" name="item_17258_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_17258_fieldlabel" name="item_17258_fieldlabel" size="55" class="textBlock" maxlength="" value="Event Date"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
			<br style="clear: both;" />
	<br style="clear: both;" />
			
		<div id="eventCustomFieldsHeader" class="headerTitle">Event Custom Fields:</div>
		<hr class="hrSlim" />
		<br style="clear: both;" />
		<br style="clear: both; " />
		
				<div id="questitem_15392" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15392_desc">ZAPIER GENERATED LEAD?</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><div class="custom-switch__wrapper"><div class="custom-switch__label"><p>No</p></div>  <label class="switch">
    <input type="checkbox" id="item_15392" class="" name="item_15392" value="1"    />     <span class="slider"></span>
  </label>

	<div class="custom-switch__label"><p>Yes</p></div></div><input type="hidden" id="item_15392_required" name="item_15392_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15392_type" name="item_15392_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15392_subType" name="item_15392_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15392_fieldlabel" name="item_15392_fieldlabel" size="55" class="textBlock" maxlength="" value="ZAPIER GENERATED LEAD?"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_17417" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_17417_desc">RETOUCHING LEVEL REQUIRED</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle">			<script type="text/javascript" >
			$(function() {
				$('div#item_17417').raty({
				'hints':		['1', '2', '3', '4', '5'], //['bad', 'poor', 'regular', 'good', 'gorgeous'],
				'number':       2,
				readOnly:     false,
				'scoreName':    'item_17417-score',
				'cancel':   true,
				'showHalf':     false,
				score: 		''
				});
			});
			</script>
			<div id="item_17417" class="starRating"></div>
			<input type="hidden" id="item_17417_required" name="item_17417_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_17417_type" name="item_17417_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_17417_subType" name="item_17417_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_17417_fieldlabel" name="item_17417_fieldlabel" size="55" class="textBlock" maxlength="" value="RETOUCHING LEVEL REQUIRED"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15670" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15670_desc">FINAL PACKAGE ORDERED</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle">            <div class="dropdown-container">
              <select id="item_15670" name="item_15670" style="width: 300px;"  class="dropdown-box">
    	<option value="" > -- </option>
<option value="NO UPGRADE"   >NO UPGRADE</option>
<option value="12 Images"   >12 Images</option>
<option value="20 Images"   >20 Images</option>
<option value="40-55 Images"   >40-55 Images</option>
<option value="65+"   >65+</option>
<option value="100"   >100</option>
<option value="120"   >120</option>
    </select>
                </div>
          <input type="hidden" id="item_15670_required" name="item_15670_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15670_type" name="item_15670_type" size="55" class="textBlock" maxlength="" value="combo"   /><input type="hidden" id="item_15670_subType" name="item_15670_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15670_fieldlabel" name="item_15670_fieldlabel" size="55" class="textBlock" maxlength="" value="FINAL PACKAGE ORDERED"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_16595" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_16595_desc">Session Time (in minutes)</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle">			<label class="form-control-radio-updated">
				<input type="radio" name="item_16595" value="Under 120 minutes"    />
				<span>Under 120 minutes</span>
			</label>
			<!--<br class="clearBoth" />-->			<label class="form-control-radio-updated">
				<input type="radio" name="item_16595" value="120 - 240 minutes"    />
				<span>120 - 240 minutes</span>
			</label>
			<!--<br class="clearBoth" />-->			<label class="form-control-radio-updated">
				<input type="radio" name="item_16595" value="Over 240 minutes"    />
				<span>Over 240 minutes</span>
			</label>
			<!--<br class="clearBoth" />--><input type="hidden" id="item_16595_required" name="item_16595_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_16595_type" name="item_16595_type" size="55" class="textBlock" maxlength="" value="radio"   /><input type="hidden" id="item_16595_subType" name="item_16595_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_16595_fieldlabel" name="item_16595_fieldlabel" size="55" class="textBlock" maxlength="" value="Session Time (in minutes)"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_13747" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_13747_desc">PHOTOGRAPHER FEES</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_13747" name="item_13747" size="35" class="form-control-updated " maxlength="" value=""    /><input type="hidden" id="item_13747_required" name="item_13747_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_13747_type" name="item_13747_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_13747_subType" name="item_13747_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_13747_fieldlabel" name="item_13747_fieldlabel" size="55" class="textBlock" maxlength="" value="PHOTOGRAPHER FEES"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15926" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15926_desc">Enter the timestamps of your first and last images shot. (NOT the time you uploaded them)</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_15926" name="item_15926" size="35" class="form-control-updated " maxlength="" value=""    /><input type="hidden" id="item_15926_required" name="item_15926_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_15926_type" name="item_15926_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15926_subType" name="item_15926_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15926_fieldlabel" name="item_15926_fieldlabel" size="55" class="textBlock" maxlength="" value="Enter the timestamps of your first and last images shot. (NOT the time you uploaded them)"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_13517" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_13517_desc">Shooting Time</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_13517" name="item_13517" size="35" class="form-control-updated " maxlength="" value=""    /><input type="hidden" id="item_13517_required" name="item_13517_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_13517_type" name="item_13517_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_13517_subType" name="item_13517_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_13517_fieldlabel" name="item_13517_fieldlabel" size="55" class="textBlock" maxlength="" value="Shooting Time"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_11969" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_11969_desc">How did you hear about us? (e.g. Facebook, Google, Instagram, Yelp, friend)</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_11969" name="item_11969" size="45" class="form-control-updated " maxlength="" value=""    /><input type="hidden" id="item_11969_required" name="item_11969_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_11969_type" name="item_11969_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_11969_subType" name="item_11969_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_11969_fieldlabel" name="item_11969_fieldlabel" size="55" class="textBlock" maxlength="" value="How did you hear about us? (e.g. Facebook, Google, Instagram, Yelp, friend)"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_11721" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_11721_desc">ASSIGNED PHOTOGRAPHER</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_11721" name="item_11721" size="30" class="form-control-updated " maxlength="" value=""    /><input type="hidden" id="item_11721_required" name="item_11721_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_11721_type" name="item_11721_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_11721_subType" name="item_11721_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_11721_fieldlabel" name="item_11721_fieldlabel" size="55" class="textBlock" maxlength="" value="ASSIGNED PHOTOGRAPHER"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_13804" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_13804_desc">Can you provide parking with no time limit or fees?</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><textarea id="item_13804" name="item_13804" cols="35" rows="2" class="form-control-updated NoEditor " resize=""    ></textarea><input type="hidden" id="item_13804_required" name="item_13804_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_13804_type" name="item_13804_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_13804_subType" name="item_13804_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_13804_fieldlabel" name="item_13804_fieldlabel" size="55" class="textBlock" maxlength="" value="Can you provide parking with no time limit or fees?"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_16318" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_16318_desc">Is your home on the ground floor or elevator accessible? Click for Yes</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><div class="custom-switch__wrapper"><div class="custom-switch__label"><p>No</p></div>  <label class="switch">
    <input type="checkbox" id="item_16318" class="" name="item_16318" value="1"    />     <span class="slider"></span>
  </label>

	<div class="custom-switch__label"><p>Yes</p></div></div><input type="hidden" id="item_16318_required" name="item_16318_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_16318_type" name="item_16318_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_16318_subType" name="item_16318_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_16318_fieldlabel" name="item_16318_fieldlabel" size="55" class="textBlock" maxlength="" value="Is your home on the ground floor or elevator accessible? Click for Yes"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_11852" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_11852_desc">If you are unable to provide a parking spot at or near your home we may need to charge a $20 parking fee.  Please leave more details about your parking situation in the comments section.</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="hidden" id="item_11852_required" name="item_11852_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_11852_type" name="item_11852_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_11852_subType" name="item_11852_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_11852_fieldlabel" name="item_11852_fieldlabel" size="55" class="textBlock" maxlength="" value="If you are unable to provide a parking spot at or near your home we may need to charge a $20 parking fee.  Please leave more details about your parking situation in the comments section."   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_8223" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_8223_desc">I consent to share my images for social media and marketing (no private information shared)</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle">            <div class="dropdown-container">
              <select id="item_8223" name="item_8223" style="width: 300px;"  class="dropdown-box">
    	<option value="" > -- </option>
<option value="Yes, permission granted"   >Yes, permission granted</option>
<option value="No, permission to photograph only"   >No, permission to photograph only</option>
    </select>
                </div>
          <input type="hidden" id="item_8223_required" name="item_8223_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_8223_type" name="item_8223_type" size="55" class="textBlock" maxlength="" value="combo"   /><input type="hidden" id="item_8223_subType" name="item_8223_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_8223_fieldlabel" name="item_8223_fieldlabel" size="55" class="textBlock" maxlength="" value="I consent to share my images for social media and marketing (no private information shared)"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_13478" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_13478_desc">Would you like to capture parent and/or sibling images? (no additional added package cost):</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="hidden" id="item_13478_required" name="item_13478_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_13478_type" name="item_13478_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_13478_subType" name="item_13478_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_13478_fieldlabel" name="item_13478_fieldlabel" size="55" class="textBlock" maxlength="" value="Would you like to capture parent and/or sibling images? (no additional added package cost):"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_11970" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_11970_desc">Would you like to capture parent and/or sibling images? (no additional package cost)</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_11970" name="item_11970" size="35" class="form-control-updated " maxlength="" value=""    /><input type="hidden" id="item_11970_required" name="item_11970_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_11970_type" name="item_11970_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_11970_subType" name="item_11970_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_11970_fieldlabel" name="item_11970_fieldlabel" size="55" class="textBlock" maxlength="" value="Would you like to capture parent and/or sibling images? (no additional package cost)"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_16898" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_16898_desc">Do you have pets? If yes, describe</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_16898" name="item_16898" size="35" class="form-control-updated " maxlength="" value=""    /><input type="hidden" id="item_16898_required" name="item_16898_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_16898_type" name="item_16898_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_16898_subType" name="item_16898_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_16898_fieldlabel" name="item_16898_fieldlabel" size="55" class="textBlock" maxlength="" value="Do you have pets? If yes, describe"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15672" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15672_desc">CELL PHONE</span>
				<i class="fa fa-eye font-green-jungle" title="Public (Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_15672" name="item_15672" size="35" class="form-control-updated " maxlength="" value=""    /><input type="hidden" id="item_15672_required" name="item_15672_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15672_type" name="item_15672_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15672_subType" name="item_15672_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15672_fieldlabel" name="item_15672_fieldlabel" size="55" class="textBlock" maxlength="" value="CELL PHONE"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_8225" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_8225_desc">BABY'S DUE DATE OR BIRTH DATE</span>
				<i class="fa fa-eye font-green-jungle" title="Public (Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_8225" name="item_8225" size="25" class="textBlock date_picker form-control-updated" maxlength="" value="04/30/2025"   autocomplete="new-password"   /><input type="hidden" id="item_8225_required" name="item_8225_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_8225_type" name="item_8225_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_8225_subType" name="item_8225_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_8225_fieldlabel" name="item_8225_fieldlabel" size="55" class="textBlock" maxlength="" value="BABY&#039;S DUE DATE OR BIRTH DATE"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_8226" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_8226_desc">Has your baby arrived yet?</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><div class="custom-switch__wrapper"><div class="custom-switch__label"><p>No</p></div>  <label class="switch">
    <input type="checkbox" id="item_8226" class="" name="item_8226" value="1"    />     <span class="slider"></span>
  </label>

	<div class="custom-switch__label"><p>Yes</p></div></div><input type="hidden" id="item_8226_required" name="item_8226_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_8226_type" name="item_8226_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_8226_subType" name="item_8226_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_8226_fieldlabel" name="item_8226_fieldlabel" size="55" class="textBlock" maxlength="" value="Has your baby arrived yet?"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_8229" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_8229_desc">If your baby has already arrived, what day was your baby born?</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_8229" name="item_8229" size="25" class="textBlock date_picker form-control-updated" maxlength="" value=""   autocomplete="new-password"   /><input type="hidden" id="item_8229_required" name="item_8229_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_8229_type" name="item_8229_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_8229_subType" name="item_8229_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_8229_fieldlabel" name="item_8229_fieldlabel" size="55" class="textBlock" maxlength="" value="If your baby has already arrived, what day was your baby born?"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_11722" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_11722_desc">Baby's Last Name</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_11722" name="item_11722" size="45" class="form-control-updated " maxlength="" value=""    /><input type="hidden" id="item_11722_required" name="item_11722_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_11722_type" name="item_11722_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_11722_subType" name="item_11722_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_11722_fieldlabel" name="item_11722_fieldlabel" size="55" class="textBlock" maxlength="" value="Baby&#039;s Last Name"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_14924" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_14924_desc">Baby's First Name</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_14924" name="item_14924" size="45" class="form-control-updated " maxlength="" value=""    /><input type="hidden" id="item_14924_required" name="item_14924_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_14924_type" name="item_14924_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_14924_subType" name="item_14924_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_14924_fieldlabel" name="item_14924_fieldlabel" size="55" class="textBlock" maxlength="" value="Baby&#039;s First Name"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_11723" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_11723_desc">Baby's Gender</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle">            <div class="dropdown-container">
              <select id="item_11723" name="item_11723" style="width: 300px;"  class="dropdown-box">
    	<option value="" > -- </option>
<option value="Boy"   >Boy</option>
<option value="Girl"   >Girl</option>
<option value="Boy/Girl Twins"   >Boy/Girl Twins</option>
<option value="Boy/Boy Twins"   >Boy/Boy Twins</option>
<option value="Girl/Girl Twins"   >Girl/Girl Twins</option>
<option value="Triplets"   >Triplets</option>
    </select>
                </div>
          <input type="hidden" id="item_11723_required" name="item_11723_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_11723_type" name="item_11723_type" size="55" class="textBlock" maxlength="" value="combo"   /><input type="hidden" id="item_11723_subType" name="item_11723_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_11723_fieldlabel" name="item_11723_fieldlabel" size="55" class="textBlock" maxlength="" value="Baby&#039;s Gender"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_18389" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_18389_desc">Baby's Gender</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle">            <div class="dropdown-container">
              <select id="item_18389" name="item_18389" style="width: 300px;"  class="dropdown-box">
    	<option value="" > -- </option>
<option value="It's a surprise!"   >It's a surprise!</option>
<option value="Boy"   >Boy</option>
<option value="Girl"   >Girl</option>
<option value="Boy/Girl Twins"   >Boy/Girl Twins</option>
<option value="Boy/Boy Twins"   >Boy/Boy Twins</option>
<option value="Girl/Girl Twins"   >Girl/Girl Twins</option>
<option value="Triplets"   >Triplets</option>
    </select>
                </div>
          <input type="hidden" id="item_18389_required" name="item_18389_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_18389_type" name="item_18389_type" size="55" class="textBlock" maxlength="" value="combo"   /><input type="hidden" id="item_18389_subType" name="item_18389_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_18389_fieldlabel" name="item_18389_fieldlabel" size="55" class="textBlock" maxlength="" value="Baby&#039;s Gender"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_10203" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_10203_desc">PHOTOGRAPHER SUMMARY OF SESSION: Describe how the session went for you and the client. Please note any concerns and contact your area manager directly if any concerns may need to be addressed immediately.</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><textarea id="item_10203" name="item_10203" cols="35" rows="5" class="form-control-updated NoEditor " resize=""    ></textarea><input type="hidden" id="item_10203_required" name="item_10203_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_10203_type" name="item_10203_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_10203_subType" name="item_10203_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_10203_fieldlabel" name="item_10203_fieldlabel" size="55" class="textBlock" maxlength="" value="PHOTOGRAPHER SUMMARY OF SESSION: Describe how the session went for you and the client. Please note any concerns and contact your area manager directly if any concerns may need to be addressed immediately."   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_8220" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_8220_desc">EDITOR NOTES/COMMENTS:</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><textarea id="item_8220" name="item_8220" cols="30" rows="5" class="form-control-updated NoEditor " resize=""    ></textarea><input type="hidden" id="item_8220_required" name="item_8220_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_8220_type" name="item_8220_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_8220_subType" name="item_8220_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_8220_fieldlabel" name="item_8220_fieldlabel" size="55" class="textBlock" maxlength="" value="EDITOR NOTES/COMMENTS:"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_12940" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_12940_desc">NOTES FOR RETOUCHING</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><textarea id="item_12940" name="item_12940" cols="30" rows="3" class="form-control-updated NoEditor " resize=""    ></textarea><input type="hidden" id="item_12940_required" name="item_12940_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_12940_type" name="item_12940_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_12940_subType" name="item_12940_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_12940_fieldlabel" name="item_12940_fieldlabel" size="55" class="textBlock" maxlength="" value="NOTES FOR RETOUCHING"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_14099" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_14099_desc">POST-RETOUCHING NOTES  (AUDITS)</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><textarea id="item_14099" name="item_14099" cols="30" rows="3" class="form-control-updated NoEditor " resize=""    ></textarea><input type="hidden" id="item_14099_required" name="item_14099_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_14099_type" name="item_14099_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_14099_subType" name="item_14099_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_14099_fieldlabel" name="item_14099_fieldlabel" size="55" class="textBlock" maxlength="" value="POST-RETOUCHING NOTES  (AUDITS)"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_18556" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_18556_desc">PAID CUSTOM EDIT REQUESTS</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><textarea id="item_18556" name="item_18556" cols="30" rows="3" class="form-control-updated NoEditor " resize=""    ></textarea><input type="hidden" id="item_18556_required" name="item_18556_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_18556_type" name="item_18556_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_18556_subType" name="item_18556_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_18556_fieldlabel" name="item_18556_fieldlabel" size="55" class="textBlock" maxlength="" value="PAID CUSTOM EDIT REQUESTS"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_11971" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_11971_desc">Comments or questions? (optional)</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><textarea id="item_11971" name="item_11971" cols="35" rows="2" class="form-control-updated NoEditor " resize=""    ></textarea><input type="hidden" id="item_11971_required" name="item_11971_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_11971_type" name="item_11971_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_11971_subType" name="item_11971_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_11971_fieldlabel" name="item_11971_fieldlabel" size="55" class="textBlock" maxlength="" value="Comments or questions? (optional)"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_8234" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_8234_desc">COMMENTS (OPTIONAL)</span>
				<i class="fa fa-eye font-green-jungle" title="Public (Visible on forms)"></i>			</div>
			<div class="rightTitle"><textarea id="item_8234" name="item_8234" cols="35" rows="1" class="form-control-updated NoEditor " resize=""    ></textarea><input type="hidden" id="item_8234_required" name="item_8234_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_8234_type" name="item_8234_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_8234_subType" name="item_8234_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_8234_fieldlabel" name="item_8234_fieldlabel" size="55" class="textBlock" maxlength="" value="COMMENTS (OPTIONAL)"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15125" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15125_desc">Do you have any concerns regarding this gallery?</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><div class="custom-switch__wrapper"><div class="custom-switch__label"><p>No</p></div>  <label class="switch">
    <input type="checkbox" id="item_15125" class="" name="item_15125" value="1"    />     <span class="slider"></span>
  </label>

	<div class="custom-switch__label"><p>Yes</p></div></div><input type="hidden" id="item_15125_required" name="item_15125_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_15125_type" name="item_15125_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15125_subType" name="item_15125_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15125_fieldlabel" name="item_15125_fieldlabel" size="55" class="textBlock" maxlength="" value="Do you have any concerns regarding this gallery?"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15158" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15158_desc">Confirm Event ID:</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_15158" name="item_15158" size="35" class="form-control-updated " maxlength="" value=""    /><input type="hidden" id="item_15158_required" name="item_15158_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_15158_type" name="item_15158_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15158_subType" name="item_15158_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15158_fieldlabel" name="item_15158_fieldlabel" size="55" class="textBlock" maxlength="" value="Confirm Event ID:"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15118" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15118_desc">Were you on time to the session?</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><div class="custom-switch__wrapper"><div class="custom-switch__label"><p>No</p></div>  <label class="switch">
    <input type="checkbox" id="item_15118" class="" name="item_15118" value="1"    />     <span class="slider"></span>
  </label>

	<div class="custom-switch__label"><p>Yes</p></div></div><input type="hidden" id="item_15118_required" name="item_15118_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_15118_type" name="item_15118_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15118_subType" name="item_15118_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15118_fieldlabel" name="item_15118_fieldlabel" size="55" class="textBlock" maxlength="" value="Were you on time to the session?"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15168" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15168_desc">Please enter the total time you spent at the session:</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_15168" name="item_15168" size="35" class="form-control-updated " maxlength="" value=""    /><input type="hidden" id="item_15168_required" name="item_15168_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_15168_type" name="item_15168_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15168_subType" name="item_15168_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15168_fieldlabel" name="item_15168_fieldlabel" size="55" class="textBlock" maxlength="" value="Please enter the total time you spent at the session:"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15113" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15113_desc">Number of images to upload:</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_15113" name="item_15113" size="35" class="form-control-updated " maxlength="" value=""    /><input type="hidden" id="item_15113_required" name="item_15113_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_15113_type" name="item_15113_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15113_subType" name="item_15113_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15113_fieldlabel" name="item_15113_fieldlabel" size="55" class="textBlock" maxlength="" value="Number of images to upload:"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15114" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15114_desc">Have you confirmed the correct images and number of images have uploaded successfully and are in RAW format?</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><div class="custom-switch__wrapper"><div class="custom-switch__label"><p>No</p></div>  <label class="switch">
    <input type="checkbox" id="item_15114" class="" name="item_15114" value="1"    />     <span class="slider"></span>
  </label>

	<div class="custom-switch__label"><p>Yes</p></div></div><input type="hidden" id="item_15114_required" name="item_15114_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_15114_type" name="item_15114_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15114_subType" name="item_15114_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15114_fieldlabel" name="item_15114_fieldlabel" size="55" class="textBlock" maxlength="" value="Have you confirmed the correct images and number of images have uploaded successfully and are in RAW format?"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15167" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15167_desc">I agree to back-up and store all RAW files taken at this session for 90 days.</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle">			<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15167[]" class="form-control-checkbox-updated" value="Yes"    />
				<span>Yes</span>
			</label>
			<input type="hidden" id="item_15167_required" name="item_15167_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_15167_type" name="item_15167_type" size="55" class="textBlock" maxlength="" value="checkbox"   /><input type="hidden" id="item_15167_subType" name="item_15167_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15167_fieldlabel" name="item_15167_fieldlabel" size="55" class="textBlock" maxlength="" value="I agree to back-up and store all RAW files taken at this session for 90 days."   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15629" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15629_desc">Did you photograph the grey card for background fabrics?</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><div class="custom-switch__wrapper"><div class="custom-switch__label"><p>No</p></div>  <label class="switch">
    <input type="checkbox" id="item_15629" class="" name="item_15629" value="1"    />     <span class="slider"></span>
  </label>

	<div class="custom-switch__label"><p>Yes</p></div></div><input type="hidden" id="item_15629_required" name="item_15629_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_15629_type" name="item_15629_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15629_subType" name="item_15629_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15629_fieldlabel" name="item_15629_fieldlabel" size="55" class="textBlock" maxlength="" value="Did you photograph the grey card for background fabrics?"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15159" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15159_desc">Check all fabrics used on beanbag:</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle">			<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15159[]" class="form-control-checkbox-updated" value="Ivory"    />
				<span>Ivory</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15159[]" class="form-control-checkbox-updated" value="Pink"    />
				<span>Pink</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15159[]" class="form-control-checkbox-updated" value="Grey"    />
				<span>Grey</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15159[]" class="form-control-checkbox-updated" value="Oatmeal"    />
				<span>Oatmeal</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15159[]" class="form-control-checkbox-updated" value="Taupe"    />
				<span>Taupe</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15159[]" class="form-control-checkbox-updated" value="NEW Kit Refresh Aqua"    />
				<span>NEW Kit Refresh Aqua</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15159[]" class="form-control-checkbox-updated" value="Dark Blue"    />
				<span>Dark Blue</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15159[]" class="form-control-checkbox-updated" value="Berry"    />
				<span>Berry</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15159[]" class="form-control-checkbox-updated" value="Light Green"    />
				<span>Light Green</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15159[]" class="form-control-checkbox-updated" value="Dark GREEN"    />
				<span>Dark GREEN</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15159[]" class="form-control-checkbox-updated" value="Pink Floral"    />
				<span>Pink Floral</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15159[]" class="form-control-checkbox-updated" value="Distressed"    />
				<span>Distressed</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15159[]" class="form-control-checkbox-updated" value="White Lace"    />
				<span>White Lace</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15159[]" class="form-control-checkbox-updated" value="Green Lace"    />
				<span>Green Lace</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15159[]" class="form-control-checkbox-updated" value="Purple Lace"    />
				<span>Purple Lace</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15159[]" class="form-control-checkbox-updated" value="Floral"    />
				<span>Floral</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15159[]" class="form-control-checkbox-updated" value="Other (list below)"    />
				<span>Other (list below)</span>
			</label>
			<input type="hidden" id="item_15159_required" name="item_15159_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_15159_type" name="item_15159_type" size="55" class="textBlock" maxlength="" value="checkbox"   /><input type="hidden" id="item_15159_subType" name="item_15159_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15159_fieldlabel" name="item_15159_fieldlabel" size="55" class="textBlock" maxlength="" value="Check all fabrics used on beanbag:"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15160" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15160_desc">List other fabrics used on beanbag:</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_15160" name="item_15160" size="35" class="form-control-updated " maxlength="" value=""    /><input type="hidden" id="item_15160_required" name="item_15160_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15160_type" name="item_15160_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15160_subType" name="item_15160_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15160_fieldlabel" name="item_15160_fieldlabel" size="55" class="textBlock" maxlength="" value="List other fabrics used on beanbag:"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15116" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15116_desc">Are any of the fabrics visibly soiled or damaged in the images?</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><div class="custom-switch__wrapper"><div class="custom-switch__label"><p>No</p></div>  <label class="switch">
    <input type="checkbox" id="item_15116" class="" name="item_15116" value="1"    />     <span class="slider"></span>
  </label>

	<div class="custom-switch__label"><p>Yes</p></div></div><input type="hidden" id="item_15116_required" name="item_15116_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_15116_type" name="item_15116_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15116_subType" name="item_15116_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15116_fieldlabel" name="item_15116_fieldlabel" size="55" class="textBlock" maxlength="" value="Are any of the fabrics visibly soiled or damaged in the images?"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15123" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15123_desc">If yes, please specify which sets were soiled/damaged.</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_15123" name="item_15123" size="35" class="form-control-updated " maxlength="" value=""    /><input type="hidden" id="item_15123_required" name="item_15123_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15123_type" name="item_15123_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15123_subType" name="item_15123_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15123_fieldlabel" name="item_15123_fieldlabel" size="55" class="textBlock" maxlength="" value="If yes, please specify which sets were soiled/damaged."   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15630" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15630_desc">Did you photograph the grey card for the floor drops?</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><div class="custom-switch__wrapper"><div class="custom-switch__label"><p>No</p></div>  <label class="switch">
    <input type="checkbox" id="item_15630" class="" name="item_15630" value="1"    />     <span class="slider"></span>
  </label>

	<div class="custom-switch__label"><p>Yes</p></div></div><input type="hidden" id="item_15630_required" name="item_15630_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_15630_type" name="item_15630_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15630_subType" name="item_15630_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15630_fieldlabel" name="item_15630_fieldlabel" size="55" class="textBlock" maxlength="" value="Did you photograph the grey card for the floor drops?"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15161" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15161_desc">Check all floors used:</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle">			<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15161[]" class="form-control-checkbox-updated" value="Ivory Wood Floor"    />
				<span>Ivory Wood Floor</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15161[]" class="form-control-checkbox-updated" value="Brown Wood Floor"    />
				<span>Brown Wood Floor</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15161[]" class="form-control-checkbox-updated" value="Family Backdrop as floor - Dark"    />
				<span>Family Backdrop as floor - Dark</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15161[]" class="form-control-checkbox-updated" value="Family Backdrop as floor - Light"    />
				<span>Family Backdrop as floor - Light</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15161[]" class="form-control-checkbox-updated" value="Marble Floor"    />
				<span>Marble Floor</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15161[]" class="form-control-checkbox-updated" value="Other (list below)"    />
				<span>Other (list below)</span>
			</label>
			<input type="hidden" id="item_15161_required" name="item_15161_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_15161_type" name="item_15161_type" size="55" class="textBlock" maxlength="" value="checkbox"   /><input type="hidden" id="item_15161_subType" name="item_15161_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15161_fieldlabel" name="item_15161_fieldlabel" size="55" class="textBlock" maxlength="" value="Check all floors used:"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15162" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15162_desc">List other floors used:</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_15162" name="item_15162" size="35" class="form-control-updated " maxlength="" value=""    /><input type="hidden" id="item_15162_required" name="item_15162_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15162_type" name="item_15162_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15162_subType" name="item_15162_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15162_fieldlabel" name="item_15162_fieldlabel" size="55" class="textBlock" maxlength="" value="List other floors used:"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15631" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15631_desc">Did you photograph the grey card for the family/sibling images</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><div class="custom-switch__wrapper"><div class="custom-switch__label"><p>No</p></div>  <label class="switch">
    <input type="checkbox" id="item_15631" class="" name="item_15631" value="1"    />     <span class="slider"></span>
  </label>

	<div class="custom-switch__label"><p>Yes</p></div></div><input type="hidden" id="item_15631_required" name="item_15631_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_15631_type" name="item_15631_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15631_subType" name="item_15631_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15631_fieldlabel" name="item_15631_fieldlabel" size="55" class="textBlock" maxlength="" value="Did you photograph the grey card for the family/sibling images"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15164" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15164_desc">List all poses captured:</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle">			<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15164[]" class="form-control-checkbox-updated" value="Beanbag - Nest "    />
				<span>Beanbag - Nest </span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15164[]" class="form-control-checkbox-updated" value="Beanbag - Side-lying"    />
				<span>Beanbag - Side-lying</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15164[]" class="form-control-checkbox-updated" value="Beanbag - Bottoms-up"    />
				<span>Beanbag - Bottoms-up</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15164[]" class="form-control-checkbox-updated" value="Beanbag - Womb"    />
				<span>Beanbag - Womb</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15164[]" class="form-control-checkbox-updated" value="Beanbag - Heads-up"    />
				<span>Beanbag - Heads-up</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15164[]" class="form-control-checkbox-updated" value="Beanbag - Tucked In"    />
				<span>Beanbag - Tucked In</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15164[]" class="form-control-checkbox-updated" value="Beanbag - Huck Finn"    />
				<span>Beanbag - Huck Finn</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15164[]" class="form-control-checkbox-updated" value="Bucket "    />
				<span>Bucket </span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15164[]" class="form-control-checkbox-updated" value="Fur - Nest"    />
				<span>Fur - Nest</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15164[]" class="form-control-checkbox-updated" value="Swing "    />
				<span>Swing </span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15164[]" class="form-control-checkbox-updated" value="Basket"    />
				<span>Basket</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15164[]" class="form-control-checkbox-updated" value="Heads up in Basket"    />
				<span>Heads up in Basket</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15164[]" class="form-control-checkbox-updated" value="Upright in Basket"    />
				<span>Upright in Basket</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15164[]" class="form-control-checkbox-updated" value="Other (list below)"    />
				<span>Other (list below)</span>
			</label>
			<input type="hidden" id="item_15164_required" name="item_15164_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_15164_type" name="item_15164_type" size="55" class="textBlock" maxlength="" value="checkbox"   /><input type="hidden" id="item_15164_subType" name="item_15164_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15164_fieldlabel" name="item_15164_fieldlabel" size="55" class="textBlock" maxlength="" value="List all poses captured:"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15122" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15122_desc">Were family images taken? Please check all that apply:</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle">			<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15122[]" class="form-control-checkbox-updated" value="Parent Pictures"    />
				<span>Parent Pictures</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15122[]" class="form-control-checkbox-updated" value="Sibling Pictures"    />
				<span>Sibling Pictures</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15122[]" class="form-control-checkbox-updated" value="Family Pictures"    />
				<span>Family Pictures</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15122[]" class="form-control-checkbox-updated" value="Silhouettes"    />
				<span>Silhouettes</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15122[]" class="form-control-checkbox-updated" value="Pet Pictures"    />
				<span>Pet Pictures</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15122[]" class="form-control-checkbox-updated" value="Other (list below)"    />
				<span>Other (list below)</span>
			</label>
						<label class="form-control-checkbox-updated">
				<input type="checkbox" name="item_15122[]" class="form-control-checkbox-updated" value="None Taken"    />
				<span>None Taken</span>
			</label>
			<input type="hidden" id="item_15122_required" name="item_15122_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_15122_type" name="item_15122_type" size="55" class="textBlock" maxlength="" value="checkbox"   /><input type="hidden" id="item_15122_subType" name="item_15122_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15122_fieldlabel" name="item_15122_fieldlabel" size="55" class="textBlock" maxlength="" value="Were family images taken? Please check all that apply:"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15165" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15165_desc">List other poses photographed:</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_15165" name="item_15165" size="35" class="form-control-updated " maxlength="" value=""    /><input type="hidden" id="item_15165_required" name="item_15165_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15165_type" name="item_15165_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15165_subType" name="item_15165_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15165_fieldlabel" name="item_15165_fieldlabel" size="55" class="textBlock" maxlength="" value="List other poses photographed:"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15166" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15166_desc">Did you capture macro images?</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><div class="custom-switch__wrapper"><div class="custom-switch__label"><p>No</p></div>  <label class="switch">
    <input type="checkbox" id="item_15166" class="" name="item_15166" value="1"    />     <span class="slider"></span>
  </label>

	<div class="custom-switch__label"><p>Yes</p></div></div><input type="hidden" id="item_15166_required" name="item_15166_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_15166_type" name="item_15166_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15166_subType" name="item_15166_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15166_fieldlabel" name="item_15166_fieldlabel" size="55" class="textBlock" maxlength="" value="Did you capture macro images?"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15119" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15119_desc">Was there anything specific requested or noted that the family cared about most to include in their proofing gallery?</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><textarea id="item_15119" name="item_15119" cols="35" rows="3" class="form-control-updated NoEditor " resize=""    ></textarea><input type="hidden" id="item_15119_required" name="item_15119_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_15119_type" name="item_15119_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15119_subType" name="item_15119_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15119_fieldlabel" name="item_15119_fieldlabel" size="55" class="textBlock" maxlength="" value="Was there anything specific requested or noted that the family cared about most to include in their proofing gallery?"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15120" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15120_desc">Did parents have any specific editing requests? (Birthmarks: leaving/removing, storkbites, etc.) (Lanugo: leaving as-is or lessen appearance?) (Lanugo can not be "removed".)</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><textarea id="item_15120" name="item_15120" cols="35" rows="3" class="form-control-updated NoEditor " resize=""    ></textarea><input type="hidden" id="item_15120_required" name="item_15120_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_15120_type" name="item_15120_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15120_subType" name="item_15120_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15120_fieldlabel" name="item_15120_fieldlabel" size="55" class="textBlock" maxlength="" value="Did parents have any specific editing requests? (Birthmarks: leaving/removing, storkbites, etc.) (Lanugo: leaving as-is or lessen appearance?) (Lanugo can not be &quot;removed&quot;.)"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15121" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15121_desc">Please detail your concerns below and contact your regional manager by phone with any concerns that need to be addressed immediately.</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><textarea id="item_15121" name="item_15121" cols="35" rows="3" class="form-control-updated NoEditor " resize=""    ></textarea><input type="hidden" id="item_15121_required" name="item_15121_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15121_type" name="item_15121_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15121_subType" name="item_15121_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15121_fieldlabel" name="item_15121_fieldlabel" size="55" class="textBlock" maxlength="" value="Please detail your concerns below and contact your regional manager by phone with any concerns that need to be addressed immediately."   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15163" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15163_desc">List other family images photographed:</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_15163" name="item_15163" size="35" class="form-control-updated " maxlength="" value=""    /><input type="hidden" id="item_15163_required" name="item_15163_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15163_type" name="item_15163_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15163_subType" name="item_15163_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15163_fieldlabel" name="item_15163_fieldlabel" size="55" class="textBlock" maxlength="" value="List other family images photographed:"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_16335" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_16335_desc">Did you reach out to your regional manager regarding any specific concerns?</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><div class="custom-switch__wrapper"><div class="custom-switch__label"><p>No</p></div>  <label class="switch">
    <input type="checkbox" id="item_16335" class="" name="item_16335" value="1"    />     <span class="slider"></span>
  </label>

	<div class="custom-switch__label"><p>Yes</p></div></div><input type="hidden" id="item_16335_required" name="item_16335_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_16335_type" name="item_16335_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_16335_subType" name="item_16335_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_16335_fieldlabel" name="item_16335_fieldlabel" size="55" class="textBlock" maxlength="" value="Did you reach out to your regional manager regarding any specific concerns?"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_17360" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_17360_desc">Do you have an intro call due today?</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><div class="custom-switch__wrapper"><div class="custom-switch__label"><p>No</p></div>  <label class="switch">
    <input type="checkbox" id="item_17360" class="" name="item_17360" value="1"    />     <span class="slider"></span>
  </label>

	<div class="custom-switch__label"><p>Yes</p></div></div><input type="hidden" id="item_17360_required" name="item_17360_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_17360_type" name="item_17360_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_17360_subType" name="item_17360_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_17360_fieldlabel" name="item_17360_fieldlabel" size="55" class="textBlock" maxlength="" value="Do you have an intro call due today?"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_17361" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_17361_desc">Have you made your intro call?</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><div class="custom-switch__wrapper"><div class="custom-switch__label"><p>No</p></div>  <label class="switch">
    <input type="checkbox" id="item_17361" class="" name="item_17361" value="1"    />     <span class="slider"></span>
  </label>

	<div class="custom-switch__label"><p>Yes</p></div></div><input type="hidden" id="item_17361_required" name="item_17361_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_17361_type" name="item_17361_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_17361_subType" name="item_17361_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_17361_fieldlabel" name="item_17361_fieldlabel" size="55" class="textBlock" maxlength="" value="Have you made your intro call?"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_15669" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_15669_desc">Session Time (in minutes)</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_15669" name="item_15669" size="35" class="form-control-updated " maxlength="" value=""    /><input type="hidden" id="item_15669_required" name="item_15669_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15669_type" name="item_15669_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15669_subType" name="item_15669_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_15669_fieldlabel" name="item_15669_fieldlabel" size="55" class="textBlock" maxlength="" value="Session Time (in minutes)"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_18714" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_18714_desc">Including parents and/or siblings in your session? (no extra package cost)</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle">            <div class="dropdown-container">
              <select id="item_18714" name="item_18714" style="width: 300px;"  class="dropdown-box">
    	<option value="" > -- </option>
<option value="YES"   >YES</option>
<option value="NO"   >NO</option>
<option value="UNSURE"   >UNSURE</option>
    </select>
                </div>
          <input type="hidden" id="item_18714_required" name="item_18714_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_18714_type" name="item_18714_type" size="55" class="textBlock" maxlength="" value="combo"   /><input type="hidden" id="item_18714_subType" name="item_18714_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_18714_fieldlabel" name="item_18714_fieldlabel" size="55" class="textBlock" maxlength="" value="Including parents and/or siblings in your session? (no extra package cost)"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_18715" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_18715_desc">How did you hear about us? (e.g. FB, Google, IG, Yelp, friend)</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_18715" name="item_18715" size="35" class="form-control-updated " maxlength="" value=""    /><input type="hidden" id="item_18715_required" name="item_18715_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_18715_type" name="item_18715_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_18715_subType" name="item_18715_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_18715_fieldlabel" name="item_18715_fieldlabel" size="55" class="textBlock" maxlength="" value="How did you hear about us? (e.g. FB, Google, IG, Yelp, friend)"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_18716" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_18716_desc"> I allow my photos to be used in marketing (no private info shared) </span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle">            <div class="dropdown-container">
              <select id="item_18716" name="item_18716" style="width: 300px;"  class="dropdown-box">
    	<option value="" > -- </option>
<option value="Yes, permission granted"   >Yes, permission granted</option>
<option value="No permission to photograph only"   >No permission to photograph only</option>
    </select>
                </div>
          <input type="hidden" id="item_18716_required" name="item_18716_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_18716_type" name="item_18716_type" size="55" class="textBlock" maxlength="" value="combo"   /><input type="hidden" id="item_18716_subType" name="item_18716_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_18716_fieldlabel" name="item_18716_fieldlabel" size="55" class="textBlock" maxlength="" value=" I allow my photos to be used in marketing (no private info shared) "   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_18717" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_18717_desc">Would you like to include parent and/or sibling images? No add-on package cost required. </span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle">            <div class="dropdown-container">
              <select id="item_18717" name="item_18717" style="width: 300px;"  class="dropdown-box">
    	<option value="" > -- </option>
<option value="YES"   >YES</option>
<option value="NO"   >NO</option>
<option value="UNSURE"   >UNSURE</option>
    </select>
                </div>
          <input type="hidden" id="item_18717_required" name="item_18717_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_18717_type" name="item_18717_type" size="55" class="textBlock" maxlength="" value="combo"   /><input type="hidden" id="item_18717_subType" name="item_18717_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_18717_fieldlabel" name="item_18717_fieldlabel" size="55" class="textBlock" maxlength="" value="Would you like to include parent and/or sibling images? No add-on package cost required. "   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_18718" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_18718_desc">Baby's First Name (if known)</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle"><input type="text" id="item_18718" name="item_18718" size="35" class="form-control-updated " maxlength="" value=""    /><input type="hidden" id="item_18718_required" name="item_18718_required" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_18718_type" name="item_18718_type" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_18718_subType" name="item_18718_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_18718_fieldlabel" name="item_18718_fieldlabel" size="55" class="textBlock" maxlength="" value="Baby&#039;s First Name (if known)"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_18719" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_18719_desc">Baby's Gender, if known</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle">            <div class="dropdown-container">
              <select id="item_18719" name="item_18719" style="width: 300px;"  class="dropdown-box">
    	<option value="" > -- </option>
<option value="It's a surprise!"   >It's a surprise!</option>
<option value="Boy"   >Boy</option>
<option value="Girl"   >Girl</option>
<option value="Twins Boy/Boy"   >Twins Boy/Boy</option>
<option value="Twins Boy/Girl"   >Twins Boy/Girl</option>
<option value="Twins Girl/Girl"   >Twins Girl/Girl</option>
<option value="Triplets!"   >Triplets!</option>
    </select>
                </div>
          <input type="hidden" id="item_18719_required" name="item_18719_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_18719_type" name="item_18719_type" size="55" class="textBlock" maxlength="" value="combo"   /><input type="hidden" id="item_18719_subType" name="item_18719_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_18719_fieldlabel" name="item_18719_fieldlabel" size="55" class="textBlock" maxlength="" value="Baby&#039;s Gender, if known"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_18720" class="normalThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_18720_desc">Do you plan to include parent and/or sibling images? No add-on package cost required</span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle">            <div class="dropdown-container">
              <select id="item_18720" name="item_18720" style="width: 300px;"  class="dropdown-box">
    	<option value="" > -- </option>
<option value="YES"   >YES</option>
<option value="NO"   >NO</option>
<option value="UNSURE"   >UNSURE</option>
    </select>
                </div>
          <input type="hidden" id="item_18720_required" name="item_18720_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_18720_type" name="item_18720_type" size="55" class="textBlock" maxlength="" value="combo"   /><input type="hidden" id="item_18720_subType" name="item_18720_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_18720_fieldlabel" name="item_18720_fieldlabel" size="55" class="textBlock" maxlength="" value="Do you plan to include parent and/or sibling images? No add-on package cost required"   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
				<div id="questitem_18721" class="alternateThinRowStyle" >
			<div class="leftTitle" >
				<span id="item_18721_desc">I allow my photos to be used in marketing (no private info shared) </span>
				<i class="fa fa-eye-slash" title="Hidden (Not Visible on forms)"></i>			</div>
			<div class="rightTitle">            <div class="dropdown-container">
              <select id="item_18721" name="item_18721" style="width: 300px;"  class="dropdown-box">
    	<option value="" > -- </option>
<option value="Yes, permission granted"   >Yes, permission granted</option>
<option value="No, permission to photograph only"   >No, permission to photograph only</option>
    </select>
                </div>
          <input type="hidden" id="item_18721_required" name="item_18721_required" size="55" class="textBlock" maxlength="" value="true"   /><input type="hidden" id="item_18721_type" name="item_18721_type" size="55" class="textBlock" maxlength="" value="combo"   /><input type="hidden" id="item_18721_subType" name="item_18721_subType" size="55" class="textBlock" maxlength="" value=""   /><input type="hidden" id="item_18721_fieldlabel" name="item_18721_fieldlabel" size="55" class="textBlock" maxlength="" value="I allow my photos to be used in marketing (no private info shared) "   /></div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
		    </div>
		</div>
		<br style="clear: both;" />
	<br style="clear: both;" />
	<br style="clear: both;" />
	<div id="submitDiv" class="sticky-controls" >
	    
	    <div class="center" >
			<button id="update" name="update" type="button" class="btn blue btn-lg" onclick="submitForm();" ><span id="updateBtnIcon" class="fa fa-check"></span> <span id="updateText">Update</span></button>
		</div>
	</div>
	<br style="clear: both;" />
	<br style="clear: both;" />
	
</div>
											
					    </div>
    <!-- Inner Content -->
    	
				</div>
				
				
				  
	            <div id="workflow" class="ui-tabs-hide"  ><!---->
	            	    <!-- Inner Content -->
    <div class="tab-content">
                	
	            	<script type='text/javascript' src='/admin/js/calendar/precise.range.js'></script>
<script type="text/javascript">

	function switchQuestionnaireSend(value, itemID) {
		if(value == "0") {
			$("#questionnaire_send_settings_" + itemID).hide();
			$("#questionnaire_create_settings_" + itemID).show();
		} else {
			$("#questionnaire_send_settings_" + itemID).show();
			$("#questionnaire_create_settings_" + itemID).hide();
		}
	}
	function cancelEditWorkflowTrigger() {modal.close();}
	function cancelSaveWorkflowTemplateTrigger() {modal.close();}
	function editWorkflowTrigger(triggerID,objectType,triggerType,actionType,itemType,itemID) {
		$.ajax({	type: "POST",	url: "/admin/fn/workflow/getWorkflowEditTriggerForm/",
			data: {clientID:'12295',triggerID: triggerID, objectType: objectType, triggerType: triggerType, actionType: actionType, itemType: itemType, itemID: itemID},
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {

					modalContent = 			'<div class="modalBorderBox" style="width: 555px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-hierarchy-structure"></i> Edit Workflow Trigger </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelEditWorkflowTrigger();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});

				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function getAddEditWorkflowTemplateActionCombo(objectType,triggerEvent,selectedValue,triggerID) {
		$.ajax({	type: "POST",	url: "/admin/fn/workflow/getAddEditWorkflowTemplateActionCombo/",
			data: {clientID: '12295',workflowID: '', objectType: objectType, triggerEvent: triggerEvent},
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#actionComboDIV").html(results[1]);
					$("#actionComboHolder").slideDown();

					if(selectedValue !== undefined && selectedValue !== null && selectedValue != '') {
						$("#triggerAction").val(selectedValue);

						getAddEditWorkflowActionForm(objectType,triggerEvent,selectedValue, triggerID);
					}

				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function getAddEditWorkflowActionForm(objectType,triggerEvent,actionType, triggerID) {
		$.ajax({	type: "POST",	url: "/admin/fn/workflow/getAddEditWorkflowActionForm/",
			data: {clientID: '12295',workflowID: '', workflowType: 'lead', objectType: objectType, triggerEvent: triggerEvent, actionType: actionType, triggerID: triggerID},
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {

					$("#actionFormSettings").html(results[1]);
					$("#actionFormSettings").slideDown('fast', function(e) {
						modal.center();
					});

					$('#actionFormSettings [data-toggle="popover"]').popover({
						trigger: 'hover',
						'placement': 'top',
						'show': true,
						container: 'body'
					});

				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function deleteWorkflowTrigger(triggerID,triggerType,actionType,itemType,itemID) {
		swal({
			title: 'Are you sure?',
			html: 'Are you sure you would like to delete this trigger? <br /> This action can NOT be undone!',
			type: 'warning',
			showCancelButton: true,
			confirmButtonColor: '#3085d6',
			cancelButtonColor: '#d33',
			confirmButtonText: 'Yes',
			cancelButtonText: 'No',
			confirmButtonClass: 'confirm-class',
			cancelButtonClass: 'cancel-class',
			closeOnConfirm: true,
			closeOnCancel: true
		}, function(isConfirm) {
			if (isConfirm) {
				$.ajax({	type: "POST", url: "/admin/fn/workflow/deleteWorkflowTrigger/",
					data: {clientID: '12295',triggerID: triggerID, itemType: itemType, itemID: itemID},
					success: function(   data   ) {
						var results = 				data.split("{|}");
						if(results[0] == "SUCCESS") {

							refreshWholeWorkflow();

						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
			}
		});
	}
	function updateWorkflowTrigger(triggerID,objectType,itemType,itemID) {
		var triggerEvent = 					$("#triggerCombo").val(),
		actionType = 						$("#triggerAction").val(),
		options = 							$("#actionFormSettings").find('input , select, textarea').serializeArray();

		options.push({name: 'actionSettingsMetadata', value: $("#actionFormSettings > .settingsMetadata").find('input , select, textarea').serializeArray()   });

		options = 							$.JSON.encode(options);

		$.ajax({	type: "POST",	url: "/admin/fn/workflow/updateWorkflowTrigger/",
			data: {clientID: '12295',objectType: objectType, itemType: itemType, itemID: itemID, triggerID: triggerID, triggerEvent: triggerEvent, actionType: actionType, options: options},
			success: function(   data   ){
			var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					cancelEditWorkflowTrigger();
					refreshWholeWorkflow();
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
}

</script>
<script type="text/javascript">

	$(function() {
		refreshWholeWorkflow();
		refreshWorkflowProgressBar();
	});

	function deleteWorkflowAutoAction(autoID) {
		swal({
		    title: 'Apply Actions?',
		    html: 'Would you like to Delete this Automatic Actions? <br /> You won\'t be able to UNDO this action... Continue?',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: true,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({	type: "POST",	url: "/admin/fn/workflow/deleteWorkflowAutoAction/",
					data: {clientID: '12295', autoID: autoID},
					success: function(   data   ){
						const results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							
							refreshWholeWorkflow();
							refreshWorkflowProgressBar();
							refreshObjectTasksListing('lead','1615775');
							
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
		    }
		});
	}
	
	function archiveObjectWorkflow() {
		$.ajax({	type: "POST",	url: "/admin/fn/workflow/archiveObjectWorkflow/",
			data: {clientID: '12295', objectType: 'lead', objectID: '1615775'},
			success: function(   data   ){
				const results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					refreshWholeWorkflow();
					refreshWorkflowProgressBar();
					refreshObjectTasksListing('lead','1615775');
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}

	function showWorkflowChoices() {
		$("#workflowTemplates").slideDown();
	}
	function getStartingPhases(workflowTemplateID,divToUpdate) {	
		$.ajax({	type: "POST",	url: "/admin/fn/workflow/getPhases/",
			data: {clientID: '12295', workID: workflowTemplateID},
			success: function(   data   ){
				const results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					if(divToUpdate == '' || divToUpdate === undefined || divToUpdate === null) {
						$("#workflowPhases").html("<br />" + results[1] + "<br /><br /><br />");
					} else {
						$("#" + divToUpdate).html("<br />" + results[1] + "<br /><br /><br />");
					}
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function getStartingPhasesNoButton(workflowTemplateID,divToUpdate) {
		$.ajax({	type: "POST",	url: "/admin/fn/workflow/getPhases/",
			data: {clientID: '12295', workID: workflowTemplateID, noButton: 'yes'},
			success: function(   data   ){
				const results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					if(divToUpdate == '' || divToUpdate === undefined || divToUpdate === null) {
						$("#workflowPhases").html("<br />" + results[1] + "<br /><br /><br />");
					} else {
						$("#" + divToUpdate).html("<br />" + results[1] + "<br /><br /><br />");
					}
					modal.center();
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function saveWorkflowToObject(workflowTemplateID, startingPhaseID) {
		const ignoreAutoItems = $("input[name=ignoreAutoItems]:checked").val(),
			ignorePastAutoItems = $("input[name=ignorePastAutoItems]:checked").val();

		$("#associatemilestones_btn").attr('disabled','disabled');
			
		$.ajax({	type: "POST",	url: "/admin/fn/workflow/associateWorkflowToObject/",
			data: {clientID: '12295', objectType: 'lead', objectID: '1615775', workID: workflowTemplateID, startID: startingPhaseID, ignoreAutoItems: ignoreAutoItems, ignorePastAutoItems: ignorePastAutoItems},
			success: function(   data   ){
				const results = data.split("{|}");
				if(results[0] == "SUCCESS") {
						
						refreshWholeWorkflow();
						refreshWorkflowProgressBar();
						
						if(typeof refreshQuestionnaireToObjectListing === 'function'){
							refreshQuestionnaireToObjectListing();
						}
						
						//location.href='/admin/leads/1615775/?autoStart=workflow';
						
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
						
						$("#associatemilestones_btn").attr('disabled',false);
						
					}
				
			}
		});
	}
	
	//New Stuff
	function changePhaseTaskDates(phaseID) {
		$("#phaseTaskDateUpdate_" + phaseID).slideDown();
		
		if(!$('#newPhaseDueDate_' + phaseID).parent().hasClass('jdpicker_w')) {
			$('#newPhaseDueDate_' + phaseID).addClass('date_picker');
			$('#newPhaseDueDate_' + phaseID).jdPicker({
				date_format: 'mm/dd/YYYY',
				start_of_week: 0			}).on('date_selected',function(dateSelected,input) {
				const newDate = $(input).val(),
					phaseID = $(input).attr('id').replace('newPhaseDueDate_', ''),
					oldDate = $('#currentPhaseDueDate_' + phaseID).val(),
					newDateMoment = moment(newDate, "MM/DD/YYYY"),
					oldDateMoment = moment(oldDate, "MM/DD/YYYY"),
					eventDuration = moment.preciseDiff(newDateMoment, oldDateMoment);


				$("#cascadeHolder_" + phaseID).html('<em>shift all phases <strong>' + eventDuration + '</strong></em>');
					$("#cascadeHolder_" + phaseID).show();
					
				
			});
		}
		//
		
		
	}
	function cancelUpdatePhaseTasksDate(phaseID) {
		$("#phaseTaskDateUpdate_" + phaseID).slideUp();
	}
	function updatePhaseTasksDueDate(phaseID) {
		const dueDate = $("#newPhaseDueDate_" + phaseID).val(),
			oldDate = $('#currentPhaseDueDate_' + phaseID).val(),
			andCascade = $("input[name=andCascadeUpdate_" + phaseID + "]:checked").val(),
			error = "";

		$.ajax({	type: "POST",	url: "/admin/fn/workflow/updatePhaseTasksDueDate/",
				data: {clientID: '12295', phaseID: phaseID, dueDate: dueDate, oldDate: oldDate, andCascade: andCascade},
				success: function(   data   ){
					const results = data.split("{|}");
					if(results[0] =="SUCCESS") {
						refreshPhaseTasks(phaseID);
						cancelUpdatePhaseTasksDate(phaseID);
						
						if(andCascade == "1") {
							refreshWholeWorkflow();
						}
						
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
	}
	function refreshPhaseTasks(phaseID) {
		$.ajax({	type: "POST",	url: "/admin/fn/workflow/refreshPhaseTasks/",
			data: {clientID: '12295', phaseID: phaseID},
			success: function(   data   ){
				const results = data.split("{|}");
				if(results[0] =="SUCCESS") {
					$("#phaseTasks_"+ phaseID).html(results[1]);

					$(".popover").remove();
					$('#workflowitems [data-toggle="popover"]').popover({
						trigger: 'hover',
						'placement': 'top',
						'show': true,
						container: 'body'
					});

				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function refreshWholeWorkflow() {
		const errorField = $("#workflowError");

		errorField.hide();
			
		$.ajax({	type: "POST",	url: "/admin/fn/workflow/refreshEntireWorkflow/",
			data: {clientID: '12295', objectType: 'lead', objectID: '1615775'},
			success: function(   data   ){
				const results = data.split("{|}");
				if(results[0] =="SUCCESS") {
					$("#objectWorkflow_lead").html(results[1]);
					$(".popover").remove();

					$('.progress-bar[data-toggle="popover"]').popover({
						trigger: 'hover',
				        'placement': 'bottom',
				        'show': true,
				        container: 'body'
					});
					$('#workflowitems [data-toggle="popover"]').popover({
						trigger: 'hover',
						'placement': 'top',
						'show': true,
						container: 'body'
					});
					
					if(typeof refreshObjectRemindersListing === 'function'){
						refreshObjectRemindersListing();
					}
					if(typeof refreshObjectRemindersListingQ === 'function'){
						refreshObjectRemindersListingQ('lead','1615775');
					}
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function refreshWorkflowProgressBar() {
		const errorField = $("#workflowError");

		errorField.hide();
			
		$.ajax({	type: "POST",	url: "/admin/fn/workflow/refreshWorkflowProgressBar/",
			data: {clientID: '12295', objectType: 'lead', objectID: '1615775'},
			success: function(   data   ){
				const results = data.split("{|}");
				if(results[0] =="SUCCESS") {
					$(".workflowProgressBar").html(results[1]);

					$(".popover").remove();
					$('.progress-bar[data-toggle="popover"]').popover({
						trigger: 'hover',
				        'placement': 'bottom',
				        'show': true,
				        container: 'body'
					});
					
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	
	
	function editPhaseTask(taskID) {
		$('#task_dateedit_' + taskID).show();
		//Only add the date picker once...
		$('#task_duedate_' + taskID).jdPicker({
			date_format: 'mm/dd/YYYY',
			start_of_week: 0		});
	}
	function completeTask(taskID, phaseID) {
		
		$("#workflowTaskIcon_"+ taskID).addClass('fa fa-refresh fa-spin');
		$("#workflowTaskIcon_"+ taskID).removeClass('icon-clipboard-check');
		
		$.ajax({	type: "POST",	url: "/admin/fn/workflow/completePhaseTask/",
			data: {clientID: '12295', taskID: taskID, phaseID: phaseID},
			success: function(   data   ){
				$("#workflowTaskIcon_"+ taskID).addClass('icon-clipboard-check');
				$("#workflowTaskIcon_"+ taskID).removeClass('fa fa-refresh fa-spin');

				const result = data.split("{|}");
				if(result[0].toLowerCase() =="success") {

					const status = result[1];
					if(status == "1") {
						$("#task_" + taskID).addClass("completedItem");
						$("#task_" + taskID + " .completedDate").html(result[2]);
						$("#task_" + taskID + " .completedImg").html('<i class="fa fa-check font-green-jungle"></i>');
					} else {
						$("#task_" + taskID).removeClass("completedItem");
						$("#task_" + taskID + " .completedDate").html(result[2]);
						$("#task_" + taskID + " .completedImg").html('');
					}
					
					refreshWorkflowProgressBar();
					
					refreshWholeWorkflow();
					
					if(result[3] == "lastone") {
						$("#line_item_" + phaseID).addClass("completedItem");
						
						
						if(typeof refreshEventStaffListing === 'function'){
							refreshEventStaffListing();
						}
						if(typeof refreshEventVendorsListing === 'function'){
							refreshEventVendorsListing();
						}
						
						
					} else {
						$("#line_item_" + phaseID).removeClass("completedItem");
					}
					
					//added on [09.19.2k18]
					if(result[3] == "prompt") {
						swal({
						    title: 'Apply Actions?',
						    html: 'Would you like to Apply the Phase Actions now that this Phase is complete?',
						    type: 'warning',
						    showCancelButton: true,
						    confirmButtonColor: '#3085d6',
						    cancelButtonColor: '#d33',
						    confirmButtonText: 'Yes',
						    cancelButtonText: 'No',
						    confirmButtonClass: 'confirm-class',
						    cancelButtonClass: 'cancel-class',
						    closeOnConfirm: true,
						    closeOnCancel: true
						}, function(isConfirm) {
						    if (isConfirm) {
						    	$.ajax({	type: "POST",	url: "/admin/fn/workflow/fireOffPhaseActions/",
									data: {clientID: '12295', phaseID: phaseID},
									success: function(   data   ){
										const results = data.split("{|}");
										if(results[0] == "SUCCESS") {
											
											swal({
												type: 'success',
												title: 'Success!',
												html: "The Phase Actions have been Successfully applied!",
												timer: 4000
											});
											
											$("#line_item_" + phaseID).addClass("completedItem");
											
											if(typeof refreshEventStaffListing === 'function'){
												refreshEventStaffListing();
											}
											if(typeof refreshEventVendorsListing === 'function'){
												refreshEventVendorsListing();
											}
											
										} else {
											swal({
												type: 'error',
												title: 'Error',
												html: results[1]
											});
										}
									}
								});
						    } 
						});
					}
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: result[1]
					});
				}
			}
		});
	}
	function showWorkflowTaskNotes(taskID) {
		$("#task_notes_" + taskID).slideToggle();
	}
	
	
	function updateDueDate(taskID, phaseID, dueDate) {
		$.ajax({	type: "POST",	url: "/admin/fn/workflow/updateWorkflowTaskDueDate/",
			data: {clientID: '12295', taskID: taskID, phaseID: phaseID, dueDate: dueDate},
			success: function(   data   ){
				const results = data.split("{|}");
				if(results[0] =="SUCCESS") {
					$("#duedateval_" + taskID).html(results[1]);
					$("#task_dateedit_" + taskID).hide();
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}	
	function changeWorkflow() {
		
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you would like to change the workflow from this lead? <br /> You will lose all tasks associated as well. <br /> This action can NOT be undone!',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: true,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({	type: "POST",	url: "/admin/fn/workflow/deleteWorkflowFromObject/",
					data: {clientID: '12295',objectType: 'lead', objectID:'1615775','switch':'yes'},
					success: function(   data   ){
						const results = data.split("{|}");
						if(results[0] =="SUCCESS") {
							showWorkflowChoices();
							refreshObjectTasksListing('lead','1615775');
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
		    } 
		});
	}
	function deleteWorkflowItems() {
		
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you would like to delete the workflow from this lead? <br /> You will lose all tasks associated as well. <br /> This action can NOT be undone!',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: true,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({	type: "POST",	url: "/admin/fn/workflow/deleteWorkflowFromObject/",
					data: {clientID: '12295',objectType: 'lead', objectID:'1615775'},
					success: function(   data   ){
						const results = data.split("{|}");
						if(results[0] =="SUCCESS") {
							
							refreshWholeWorkflow();
							refreshWorkflowProgressBar();
							
							
							//location.href='/admin/leads/1615775/?autoStart=workflow';
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
		    } 
		});
	}
	function deleteWorkflowPhase(phaseID) {
		
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you would like to delete this Phase and all items associated with it? <br /> This action can NOT be undone!',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: true,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({	type: "POST",	url: "/admin/fn/workflow/deleteWorkflowPhase/",
					data: {clientID: '12295',objectType: 'lead', objectID:'1615775', phaseID: phaseID},
					success: function(   data   ){
						const results = data.split("{|}");
						if(results[0] =="SUCCESS") {
							
							refreshWholeWorkflow();
							refreshWorkflowProgressBar();
							
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
		    } 
		});
	}
	function deleteIndividualWorkflowTask(taskID,phaseID) {
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you would like to delete this task? <br /> This action can NOT be undone! ',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: true,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({	type: "POST", url: "/admin/fn/workflow/deleteWorkflowTask/",
					data: {clientID: '12295', taskID: taskID, phaseID: phaseID},
					success: function(   data   ) {
						const results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							$("#task_" + taskID).html('');
							$("#task_" + taskID).remove();
							
							//If this was the last task in the phase, then remove the phase
							if(results[1] == "delete") {
								$("#line_item_" + phaseID).html('');
								$("#line_item_" + phaseID).remove();
							}
							
							swal('Deleted!', 'Your task has been deleted.', 'success');
							
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
		    } 
		});
	}
	
	//New!
	function addPhaseTask(phaseID) {
		const errorField = $("#workflowError");

		errorField.hide();
			
		$.ajax({	type: "POST", url: "/admin/fn/workflow/getWorkflowPhaseTaskAddForm/",
			data: {clientID: '12295', phaseID: phaseID},
			success: function(   data   ) {
				const results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					$("#phaseTaskAddForm_" + phaseID).html(results[1]);
					$("#phaseTaskAddForm_" + phaseID).slideDown();

					const taskID = "";

					$("#" + phaseID + "_" + taskID + "_date").jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function saveWorkflowPhaseTask(phaseID) {
		const taskID = "",
			dueDate = $("#" + phaseID + "_" + taskID + "_date").val(),
			assignedTo = $("#" + phaseID + "_" + taskID + "_staff").val(),
			subject = $("#" + phaseID + "_" + taskID + "_name").val(),
			description = $("#" + phaseID + "_" + taskID + "_desc").val();
		let error = "";
		const errorField = $("#workflowError");

		errorField.hide();
			
			error += 						(dueDate == "") ? "Please enter a Due Date<br />" : "";
			error += 						(assignedTo == "") ? "Please choose a staff member to assign this task to<br />" : "";
			error += 						(subject == "") ? "Please enter a subject<br />" : "";
			
			if(error == "") {			
				$.ajax({	type: "POST", url: "/admin/fn/workflow/saveNewWorkflowTaskToPhase/",
					data: {clientID: '12295', phaseID: phaseID, dueDate: dueDate, assignedTo: assignedTo, subject: subject, description: description },
					success: function(   data   ) {
						const results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							
							refreshPhaseTasks(phaseID);
							cancelWorkflowPhaseTask(phaseID);
							
							if(results[1] == "yes") {
								$("#line_item_" + phaseID).removeClass("completedItem");
							}
							
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
			} else {
				swal({
					type: 'error',
					title: 'Error',
					html: error
				});
			}
	}
	function cancelWorkflowPhaseTask(phaseID) {
		$("#phaseTaskAddForm_" + phaseID).html('');
		$("#phaseTaskAddForm_" + phaseID).slideUp();
	}
	
	function deleteWorkflowAction(actionID,phaseID) {
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you would like to delete this action? <br /> This action can NOT be undone!',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: true,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({	type: "POST", url: "/admin/fn/workflow/deleteWorkflowAction/",
					data: {clientID: '12295',actionID: actionID, phaseID: phaseID},
					success: function(   data   ) {
						const results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							
							refreshWholeWorkflow();
							
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
		    } 
		});	
	}
	
	
	
	
	
	
	
	
	/* New Batch Update Tasks */
	function toggleChecked(phaseID,status) {
		$(".phase-" + phaseID+ "-checkbox").each( function() {
			$(this).attr("checked",status);
		})
	}
	function batchUpdatePhase(phaseID) {
		const phaseTaskIDs = [];
		$("input[class=phase-" + phaseID+ "-checkbox]:checked").each(function() {
		    phaseTaskIDs.push(this.id.replace('chk_',''));
		});
		if(phaseTaskIDs.length > 0) {
			showBatchCommandsForm(phaseID);							
		} else {
			swal({
				type: 'error',
				title: 'Error',
				html: 'Please check at least 1 phase task to batch update first...'
			});
		}
	}
	function showBatchCommandsForm(phaseID) {
		$("#" + phaseID + "_batch_edit").slideDown();
	}
	function cancelShowBatchCommandsForm(phaseID) {
		$("#" + phaseID + "_batch_edit").slideUp();
	}
	function cancelShowBatchPhaseForm(phaseID) {
		$("#" + phaseID + "_batch_edit").slideUp();
	}
	function getBatchValues(phaseID,type) {
		const errorField = $("#errorEventBatch");

		errorField.hide();
		$.ajax({	type: "POST",	url: "/admin/fn/workflow/getBatchWorkflowPhaseForm/",
			data: {clientID:'12295',field: type, phaseID: phaseID},
			success: function(   data   ){
				const results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					if(results[1] != "hidden") {
						$("#batchValue_" +phaseID).html(results[1]);
						$("#batchValue_" +phaseID).slideDown();
						
						
						tinymce.init({
						    selector: "textarea:not(.NoEditor)",
						    plugins: [
						        "advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
				                "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
				                "table directionality emoticons template textcolor paste textcolor" //contextmenu
						    ],
						    height: 400,
						    contextmenu: false,
					    	browser_spellcheck: true,
						    toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | forecolor backcolor",
						    toolbar2: "styleselect formatselect fontselect fontsizeselect"
						});
						
						if(type == "staff") {
							
							$('#staffID_batch_'+phaseID+'.slick').ddslick();
							
						}
						
					} else {
						$("#batchValue_" +phaseID).hide();
					}
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}								
			}
		});
	}
	function batchUpdatePhaseProcess(phaseID) {
		const phaseTaskIDs = [];
		$("input[class=phase-" + phaseID+ "-checkbox]:checked").each(function() {
		    phaseTaskIDs.push(this.id.replace('chk_',''));
		});
		if(phaseTaskIDs.length > 0) {
			const action = $("#action_" + phaseID).val();
			let value = "";
			const extraVals = "",
				error = "";
			let continueStatus = false;
			//////////////////////////////////////////////////
			//////////////////////////////////////////////////
			//////////////////////////////////////////////////
			switch(action) {
				case "staff":
					value = 			$("#staffID_batch_" + phaseID).val();
					if(value == "") {
						value = 		$("#staffID_batch_" + phaseID).data('ddslick').selectedData.value;
					}
					continueStatus = 	true;
					break;
				case "delete":
				
					swal({
					    title: 'Are you sure?',
					    html: "Are you sure you want to delete all " + phaseTaskIDs.length + " tasks(s) ? <br /> This action can NOT be undone!",
					    type: 'warning',
					    showCancelButton: true,
					    confirmButtonColor: '#3085d6',
					    cancelButtonColor: '#d33',
					    confirmButtonText: 'Yes',
					    cancelButtonText: 'No',
					    confirmButtonClass: 'confirm-class',
					    cancelButtonClass: 'cancel-class',
					    closeOnConfirm: true,
					    closeOnCancel: true
					}, function(isConfirm) {
					    if (isConfirm) {
					    	processBatch(phaseID,action,phaseTaskIDs,value,extraVals);
					    } 
					});
					break;
				case "complete":
				
					swal({
					    title: 'Are you sure?',
					    html: "Are you sure you want to complete all " + phaseTaskIDs.length + " tasks(s)?",
					    type: 'warning',
					    showCancelButton: true,
					    confirmButtonColor: '#3085d6',
					    cancelButtonColor: '#d33',
					    confirmButtonText: 'Yes',
					    cancelButtonText: 'No',
					    confirmButtonClass: 'confirm-class',
					    cancelButtonClass: 'cancel-class',
					    closeOnConfirm: true,
					    closeOnCancel: true
					}, function(isConfirm) {
					    if (isConfirm) {
					    	processBatch(phaseID,action,phaseTaskIDs,value,extraVals);
					    } 
					});
					break;		
				default:
					continueStatus = 	true;
					value = 			$("#value").val();
					break;
			}
			//////////////////////////////////////////////////
			//////////////////////////////////////////////////
			if(continueStatus) {
				processBatch(phaseID,action,phaseTaskIDs,value,extraVals);
			}					
		} else {
			//error, no leads selected
		}
	}
	
	function processBatch(phaseID,action,phaseTaskIDs,value,extraVals) {
		const errorField = $("#errorEventBatch");

		errorField.hide();
		$.ajax({	type: "POST",	url: "/admin/fn/workflow/batchUpdateWorkflowPhase/",
			data: "clientID=12295&phaseID=" + phaseID + "&field=" +  action + "&phaseTaskIDs=" + phaseTaskIDs.join(',') + "&value=" + value + "&" + extraVals,
			success: function(   data   ){
				const results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					refreshPhaseTasks(phaseID);
					cancelShowBatchCommandsForm(phaseID);
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}								
			}
		});
	}
	
	//added on [03.12.2k18] : TH
	function getWorkflowActionOverrideForm(phaseID,actionID) {
		$.ajax({	type: "POST",	url: "/admin/fn/workflow/getWorkflowActionOverrideForm/",
			data: {clientID:'12295',actionID: actionID, phaseID: phaseID},
			success: function(   data   ){
				const results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					modalContent = 			'<div class="modalBorderBox" style="width: 555px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-energy"></i> Edit Phase Action </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelUpdateWorkflowActionWithOverride();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});

					const editor = tinymce.get("customResponse_" + actionID);
					if(editor) {
						editor.destroy();
					}
					tinymce.init({
					    selector: "#customResponse_" + actionID,
					    plugins: [
					        "advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
			                "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
			                "table directionality emoticons template textcolor paste textcolor" //contextmenu
					    ],
					    height: 400,
					    contextmenu: false,
					    browser_spellcheck: true,
					    toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | forecolor backcolor",
					    toolbar2: "styleselect formatselect fontselect fontsizeselect"
					});
					
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function getWorkflowActionQuestionnaireOverrideForm(phaseID,actionID) {
		$.ajax({	type: "POST",	url: "/admin/fn/workflow/getWorkflowActionQuestionnaireOverrideForm/",
			data: {clientID:'12295',actionID: actionID, phaseID: phaseID},
			success: function(   data   ){
				const results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					modalContent = 			'<div class="modalBorderBox" style="width: 555px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-energy"></i> Edit Phase Action </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelUpdateWorkflowActionWithOverride();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});

					const editor = tinymce.get("customResponse_" + actionID);
					if(editor) {
						editor.destroy();
					}
					tinymce.init({
					    selector: "#customResponse_" + actionID,
					    plugins: [
					        "advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
			                "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
			                "table directionality emoticons template textcolor paste textcolor" //contextmenu
					    ],
					    height: 400,
					    contextmenu: false,
					    browser_spellcheck: true,
					    toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | forecolor backcolor",
					    toolbar2: "styleselect formatselect fontselect fontsizeselect"
					});
					
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function updateWorkflowActionWithOverride(phaseID,actionID) {
		const responseID = $("#responseToSend_" + actionID).val();
		let responseOverrideText = "";

		tinymce.triggerSave();
			responseOverrideText = 				$("textarea[name=customResponse_" + actionID + "]").val();
		
		$.ajax({	type: "POST",	url: "/admin/fn/workflow/updateWorkflowActionWithOverride/",
			data: {clientID:'12295',actionID: actionID, phaseID: phaseID, responseID: responseID, responseOverrideText: responseOverrideText},
			success: function(   data   ){
				const results = data.split("{|}");
				if(results[0] == "SUCCESS") {

					refreshPhaseTasks(phaseID);
					cancelUpdateWorkflowActionWithOverride();
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function cancelUpdateWorkflowActionWithOverride(phaseID,actionID) {
		modal.close();
	}
	function changeTheReminderForWorkflowOverride(actionID,value,whoToSendToType,whoToSendToID) {
		const shouldWeUpdate = $("#choose_override_" + actionID).val();
		if(shouldWeUpdate != "") {
			populateWorkflowOverrideFormAndShow(value,actionID,null,whoToSendToType,whoToSendToID);
		} else {
			//empty that custom response
			$("#theCustomResponse_" + actionID).slideUp();

			const editor = tinymce.get("customResponse_" + actionID);
			if(editor) {
				editor.destroy();
			}
			$("textarea[name=customResponse_" + actionID + "]").val('');
		}
	}
	function populateWorkflowOverrideFormAndShow(value,actionID,dontPopulate,whoToSendToType,whoToSendToID) {
		const editor = tinymce.get("customResponse_" + actionID);
		if(value == "") {
			$("#theCustomResponse_" + actionID).slideUp();
			if(editor) {
				editor.destroy();
			}
			$("textarea[name=customResponse_" + actionID + "]").val('');
			
		} else {
			$("#theCustomResponse_" + actionID).slideDown();
			if(editor) {
				editor.destroy();
			}
			tinymce.init({
			    selector: "#customResponse_" + actionID,
			    plugins: [
			        "advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
	                "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
	                "table directionality emoticons template textcolor paste textcolor" //contextmenu
			    ],
			    height: 400,
			    contextmenu: false,
				browser_spellcheck: true,
			    toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | forecolor backcolor",
			    toolbar2: "styleselect formatselect fontselect fontsizeselect"
			});
			if(dontPopulate == undefined || dontPopulate == null) {
				applyEmailTemplateToObject($("#responseToSend_" + actionID).val(),'lead', '1615775',whoToSendToType,whoToSendToID,"customResponse_" + actionID);
			}
			
		}
	}


	function cancelWorkflowAutomaticItemDateEditor() { modal.close(); }
	function displayWorkflowAutomaticItemDateEditor(itemID) {
		$.ajax({	type: "POST",	url: "/admin/fn/workflow/getWorkflowAutomaticItemDateEditor/",
			data: {clientID:'12295',itemID: itemID},
			success: function(   data   ){
				const results = data.split("{|}");
				if(results[0] == "SUCCESS") {

					modalContent = 			'<div class="modalBorderBox" style="width: 555px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-calendar"></i> Edit Date </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelWorkflowAutomaticItemDateEditor();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});

					$("#newAutomaticDate").jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});

				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function updateWorkflowAutomaticItemDate(itemID) {
		let newDate = 						$("#newAutomaticDate").val(),
			newTime = 						$("#newAutomaticTime").val();
		$.ajax({	type: "POST",	url: "/admin/fn/workflow/updateWorkflowAutomaticItemDate/",
			data: {clientID: '12295',itemID: itemID, newDate: newDate, newTime: newTime},
			success: function(   data   ){
				const results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					cancelWorkflowAutomaticItemDateEditor();
					refreshWholeWorkflow();
					if(typeof getObjectActivityLog === 'function'){
						getObjectActivityLog('lead', '1615775');
					}
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
</script>
<style type="text/css">
	.workflowAssignedToBtn .previewImageSmallContainer, .workflowAssignedToBtn .previewImageSmall {
		width: 26px;
		height: 26px;
	}
	.workflowAssignedToBtn .previewImageSmallContainer.inline {
		margin-right: 5px;
	}
</style>
<div id="objectWorkflow_lead">
	
</div>
	            	    </div>
    <!-- Inner Content -->
    	            </div>
				
												
							
	            <div id="eventsAndLeadsTab" class="ui-tabs-hide" >
					    <!-- Inner Content -->
    <div class="tab-content">
    	
						
	
		<div class="failure">Please set a date for the Lead to view any other conflicting Leads for that month, then refresh this page.</div>
	
						    </div>
    <!-- Inner Content -->
    	
				</div>
				
				
							
	            <div id="communicationTab" class="ui-tabs-hide" >
					    <!-- Inner Content -->
    <div class="tab-content">
    	
					
		<script type="text/javascript">
								$("#leadsTabs").tabs().on( "tabsactivate", function( event, ui ) {
				  		var tabID = 	$(ui.newPanel).attr('id');

						if(tabID == "communicationTab") {
				  			getCommunicationItems('lead','1615775');
				  			getIMAPInbox();
				  		}
				  	});
								function changePage(num) {
				getIMAPInbox(num);
			}
			function viewIMAPMailMessage(messageID,brandID) {
				var error = 		"",
					errorField = 	$("#imapinbox_error");

					errorField.hide();

				$("#imapitem_loading_" + messageID).show();
				$.ajax({	type: "POST",	url: "/admin/fn/brands/viewIMAPMailMessage/",
					data: {clientID: '12295', brandID: brandID, messageID: messageID, objectType: 'lead',objectID: '1615775'},
					success: function(   data   ){
						$("#imapitem_loading_" + messageID).hide();
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {

							$("#imapitem_fulltext_" + messageID).html(results[1]);
							$("#imapitem_fulltext_" + messageID).slideDown();
							$("#imapitem_closer_" + messageID).show();

						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}

					}
				});
			}
			function closeIMAPMailItem(messageID) {
				$("#imapitem_fulltext_" + messageID).slideUp();
				$("#imapitem_fulltext_" + messageID).html('');
				$("#imapitem_closer_" + messageID).hide();
			}
			window.imapListingRequest = 		null;
			function getIMAPInbox(page) {
				var error = 		"",
					errorField = 	$("#imapinbox_error");

					errorField.hide();

					if(page == "" || page == null || page == undefined) {
						page = 			"1";
					}

				$("#imapinbox_loading").show();
				window.imapListingRequest = 				$.ajax({	type: "POST",	url: "/admin/fn/brands/viewIMAPInbox/",
					data: {clientID: '12295', objectType: 'lead',objectID: '1615775', page: page},
				   beforeSend : function()    {
						if(window.imapListingRequest != null) {
							window.imapListingRequest.abort();
						}
					},
					success: function(   data   ){
						$("#imapinbox_loading").hide();
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							$("#imapinbox").html(results[1]);
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}

					}
				});
			}

			function cancelObjectEmail(clientID, objectName, objectID) {
				getCommunicationItems(objectName,objectID);
				modal.close();
			}

			function toggleInboxWidth() {
				if($(".imapListingInbox").hasClass('fullWidth')) {
					$(".imapListingInbox").removeClass('fullWidth');
					$(".communicationListingInbox").removeClass('fullWidth');
					$("#inboxToggleBtn").html('<span class="icon-expand-2"></span>');
					$("#tiptip_holder").hide();
				} else {
					$(".imapListingInbox").addClass('fullWidth');
					$(".communicationListingInbox").addClass('fullWidth');
					$("#inboxToggleBtn").html('<span class="icon-contract-2"></span>');
					$("#tiptip_holder").hide();
				}
			}
		</script>

		<br style="clear: both;" />

		<br style="clear: both;" />
		<style type="text/css">
			.communicationListingInbox {
				width: 49%;
				float: right;
			}
			.imapListingInbox {
				width: 50%;
				float: left;
			}
			.fullWidth {
				width: 99% !important;
				margin-bottom: 25px;
			}
		</style>
		<div class="imapListingInbox">
			<div class="headerTitle leftTitle"><i class="icon-inbox"></i> Inbox</div>
			<div class="rightTitle" style="margin-top: 5px;"><a href="javascript:void(0);" onclick="toggleInboxWidth();" title="Expand Width" id="inboxToggleBtn"><span class="icon-expand-2"></span></a></div>
			<div id="imapinbox_loading" class="hidden" style="float: left; margin-left: 20px; margin-top: 5px;">
				<div class="dot-container ">
					<div class="dot"></div>
					<div class="dot"></div>
					<div class="dot"></div>
					<div class="dot"></div>
					<div class="dot"></div>
				</div>		Loading Messages...
			</div>
			<div id="imapinbox_error" class="hidden failure"></div>
			<br style="clear: both;">
			<div id="imapHeaderDIV" class="tableHeaderDIV alternateThinRowStyleLight">
				<div style="float: left; width: 27px;" class="floatHeader smallText">&nbsp;</div>
				<div style="float: left;" class="floatHeader smallText">Subject</div>
				<div style="float: right; " class="floatHeader smallText">Date</div>
				<div style="float: left; width: 25px;" class="floatHeader smallText">&nbsp;</div>
				<div class="clearSmall"></div><br style="clear: both;">
			</div>
			<div id="imapinbox"></div>
		</div>

		<div class="communicationListingInbox">
				<span class="leftTitle headerTitle"><i class="icon-envelope-letter"></i> Contact:</span>
		<div id="communication_loading" class="hidden" style="float: left; margin-left: 20px; margin-top: 5px;"><img src="/admin/icons/indicator.gif" align="absmiddle" /></div>
		<div id="communication_error" class="hidden failure"></div>
							<div class="rightTitle">

						<div class="btn-group pull-right">
                            <button class="btn btn-default btn-sm dropdown-toggle" type="button" data-toggle="dropdown" aria-expanded="false"><span class="fa fa-plus font-green-jungle"></span> Compose/Send
                                <i class="fa fa-angle-down"></i>
                            </button>
                            <ul class="dropdown-menu pull-right" role="menu">
                                <li>
                                    <a href="javascript:;" onclick="composeNewObjectEmail('lead','1615775');" ><span class="icon-email-send"></span> Send Email </a>
                                </li>
                                <li>
                                    <a href="javascript:;" onclick="composeNewObjectSMS('lead','1615775');" ><span class="icon-phone-message-3"></span> Send SMS/Text </a>
                                </li>
                                <li>
                                    <a href="javascript:;" onclick="addManualCommunicationItem('lead','1615775');" ><span class="icon-chat-2"></span> Log Communication </a>
                                </li>
                            </ul>
                        </div>

						<div style="float: left; margin-right: 10px;" id="emailID">
							<i class="fa fa-envelope-square"></i> <a href="mailto:ld.da779f8e1d736501@contactmystudio.com" title="ld.da779f8e1d736501@contactmystudio.com This unique e-mail address is specifically for this item" class="tinyText" onclick="copyToClipboard()"><strong>unique address</strong></a>
							<script>
								function copyToClipboard() {
									event.preventDefault();
									navigator.clipboard.writeText(event.currentTarget.href.replace('mailto:', '')).then(() => {
										swal({type: 'success', title: 'Success!', html: 'Email address copied to clipboard!', timer: 4000});
									});
								}
							</script>
						</div>
					</div>
				<br style="clear: both;" />
				<div id="totals" class="tableHeaderDIV alternateThinRowStyleLight">
			<div style="float: left; width: 45px;" class="floatHeader smallText">Type</div>
			<div style="float: left; width: 355px;" class="floatHeader smallText">Subject</div>
			<div style="float: left; width: 25px;" class="floatHeader smallText">&nbsp;</div>
			<div class="clearSmall" ></div><br style="clear: both;" />
		</div>
		<br style="clear: both;" />



			<script type="text/javascript">
				function getCommunicationItems(objectType,objectID) {
					var error = 					"",
						errorField = 				$("#communication_error");

						errorField.hide();
						$("#communication_loading").show();
						$.ajax({	type: "POST",	url: "/admin/fn/comm/getCommunicationItems/",
							data: {clientID: '12295', objectType: objectType, objectID: objectID},
							success: function(   data   ){
								$("#communication_loading").hide();
								var results = data.split("{|}");
								if(results[0] =="SUCCESS") {
									$("#allcommunicationitems").html(results[1]);
									$("time.timeago").timeago();

									$('time.timeago').qtip({
										style: { classes: 'qtip-rounded qtip-dark qtip-pixifi' },
										content: {
											attr: 'title'
										},
										position: {
									        viewport: $(window)
									    },
							            hide: {
							                fixed: true,
							                delay: 300
							            }
									});


								} else {
									swal({
										type: 'error',
										title: 'Error',
										html: results[1]
									});
								}
							}
						});
				}
			</script>
			<div id="allcommunicationitems">
					</div>
		</div>
	<br style="clear: both;" />
	
	<br style="clear: both;" />
						    </div>
    <!-- Inner Content -->
    	
				</div>
				
						
	            <div id="questionnairesTab" class="ui-tabs-hide" >
					    <!-- Inner Content -->
    <div class="tab-content">
    	
					<script type="text/javascript">	
	
	$(function()  {
		refreshQuestionnaireToObjectListing();
	});

	function addNewQuestionnaire() {
		var error = 				"",
			errorField = 			$("#errorQuest");
			
			errorField.hide();
			
			$("questionnaireLoading").show();
			
		$.ajax({	type: "POST",	url: "/admin/fn/quest/getAddQuestionnaireToObjectForm/",
			data: {clientID: '12295', objType: 'lead', objID: '1615775'},
			success: function(   data   ){			 
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#addQuestionnaire").html(results[1]);
					$("#addQuestionnaire").slideDown();
					$("questionnaireLoading").hide();
					
					
					
					var editor = tinymce.get("message_questionnaire");
						if(editor) {
							editor.destroy();
						}
						tinymce.init({
						    selector: "#message_questionnaire",
						    plugins: [
						        "advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
				                "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
				                "table directionality emoticons template textcolor paste textcolor" //contextmenu
						    ],
						    height: 400,
						    browser_spellcheck: true,
						    toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | forecolor backcolor",
						    toolbar2: "styleselect formatselect fontselect fontsizeselect"
						});
					
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function cancelAddObjectQuestionnaire() { $("#globalQuestionnaireDialog").popup('hide');  }
	function addNewObjectQuestionnaire() {
		$("questionnaireLoading").show();
		$.ajax({	type: "POST",	url: "/admin/fn/quest/getAddQuestionnaireToObjectForm/",
			data: {clientID: '12295', objType: 'lead', objID: '1615775'},
			success: function(   data   ){			 
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("questionnaireLoading").hide();
					
					
					modalContent = 			'<div class="modalBorderBox" style="width: 800px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-note"></i> Add Questionnaire </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelAddObjectQuestionnaire();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					
					$("#globalQuestionnaireDialog").html(modalContent);
					$("#globalQuestionnaireDialog").popup({
						blur: false,
						opacity: 0.3,
						transition: 'all 0s'
					});
					$("#globalQuestionnaireDialog").popup('show');
					
					
										
					
					$("#dateToSend_lead").jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					
					$("#timeToSend_lead_chooser").timepicker('destroy',true);
					$('#timeToSend_lead_chooser').timepicker({
						interval: 30,
						startHour:8,
						timeFormat: 'h:mm p',						scrollbar: true,
						change: function(time) {
				            var picker = $(this).timepicker({timeFormat: 'h:mm p'}),
				            	fieldID = 	$(this).attr('id').replace('_chooser','');
				            	$("#" + fieldID).val(formatAMPM(time));
				        }
					});
					
					$('#globalQuestionnaireDialog [data-toggle="popover"]').popover({
						trigger: 'hover',
				        'placement': 'top',
				        'show': true,
				        container: 'body'
					});
					
					var editor = tinymce.get("message_questionnaire");
						if(editor) {
							editor.destroy();
						}
						tinymce.init({
						    selector: "#message_questionnaire",
						    plugins: [
						        "advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
				                "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
				                "table directionality emoticons template textcolor paste textcolor" //contextmenu
						    ],
						    height: 400,
						    browser_spellcheck: true,
						    toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | forecolor backcolor",
						    toolbar2: "styleselect formatselect fontselect fontsizeselect"
						});
					
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}

	function cancelAddNewQuestionnaire() {
		$("#addQuestionnaire").slideUp();
		$("#addQuestionnaire").html('');
		modal.close();
	}
	
	function loadQuestionnaire(questionnaireID, objectType, objectID, subObjectType, subObjectID) {
		if(objectType == 'product') {
			location.href='/admin/' + subObjectType + 's/' + subObjectID + '/product/' + objectID + '/questionnaire/' + questionnaireID + '/';
		} else {
			location.href='/admin/' + objectType + 's/' + objectID + '/questionnaire/' + questionnaireID + '/';
		}
	}
		
	function saveQuestionnaireTemplateToObject(objType, objID, customerID) {
		$("#saveSendQuestionnaireButton").attr('disabled',true);
		$("#saveSendQuestionnaireButton").html('<span class="fa fa-refresh fa-spin"></span> Saving/Processing... ');
		
		
		let brandID = 				$('#questionnaire_brand').val(), 
			templateID = 			$('#questionnairetemplate').val(),
			responseID = 			$('#responses_quest_send').val(),
			sendEmail = 			$("#sendQuestionnaireEmail").val(),
			recipients = 			$('#recipients_' + objType).val(),
			responseSubject = 		$('#subject_questionnaire').val(),
			messageField = 			'message_questionnaire',
			error = 				"",
			errorField = 			$("#errorQuest");
			
			errorField.hide();
			
			tinyMCE.triggerSave();
			
			
			tinyMCE.triggerSave();
			responseMsg = 			$("textarea[name="+ messageField +"]").val();
			
			
			error += 				(templateID == "") ? "You must choose a questionnaire template<br />" : "";
			error += 				(brandID == "") ? "You must choose a brand<br />" : "";
			
			if(sendEmail == "1") {
				error += 			(recipients == "") ? "Please choose or enter a recipient's e-mail address<br />" : "";
				error += 			(responseSubject == "") ? "Please enter a subject<br />" : "";
				error += 			(responseMsg == "") ? "Please enter something as the e-mail message.<br />" : "";
			}
			
			if(error == "") {
				$.ajax({	type: "POST",	url: "/admin/fn/quest/addQuestionnaireTemplateToObject/",
					data: {clientID: '12295', templateID: templateID, objType: objType, objID: objID, brandID: brandID, 
							customerID: customerID, sendEmail: sendEmail, responseID: responseID, recipients: recipients, responseSubject: responseSubject, 
							responseMsg: responseMsg, responseType: 'questionnaire'},
					success: function(   data   ){			 
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							refreshQuestionnaireToObjectListing();
							cancelAddNewQuestionnaire();
							cancelAddObjectQuestionnaire();
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
							$("#saveSendQuestionnaireButton").attr('disabled',false);
						}
					}
				});
			} else {
				swal({
					type: 'error',
					title: 'Error',
					html: error
				});
			}		
	}
	
	function deleteQuestionnaire(questionnaireID) {
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you would like to delete this questionnaire? <br /> This action can NOT be undone!',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: true,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({	type: "GET", url: "/admin/fn/quest/deleteQuestionnaireFromObject/",
					data: "clientID=12295&questionnaireID=" + escape(  questionnaireID  ) + 
							"&objType=lead&objID=1615775",
					success: function(   data   ) {
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {						
							refreshQuestionnaireToObjectListing();
							
							if(typeof refreshEventVendorsListing === 'function'){
								refreshEventVendorsListing();
							}
							if(typeof refreshEventStaffListing === 'function'){
								refreshEventStaffListing();
							}
							
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
		    } 
		});
	}
	
	function createTemplateFromQuestionnaire(questionnaireID) {
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you would like to create a questionnaire template from this questionnaire?',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: true,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({	type: "POST", url: "/admin/fn/quest/createTemplateFromQuestionnaire/",
					data: { clientID: '12295', questionnaireID: questionnaireID, objType: 'lead', objID: '1615775'},
					success: function(   data   ) {
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							
							swal({
								type: 'success',
								title: 'Success!',
								html: "Your Questionnaire Template has been successfully created!",
								timer: 4000
							});
							
							refreshQuestionnaireToObjectListing();
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
		    } 
		});
	}
	
	function toggleQuestionnaireEmail(val) {
		if(val == "1") {
			$("#messageDIV").slideDown();
			$('#addQuestionnaire [data-toggle="popover"]').popover({
				trigger: 'hover',
		        'placement': 'top',
		        'show': true,
		        container: 'body'
			});
			
			$("#saveSendQuestionnaireButton").html('<span class="fa fa-envelope-o"></span> Send Questionnaire');
			
			// Now add a TinyMCE editor to the new textarea
	   		tinyMCE.execCommand("mceAddControl", false, "message_questionnaire");
	   					
			setTimeout(function() {
				//This will reset the modal window's position : added on [08.03.2k16] : TH
				$(window).resize();
				
			},500);
			
		} else {
			$("#messageDIV").slideUp();
			$("#saveSendQuestionnaireButton").html('<span class="fa fa-check"></span> Save');
		}
	}
	
	
	//Ooverride the normal e-mail signature code
	function insertEmailSignature(messageField, studioID) {
		var brandID = 			$("#questionnaire_brand").val();
		
		//If the brandID is empty, just default to the normal signature
		if(brandID !== "") {
			$.ajax({type: 'POST',url: '/admin/data/getBrandEmailSignature/',
				data: {clientID:studioID, brandID: brandID},
				success: function(data) {
					var results = data.split("{|}");
			   		var result = results[0];
			   		if(result == "SUCCESS") {
			   			
			   			if(results[1] == "") {
			   				
			   				getNormalEmailSignature(messageField, studioID);
			   				
			   			} else {
				   			var msg = "<br /><br />" + results[1];
				   			
				   			var editor = tinymce.EditorManager.get(messageField);
			   				if(editor) {
								editor.insertContent(results[1]);
			   				}
			   			}
			   		} else {
			   			swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
			   		}
				}
			});
			
		} else {
			getNormalEmailSignature(messageField, studioID);
		}
	}
	
	function getNormalEmailSignature(messageField, studioID) {
		$.ajax({type: 'GET',url: '/admin/data/getSignature/',
			data: {clientID:studioID},
			success: function(data) {
				var results = data.split("{|}");
		   		var result = results[0];
		   		if(result == "SUCCESS") {
		   			var msg = "<br /><br />" + results[1];
		   			var editor = tinymce.EditorManager.get(messageField);
	   				if(editor) {
						editor.insertContent(results[1]);
	   				}
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	
	function cancelSendReminder() {
		modal.close();
	}
	function sendReminderForQuestionnaire(questionnaireID) {
		//added on [12.28.2k17] : TH
		composeNewObjectEmail('lead','1615775','questionnaire',questionnaireID);
	}
	function sendReminderForQuestionnaireSMS(questionnaireID) {
		//added on [05.02.2k18] : TH
		composeNewObjectSMS('lead','1615775','questionnaire',questionnaireID);
	}
	
	function toggleQuestionnairePortalVisibility(questionnaireID) {
		$.ajax({	type: "POST", url: "/admin/fn/quest/toggleQuestionnairePortalVisibility/",
			data: { clientID: '12295', questionnaireID: questionnaireID},
			success: function(   data   ) {
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {						
					refreshQuestionnaireToObjectListing();
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function toggleQuestionnaireLockedStatus(questionnaireID) {
		$.ajax({	type: "POST", url: "/admin/fn/quest/toggleQuestionnaireLockedStatus/",
			data: { clientID: '12295', questionnaireID: questionnaireID},
			success: function(   data   ) {
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {						
					refreshQuestionnaireToObjectListing();
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function refreshQuestionnaireToObjectListing() {
		$.ajax({	type: "POST", url: "/admin/fn/quest/refreshQuestionnaireToObjectListing/",
			data: { clientID: '12295', objectType: 'lead', objectID: '1615775'},
			success: function(   data   ) {
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {						
					$("#questionnairesListingDIV").html(results[1]);
					$('.questActions a').qtip({
						style: { classes: 'qtip-rounded qtip-dark qtip-pixifi' },
						content: {
							attr: 'title'
						},
						position: {
					        viewport: $(window)
					    },
			            hide: {
			                fixed: true,
			                delay: 300
			            }
					});
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
</script>
<div class="leftTitle headerTitle"><i class="icon-note"></i> Questionnaires:</div>
<div class="rightTitle">
		<a href="javascript:void(0);" class="btn btn-default btn-sm" onclick="addNewObjectQuestionnaire();"><i class="fa fa-plus font-green-jungle"></i> Create New Questionnaire from Template </a>
	</div>
<br style="clear: both;" />
<br style="clear: both;" />
<div id="questionnaireLoading" class="hidden" ><img src="/admin/icons/tiny_spinner.gif" align="absmiddle" /></div>
<div id="errorQuest" class="hidden failure"></div>
<div id="addQuestionnaire" class="hidden greenBorderBox"></div>



<div id="header" class="tableHeaderDIV alternateThinRowStyle">
	<div class="floatHeader" style="width: 250px;">Name</div>
	<div class="floatHeader" style="width: 125px;">Created On</div>
	<div class="floatHeader" style="width: 125px;">Responded On</div>
	<div class="floatHeader pull-right" > Actions/Options </div>
	<br />
</div>
<div id="questionnairesListingDIV" >

</div>


	<br style="clear: both;">
	<br style="clear: both;">
	<script type="text/javascript">
	$(function() {
		refreshObjectRemindersListingQ('lead','1615775');
	});
	function refreshObjectRemindersListingQ(objectType, objectID) {
		$.ajax({	type: "POST",	url: "/admin/fn/reminders/refreshObjectRemindersListing/",
			data: {clientID: '12295',objectType:objectType,objectID: objectID,filterType: 'questionnaires'},
			success: function(   data   ){
				var results = data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#reminderListingQ").html(results[1]);
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function showReminderAddFormQ() {
		$("#reminderAddFormQ").slideDown();
		$('#reminderAddFormQ [data-toggle="popover"]').popover({
			trigger: 'hover',
	        'placement': 'top',
	        'show': true,
	        container: 'body'
		});
	}
	function cancelAddReminderQ() {
		$("#reminderAddFormQ").slideUp();
	}
	function populateRemindersFromTemplateQ(objectType, objectID) {
		var templateID = 				$("#reminderTemplateQ_" + objectType).val(),
			error = 					"",
			errorField = 				$("#errorReminderQ");
			
			errorField.hide();									
			error += (templateID == "") ? "Please choose a template to populate from <br />": "";
			
		if(error == "") {									
			$.ajax({	type: "POST",	url: "/admin/data/populateObjectFromTemplate/",
				data: { clientID: '12295', objectType: objectType, objectID: objectID, templateID: templateID},
				success: function(   data   ) {
					var results = 	data.split("{|}");
					if(results[0] == "SUCCESS") {
						cancelAddReminderQ();
						refreshObjectRemindersListingQ(objectType, objectID);
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});									
		} else {
			swal({
				type: 'error',
				title: 'Error',
				html: error
			});
		}
	}
	
	function switchCommunicationTypeQ(which,objectType) {
		switch(which) {
			case "0": //email
				$("#emailTemplateToSendQ_" + objectType).show();
				$("#smsTemplateToSendQ_" + objectType).hide();
				break;
			case "1": //SMS
				$("#emailTemplateToSendQ_" + objectType).hide();
				$("#smsTemplateToSendQ_" + objectType).show();
				break;
		}
	}
	function populateReminderManuallyQ(objectType, objectID) {
		var responseID = 				$("#responseToSendQ_" + objectType).val(),
			dateToSend = 				$("#dateToSendQ_" + objectType).val(),
			timeToSend = 				$("#timeToSendQ_" + objectType).val(),
			commType = 					$("#commTypeQ_" + objectType).val(),
			whoToNotify = 				$("#whoToSendQ_" + objectType).val(),
			whoToNotifyRoleID = 		$("#staffEventRoleIDQ_"  + objectType).val(),
			questionnaireID = 			$("#questionnaireToSendQ_" + objectType).val(),
			error = 					"";
			
			
			if(commType == '1') {
				responseID = 			$('#responseToSendQ_sms_' + objectType).val();
				
				error += (responseID == "") ? 		"Please choose an SMS/Text template to send. <br />" : "";
				
			} else {
				error += (responseID == "") ? 		"Please choose an Email template to send. <br />" : "";
			}
			
			
			error += (dateToSend == "") ? "Please choose a date to send. <br />": "";
			
		if(error == "") {									
			$.ajax({	type: "POST",	url: "/admin/data/populateObjectReminderManually/",
				data: { clientID: '12295', objectType: objectType, objectID: objectID, responseID: responseID, dateToSend: dateToSend, timeToSend: timeToSend, whoToNotify: whoToNotify, whoToNotifyRoleID: whoToNotifyRoleID, questionnaireID: questionnaireID, commType: commType},
				success: function(   data   ) {
					var results = 	data.split("{|}");
					if(results[0] == "SUCCESS") {
						cancelAddReminderQ();
						refreshObjectRemindersListingQ(objectType, objectID);
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});									
		} else {
			swal({
				type: 'error',
				title: 'Error',
				html: error
			});
		}
	}
	function addReminderToObjectQ(objectType, objectID) {
		var type = 					$("#howtocreateQ_" + objectType).val();
		switch(type) {
			case "template":
				populateRemindersFromTemplateQ(objectType, objectID);
				break;
			case "manual":
				populateReminderManuallyQ(objectType, objectID);
				break;
			default:
				break;
		}
	}
	function removeAllRemindersFromObjectQ() {
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you want to delete all of the scheduled questionnaires? <br /> This action can NOT be undone!',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: true,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({ type: 'POST', url: '/admin/data/removeAllRemindersFromObject/',
				data: { clientID: '12295', objectType: 'lead', objectID: '1615775', questionnaires: 'yes'},
				success: function(data) {
					var results = 	data.split("{|}");
					if(results[0] == "SUCCESS") {		 
						refreshObjectRemindersListingQ('lead', '1615775');
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		    } 
		});	
	}
	function removeReminderFromObjectQ(objectType, objectID, reminderID) {
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you want to delete this scheduled questionnaire? <br /> This action can NOT be undone!',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: true,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({ type: 'POST', url: '/admin/data/removeReminderFromObject/',
					data: { clientID: '12295', objectType: objectType, objectID: objectID, reminderID: reminderID},
					success: function(data) {
						var results = 	data.split("{|}");
						if(results[0] == "SUCCESS") {		 
							refreshObjectRemindersListingQ(objectType, objectID);
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
		    } 
		});
	}
	function switchInputTypeQ(objectType, objectID, inputType) {
		switch(inputType) {
			case "template":
				$("#templateDIVQ_" + objectType).slideDown();
				$("#manualDIVQ_" + objectType).hide();
				break;
			case "manual":
				$("#templateDIVQ_" + objectType).hide();
				$("#manualDIVQ_" + objectType).slideDown();
				break;
			default:
				$("#templateDIVQ_" + objectType).hide();
				$("#manualDIVQ_" + objectType).hide();
				break;
		}
	}
	
	
	function editObjectReminderDateQ(reminderID) {
		$("#reminder_date_"+reminderID).slideDown();
		
		//Only add the date picker once...
		if(!$('#reminder_senddate_' + reminderID).parent().hasClass('jdpicker_w')) {
			$('#reminder_senddate_' + reminderID).jdPicker({
				date_format: 'mm/dd/YYYY',
				start_of_week: 0			});
		}
	}
	function updateObjectReminderDateQ(reminderID) {
		var newDate = 			$('#reminder_senddate_' + reminderID).val(),
			error = 			"";
			
		$.ajax({ type: 'POST', url: '/admin/data/updateObjectReminderDueDate/',
			data: { clientID: '12295', reminderID: reminderID, newDate: newDate},
			success: function(data) {
				var results = 	data.split("{|}");
				if(results[0] == "SUCCESS") {		 
					$("#reminder_date_display_" + reminderID).html('<img src="/admin/icons/edit.png" align="absmiddle" /> ' + newDate);
					cancelEditObjectReminderDate(reminderID);
					refreshObjectRemindersListingQ(objectType, objectID);
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
			
	}
	function cancelEditObjectReminderDateQ(reminderID) {
		$("#reminder_date_"+reminderID).slideUp();
	}
	
	
	
	function getObjectReminderTextOverrideFormQ(reminderID) {
		$.ajax({ type: 'POST', url: '/admin/data/getObjectReminderTextOverrideForm/',
			data: { clientID: '12295', reminderID: reminderID},
			success: function(data) {
				var results = 	data.split("{|}");
				if(results[0] == "SUCCESS") {		 
					
					$("#editResponseForm_" + reminderID).html(results[1]);
					$("#editResponseForm_" + reminderID).slideDown();
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function changeTheReminderForOverrideQ(reminderID,value) {
		var shouldWeUpdate = 			$("#choose_override_" + reminderID).val();
		if(shouldWeUpdate != "") {
			populateMessageWithData('12295', 'lead', '1615775', value, "customResponse_" + reminderID, '','');
		}
	}
	function populateOverrideFormAndShowQ(value,reminderID,dontPopulate) {
		if(value == "") {
			$("#theCustomResponse_" + reminderID).slideUp();
			
			var editor = tinymce.get("customResponse_" + reminderID);
			if(editor) {
				editor.destroy();
			}
			$("textarea[name=customResponse_" + reminderID + "]").val('');
			
		} else {
			$("#theCustomResponse_" + reminderID).slideDown();
			
			var editor = tinymce.get("customResponse_" + reminderID);
			if(editor) {
				editor.destroy();
			}
			tinymce.init({
			    selector: "#customResponse_" + reminderID,
			    plugins: [
			        "advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
	                "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
	                "table directionality emoticons template textcolor paste textcolor" //contextmenu
			    ],
			    browser_spellcheck: true,
			    toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | forecolor backcolor",
			    toolbar2: "styleselect formatselect fontselect fontsizeselect"
			});
			if(dontPopulate == undefined || dontPopulate == null) {
				populateMessageWithData('12295', 'lead', '1615775', $("#responseToSend_" + reminderID).val(), "customResponse_" + reminderID, '','');
			}
			
		}
	}
	function cancelUpdateObjectReminderWithOverrideQ(reminderID) {
		$("#editResponseForm_" + reminderID).slideUp();
		var editor = tinymce.get("customResponse_" + reminderID);
		if(editor) {
			editor.destroy();
		}
		$("textarea[name=customResponse_" + reminderID + "]").val('');
		$("#theCustomResponse_" + reminderID).html('');
	}
	function updateObjectReminderWithOverrideQ(reminderID) {
		var responseID = 						$("#responseToSend_" + reminderID).val(),
			responseOverrideText = 				"",
			errorField = 						$("#errorReminder_" + reminderID);
			
			errorField.hide();
			
			tinymce.triggerSave();
			responseOverrideText = 						$("textarea[name=customResponse_" + reminderID + "]").val();
			$.ajax({ type: 'POST', url: '/admin/data/updateObjectReminderWithOverride/',
				data: { clientID: '12295', reminderID: reminderID, responseID: responseID, responseOverrideText: responseOverrideText},
				success: function(data) {
					var results = 	data.split("{|}");
					if(results[0] == "SUCCESS") {		 
						
						cancelUpdateObjectReminderWithOverride(reminderID);
						refreshObjectRemindersListingQ(objectType, objectID);
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
	}
	
	
</script>
<div id="scheduleRemindersQ" class="portlet light bordered">
	<div class="portlet-title">
		<div class="caption ">
			<i class="icon-calendar"></i> <span class="caption-subject bold headerTitle">Scheduled Questionnaires</span>
		</div>
		<div class="actions">
							<a href="javascript:void(0);" onclick="showReminderAddFormQ();" class="btn btn-circle btn-default btn-sm"><i class="fa fa-plus font-green-jungle"></i> Schedule Questionnaires</a>
							<a href="javascript:void(0);" onclick="removeAllRemindersFromObjectQ();" class="btn btn-circle btn-default btn-sm"><span class="fa fa-times font-red-flamingo"></span> Remove All Questionnaires</a>
					</div>
	</div>
	<!-- portlet BODY -->
	<div class="portlet-body">
	
		<div class="tableHeaderDIV alternateThinRowStyle">
			<div class="floatHeader" style="width: 75px;">Status</div>
			<div class="floatHeader" style="width: 80px;">Date to send</div>
			<div class="floatHeader" style="width: 30%;">Response to Send</div>
			<div class="floatHeader" style="width: 15%;">Who To Notify</div>
			<div class="floatHeader" style="width: 14%;">Type</div>
			<div class="clearSmall"></div><br style="clear: both;">
		</div>
		
		<div id="reminderAddFormQ" class="hidden portlet light bordered" style="width: 75%; margin-left: auto;margin-right: auto;">
			<div class="failure hidden" id="errorReminderQ"></div>
			
			<div class="normalThinRowStyle">
	        	<div class="leftTitle">Create from Template or Add Manually?</div>
	            <div class="rightTitle">
	                <select id="howtocreateQ_lead" name="howtocreateQ_lead" style="width: 250px;"  onchange="switchInputTypeQ('lead', '1615775', this.value);"  class="styled">
    	<option value="" > -- </option>
<option value="template" selected="selected"  >Create from Template</option>
<option value="manual"   >Add Manually</option>
    </select>
    					                
	            </div>
				<div class="clearSmall"></div><br style="clear: both;">
	        </div>
			
			<div class="normalThinRowStyle" id="templateDIVQ_lead" >
	        	<div class="leftTitle">Reminder Template:</div>
	            <div class="rightTitle">
	            <div style="float: left; margin-right: 10px; padding-top: 3px;" >
	            	<a href="javascript:void(0);" class="btn btn-default btn-sm" onclick="location.href='/admin/questionnaires/#scheduledTab';" ><i class="icon-file-edit"></i> Manage Templates</a>
	            </div>
	                <select id="reminderTemplateQ_lead" name="reminderTemplateQ_lead" style="width: 300px;"  class="styled" >
    	<option value="" > -- No Data to Display -- </option>    </select>
    	            					                
	            </div>
				<div class="clearSmall"></div><br style="clear: both;">
	        </div>
	        <div class="hidden" id="manualDIVQ_lead">
	            <div class="normalThinRowStyle">
					<div class="leftTitle">Questionnaire Template:</div>
					<div class="rightTitle">    <select id="questionnaireToSendQ_lead" name="questionnaireToSendQ_lead" style="width: 300px;"  class="styled">
    	<option value="" > -- </option>
<option value="89179"   >(test do not use ADVANCED BOOKING FORM)  test RESERVE SESSION test</option>
<option value="89178"   >(test do not use  BABY HERE BOOKING FORM)  test RESERVE SESSION test</option>
<option value="89071"   > IN-HOME MATERNITY MODEL SESSION BOOKING FORM</option>
<option value="88890"   > PHOTOGRAPHER SESSION INFO QUESTIONNAIRE</option>
<option value="88414"   > San Antonio, TX Area Model Questionnaire</option>
<option value="79438"   >(BABY HERE BOOKING FORM)  RESERVE SESSION</option>
<option value="79439"   >(ADVANCED BOOKING FORM)  RESERVE SESSION</option>
<option value="79458"   >(BABY HERE BOOKING FORM)  RESERVE MANHATTAN SESSION</option>
<option value="79457"   >(ADVANCED BOOKING FORM)  RESERVE MANHATTAN SESSION</option>
<option value="72148"   > IN-HOME MODEL SESSION BOOKING FORM</option>
<option value="89050"   >(do not use ADVANCED BOOKING FORM)  RESERVE SESSION (duplicate)</option>
<option value="88201"   >(Rachel: Date Change Request)  Rachel: Date Change Request</option>
<option value="86916"   > RIV18 Model Questionnaire</option>
<option value="86653"   > Model Questionnaire for MSP</option>
<option value="73699"   > PHOTOGRAPHER SESSION INFO QUESTIONNAIRE</option>
<option value="45914"   > CLIENT - MODEL RELEASE</option>
<option value="86254"   > Austin Area  Model Questionnaire</option>
<option value="85728"   > Santa Ana Model Questionnaire</option>
<option value="84802"   > Dallas Area  Model Questionnaire</option>
<option value="73533"   >((with new Custom Fields))  MASTER MODEL QUESTIONNAIRE</option>
<option value="86293"   > RESHOOT ---PHOTOGRAPHER SESSION INFO QUESTIONNAIRE</option>
<option value="63591"   >((with new Custom Fields))  SESSION FORM</option>
<option value="79378"   >((with new Custom Fields))  MANHATTAN SESSION BOOKING FORM</option>
<option value="80189"   >((with new Custom Fields))  Template Model Questionnaire (duplicate)</option>
<option value="83450"   > Lansdale, PA area Model Questionnaire</option>
<option value="84182"   > Des Plaines area Model Questionnaire</option>
    </select>
    </div>
					<div class="clearSmall"></div><br style="clear: both;" />
				</div>
	        	<div class="normalThinRowStyle">
	            	<div class="leftTitle">Date to send:</div>
	                <div class="rightTitle">
	                <input type="text" id="dateToSendQ_lead" name="dateToSendQ_lead" size="25" class="textBlock date_picker textBlock" maxlength="" value=""  autocomplete="new-password"   />	                </div>
					<div class="clearSmall"></div><br style="clear: both;">
	            </div>
	            
        			<div class="normalThinRowStyle">
        				<div class="leftTitle">Communication Type:</div>
        				<div class="rightTitle">
        					    <select id="commTypeQ_lead" name="commTypeQ_lead" style="width: 150px;"  onchange="switchCommunicationTypeQ(this.value,'lead');"  class="styled">
    	<option value="" > -- </option>
<option value="0" selected="selected"  >Email</option>
<option value="1"   >SMS/Text</option>
    </select>
            				</div>
        				<div class="clearSmall"></div><br style="clear: both; " />
        			</div>
        		
	            <div id="emailTemplateToSendQ_lead" class="normalThinRowStyle">
	            	<div class="leftTitle">Email Template to send:</div>
	                <div class="rightTitle">
	                <div style="float: left; margin-right: 10px;">
	                	<button type="button" class="btn btn-default btn-sm" onclick="getGlobalEmailTemplateComposer('questionnaire','responseToSendQ_lead');" data-toggle="popover" data-html="true" data-content="<i class=&quot;fa fa-plus&quot;></i> Click to add a new Email Template" data-original-title=""><span class="fa fa-plus font-green-jungle"></span></button>
	                </div>
	                    <select id="responseToSendQ_lead" name="responseToSendQ_lead" style="width: 300px;"  class="styled">
    	<option value="" > -- </option>
    				<optgroup label="CLIENT CONTACT">
    				<option value="161045"  >4a. MODEL SESSION - MODEL &amp; MARKETING RELEASE</option>
<option value="165031"  >4b. MODEL RELEASE - POST SESSION FOLLOW UP</option>
    				</optgroup>
    				    				<optgroup label="Un-Categoried">
    				<option value="276031"  >Engagement Session {questionnaire}</option>
<option value="276033"  >Generic Session Questionnaire</option>
<option value="276032"  >Wedding day details {questionnaire}</option>
    				</optgroup>
    				    </select>
    	                </div>
					<div class="clearSmall"></div><br style="clear: both;">
	            </div>
	            
	            <div id="smsTemplateToSendQ_lead" class="hidden normalThinRowStyle">
	            	<div class="leftTitle">SMS/Text Template to send:</div>
	                <div class="rightTitle">
	                <div style="float: left; margin-right: 10px;">
	                	<button type="button" class="btn btn-default btn-sm" onclick="getGlobalSMSTemplateComposer('questionnaire','responseToSendQ_sms_lead');" data-toggle="popover" data-html="true" data-content="<i class=&quot;fa fa-plus&quot;></i> Click to add a new SMS/Text Template" data-original-title=""><span class="fa fa-plus font-green-jungle"></span></button>
	                </div>
	                    <select id="responseToSendQ_sms_lead" name="responseToSendQ_sms_lead" style="width: 300px;"  class="styled" >
    	<option value="" > -- No Data to Display -- </option>    </select>
    	                </div>
					<div class="clearSmall"></div><br style="clear: both;">
	            </div>
	            
	        </div>
	        <br style="clear: both;">
			<br style="clear: both;">
			<div class="btn-group save-cancel-group">
				<a href="javascript:void(0);" class="btn blue btn-sm" onclick="addReminderToObjectQ('lead','1615775');" ><span class="fa fa-check"></span> Save</a>
				<a href="javascript:void(0);" class="btn default btn-sm" onclick="cancelAddReminderQ('lead','1615775');" >Cancel</a>
			</div>
		</div>
		<div id="reminderListingQ">

				<div id="reminder_4597392" class="normalThinRowStyle">
			<div class="floatGrid" style="width: 75px;"><div class="roundedTag" style="float: left; color: #ffffff; background-color: #f3c200;" title="Unsent"><i class="icon-inbox-full"></i> Unsent</div>&nbsp;</div>
			<div class="floatGrid" style="width: 80px;">
									<a href="javascript:void(0);"  onclick="editObjectReminderDate('4597392');"  id="reminder_date_display_4597392"><span class="icon-file-edit"></span> 04/29/2025 5:00am</a>
				&nbsp;
			</div>
			<div class="floatGrid" style="width: 30%;">&nbsp; 						<a href="javascript:void(0);"  onclick="getObjectReminderTextOverrideForm('4597392');"  ><span class="icon-file-edit"></span> <div class="smallText">Custom Message</div></a>
										</div>
			<div class="floatGrid" style="width: 15%;">
				Primary Client			</div>
			<div class="floatGrid" style="width: 14%;">
				<span class="roundedTag" style="color: #ffffff;background-color: #3cd3ad; background: linear-gradient(45deg, #3cd3ad, #4CB8C4);"><i class="icon-email-send" style="font-size: 20px;"></i> Email </span>			</div>

			
			<div class="floatGrid" style="width: 20%;">
				<a href="/admin/questionnaires/79438/" target="_blank" class="btn btn-default btn-xs" ><i class="icon-note"></i> RESERVE SESSION</a>
			</div>

			
			<div class="rightTitle">
																												<a href="javascript:void(0);" class="btn btn-xs red-flamingo" onclick="removeReminderFromObjectQ('lead','1615775','4597392');"><span class="fa fa-times"></span></a>
												</div>

			<div id="reminder_date_4597392" class="greenBorderBox rightTitle hidden">
				<input type="text" id="reminder_senddate_4597392" name="reminder_senddate_4597392" size="25" class="textBlock date_picker textBlock" maxlength="" value="04/29/2025"  autocomplete="new-password"   />				<br />
					<div class="timepicker_wrapper">
		<input type="text" id="reminder_sendtime_4597392_chooser" name="reminder_sendtime_4597392_chooser" size="15" class="timepicker" maxlength="" value="5:00 AM"   /><input type="hidden" id="reminder_sendtime_4597392" name="reminder_sendtime_4597392" size="" class="" maxlength="" value="5:00:AM"   />	</div>
	
				<br style="clear: both;" />
				<br style="clear: both;" />
				<div class="btn-group save-cancel-group">
					<a href="javascript:void(0);" class="btn blue btn-sm" onclick="updateObjectReminderDate('4597392');" ><span class="fa fa-check"></span> Save</a>
					<a href="javascript:void(0);" class="btn default btn-sm" onclick="cancelEditObjectReminderDate('4597392');" >Cancel</a>
				</div>
			</div>
						<div class="clearSmall"></div><br style="clear: both;" />
			<span class="smallText"></span>
			<div id="editResponseForm_4597392" class="greenBorderBox hidden"></div>


			

		</div>
				
		</div>
	</div>
	<!-- end portlet BODY -->
</div>
					    </div>
    <!-- Inner Content -->
    	
				</div>
				
				
				
						
	            <div id="proposalsTab" class="ui-tabs-hide" >
					    <!-- Inner Content -->
    <div class="tab-content">
    	
					<script type="text/javascript">
	$(function() {
		
		$("#addnewpricingpage").hide();
		
		tinymce.init({
		    selector: "textarea:not(.NoEditor)",
			plugins: [
				"advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
				"searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
				"table directionality emoticons template textcolor paste textcolor" //contextmenu
			],
			height: 400,
			contextmenu: false,
			browser_spellcheck: true,
			toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | forecolor backcolor",
			toolbar2: "styleselect formatselect fontselect fontsizeselect",
			valid_children : '+body[style]'
						,setup: function (ed) {
				ed.on('init', function (e) {
					ed.execCommand("fontName", false, "Helvetica");
				});
			}
					});
		
	});
	function editPricingPage(pageID) {
		location.href = "/admin/proposals/" + pageID + "/";
	}
	function cancelAdd() {
		$("#addnewpricingpage").slideUp();
		$("#errorPricing").hide();
	}
	
	function populateProposalFormFromTemplate(templateID) {
		var error = 					"",
			errorField = 				$("#errorPricing");
			errorField.hide();
			
		$.ajax({type: 'POST',url: '/admin/fn/proposals/populateProposalFormFromTemplate/',
			data: {clientID: '12295',	templateID: templateID},
			success: function(data) {
				var results = data.split("{|}");
		   		if(results[0] == "SUCCESS") {
		   			var dataArray = 	$.JSON.decode(results[1]);			   			
		   			
		   			$("#pricingBrandID").val(dataArray["pricingBrandID"]);
		   			$("#pricingBrandID").change();
		   			
		   			$("#pricingName").val(dataArray["pricingName"]);
					$("#pricingURL").val(dataArray["pricingURL"]);
					
					//Private
					$("#pricingPrivate").val(dataArray["pricingPrivate"]);
					$("#pricingPrivate").iButton("toggle", (dataArray["pricingPrivate"] == "1"));
					
					$("#pricingPassword").val(dataArray["pricingPassword"]);
					$("#pricingHeaderImage").val(dataArray["pricingHeaderImage"]);
					$("#pricingGoogleUA").val(dataArray["pricingGoogleUA"]);

					$("#pricingDescription").val(dataArray["pricingDescription"]);
					if(dataArray["pricingDescription"] === null || dataArray["pricingDescription"] === undefined) {
						dataArray["pricingDescription"] = "";
					}
					

					var editor = tinymce.EditorManager.get('pricingDescription')
		   				if(editor) {
							editor.setContent(dataArray["pricingDescription"]);
		   				}

					
					$("#pricingPackagesColumnsOption").val(dataArray["pricingPackagesColumnsOption"]);
					$("#pricingPackagesColumnsOption").change();
					$("#pricingAddOnsColumnsOption").val(dataArray["pricingAddOnsColumnsOption"]);
					$("#pricingAddOnsColumnsOption").change();
					
					$("#pricingPackagesName").val(dataArray["pricingPackagesName"]);
					$("#pricingPackagesButton").val(dataArray["pricingPackagesButton"]);
					$("#pricingAddOnsName").val(dataArray["pricingAddOnsName"]);
					$("#pricingAddOnsButton").val(dataArray["pricingAddOnsButton"]);
					
					//DisableAddons
					$("#pricingDisableAddons").val(dataArray["pricingDisableAddons"]);
					$("#pricingDisableAddons").iButton("toggle", (dataArray["pricingDisableAddons"] == "1"));
					
					//Disable Packages		
					$("#pricingDisablePackages").val(dataArray["pricingDisablePackages"]);
					$("#pricingDisablePackages").iButton("toggle", (dataArray["pricingDisablePackages"] == "1"));
					
					//Skip Details Review
					$("#pricingSkipDetailsReview").val(dataArray["pricingSkipDetailsReview"]);
					$("#pricingSkipDetailsReview").iButton("toggle", (dataArray["pricingSkipDetailsReview"] == "1"));
					
					//Disable PackageQtyDisplay
					$("#pricingDisablePackageQtyDisplay").val(dataArray["pricingDisablePackageQtyDisplay"]);
					$("#pricingDisablePackageQtyDisplay").iButton("toggle", (dataArray["pricingDisablePackageQtyDisplay"] == "1"));
					
					//Make Package Required
					$("#pricingMakePackageRequired").val(dataArray["pricingMakePackageRequired"]);
					$("#pricingMakePackageRequired").iButton("toggle", (dataArray["pricingMakePackageRequired"] == "1"));
					
					//multiplePackages
					$("#pricingAllowMultiplePackages").val(dataArray["pricingAllowMultiplePackages"]);
					$("#pricingAllowMultiplePackages").iButton("toggle", (dataArray["pricingAllowMultiplePackages"] == "1"));
					
					//disablePackageDetails
					$("#pricingDisablePackageDetails").val(dataArray["pricingDisablePackageDetails"]);
					$("#pricingDisablePackageDetails").iButton("toggle", (dataArray["pricingDisablePackageDetails"] == "1"));
					
					//disableLocations
					$("#pricingDisableLocationsOnProposals").val(dataArray["pricingDisableLocationsOnProposals"]);
					$("#pricingDisableLocationsOnProposals").iButton("toggle", (dataArray["pricingDisableLocationsOnProposals"] == "1"));
										
					//disableOnlinePayment
					$("#pricingDisableCreditCardPayment").val(dataArray["pricingDisableCreditCardPayment"]);
					$("#pricingDisableCreditCardPayment").iButton("toggle", (dataArray["pricingDisableCreditCardPayment"] == "1"));
					
					//disablePackageDetails
					$("#pricingCollapsePackageDescriptions").val(dataArray["pricingCollapsePackageDescriptions"]);
					$("#pricingCollapsePackageDescriptions").iButton("toggle", (dataArray["pricingCollapsePackageDescriptions"] == "1"));
					
					//disablePackageDetails
					$("#pricingProposalDisableCustomFields").val(dataArray["pricingProposalDisableCustomFields"]);
					$("#pricingProposalDisableCustomFields").iButton("toggle", (dataArray["pricingProposalDisableCustomFields"] == "1"));
					
					
					
					$("#pricingURLDomain").val(dataArray["pricingURLDomain"]);
																	
					$("#pricingProposalWelcomeMessage").val(dataArray["pricingProposalWelcomeMessage"]);
					$("#pricingProposalSuccessMessage").val(dataArray["pricingProposalSuccessMessage"]);
					if(dataArray["pricingProposalWelcomeMessage"] === null || dataArray["pricingProposalWelcomeMessage"] === undefined) {
						dataArray["pricingProposalWelcomeMessage"] = "";
					}
					
					
					var editor = tinymce.EditorManager.get('pricingProposalWelcomeMessage')
		   				if(editor) {
							editor.setContent(dataArray["pricingProposalWelcomeMessage"]);
		   				}
		   				
		   			var editor2 = tinymce.EditorManager.get('pricingProposalSuccessMessage')
		   				if(editor2) {
							editor2.setContent(dataArray["pricingProposalSuccessMessage"]);
		   				}
					
					
					$("#pricingTaxRate").val(dataArray["pricingTaxRate"]);
					$("#pricingTaxRate2").val(dataArray["pricingTaxRate2"]);
					$("#pricingTaxRate3").val(dataArray["pricingTaxRate3"]);
					
					$("#pricingInvoiceLineitemType").val(dataArray["pricingInvoiceLineitemType"]);
					$("#pricingInvoiceLineitemType").change();
					
					$("#pricingAllowMultipleCoupons").val(dataArray["pricingAllowMultipleCoupons"]);
					$("#pricingAllowMultipleCoupons").change();
					
					$("#pricingDisableCoupons").val(dataArray["pricingDisableCoupons"]);
					$("#pricingDisableCoupons").change();
					
					
		   			
					
					$("#allOtherProposalFields").slideUp();
					
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	
	function addNewPricingPage() {
		$("#pricingpage_loading").show();
		$.ajax({	type: "POST",	url: "/admin/fn/proposals/getAddProposalForm/",
			data: {clientID: '12295', objectType: 'lead', objectID: '1615775'},
			success: function(   data   ){			 
				var results = data.split("{|}");			
				if(results[0] == "SUCCESS") {
					$("#pricingpage_loading").hide();
					$("#addnewpricingpage").html(results[1]);
					$("#addnewpricingpage").slideDown();
					
					
					$("input[xclass=styled]:checkbox").iButton();//.trigger("change");
					$("input[xclass=styled]:radio").iButton();//.trigger("change");
					
					$("select.styled").select_skin();
					
					
					tinymce.init({
					    selector: "textarea:not(.NoEditor)",
						plugins: [
							"advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
							"searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
							"table directionality emoticons template textcolor paste textcolor" //contextmenu
						],
						height: 400,
						contextmenu: false,
						browser_spellcheck: true,
						toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image media | forecolor backcolor",
						toolbar2: "styleselect formatselect fontselect fontsizeselect",
						valid_children : '+body[style]'
									,setup: function (ed) {
				ed.on('init', function (e) {
					ed.execCommand("fontName", false, "Helvetica");
				});
			}
								});
					
					
					
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	
	function duplicatePricingPage(pricingID) {
		swal({
			title: 'Are you sure?',
			html: 'Are you sure you want to duplicate this Proposal?',
			type: 'warning',
			showCancelButton: true,
			confirmButtonColor: '#3085d6',
			cancelButtonColor: '#d33',
			confirmButtonText: 'Yes',
			cancelButtonText: 'No',
			confirmButtonClass: 'confirm-class',
			cancelButtonClass: 'cancel-class',
			closeOnConfirm: true,
			closeOnCancel: true
		}, function(isConfirm) {
			if (isConfirm) {
				$.ajax({	type: "POST",	url: "/admin/fn/proposals/duplicateProposalTemplate",
					data: {clientID: '12295', proposalID: pricingID, nonTemplate: true},
					success: function(   data   ){
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							$("#pricingListing").append(results[1]);
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
			}
		});
	}
	
	function deletePricingPage(pageID, brandID) {
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you want to delete this Proposal? <br /> This action can NOT be undone!',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: true,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({	type: "POST",	url: "/admin/fn/proposals/deletePricingPage",
					data: {clientID: '12295', pricingID: pageID, brandID: brandID},
					success: function(   data   ){			 
						var results = data.split("{|}");			
						if(results[0] == "SUCCESS") {	
							$("#pricingpage_" +pageID).html('');
				   			$("#pricingpage_" +pageID).remove();
				   		} else {
				   			swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
				   		}
					}
				});
		    } 
		});
	}	
	function savePricingPage() {		
		var error = 					"",
			brandID = 					$("#pricingBrandID").val(),			
			name = 						$("#pricingName").val(),
			
			url = 						'',
			domain = 					'',
			
			privateVal = 				$("input[name=pricingPrivate]:checked").val(),
			password = 					$("#pricingPassword").val(),
			
			
			headerImg = 				$("#pricingHeaderImage").val(),
			googleUA = 					$("#pricingGoogleUA").val(),
			description = 				$("#pricingDescription").val(),
			themeCss = 					'',
			
			packageCol = 				$("#pricingPackagesColumnsOption").val(),
			addOnCol = 					$("#pricingAddOnsColumnsOption").val(),
			packageName = 				$("#pricingPackagesName").val(),
			packageBtn = 				$("#pricingPackagesButton").val(),
			addOnName = 				$("#pricingAddOnsName").val(),
			addOnBtn = 					$("#pricingAddOnsButton").val(),
			
			disableAddons = 			$("input[name=pricingDisableAddons]:checked").val(),
			disablePackages = 			$("input[name=pricingDisablePackages]:checked").val(),
			disableDetails = 			$("input[name=pricingSkipDetailsReview]:checked").val(),
			disableQty = 				$("input[name=pricingDisablePackageQtyDisplay]:checked").val(),
			
			reviewText = 				$("#pricingProposalWelcomeMessage").val(),
			successText = 				$("#pricingProposalSuccessMessage").val(),
			
			packageRequired = 			$("input[name=pricingMakePackageRequired]:checked").val(),
			totalingType = 				$("#pricingInvoiceLineitemType").val(),
			tax1 = 						$("#pricingTaxRate").val(),
			tax2 = 						$("#pricingTaxRate2").val(),
			tax3 = 						$("#pricingTaxRate3").val(),
			
			eventProjType = 			$("#pricingPageEventProjType").val(),
			eventType = 				$("#pricingPageEventType_event").val(),
			projType = 					$("#pricingPageEventType_proj").val(),
			eventName = 				$("#pricingPageEventProjName_event").val(),
			projName = 					$("#pricingPageEventProjName_proj").val(),
			isMultiDay = 				$("input[name=pricingPageEventisMultiDate]:checked").val(),
			
			eventDate = 				$("#pricingPageEventDate_event").val(),
			projDate = 					$("#pricingPageEventDate_proj").val(),
			eventEndDate = 				$("#pricingPageEventEndDate_event").val(),
			
			eventStartTime = 			$("#pricingPageEventStartTime_event").val(),
			eventEndTime = 				$("#pricingPageEventEndTime_event").val(),
			
			proposalTemplate = 			$("#propTemplate").val();
			
			
			
			tinymce.triggerSave();
			
				
			description = 				$.URLEncode($("textarea[name=pricingDescription]").val());
			reviewText = 				$("textarea[name=pricingProposalWelcomeMessage]").val();
			successText = 				$("textarea[name=pricingProposalSuccessMessage]").val();
			

			error += 					(brandID == "") ? "Studio Brand is required. <br />" : "";
			error += 					(name == "") ? "Pricing Page Name is required <br />" : "";			
						
			if(privateVal == "1") {
				error += 				(password == "") ? "A password must be set when the page is set to private.<br />" : "";
			}
			
			if(disablePackages == "1" && disableAddons == "1") {
				error +=				"You can not disable BOTH Packages and Addons, please re-enable one or both.<br />";
			}
			
			if(domain == "") {
				domain = 				"studio-booking.com";
			}
			
		if(error == "") {
			//'quote_proposal'
			$.ajax({type: "POST", url: "/admin/fn/proposals/addProposal/",
				data: {clientID: '12295', objectType: 'lead', subObjectType: 'event', objectID: '1615775', brandID: brandID, name: name, url: url, 'private': privateVal, 
						'password': password, headerImage: headerImg, google: googleUA, css: themeCss, description: description,
						packageCol: packageCol, addOnCol: addOnCol, packageName: packageName, packageBtn: packageBtn, domain: domain,
						addOnName: addOnName, addOnBtn: addOnBtn, disableAddons: disableAddons, disablePackages: disablePackages, disableDetails: disableDetails,
						packageRequired: packageRequired, totalingType: totalingType, tax1: tax1, tax2: tax2, tax3 : tax3, reviewText: reviewText, successText: successText, proposalTemplate: proposalTemplate, 
						eventProjType: eventProjType, eventType: eventType, projType: projType, eventName: eventName, projName: projName, isMultiDay: isMultiDay,
						eventDate: eventDate, projDate: projDate, eventEndDate: eventEndDate, eventStartTime: eventStartTime, eventEndTime: eventEndTime
				},
				success: function(   data   ){
			   		var results = data.split("{|}");
			   		if(results[0] == "SUCCESS") {			   			
			   			cancelAdd();
			   			$("#pricingListing").append(results[1]);
						
			   			swal({
						    title: 'Success!',
						    html: 'Would you like to edit the new proposal now?',
						    type: 'success',
						    showCancelButton: true,
						    confirmButtonColor: '#3085d6',
						    cancelButtonColor: '#d33',
						    confirmButtonText: 'Yes',
						    cancelButtonText: 'No',
						    confirmButtonClass: 'confirm-class',
						    cancelButtonClass: 'cancel-class',
						    closeOnConfirm: true,
						    closeOnCancel: true
						}, function(isConfirm) {
						    if (isConfirm) {
						    	location.href="/admin/proposals/" + results[2] + "/";
						    } 
						});			
			   		} else {
			   			swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
			   		}
				}
			});
		} else {
			swal({
				type: 'error',
				title: 'Error',
				html: error
			});
		}
	}
	
	function togglePassword(cbx) {
		if(cbx.attr('checked')) {
			$("#passwordFieldDIV").slideDown();
		} else {
			$("#passwordFieldDIV").slideUp();
		}
	}
	
	function switchDomain(url) {
		if(url == "") {
			url = 			"studio-booking.com";
		}
		$("#pricingURLDomain").html(url);
	}
	
	var timer;
	function switchURL(url) {
		clearTimeout(timer);
   		timer =					setTimeout(function(){performSearch(url)},350);
	}
	function performSearch(value) {
		$("#pricingURLText").html(value);
	}
	function toggleAdvancedSettings() {
		$("#advancedOptionsDIV").slideToggle(function() {
			$('#toggleBtn').html(
		      $(this).is(':visible') ? "&#9650; Hide Advanced Options" : "&#9660; Show Advanced Options"
		    );
		});
	}
	
	function switchClientProposalFields(val) {
		switch(val) {
			case "event":
				$("#eventProposalFields").show();
				$("input[id=pricingPageEventisMultiDate]:checkbox").iButton({
					labelOn: 'Yes',
					labelOff: 'No',
					change: function(cbx,options) {
						if($(cbx).attr('checked')){
							$("#endDateDiv").show();
						} else {
							$("#endDateDiv").hide();
						}
					}
				});
				$('#pricingPageEventDate_event').jdPicker({
					date_format: 'mm/dd/YYYY',
					start_of_week: 0				});
				$('#pricingPageEventEndDate_event').jdPicker({
					date_format: 'mm/dd/YYYY',
					start_of_week: 0				});
				$("#projectProposalFields").hide();
				break;
			case "project":
				$("#projectProposalFields").show();
				
				$('#pricingPageEventDate_proj').jdPicker({
					date_format: 'mm/dd/YYYY',
					start_of_week: 0				});
				
				$("#eventProposalFields").hide();
				break;
			default:
				$("#eventProposalFields").hide();
				$("#projectProposalFields").hide();
				break;
		}
	}
	function switchMultiDayEvent(status) {
		var isChecked = status.is(":checked");
		if(isChecked) {
			$("#endDateDiv").show();
		} else {
			$("#endDateDiv").hide();
		}
	}
	
	$(function() {
		$("#addnewpricingpage").hide();
		
		$('.contractNotSigned').qtip({
			style: { classes: 'qtip-rounded qtip-dark qtip-pixifi' },
			content: {
				attr: 'title'
			},
			position: {
		        viewport: $(window)
		    },
            hide: {
                fixed: true,
                delay: 300
            }
		});
		
	});
	
</script>
<div id="pricingpages" >
	<div class="rightTitle">
				<a href="javascript:void(0);" class="btn btn-default btn-sm" onclick="addNewPricingPage();" ><i class="fa fa-plus font-green-jungle"></i> Create New Proposal</a>
			</div>
	<br style="clear: both;" />
	<br style="clear: both;" />
			<div id="errorPricing" class="hidden failure"></div>
		<div id="pricingpage_loading" class="hidden" ><img src="/admin/icons/tiny_spinner.gif" align="absmiddle" /></div>
		<div id="addnewpricingpage" class="portlet light bordered"></div>
		
		<div class="tableHeaderDIV alternateThinRowStyle">
			<div class="floatHeader" style="width: 140px">Status</div>
			<div class="floatHeader" style="width: 250px;">Proposal Name</div>
			<div class="floatHeader" style="width: 150px;">External Link</div>
			<div class="floatHeader" style="width: 145px;">Created Date</div>
			<div class="floatHeader" style="width: 145px;">Accepted Date</div>
			<div class="clearSmall"></div>
			<br style="clear: both;">
		</div>
		<div id="pricingListing">
			</div>	
</div>
					    </div>
    <!-- Inner Content -->
    	
				</div>
				
				
				
						
	            <div id="timelineTab" class="ui-tabs-hide" >
					    <!-- Inner Content -->
    <div class="tab-content">
    	
					


<link href="/admin/css/v4/bootstrap-editable.css" rel="stylesheet"/>
<script src="/admin/js/new/plugins/bootstrap-editable/bootstrap-editable.js"></script>


<script src="/admin/js/new/v4/custom.edit.fields.js.php?clientID=12295" type="text/javascript" ></script>

	<script type="text/javascript">
	$(function() {
		
	    //toggle `popup` / `inline` mode
	    $.fn.editable.defaults.mode = 'inline';     
	    $.fn.editable.defaults.showbuttons =  true;     
	    $.fn.editable.defaults.url =  '/admin/data/af/timelinedata/';     
	    $.fn.editable.defaults.send =  'always';     
	    $.fn.editable.defaults.params = {clientID: '12295',objectID: '1615775'};     
	    $.fn.editable.defaults.clear = false;     
	    	    
	    $('#timelineTab .editable-time').editable({
	    	onblur: 'ignore',
	    	success: function(response, newValue) {
	    		debugger;
	    		//autoSyncValues(response,newValue,this);
			}
	    });
	    
	});
	
	</script>	
	

<style type="text/css">
		.fc-unthemed .fc-today {
		    background: #ffffff !important;
		}
		.timelineItemsListing {
			float: left;
			width: 45%;
			margin-right: 10px;
			position: relative;
		}
		.timelineItemsListing::before {
		    content: ' ';
		    height: 100%;
		    width: 1px;
		    background-color: #d9d9d9;
		    position: absolute;
		    top: 0;
		    left: 1.0em;
		}
		
		.timelineItemsListing .previewImageSmallContainer{
		    width: 30px;
		    height: 30px;
		    border: 0.2px solid #FFF;
		}
		.timelineItemsListing .previewImageSmall {
		    width: 30px;
		    height: 30px;
		    border-radius: 30px;
		}
		
		.timelineLocsAndStaff {
			font-style: italic;
    		color: #969696;
    		width: 60%; 
    		margin-left: 2.5em;
		}
		
		.timelineBullet {
			float: left;
			width: 1.5em;
		    height: 1.5em;
		    box-sizing: border-box;
		    border-radius: 50%;
		    background: #fff;
		    z-index: 1;
		    margin-right: 1em;
		    border: 2px solid #808080;
		}
		
		.timelineItemsGrid {
			float: right;
			width: 53%;
		}
		
		.timelineItemsGrid .fc-toolbar {
			display: none !important;
		}
		
		.timelineItemsGrid .fc-widget-header {
			display: none;
			height: 0px;
		}
		.timelineItemsGrid .fc-agenda-view .fc-day-grid {
			display: none;
		}
		
		
		.timegrid-popup {
			min-width: 350px;
		}
		.timegrid-popup-content {
			line-height: 18px;
		}
		.timegrid-popup-content .icon {
			color: #99a6ad !important;
			font-size: 18px;
		}
	</style>

	<link type="text/css" rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/2.4.0/fullcalendar.min.css" />
	<link type="text/css" rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/2.4.0/fullcalendar.print.css" media='print' />
	
	<script type='text/javascript' src='/admin/js/calendar/moment.min.js'></script>
	<script src='//cdnjs.cloudflare.com/ajax/libs/fullcalendar/2.4.0/fullcalendar.min.js'></script>
	<script type='text/javascript' src='/admin/js/base64.class.js'></script>
	<script type='text/javascript' src='/admin/js/calendar/gcal.2.1.0.js'></script>
	<script type='text/javascript' src='/admin/js/calendar/precise.range.js'></script>

	<script type="text/javascript" >
	
		function addTimeline() {
						$("#addTimelineDIV").slideDown();
		}
		function cancelNewTimeline() {
			$("#addTimelineDIV").slideUp();
			$("#errorTimeline").hide();
		}
		function switchTimelineTemplate(value) {
			if(value == "") {
				$("#timelineAddFormFields").show();
			} else {
				$("#timelineAddFormFields").hide();
			}
		}
		function refreshObjectTimelinesListing() {
			$.ajax({type: "POST", url: "/admin/fn/timelines/getObjectTimelinesListing/",
				data: { clientID: '12295', objectType: 'lead',objectID: '1615775'},
				success: function(   data   ){
					var results = data.split("{|}");
					if(results[0] == "SUCCESS") {							
						$("#timelineListing").html(results[1]);
					} else {
						swal({ type: 'error', title: 'Error', html: results[1] });
					}
				}
			});
		}
		function saveNewTimeline() {
			var name = 				$("#timelineName").val(),
				desc = 				"",
				isPrivate = 		$("#timelineHiddenInPortal").val(),
				error = 			"",
				timelineTemplate = 	$("#timelineTemplate").val(),
				errorField = 		$("#errorTimeline");
				
				errorField.hide();
				
				tinyMCE.triggerSave();
				desc = 				$("textarea[name=timelineDesc]").val();
				
				if(timelineTemplate == "") {
					error += 			(name == "") ? "Please give this timeline a name<br />" : "";
				}
				
			if(error == "") {	
				$.ajax({type: "POST", url: "/admin/fn/timelines/addTimeline/",
					data: { clientID: '12295', objectType: 'lead',objectID: '1615775',name: name, desc: desc, timelineTemplate: timelineTemplate, isPrivate: isPrivate},
					success: function(   data   ){
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {							
							refreshObjectTimelinesListing();
							viewTimeline(results[1]);
							cancelNewTimeline();
						} else {
							swal({ type: 'error', title: 'Error', html: results[1] });
						}
					}
				});
			} else {
				swal({ type: 'error', title: 'Error', html:error });
			}
		}
		
		function viewTimeline(timelineID) {
			$("#timeline_editor_" + timelineID).slideDown();
			getTimelineItems(timelineID);
			var defaultDuration = 	$("#defaultTimelineDuration").val();
			if(defaultDuration == "" || defaultDuration == undefined) {
				defaultDuration = 	"00:30:00";
			}
			$("#timeline_duration_"+timelineID).val(defaultDuration);
			$("#timeline_duration_"+timelineID).change();
			
			$("#otherOptions_" + timelineID).show();
			
			getTimelineItemGrid(timelineID);
		}
		
		function editTimeline(timelineID) {
			var errorField = 		$("#errorTimeline_" + timelineID);
				errorField.hide();
				
				$("#timeline_" + timelineID + "_loading").show();
				
			$.ajax({type: 'POST',url: '/admin/fn/timelines/getTimelineEditForm/',
				data: {clientID: '12295', timelineID: timelineID, objectType: 'lead',objectID: '1615775'},
				success: function(data) {
					$("#timeline_" + timelineID + "_loading").hide();
					var results = 			data.split("{|}");
					if(results[0] == "SUCCESS") {
						$("#timeline_edit_" + timelineID).html(results[1]);
						
						
						var editor = tinymce.get("timelineDesc_" + timelineID);
						if(editor) {
							editor.destroy();
						}
						tinymce.init({
						    selector: "textarea:not(.NoEditor)",						    
						    plugins: [
						        "advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
				                "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
				                "table directionality emoticons template textcolor paste textcolor" //contextmenu
						    ],
						    height: 400,
						    contextmenu: false,
						    browser_spellcheck: true,
						    toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",
						    toolbar2: ""
						});
						
						
						$("#timeline_edit_" + timelineID).show();
						
						
					} else {
						swal({ type: 'error', title: 'Error', html: results[1] });
						
						
					}
				}
			});
		}
		function updateTimeline(timelineID) {
			var name = 				$("#timelineName_" + timelineID).val(),
				desc = 				"",
				isPrivate = 		$("#timelineHiddenInPortal_" + timelineID).val(),
				error = 			"",
				errorField = 		$("#errorTimeline");
				
				errorField.hide();
				
				tinyMCE.triggerSave();
				desc = 				$("textarea[name=timelineDesc_" + timelineID + "]").val();
				
				error += 			(name == "") ? "Please give this timeline a name<br />" : "";
				
			if(error == "") {	
				$.ajax({type: "POST", url: "/admin/fn/timelines/updateTimeline/",
					data: { clientID: '12295', timelineID: timelineID, objectType: 'lead',objectID: '1615775',name: name, desc: desc, isPrivate: isPrivate},
					success: function(   data   ){
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							
							getTimelineItems(timelineID);
							getTimelineItemGrid(timelineID);
							cancelUpdateTimeline(timelineID);
														
						} else {
							swal({ type: 'error', title: 'Error', html: results[1] });
							
							
						}
					}
				});
			} else {
				swal({ type: 'error', title: 'Error', html:error });
				
				
			}
		}
		function cancelUpdateTimeline(timelineID) {
			$("#timeline_edit_" + timelineID).hide();
			
			var editor = tinymce.get("timelineDesc_" + timelineID);
			if(editor) {
				editor.destroy();
			}
		}
		
		function getTimelineItems(timelineID) {
			var error = 			"",
				errorField = 		$("#errorTimeline");
				
				errorField.hide();
				
				$("#timeline_load_" + timelineID).show();
				
			$.ajax({type: "POST", url: "/admin/fn/timelines/getTimelineItems/",
				data: { clientID: '12295', timelineID: timelineID, objectType: 'lead',objectID: '1615775'},
				success: function(   data   ){
					$("#timeline_load_" + timelineID).hide();
					
					var results = data.split("{|}");
					if(results[0] == "SUCCESS") {							
						$("#timeline_items_" + timelineID).html(results[1]);
						
						
						$('.editable-time').editable({
					    	onblur: 'ignore',
					    	display: function(value, response) {
						        //render response into 
						        if(response !== null && response !== undefined) {
							        var results = response.split("{|}");
						    		if(results[0] == "SUCCESS") {
						    			if(results[1] !== null && results[1] !== undefined) {
						    				$(this).html(results[1]);
						    			}
						    		}
						        }
						    },
					    	success: function(response, newValue) {
					    		var results = response.split("{|}");
					    		if(results[0] == "SUCCESS") {
					    			getTimelineItems(timelineID);
									getTimelineItemGrid(timelineID);
									$(".timegrid-popup").remove();
					    		}
							}
					    });
					    
						
					} else {
						swal({ type: 'error', title: 'Error', html: results[1] });
						
						
					}
				}
			});
		}
		function getTimelineItemGrid(timelineID) {
			$("#timeline_items_grid_" + timelineID).html('');

			$(function() {
				var date = 			new Date(),
					d = 			date.getDate(),
					m = 			date.getMonth(),
					y = 			date.getFullYear(),
					error = 		"",
					errorField = 	$("#calendarError");
				$("#timeline_items_grid_" + timelineID).fullCalendar( 'destroy' );
				$("#timeline_items_grid_" + timelineID).fullCalendar({
					firstDay: '0',
					defaultView: 'agendaDay',					
					height: 885,
					width: 650,
					header: {
						left: '',
						center: '',
						right: ''
					},
										editable: true,
					eventStartEditable: true,
				    eventDurationEditable: true,
				    slotDuration: $("#timeline_duration_"+timelineID).val(),
					selectable: true,
					selectHelper: true,
													timeFormat: {
									agenda: 'h:mmt',
								},
												// This is for clicking on an existing event
					eventClick: function(event, jsEvent, view) {
						var eventData = 			Base64.decode(event.url),
							eventArray = 			"",
							modalContent = 			"";
							
							if(event.url.indexOf('http') > -1) {
								
								window.open(event.url);
								return false;
								
							} else {
								eventArray = 			$.JSON.decode(eventData);
								editTimelineItem(eventArray.timelineItemID,timelineID);
							}
							
						return false;
					},
					loading: function(bool) {
						if (bool) {
							$('#loading').show();
						} else {
							$('#loading').hide();
						}
					},
					viewRender: function(view, element) {
				        var date = 					view.start,
		        			month = 				date.month(),
		        			year = 					date.year();
						
		        		//Update the new combo box picker, so that it stays in Sync with the calendar
		        		$("#monthChooseCombo").val(month);
		        		$("#monthChooseCombo").click();
		        		
		        		
						switch(view.name) {
				        	case "agendaDay":
				        		var date = 					view.start,
				        			month = 				date.month(),
				        			year = 					date.year();
				        			
				        			month = 				('0' + (month+1)).slice(-2);
				        			
						        $("#calendarAppLoader").show();
						        errorField.hide();
						        
						        $.ajax({	type: "POST",	url: "/admin/fn/timelines/getTimelineItemsJson/",
								   data: {clientID: '12295', view: 'agendaDay',  timelineID: timelineID, objectType: 'lead',objectID: '1615775' },
								   success: function(   data   ){
								   		$("#calendarAppLoader").hide();
								   		var results = 		data.split("{|}");
										if(results[0] == "SUCCESS") {
											var eventArray = 	$.JSON.decode(results[1]);	
											$("#timeline_items_grid_" + timelineID).fullCalendar( 'removeEvents');
											$("#timeline_items_grid_" + timelineID).fullCalendar( 'addEventSource', eventArray);
											$("#timeline_items_grid_" + timelineID).fullCalendar( 'refetchEvents' );
										} else {
											swal({ type: 'error', title: 'Error', html: results[1] });
											
											
										}
									}
								});
				        		break;
				        }
				    },
				    eventResize: function(event, delta, revertFunc) {
						
				        var sHour = 			event.start.hours(),
							sMin = 				(event.start.minutes()<10?'0':'') + event.start.minutes(),
							sAMPM = 			(sHour >= 12) ? "PM":"AM",
							
							eHour = 			event.end.hours(),
							eMin = 				(event.end.minutes()<10?'0':'') + event.end.minutes(),
							eAMPM = 			(eHour >= 12) ? "PM":"AM";
							
							sHour = 			(sHour > 12) ? (sHour - 12):(sHour);
							eHour = 			(eHour > 12) ? (eHour - 12):(eHour);
						
							$.ajax({type: "POST",url: "/admin/fn/timelines/updateTimelineItemTimes/",
								data: {clientID: '12295', timelineID: timelineID, timelineItemID: event.id, startTime: (sHour + ":" + sMin + ":" + sAMPM), endTime: (eHour + ":" + eMin + ":" + eAMPM)},
								success: function(   data   ){
									var results = 		data.split("{|}");
									if(results[0] == "SUCCESS") {
										getTimelineItems(timelineID);
										getTimelineItemGrid(timelineID);
										
										$(".timegrid-popup").remove();
									} else {
										swal({ type: 'error', title: 'Error', html: results[1] });
									}
								}
							});	
				    },
				    eventDrop: function(event, delta, revertFunc) {
						 var sHour = 			event.start.hours(),
							sMin = 				(event.start.minutes()<10?'0':'') + event.start.minutes(),
							sAMPM = 			(sHour >= 12) ? "PM":"AM",
							
							eHour = 			event.end.hours(),
							eMin = 				(event.end.minutes()<10?'0':'') + event.end.minutes(),
							eAMPM = 			(eHour >= 12) ? "PM":"AM";
							
							sHour = 			(sHour > 12) ? (sHour - 12):(sHour);
							eHour = 			(eHour > 12) ? (eHour - 12):(eHour);
						
							$.ajax({type: "POST",url: "/admin/fn/timelines/updateTimelineItemTimes/",
								data: {clientID: '12295', timelineID: timelineID, timelineItemID: event.id, startTime: (sHour + ":" + sMin + ":" + sAMPM), endTime: (eHour + ":" + eMin + ":" + eAMPM)},
								success: function(   data   ){
									var results = 		data.split("{|}");
									if(results[0] == "SUCCESS") {
										getTimelineItems(timelineID);
										getTimelineItemGrid(timelineID);
										
										$(".timegrid-popup").remove();
									} else {
										swal({ type: 'error', title: 'Error', html: results[1] });
									}
								}
							});	
				
				    },
				    //When clicking on an empty square, let's add an event
					select: function(start, end, jsEvent, view) {
						switch(this.name) {
							case "agendaDay":
									
								var sMonth = 			start.month(),
									sDay = 				start.date(),
									sYear = 			start.year(),							
									sHour = 			start.hours(),
									sMin = 				(start.minutes()<10?'0':'') + start.minutes(),
									sAMPM = 			(sHour >= 12) ? "PM":"AM",
									
									eHour = 			end.hours(),
									eMin = 				(end.minutes()<10?'0':'') + end.minutes(),
									eAMPM = 			(eHour >= 12) ? "PM":"AM";
									
									sMonth = 			('0' + (sMonth+1)).slice(-2);
									
									sHour = 			(sHour > 12) ? (sHour - 12):(sHour);
									eHour = 			(eHour > 12) ? (eHour - 12):(eHour);
									
									$("#calendarAppLoader").show();
									errorField.hide();
									
									
									addTimelineItem(timelineID);
									
									//Now wait until the window has a chance to open
									setTimeout(function(){
										
										$("#timeStartTime_" + timelineID + "_chooser").val((sHour + ":" + sMin + " " + sAMPM));
										$("#timeStartTime_" + timelineID).val((sHour + ":" + sMin + ":" + sAMPM));
										$("#timeEndTime_" + timelineID + "_chooser").val((eHour + ":" + eMin + " " + eAMPM));
										$("#timeEndTime_" + timelineID).val((eHour + ":" + eMin + ":" + eAMPM));
										
									}, 1000);
									
									
								break;
						}
					},
					eventMouseover: function(event, jsEvent, view) {
						var wrap = 					$(jsEvent.target).closest('.fc-event'),
							eventData = 			Base64.decode(event.url),
							parsedData = 			$.JSON.decode(eventData),
							extraData = 			'<div class="timegrid-popup-content">',
							endData = 				'</div>',
							eventDuration = 		moment.preciseDiff(event._start,event._end);	//moment.duration(event._start.diff(event._end)).humanize();
							
							extraData += 			'<i class="icon fa fa-calendar fa-1x" ></i> <strong>Start Time</strong>: ' + parsedData.startTime + '<br />';
							extraData += 			'<i class="icon fa fa-clock-o fa-1x" ></i> <strong>End Time</strong>: ' + parsedData.endTime + '<br />';
							if(parsedData.locations != "") {
								extraData += 			'<i class="icon-directions" ></i> <strong>Locations</strong>: ' + parsedData.locations + '<br />';
							}
							if(parsedData.staff != "") {
								extraData += 			'<i class="icon-ID-card" ></i> <strong>Staff</strong>: ' + parsedData.staff + '<br />';
							}
							extraData += 			'<i class="icon fa fa-file-text-o fa-1x" ></i> <strong>Description</strong>: <br />';
							
														
						//Build the popup	
						wrap.popover({
						    placement: 'auto',
						    html: true,
						    content: extraData + parsedData.description + endData,
            				title: parsedData.name + '  (' + eventDuration + ')',
            				container: 'body',
            				template: '<div class="popover timegrid-popup"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
						});
						wrap.popover('show');
					},
					eventMouseout: function(event, jsEvent, view) {
						var wrap = $(jsEvent.target).closest('.fc-event');
						wrap.popover('hide');
						$(".timegrid-popup").remove();
					}
				});
			});
		}
		
		function createTimelineTemplate(timelineID) {
			swal({
			    title: 'Are you sure?',
			    html: 'Are you sure you want to create a Timeline Template from this Timeline?',
			    type: 'warning',
			    showCancelButton: true,
			    confirmButtonColor: '#3085d6',
			    cancelButtonColor: '#d33',
			    confirmButtonText: 'Yes',
			    cancelButtonText: 'No',
			    confirmButtonClass: 'confirm-class',
			    cancelButtonClass: 'cancel-class',
			    closeOnConfirm: false,
			    closeOnCancel: true
			}, function(isConfirm) {
			    if (isConfirm) {
			    	$.ajax({	type: "POST",	url: "/admin/fn/timelines/createTemplateFromTimeline/",
						data: {clientID: '12295', timelineID: timelineID},
						success: function(   data   ){
							var results = 			data.split("{|}");
							if(results[0] == "SUCCESS") {
								
								swal({
									type: 'success',
									title: 'Success!',
									html: "Your Timeline Template has been successfully created!",
									timer: 4000
								});
								
							} else {
								swal({
									type: 'error',
									title: 'Error',
									html: results[1]
								});
							}
						}
					});
			    } 
			});
		}
		
		function deleteTimeline(timelineID) {
			swal({
			    title: 'Are you sure?',
			    html: 'Are you sure you want to delete this Timeline? <br /> This action can NOT be undone!',
			    type: 'warning',
			    showCancelButton: true,
			    confirmButtonColor: '#3085d6',
			    cancelButtonColor: '#d33',
			    confirmButtonText: 'Yes',
			    cancelButtonText: 'No',
			    confirmButtonClass: 'confirm-class',
			    cancelButtonClass: 'cancel-class',
			    closeOnConfirm: true,
			    closeOnCancel: true
			}, function(isConfirm) {
			    if (isConfirm) {
			    	$.ajax({	type: "POST",	url: "/admin/fn/timelines/deleteTimeline/",
						data: {clientID: '12295', timelineID: timelineID},
						success: function(   data   ){
							var results = 			data.split("{|}");
							if(results[0] == "SUCCESS") {
								
								$("#timeline_" + timelineID).html('');
								$("#timeline_" + timelineID).remove();
								
								$(".timegrid-popup").remove();
								
							} else {
								swal({
									type: 'error',
									title: 'Error',
									html: results[1]
								});
							}
						}
					});
			    } 
			});	
		}
		
		function addTimelineItem(timelineID) {
			var errorField = 		$("#errorTimeline_" + timelineID);
				errorField.hide();
				
				
			$.ajax({type: 'POST',url: '/admin/fn/timelines/getAddTimelineItemForm/',
				data: {clientID: '12295', timelineID: timelineID, objectType: 'lead',objectID: '1615775'},
				success: function(data) {
					
					var results = 			data.split("{|}");
					if(results[0] == "SUCCESS") {
						
						$("#addTimeLineItems_"+timelineID).html('');
						
						
						modalContent = 			'<div class="modalBorderBox" style="width: 650px;">';
						modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-calendar-time"></i> Add Timeline Item </div>';
						modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelNewTimelineItem();" ><span class="icon-cancel"></span></a></div>';
						modalContent += 				'</div>';
						modalContent += 				results[1];
						modalContent += 			'</div>';
						modal.open({content: modalContent});
						
												
						$("#timeLocationIDs_"  + timelineID).multiselect({
							noneSelectedText: "Select Location(s)",
							header: true,
							height: '200'
						});
						$("#timeStaffIDs_"  + timelineID).multiselect({
							noneSelectedText: "Select Staff",
							header: true,
							height: '200'
						});
						
						$('#timeStartTime_' + timelineID).timepicker({
							interval: 15,
							timeFormat: 'h:mm p',							scrollbar: true
						});
						$('#timeEndTime_' + timelineID).timepicker({
							interval: 15,
							timeFormat: 'h:mm p',							scrollbar: true
						});
									
						
						
						/*
						var editor = tinymce.get("timeDesc_" + timelineID);
						if(editor) {
							window.setTimeout(editor.destroy(),5000);
							
							tinymce.init({
							    selector: "#timeDesc_" + timelineID,
							    height: 150,
							    plugins: [
							        "advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
					                "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
					                "table directionality emoticons template textcolor paste textcolor" //contextmenu
							    ],
							    browser_spellcheck: true,
							    toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",
							    toolbar2: ""
							});
							
						} else {
							tinymce.init({
							    selector: "#timeDesc_" + timelineID,
							    height: 150,
							    plugins: [
							        "advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
					                "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
					                "table directionality emoticons template textcolor paste textcolor" //contextmenu
							    ],
							    browser_spellcheck: true,
							    toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",
							    toolbar2: ""
							});
						}
						
						var editor = tinymce.get("timeDesc_" + timelineID);
						if(editor) {
							editor.setContent('');
						}*/
						
					} else {
						swal({ type: 'error', title: 'Error', html: results[1] });
						
						
					}
				}
			});	
		}
		function cancelNewTimelineItem() {
			modal.close();
		}
		function saveNewTimelineItem(timelineID) {
			var name = 				$("#timeName_" + timelineID).val(),
				desc = 				"",
				startTime = 		$("#timeStartTime_" + timelineID).val(),
				endTime = 			$("#timeEndTime_" + timelineID).val(),
				staff = 			$("#timeStaffIDs_" + timelineID).val(),
				locations = 		$("#timeLocationIDs_" + timelineID).val(),
				color = 			$("#timeColor_" + timelineID).val(),
				error = 			"",
				errorField = 		$("#errorTimeline");
				
				errorField.hide();
				
				tinyMCE.triggerSave();
				desc = 				$("textarea[name=timeDesc_" + timelineID + "]").val();
				
				error += 			(name == "") ? "Please give this timeline item a name<br />" : "";
				
				//Now parse the locations
				if(staff !== null) {
					if(staff.length > 0) {
						if(staff[0] == "ALL") {
							staff.splice(0,1);
						}
					}
					staff = 				staff.join("||");
				}
				//Now parse the locations
				if(locations !== null) {
					if(locations.length > 0) {
						if(locations[0] == "ALL") {
							locations.splice(0,1);
						}
					}
					locations = 			locations.join("||");
				}
				
				
			if(error == "") {
				
				$("#timeline_load_" + timelineID).show();
				
				$.ajax({type: "POST", url: "/admin/fn/timelines/addTimelineItem/",
					data: { clientID: '12295', timelineID: timelineID, name: name, desc: desc, startTime: startTime, endTime: endTime, locations: locations, color: color, staff: staff},
					success: function(   data   ){
						$("#timeline_load_" + timelineID).hide();
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {							
							
							cancelNewTimelineItem(timelineID);
							refreshTimelineGrid(timelineID);
							
							getTimelineItems(timelineID);
							getTimelineItemGrid(timelineID);
							
							$(".timegrid-popup").remove();
							
						} else {
							swal({ type: 'error', title: 'Error', html: results[1] });
							
							
						}
					}
				});
			} else {
				swal({ type: 'error', title: 'Error', html:error });
				
				
			}
		}
		
		function editTimelineItem(itemID,timelineID) {
			var errorField = 		$("#errorTimeline_" + timelineID);
				errorField.hide();
				
				$("#timeline_item_" + itemID + "_loading").show();
				
			$.ajax({type: 'POST',url: '/admin/fn/timelines/getTimelineItemEditForm/',
				data: {clientID: '12295', timelineID: timelineID, itemID: itemID, objectType: 'lead',objectID: '1615775'},
				success: function(data) {
					$("#timeline_item_" + itemID + "_loading").hide();

					var results = 			data.split("{|}");
					if(results[0] == "SUCCESS") {
						
						//$("#timelineItem_edit_"+ itemID).html(results[1]);
						//$("#timelineItem_edit_"+ itemID).slideDown();
						
						modalContent = 			'<div class="modalBorderBox" style="width: 650px;">';
						modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-calendar-time"></i> Edit Timeline Item </div>';
						modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelNewTimelineItem();" ><span class="icon-cancel"></span></a></div>';
						modalContent += 				'</div>';
						modalContent += 				results[1];
						modalContent += 			'</div>';
						modal.open({content: modalContent});
												
						
						$('#timeStartTime_' + timelineID + '_' + itemID).timepicker({
							interval: 15,
							timeFormat: 'h:mm p',							scrollbar: true
						});
						$('#timeEndTime_' + timelineID + '_' + itemID).timepicker({
							interval: 15,
							timeFormat: 'h:mm p',							scrollbar: true
						});
						
						$("#timeLocationIDs_"  + timelineID + '_' + itemID).multiselect({
							noneSelectedText: "Select Location(s)",
							header: true,
							height: '200'
						});
						$("#timeStaffIDs_"  + timelineID + '_' + itemID).multiselect({
							noneSelectedText: "Select Staff",
							header: true,
							height: '200'
						});
						
						
						var editor = tinymce.get("timeDesc_" + timelineID + "_" + itemID);
						if(editor) {
							editor.destroy();
						}
						tinymce.init({
						    selector: "textarea:not(.NoEditor)",
						    plugins: [
						        "advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
				                "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
				                "table directionality emoticons template textcolor paste textcolor" //contextmenu
						    ],
						    height: 400,
							contextmenu: false,
						    browser_spellcheck: true,
						    toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image",
						    toolbar2: ""
						});
						
						$(".timegrid-popup").remove();
						
						
					} else {
						swal({ type: 'error', title: 'Error', html: results[1] });
						
						
					}
				}
			});
		}
		function cancelUpdateTimelineItem(itemID,timelineID) {
			$("#timelineItem_edit_"+ itemID).html('');
			$("#timelineItem_edit_"+ itemID).slideUp();
			modal.close();
		}
		function updateTimelineItem(itemID,timelineID) {
			var name = 				$("#timeName_" + timelineID + "_" + itemID).val(),
				desc = 				"",
				startTime = 		$("#timeStartTime_" + timelineID + "_" + itemID).val(),
				endTime = 			$("#timeEndTime_" + timelineID + "_" + itemID).val(),
				staff = 			$("#timeStaffIDs_" + timelineID + "_" + itemID).val(),
				locations = 		$("#timeLocationIDs_" + timelineID + "_" + itemID).val(),
				color = 			$("#timeColor_" + timelineID + "_" + itemID).val(),
				error = 			"",
				errorField = 		$("#errorTimeline");
				
				errorField.hide();
				
				tinyMCE.triggerSave();
				desc = 				$("textarea[name=timeDesc_" + timelineID  + "_" + itemID + "]").val();
				
				error += 			(name == "") ? "Please give this timeline item a name<br />" : "";
				
				//Now parse the staff
				if(staff !== null) {
					if(staff.length > 0) {
						if(staff[0] == "ALL") {
							staff.splice(0,1);
						}
					}
					staff = 			staff.join("||");
				}
				//Now parse the locations
				if(locations !== null) {
					if(locations.length > 0) {
						if(locations[0] == "ALL") {
							locations.splice(0,1);
						}
					}
					locations = 			locations.join("||");
				}
				
			if(error == "") {
				
				$("#timeline_load_" + timelineID).show();
				
				$.ajax({type: "POST", url: "/admin/fn/timelines/updateTimelineItem/",
					data: { clientID: '12295', itemID: itemID,timelineID: timelineID, name: name, desc: desc, startTime: startTime, endTime: endTime, locations: locations, color: color, staff: staff},
					success: function(   data   ){
						$("#timeline_load_" + timelineID).hide();
						var results = data.split("{|}");
						if(results[0] == "SUCCESS") {
							
							getTimelineItems(timelineID);
							getTimelineItemGrid(timelineID);
							
							cancelUpdateTimelineItem(itemID, timelineID);
							refreshTimelineGrid(timelineID);
							
							$(".timegrid-popup").remove();
							
						} else {
							swal({ type: 'error', title: 'Error', html: results[1] });
							
							
						}
					}
				});
			} else {
				swal({ type: 'error', title: 'Error', html:error });
				
				
			}
		}
		
		
		function showReOrderTimelineItems(timelineID) {
			
			$("#timeline_items_" + timelineID + " img.handle").show();
			
			$("#timeline_items_" + timelineID).sortable({
				revert: false,
				items: '> div',
				placeholder: "dragPlaceHolder",
				handle: 'img.handle',
				forceHelperSize: true,
				forcePlaceholderSize: true,
				opacity: 0.01,
				helper: "clone"
			});
			
			$("#timeline_reorder_controls_" + timelineID).slideDown();
		}
		function saveReOrderTimelineItems(timelineID) {
			var arrayItems = 		$("#timeline_items_" + timelineID).sortable("toArray"),
				items = 			"",
				errorField = 		$("#errorTimeline_" + timelineID);
				errorField.hide();
			
			for(var i = 0; i < arrayItems.length; i++){
				items += arrayItems[i].replace('timeline_' + timelineID + '_item_','') + ",";
			}
			$("#timeline_load_" + timelineID).show();
			$.ajax({type: 'POST',url: '/admin/fn/timelines/reOrderTimelineItems/',
				data: {clientID: '12295', timelineID: timelineID, itemArray: items},
				success: function(data) {
					$("#timeline_load_" + timelineID).hide();
					var results = 			data.split("{|}");
					if(results[0] == "SUCCESS") {
						
						cancelReOrderTimelineItems(timelineID);
						getTimelineItems(timelineID);
						
						$(".timegrid-popup").remove();
						
					} else {
						swal({ type: 'error', title: 'Error', html: results[1] });
						
						
					}
				}
			});
		}
		function chronoOrderTimelineItems(timelineID) {
			$.ajax({type: 'POST',url: '/admin/fn/timelines/reOrderTimelineItemsChrono/',
				data: {clientID: '12295', timelineID: timelineID},
				success: function(data) {
					$("#timeline_load_" + timelineID).hide();
					var results = 			data.split("{|}");
					if(results[0] == "SUCCESS") {
						
						cancelReOrderTimelineItems(timelineID);
						getTimelineItems(timelineID);
						
					} else {
						swal({ type: 'error', title: 'Error', html: results[1] });
						
						
					}
				}
			});
		}
		function cancelReOrderTimelineItems(timelineID) {
			$("#timeline_items_" + timelineID + " img.handle").hide();
			$("#timeline_reorder_controls_" + timelineID).hide();
		}
		function deleteTimelineItem(itemID,timelineID) {
			var error = 				"",
				errorField = 			$("#errorTimeline_" + timelineID);
				
				errorField.hide();
				
				$("#timeline_load_" + timelineID).show();
				swal({
				    title: 'Are you sure?',
				    html: 'Are you sure you want to delete this Timeline Item? <br /> This action can NOT be undone!',
				    type: 'warning',
				    showCancelButton: true,
				    confirmButtonColor: '#3085d6',
				    cancelButtonColor: '#d33',
				    confirmButtonText: 'Yes',
				    cancelButtonText: 'No',
				    confirmButtonClass: 'confirm-class',
				    cancelButtonClass: 'cancel-class',
				    closeOnConfirm: true,
				    closeOnCancel: true
				}, function(isConfirm) {
				    if (isConfirm) {
				    	$.ajax({	type: "POST",	url: "/admin/fn/timelines/deleteTimelineItem/",
							data: {clientID: '12295', timelineID: timelineID, itemID: itemID},
							success: function(   data   ){			 
								$("#timeline_load_" + timelineID).hide();
								var results = 			data.split("{|}");
								if(results[0] == "SUCCESS") {
									
									getTimelineItems(timelineID);
									getTimelineItemGrid(timelineID);
									
									refreshTimelineGrid(timelineID);
									
									
								} else {
									swal({ type: 'error', title: 'Error', html: results[1] });
									
									
								}
							}
						});
				    } 
				});	
		}
		
		function exportTimeline(timelineID) {
			window.open('/admin/timelines/export/12295/'+timelineID+'/');
		}
		
		function duplicateTimeline(timelineID) {
			var error = 			"",
				errorField = 		$("#errorTimeline");
				
				errorField.hide();
			swal({
			    title: 'Are you sure?',
			    html: 'Are you sure you want to create a duplicate timeline?',
			    type: 'warning',
			    showCancelButton: true,
			    confirmButtonColor: '#3085d6',
			    cancelButtonColor: '#d33',
			    confirmButtonText: 'Yes',
			    cancelButtonText: 'No',
			    confirmButtonClass: 'confirm-class',
			    cancelButtonClass: 'cancel-class',
			    closeOnConfirm: true,
			    closeOnCancel: true
			}, function(isConfirm) {
			    if (isConfirm) {
			    	
			    	$.ajax({	type: "POST",	url: "/admin/fn/timelines/duplicateTimeline/",
						data: {clientID: '12295', timelineID: timelineID},
						success: function(   data   ){			 
							$("#timeline_load_" + timelineID).hide();
							var results = 			data.split("{|}");
							if(results[0] == "SUCCESS") {
								
								getTimelineItems(timelineID);
								getTimelineItemGrid(timelineID);
								
							} else {
								swal({ type: 'error', title: 'Error', html: results[1] });
							}
						}
					});
			    	
			    } 
			});
		}
		function cancelNewEvent() {
			modal.close();
		}
		function refreshTimelineGrid(timelineID) {
			 $.ajax({	type: "POST",	url: "/admin/fn/timelines/getTimelineItemsJson/",
			   data: {clientID: '12295', view: 'agendaDay',  timelineID: timelineID, objectType: 'lead',objectID: '1615775' },
			   success: function(   data   ){
			   		$("#calendarAppLoader").hide();
			   		var results = 		data.split("{|}");
					if(results[0] == "SUCCESS") {
						var eventArray = 	$.JSON.decode(results[1]);																		
						$("#timeline_items_grid_" + timelineID).fullCalendar( 'removeEvents');
						$("#timeline_items_grid_" + timelineID).fullCalendar( 'addEventSource', eventArray);
						$("#timeline_items_grid_" + timelineID).fullCalendar( 'refetchEvents' );
						
						$(".timegrid-popup").remove();
						
					} else {
						swal({ type: 'error', title: 'Error', html: results[1] });
					}
				}
			});
		}
		
	</script>
	
	
	<div class="leftTitle headerTitle"><i class="icon-calendar-time"></i> Timelines:</div>
	<div class="rightTitle">
				<a href="javascript:void(0);" onclick="addTimeline();" class="btn btn-default btn-sm" ><i class="fa fa-plus font-green-jungle"></i> Add Timeline </a>
			</div>
	<br style="clear: both;" />
	<div id="errorTimeline" class="failure hidden"></div>
	<div id="addTimelineDIV" class="hidden greenBorderBox">
	
		<div class="normalThinRowStyle">
			<div class="leftTitle">Populate From Template:</div>
			<div class="rightTitle">    <select id="timelineTemplate" name="timelineTemplate" style="width: 300px;"  onchange="switchTimelineTemplate(this.value);"  class="styled" >
    	<option value="" > -- No Data to Display -- </option>    </select>
    </div>
			<div class="clearSmall"></div><br style="clear: both;" />
		</div>
		<div id="timelineAddFormFields">
			<div class="normalThinRowStyle">
				<div class="leftTitle">Name:</div>
				<div class="rightTitle"><input type="text" id="timelineName" name="timelineName" size="55" class="form-control" maxlength="" value=""   /></div>
				<div class="clearSmall"></div><br style="clear: both;" />
			</div>
			<div class="alternateThinRowStyleLight">
				<div class="leftTitle">Private (hidden in portal):</div>
				<div class="rightTitle">    <select id="timelineHiddenInPortal" name="timelineHiddenInPortal" style="width: 200px;"  class="styled">
    	<option value="" > -- </option>
<option value="0"   >No, public</option>
<option value="1"   >Yes, Hidden</option>
    </select>
    </div>
				<div class="clearSmall"></div><br style="clear: both;" />
			</div>
			<div class="normalThinRowStyle">
				<div class="leftTitle">Description:</div>
				<div class="rightTitle"><textarea id="timelineDesc" name="timelineDesc" cols="45" rows="15" class="textBlock" resize=""   ><p><span style="color: #ff0000; font-family: helvetica, arial, sans-serif; font-size: 18pt;">NOTICE: This is just a description of this specific timeline template you are creating! Examples may include: &ldquo;Full Day Weddings that include a &ldquo;First Look.&rdquo; After you add this description, click &ldquo;Save&rdquo; and begin building your timeline for this timeline template!</span></p></textarea></div>
				<div class="clearSmall"></div><br style="clear: both;" />
			</div>
		</div>
		
		<br style="clear: both;" />
		<br style="clear: both;" />
		
		<a href="javascript:void(0);" onclick="saveNewTimeline();" class="btn blue btn-sm" ><span class="fa fa-check"></span> Save </a>
		<a href="javascript:void(0);" onclick="cancelNewTimeline();" class="btn default btn-sm" > Cancel </a>
		
		<br style="clear: both;" />
		<br style="clear: both;" />
		
	</div>
	
<style type="text/css">
	.selectize-dropdown, .selectize-dropdown.form-control {  z-index: 905000; }
	.selectize-dropdown-content .label { color: #000 !important; }
</style>
<script type="text/javascript">
	$(function() {
		//updated on [03.20.2k19] : TH
		$('#recipient_lead').selectize({
		    persist: false,
		    maxItems: null,
		    plugins: ['remove_button','drag_drop'],
		    valueField: 'email',
		    labelField: 'name',
		    searchField: ['name', 'email'],
		    options: [
				{email: "test@sweetmephotography.com", name: "Test Lead - test@sweetmephotography.com"}		    ],
		    render: {
		        item: function(item, escape) {
		            return '<div>' +
		                (item.email ? ' <span class="email"><span class="fa fa-envelope-o"></span> ' + item.email + '</span>' : '') +
		            '</div>';
		        },
		        option: function(item, escape) {
		            var label = item.name || item.email;
		            var caption = item.name ? item.email : null;
		            return "<div>" +
		                "<span class=\"label\">" + label + "</span>" +
		                (caption ? "<span class=\"caption\">" + caption + "</span>" : "") +
		            "</div>";
		        }
		    },
		    createFilter: function(input) {
		        var match, regex;
		
		        // email@address.com
		        regex = new RegExp('^' + REGEX_EMAIL + '$', 'i');
		        match = input.match(regex);
		        if (match) return !this.options.hasOwnProperty(match[0]);
		
		        // name <email@address.com>
		        regex = new RegExp('^([^<]*)\<' + REGEX_EMAIL + '\>$', 'i');
		        match = input.match(regex);
		        if (match) return !this.options.hasOwnProperty(match[2]);
		
		        return false;
		    },
		    create: function(input) {
		        if ((new RegExp('^' + REGEX_EMAIL + '$', 'i')).test(input)) {
		            return {email: input};
		        }
		        var match = input.match(new RegExp('^([^<]*)\<' + REGEX_EMAIL + '\>$', 'i'));
		        if (match) {
		            return {
		                email : match[2],
		                name  : $.trim(match[1])
		            };
		        }
		        swal({
					type: 'error',
					title: 'Error',
					html: 'Invalid email address'
				});
		        return false;
		    }
		});

		$('#cc_lead').selectize({
			persist: false,
			maxItems: null,
			plugins: ['remove_button','drag_drop'],
			valueField: 'email',
			labelField: 'name',
			searchField: ['name', 'email'],
			options: [
				{email: "test@sweetmephotography.com", name: "Test Lead - test@sweetmephotography.com"}			],
			render: {
				item: function(item, escape) {
					return '<div>' +
						(item.email ? ' <span class="email"><span class="fa fa-envelope-o"></span> ' + item.email + '</span>' : '') +
						'</div>';
				},
				option: function(item, escape) {
					var label = item.name || item.email;
					var caption = item.name ? item.email : null;
					return "<div>" +
						"<span class=\"label\">" + label + "</span>" +
						(caption ? "<span class=\"caption\">" + caption + "</span>" : "") +
						"</div>";
				}
			},
			createFilter: function(input) {
				var match, regex;

				// email@address.com
				regex = new RegExp('^' + REGEX_EMAIL + '$', 'i');
				match = input.match(regex);
				if (match) return !this.options.hasOwnProperty(match[0]);

				// name <email@address.com>
				regex = new RegExp('^([^<]*)\<' + REGEX_EMAIL + '\>$', 'i');
				match = input.match(regex);
				if (match) return !this.options.hasOwnProperty(match[2]);

				return false;
			},
			create: function(input) {
				if ((new RegExp('^' + REGEX_EMAIL + '$', 'i')).test(input)) {
					return {email: input};
				}
				var match = input.match(new RegExp('^([^<]*)\<' + REGEX_EMAIL + '\>$', 'i'));
				if (match) {
					return {
						email : match[2],
						name  : $.trim(match[1])
					};
				}
				swal({
					type: 'error',
					title: 'Error',
					html: 'Invalid email address'
				});
				return false;
			}
		});
		
		
		
	});
</script>


<script type="text/javascript">
	$(function() {

	});
	function populateEmailWithData(clientID, objectName, objectID, responseID, messageField) {	
		var theIDParam = "";	
		switch(objectName) {
			case "lead":		theIDParam = "&leadID=";		break;
			case "client":		theIDParam = "&customerID=";	break;
			case "event":		theIDParam = "&eventID=";		break;
			case "project":		theIDParam = "&projectID=";		break;
			case "payment":		theIDParam = "&paymentID=";		break;
			case "invoice":		theIDParam = "&invoiceID=";		break;
			case "deliverable":	theIDParam = "&deliverableID=";	break;
			case "workshop":	theIDParam = "&workshopID=";	break;
			case "contract":	theIDParam = "&contractID=";	break;
			case "questionnaire":theIDParam = "&questionnaireID=";	break;
			case "proposal":	theIDParam = "&proposalID=";	break;
		}	
		theIDParam = theIDParam + objectID;	
		$.ajax({ 
			type: 'GET',
			url: '/admin/data/populateDataForCommonResponse/',
			data: "clientID=" + clientID + "&type=" + objectName + "&responseID=" + escape(responseID) + theIDParam,
			success: function(data) {
				var results = data.split("{|}");
		   		var result = results[0];
		   		if(result == "SUCCESS") {
		   			
					
					var editor = tinymce.EditorManager.get(messageField);
	   				if(editor) {
						editor.setContent(results[1]);
	   				}
					
					
		   			
		   			
		   			if(results[2]) {
		   				$("#subject_" + objectName).val(results[2]);
		   			}
		   		}
			}
		});
	}
	
	function insertTimelineEmailSignature(messageField, studioID) {
		var brandID = 			$("#eventBrandID").val();
		
		//If the brandID is empty, just default to the normal signature
		if(brandID != "") {
			$.ajax({type: 'POST',url: '/admin/data/getBrandEmailSignature/',
				data: {clientID:studioID, brandID: brandID},
				success: function(data) {
					var results = data.split("{|}");
			   		var result = results[0];
			   		if(result == "SUCCESS") {
			   			
			   			if(results[1] == "") {
			   				
			   				getNormalEmailSignature(messageField, studioID);
			   				
			   			} else {
				   			var msg = "<br /><br />" + results[1];
				   			
							var editor = tinymce.EditorManager.get(messageField);
			   				if(editor) {
								editor.insertContent(results[1]);
		   					}
			   			}
			   		} else {
			   			swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
			   		}
				}
			});
			
		} else {
			getNormalEmailSignature(messageField, studioID);
		}
	}
	
	function getNormalEmailSignature(messageField, studioID) {
		$.ajax({type: 'GET',url: '/admin/data/getSignature/',
			data: {clientID:studioID},
			success: function(data) {
				var results = data.split("{|}");
		   		var result = results[0];
		   		if(result == "SUCCESS") {
		   			var msg = "<br /><br />" + results[1];
		   			
		   			
					var editor = tinymce.EditorManager.get(messageField);
	   				if(editor) {
						editor.insertContent(results[1]);
   					}
				
		   		} else {
		   			swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
		   		}
			}
		});
	}
	function toggleSendLoading(showHide) {
		if(showHide == 'show') {
			$("#timelineSendButtonImg").removeClass('fa fa-envelope-o');
			$("#timelineSendButtonImg").addClass('fa fa-spinner fa-pulse');
			//attr('src','/admin/icons/small_grey_loader.gif');
			$("#sendTimelineBtn").attr('disabled',true);
		} else {
			$("#timelineSendButtonImg").addClass('fa fa-envelope-o');
			$("#timelineSendButtonImg").removeClass('fa fa-spinner fa-pulse');
			//attr('src','/admin/icons/email.png');
			$("#sendTimelineBtn").attr('disabled',false);
		}
		
	}
	function sendTimeline() {
		var timelineID = 			$("#timelineIDtoSend").val(),
			recipient = 			$('#recipient_lead').val(),
			cc = 					$('#cc_lead').val(),
			subject = 				$('#subject_lead').val(),
			message = 				"",
			error = 				"",
			errorField = 			$("#errorTimelineSend");
			
			errorField.hide();
			tinyMCE.triggerSave();
			
			
			message = 				$("textarea[name=message_lead]").val();
		
			error += 				(recipient == "" ) ? "Recipient is a necessary field. \n If you've typed in an e-mail address, try typing a comma after the e-mail.<br />" : ""; 

			if(error == "") {
				
				toggleSendLoading('show');
				
				$.ajax({	type: "POST",	url: "/admin/data/sendTimeline/",
		   			data: {clientID: '12295', timelineID: timelineID,
								recipient: recipient, cc: cc, subject: subject, message: message, userID: '26818'},
				   	success: function(   data   ){		
		   				
				   		toggleSendLoading('hide');
				   		
				   		var results = 			data.split("{|}");
						if(results[0] == "SUCCESS") {
							
							cancelSendTimeline();
							
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
		   			}
		 		});
		 	} else {
				swal({
					type: 'error',
					title: 'Error',
					html: error
				});
			}
	}
	function cancelSendTimeline() {
		$("#sendTimelineDIV").slideUp();
		$("#timelineIDtoSend").val('');
		$("#sendingTimelineName").html('');
	}
	function showSendTimeline(timelineID) {
		$("#timelineIDtoSend").val(timelineID);
		$("#sendTimelineDIV").slideDown();
		var currentTimelineName = $("#timelineName_" + timelineID + "_name").html();
		$("#sendingTimelineName").html("Sending: " + currentTimelineName);
		
		
		var editor = tinymce.get('message_lead');
		if(editor) {
			editor.destroy();
		}
		tinymce.init({
		    selector: "#message_lead",
		    plugins: [
		        "advlist autolink autosave link image lists charmap print preview hr anchor pagebreak ", //spellchecker
                "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking",
                "table directionality emoticons template textcolor paste textcolor" //contextmenu
		    ],
		    height: 400,
			contextmenu: false,
		    browser_spellcheck: true,
		    toolbar1: "insertfile undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | forecolor backcolor",
		    toolbar2: "styleselect formatselect fontselect fontsizeselect",
			valid_children : '+body[style]'
						,setup: function (ed) {
				ed.on('init', function (e) {
					ed.execCommand("fontName", false, "Helvetica");
				});
			}
					});
		
		
	}
	
	
</script>
<div id="sendTimelineDIV" class="hidden portlet light bordered" style="margin-top:25px;">
	<div id="errorTimelineSend" class="failure hidden"></div>
	<input type="hidden" id="timelineIDtoSend" name="timelineIDtoSend" size="" class="" maxlength="" value=""   />	<span class="headerTitle" id="sendingTimelineName"></span><br /><br />
	<div class="normalThinRowStyle">
		<div class="leftTitle">To: 
						<a href="javascript:void(0);" class="helpTip" data-titlebar="true" data-style="qtip-tipsy" data-tooltip="&lt;h2&gt;To/Recipient Field:&lt;/h2&gt;&lt;br /&gt;You can choose from one of the values provided, or type an e-mail address ended by a comma. 
																	If the e-mail address you type in doesn&#039;t have the blue bubble around it, it won&#039;t send to them, so just type a comma after the address.
																	&lt;br /&gt;
																	&lt;img src=&#039;https://i.gyazo.com/a90ab26d2cbb09c1f827dcc48b7a1a8c.png&#039; /&gt;
																	&lt;br /&gt;" ><i class="fa fa-question-circle"></i></a>
		</div>
		<div class="rightTitle">
			<span style="float: left;">
			
			<input type="text" id="recipient_lead" name="recipient_lead" size="580" class="form-control" maxlength="" value=""  style="width: 580px;"   />			
			</span>
			<span style="float: left; margin-left: 10px;">
				<button type="button" class="btn blue btn-sm" onclick="showCC('lead');" title="Add Cc: recipient" >Cc:</button>
			</span><br style="clear: both;" />
			<div id="CCDiv_lead" class="hidden" >
				<div class="leftTitle" style="width: 50px;">Cc: </div>
				<div class="leftTitle"><input type="text" id="cc_lead" name="cc_lead" size="45" class="form-control" maxlength="" value=""  style="width: 450px;"   /></div><br style="clear: both;" />
			</div>
		</div>
		<div class="clearSmall">&nbsp;</div><br style="clear: both;" />
		
	</div>
	<div class="normalThinRowStyle">
		<div class="leftTitle">Subject: </div>
		<div class="rightTitle"><input type="text" id="subject_lead" name="subject_lead" size="" class="form-control" maxlength="" value=""  style="width: 600px; "   /></div>
		<div class="clearSmall">&nbsp;</div><br style="clear: both;" />
	</div>
			<div class="normalThinRowStyle">
			<div class="leftTitle">E-mail Templates:</div>
			<div class="rightTitle">    <select id="responses" name="responses" style="width: 580px;"  onchange="applyEmailTemplateToObject(this.value, 'lead', '1615775','','','',true);"  class="styled">
    	<option value="" > -- </option>
    				<optgroup label="1. LEADS">
    				<option value="308337"  >1a. ADVANCED INQUIRY REPLY - 4/13/25 (✴:03a.)</option>
<option value="290474"  >1b. ADVANCED (TRAVEL FEE) - 4/13/25 (HS 03b.)</option>
<option value="290475"  >2a. BABY HAS ARRIVED - 4/13/25 (HS 03d.)</option>
<option value="290483"  >2b. BABY HAS ARRIVED TRAVEL FEE - 4/13/25</option>
<option value="305136"  >2e. TWINS BABY HAS ARRIVED  2/3/25 (✴03l.) </option>
<option value="305137"  >2f. TWINS BABY HAS ARRIVED  - OLDER TWINS 2/3/25 (✴03l.)  </option>
<option value="306185"  >2d. TRIPLETS BABY ADVANCED 2/3/25 (✴03l.)</option>
<option value="306186"  >2e. TRIPLETS BABY HAS ARRIVED 2/3/25 (✴03l.)</option>
<option value="307194"  >JENNIFER --- SITTER SESSION DATE OFFER</option>
<option value="305392"  >JENNIFER --- OB BABY SESSION DATE OFFER</option>
<option value="304389"  >2d. TWINS BABY HAS ARRIVED TRAVEL FEE 2/3/25 (✴03l.)</option>
<option value="304547"  >2c. TWINS BABY ADVANCED 2/3/25 (✴03l.)</option>
<option value="302973"  >10a  PC ADVANCED INQUIRY REPLY - 4/13/25</option>
<option value="303105"  >10b  PC. ADVANCED (TRAVEL FEE) - 4/13/25</option>
<option value="303106"  >8a  PC. BABY HAS ARRIVED - 4/13/25</option>
<option value="303107"  >8b  PC. BABY HAS ARRIVED TRAVEL FEE - 4/13/25</option>
<option value="263379"  >6b. CONFIRM BIRTHDATE/DUE DATE - 2/9/21</option>
<option value="245669"  >3a.  OLDER BABY - 4/13/25 (HS 03g.)</option>
<option value="245672"  >3a.  OLDER BABY (TRAVEL FEE) - 3/6/25 (HS 03h.)</option>
<option value="303108"  >9a PC. OLDER BABY - 4/13/25</option>
<option value="303109"  >9a PC.OLDER BABY (TRAVEL FEE) - 4/13/25</option>
<option value="262593"  > AVAILABILITY COMING SOON</option>
<option value="243952"  >2020 FOLLOW-UP Email </option>
<option value="284088"  >4c. PHOTOGRAPHER - SOLO TWINS REQUEST</option>
<option value="252561"  >NEED DUE/BIRTH DATE TO ANSWER INQUIRY</option>
<option value="270073"  >5c. ADDITIONAL AVAILABILITY</option>
<option value="255827"  >Z3. FOLLOW UP L/T LEAD BEFORE ARCHIVE</option>
<option value="192367"  >4a. PHOTOGRAPHER - SESSION LOCATION REQUEST</option>
<option value="215860"  >4b. PHOTOGRAPHER - OLDER BABY REQUEST </option>
<option value="215861"  >5a. WORKING ON A LEAD</option>
<option value="215393"  >5b. BAD ZIP CODE</option>
<option value="211719"  >6a. NO AVAILABILITY</option>
<option value="193981"  >6c. OUT OF SERVICE AREA</option>
<option value="234613"  >6h. SF BLACKOUT AREA - MORE THAN A MONTH OUT</option>
<option value="215518"  >6g. AREA NOT READY JUST YET (INSERT MONTH)</option>
<option value="217946"  >6f. BABY NOT HERE - LIMBO TIME FRAME (NOT SURE IF WE WILL HAVE PHOTOGRAPHER IN THEIR AREA)</option>
<option value="233276"  >7a. BOOKING CLIENT NEW DATE OFFER</option>
<option value="163707"  >Z2. FOLLOW UP EMAIL 1 05/23/24</option>
<option value="211704"  >Z3. DID NOT PAY INVOICE FOLLOW UP EMAIL</option>
<option value="223979"  >Z4. LAST DITCH LEAD EFFORT!</option>
<option value="245227"  >JENNIFER SPECIAL CV FOLLOWUP</option>
<option value="245228"  >HEATHER SPECIAL CV FOLLOWUP </option>
<option value="249520"  >MODEL - POTENTIAL IN-HOME SESSION</option>
    				</optgroup>
    				    				<optgroup label="SAT3">
    				<option value="305150"  >SAT3 GOOD FIT- CHANGE CITY/AREA - ADD CITY SPECIFIC MODEL QUESITONNAIRE    - copy - copy - copy - copy - copy</option>
<option value="275520"  >INQUIRY RECEIVED - MODEL DUE DATE AFTER CUTOFF  </option>
<option value="275521"  >MODEL BABY BORN - OLDER BABY POSSIBILITY    - copy - copy - copy - copy</option>
<option value="275522"  >MODEL BABY NOT IN AGE RANGE   </option>
<option value="275523"  >MODEL BACKUP LIST </option>
<option value="275524"  >PROPOSED DATE OFFER - MODEL</option>
<option value="270154"  >OFFER MODEL DISCOUNT TO BOOK PAID </option>
<option value="241771"  >MODEL - INQUIRY RECEIVED - possible POST WORKSHOP MODEL</option>
    				</optgroup>
    				    				<optgroup label="AUS Video">
    				<option value="291631"  >AUS7Video Good Fit</option>
<option value="275520"  >INQUIRY RECEIVED - MODEL DUE DATE AFTER CUTOFF  </option>
<option value="275521"  >MODEL BABY BORN - OLDER BABY POSSIBILITY    - copy - copy - copy - copy</option>
<option value="275522"  >MODEL BABY NOT IN AGE RANGE   </option>
<option value="275523"  >MODEL BACKUP LIST </option>
<option value="275524"  >PROPOSED DATE OFFER - MODEL</option>
    				</optgroup>
    				    				<optgroup label="RIV18">
    				<option value="296906"  >RIV18 GOOD FIT- CHANGE CITY/AREA - ADD CITY SPECIFIC MODEL QUESITONNAIRE    - copy - copy - copy</option>
<option value="275520"  >INQUIRY RECEIVED - MODEL DUE DATE AFTER CUTOFF  </option>
<option value="275521"  >MODEL BABY BORN - OLDER BABY POSSIBILITY    - copy - copy - copy - copy</option>
<option value="275522"  >MODEL BABY NOT IN AGE RANGE   </option>
<option value="275523"  >MODEL BACKUP LIST </option>
<option value="275524"  >PROPOSED DATE OFFER - MODEL</option>
    				</optgroup>
    				    				<optgroup label="PC SMP ">
    				<option value="302973"  >10a  PC ADVANCED INQUIRY REPLY - 4/13/25</option>
<option value="303105"  >10b  PC. ADVANCED (TRAVEL FEE) - 4/13/25</option>
<option value="303106"  >8a  PC. BABY HAS ARRIVED - 4/13/25</option>
<option value="303107"  >8b  PC. BABY HAS ARRIVED TRAVEL FEE - 4/13/25</option>
<option value="303108"  >9a PC. OLDER BABY - 4/13/25</option>
<option value="303109"  >9a PC.OLDER BABY (TRAVEL FEE) - 4/13/25</option>
    				</optgroup>
    				    				<optgroup label="MANHATTAN LEAD RESPONSES">
    				<option value="290577"  >1a. MANHATTAN ADVANCED INQUIRY REPLY - 04/13/25 (HS 04a.)</option>
<option value="290578"  >2a. MANHATTAN BABY HAS ARRIVED - 4/13/25 (HS 04c.)</option>
<option value="270511"  >3a.  MANHATTAN OLDER BABY -  4/13/25 (HS 04e.)</option>
    				</optgroup>
    				    				<optgroup label="GENERAL MODEL SESSION">
    				<option value="279249"  >Future PW Models    - copy</option>
<option value="269245"  >AUSTIN Kaci - GOOD FIT - CHANGE CITY/AREA - ADD CITY SPECIFIC MODEL QUESITONNAIRE   - copy - copy - copy</option>
<option value="252177"  >CLIENT - IN-HOME MODEL SESSION BOOKING FORM</option>
<option value="241712"  >LEAD TO MODEL - POST TRAINING - DATE OFFER - ADD IN-HOME MODEL BOOKING FORM</option>
<option value="241730"  >OLD LEAD TO TRAINING MODEL - CHANGE CITY/DATE FOR MKT - ADD CITY SPECIFIC MODEL QUESTIONNIARE</option>
<option value="229077"  >NEW LEAD TO POST TRAINING MODEL ESTABLISHED AREA - ADD IN-HOME MODEL BOOKING FORM</option>
<option value="209698"  >NEW LEAD TO TRAINING MODEL - CHANGE CITY/DATE FOR MKT - ADD CITY SPECIFIC MODEL QUESTIONNAIRE</option>
<option value="213117"  >OLD LEAD TO POST TRAINING MODEL DATE OFFER (ADD IN-HOME MODEL BOOKING FORM)</option>
    				</optgroup>
    				    				<optgroup label="Content Projects">
    				<option value="276597"  >CP GOOD FIT - CHANGE CITY/AREA - ADD CITY SPECIFIC MODEL QUESITONNAIRE    - copy</option>
<option value="275520"  >INQUIRY RECEIVED - MODEL DUE DATE AFTER CUTOFF  </option>
<option value="275521"  >MODEL BABY BORN - OLDER BABY POSSIBILITY    - copy - copy - copy - copy</option>
<option value="275522"  >MODEL BABY NOT IN AGE RANGE   </option>
<option value="275523"  >MODEL BACKUP LIST </option>
<option value="275524"  >PROPOSED DATE OFFER - MODEL</option>
<option value="270154"  >OFFER MODEL DISCOUNT TO BOOK PAID </option>
<option value="241771"  >MODEL - INQUIRY RECEIVED - possible POST WORKSHOP MODEL</option>
    				</optgroup>
    				    				<optgroup label="LA24">
    				<option value="305148"  >LA24 GOOD FIT- CHANGE CITY/AREA - ADD CITY SPECIFIC MODEL QUESITONNAIRE    - copy - copy - copy - copy</option>
<option value="275520"  >INQUIRY RECEIVED - MODEL DUE DATE AFTER CUTOFF  </option>
<option value="275521"  >MODEL BABY BORN - OLDER BABY POSSIBILITY    - copy - copy - copy - copy</option>
<option value="275522"  >MODEL BABY NOT IN AGE RANGE   </option>
<option value="275523"  >MODEL BACKUP LIST </option>
<option value="275524"  >PROPOSED DATE OFFER - MODEL</option>
<option value="270154"  >OFFER MODEL DISCOUNT TO BOOK PAID </option>
<option value="241771"  >MODEL - INQUIRY RECEIVED - possible POST WORKSHOP MODEL</option>
    				</optgroup>
    				    				<optgroup label="GIFT CARDS">
    				<option value="269309"  >GIFT CERTIFICATE - KENTUCKY SALES TAX - 2024</option>
<option value="269308"  >GIFT CERTIFICATE - NO SALES TAX - 2024</option>
<option value="250057"  >GIFT CERTIFICATE - COLORADO SALES TAX-2024</option>
<option value="266907"  >GIFT CERTIFICATE - D.C. SALES TAX - 2024</option>
<option value="249709"  >GIFT CERTIFICATE - NORTH CAROLINA SALES TAX - 2024</option>
<option value="250156"  >GIFT CERTIFICATE - PENNSYLVANIA SALES TAX - 2024</option>
<option value="248644"  >GIFT CERTIFICATE - ARIZONA SALES TAX - 2024</option>
<option value="248311"  >GIFT CERTIFICATE - MANHATTAN -2024</option>
<option value="248312"  >GIFT CERTIFICATE - TEXAS SALES TAX - 2024</option>
<option value="248885"  >GIFT CERTIFICATE - WASHINGTON SALES TAX - 2024</option>
    				</optgroup>
    				    				<optgroup label=" NEW PHOTOGRAPHER LEAD">
    				<option value="245231"  >SMP JOBS - NOT A FIT</option>
<option value="245235"  >SMP JOBS - NOT IN YOUR AREA/NOT A FIT</option>
<option value="245234"  >SMP JOBS - NOT IN YOUR AREA/POSSIBLE FUTURE FIT</option>
<option value="245151"  >SMP JOBS - POSSIBLE GOOD FIT</option>
<option value="245232"  >SMP JOBS - NO CURRENT NEED</option>
<option value="245201"  >SMP JOBS - REQUEST FOR SAMPLE IMAGES</option>
    				</optgroup>
    				    				<optgroup label="OLD TEMPLATES">
    				<option value="308411"  >2a. BABY HAS ARRIVED - 2/3/25 (HS 03d.) - copy</option>
<option value="308242"  >do not use - copy ----1a. ADVANCED INQUIRY REPLY - 8/7/24 (✴:03a.) - copy</option>
<option value="308509"  >JENN ONLY PERSONALIZED FOLLOW UP - schedule@ </option>
<option value="308508"  >JENN ONLY PERSONALIZED FOLLOW UP - sessions@</option>
<option value="308507"  >JENN ONLY PERSONALIZED FOLLOW UP -BOOKING@ </option>
<option value="308893"  >play 1a. ADVANCED INQUIRY REPLY - 3/6/25 (✴:03a.) - copy</option>
<option value="308521"  >xxx progress 2a. BABY HAS ARRIVED - 2/3/25 (HS 03d.) - copy - copy</option>
<option value="308556"  >xxx progress ADV BABY - 2/3/25 (HS 03d.) - copy - copy - copy</option>
<option value="305199"  >OLD: 1a. MANHATTAN ADVANCED INQUIRY REPLY - 10/17/23 (HS 04a.) - 06/21/24</option>
<option value="305201"  >OLD: 3a.  MANHATTAN OLDER BABY -  10/17/23 (HS 04e.) - 06/21/24</option>
<option value="304528"  >OLD: Z2. FOLLOW UP EMAIL 1 - 05/23/24</option>
<option value="304529"  >OLD: Z3. FOLLOW UP L/T LEAD BEFORE 05/23/24</option>
<option value="299242"  >JENN ONLY PERSONALIZED FOLLOW UP - reserve@</option>
<option value="275951"  >DO NOT USE! MELISSA BRAND SIGNATURE TEST EMAIL</option>
    				</optgroup>
    				    				<optgroup label="XXXX DO NOT USE">
    				<option value="308642"  >3/6 update asking Carla   2a. BABY HAS ARRIVED - 2/26/25 (HS 03d.) - copy</option>
<option value="308645"  >do not use 3/6 ---- 1a. ADVANCED INQUIRY REPLY - 2/26/25 (✴:03a.) - copy</option>
<option value="304528"  >OLD: Z2. FOLLOW UP EMAIL 1 - 05/23/24</option>
<option value="304529"  >OLD: Z3. FOLLOW UP L/T LEAD BEFORE 05/23/24</option>
<option value="218837"  >6. DISC - OLDER BABY (TRAVEL FEE) - 2/4/19 </option>
<option value="219058"  >CUSTOM FOLLOW UP - CHANGE THE DATE!!!!</option>
<option value="228734"  >REACH BACK - DISC</option>
<option value="218487"  >XXXX **BUTTON MASTER**</option>
    				</optgroup>
    				    				<optgroup label="TEMP TEMPLATES">
    				<option value="229853"  >TEMP NEWBORN SESSION OVERVIEW</option>
    				</optgroup>
    				    				<optgroup label="XXXXX DO NOT USE YET - 2020 PRICE INCREASE">
    				<option value="245955"  >CV REOPENED FOLLOW UP</option>
<option value="244576"  >0a. CV-19 WE ARE BOOKING YOU! (UP TO 5/31/20)</option>
<option value="244284"  >CV - WAIT LIST</option>
<option value="238241"  >1a.  ADVANCED INQUIRY REPLY - 2/4/19 - copy</option>
<option value="238242"  >1b.  ADVANCED (TRAVEL FEE) - 2/4/19 - copy</option>
<option value="238243"  >2a. BABY HAS ARRIVED - 2/4/19  - copy</option>
<option value="238244"  >2b. BABY HAS ARRIVED (TRAVEL FEE) - 2/4/19 - copy</option>
<option value="238245"  >3a.  OLDER BABY - 2/4/19 - copy</option>
<option value="238246"  >3b. OLDER BABY (PREEMIE) - copy</option>
<option value="238247"  >3c.  OLDER BABY (TRAVEL FEE) - 2/4/19 - copy</option>
<option value="238248"  >3d.  OLDER BABY (TRAVEL FEE - PREEMIE) - copy</option>
<option value="238249"  >4a. PHOTOGRAPHER - SESSION LOCATION REQUEST - copy</option>
<option value="238250"  >4b. PHOTOGRAPHER - OLDER BABY REQUEST  - copy</option>
<option value="238251"  >5a. WORKING ON A LEAD - copy</option>
<option value="238252"  >5b. BAD ZIP CODE - copy</option>
<option value="238253"  >6a. NO AVAILABILITY - copy</option>
<option value="238254"  >6b. NO AVAILABILITY (OLDER BABY) - copy</option>
<option value="238255"  >6c. OUT OF SERVICE AREA - copy</option>
<option value="238256"  >6d. TRUE OLDER BABY - OVER 3 MOS OLD - copy</option>
<option value="238257"  >6e. EXPANDING - NOT ABLE TO BOOK - copy</option>
<option value="238260"  >6f. BABY NOT HERE - LIMBO TIME FRAME (NOT SURE IF WE WILL HAVE PHOTOGRAPHER IN THEIR AREA) - copy</option>
<option value="238259"  >6g. AREA NOT READY JUST YET (INSERT MONTH) - copy</option>
<option value="238258"  >6h. SF BLACKOUT AREA - MORE THAN A MONTH OUT - copy</option>
<option value="238261"  >7a. BOOKING CLIENT NEW DATE OFFER - copy</option>
<option value="238262"  >Z1. INQUIRY AUTO RESPONSE - 2/1/19 - copy</option>
<option value="238263"  >Z2. FOLLOW UP EMAIL 1 - copy</option>
<option value="238264"  >OLD: Z3. FOLLOW UP EMAIL 2 - 05/23/24</option>
<option value="238265"  >Z4. LAST DITCH LEAD EFFORT! - copy</option>
    				</optgroup>
    				    				<optgroup label="INVOICING">
    				<option value="305136"  >2e. TWINS BABY HAS ARRIVED  2/3/25 (✴03l.) </option>
    				</optgroup>
    				    				<optgroup label="PRICING">
    				<option value="308337"  >1a. ADVANCED INQUIRY REPLY - 4/13/25 (✴:03a.)</option>
<option value="290474"  >1b. ADVANCED (TRAVEL FEE) - 4/13/25 (HS 03b.)</option>
<option value="290475"  >2a. BABY HAS ARRIVED - 4/13/25 (HS 03d.)</option>
<option value="290483"  >2b. BABY HAS ARRIVED TRAVEL FEE - 4/13/25</option>
<option value="305136"  >2e. TWINS BABY HAS ARRIVED  2/3/25 (✴03l.) </option>
<option value="305137"  >2f. TWINS BABY HAS ARRIVED  - OLDER TWINS 2/3/25 (✴03l.)  </option>
<option value="306185"  >2d. TRIPLETS BABY ADVANCED 2/3/25 (✴03l.)</option>
<option value="306186"  >2e. TRIPLETS BABY HAS ARRIVED 2/3/25 (✴03l.)</option>
<option value="304389"  >2d. TWINS BABY HAS ARRIVED TRAVEL FEE 2/3/25 (✴03l.)</option>
<option value="304491"  >Rachel: 10a. PC ADVANCED INQUIRE REPLY - 05/21/24 (✴ 03a.)</option>
<option value="304492"  >Rachel: 10b. PC ADVANCED (TRAVEL FEE) - 05/21/24 (✴ 03b.)</option>
<option value="304303"  >Rachel: 1a. ADVANCED INQUIRE REPLY - 05/13/24 (✴ 03a.)</option>
<option value="304304"  >Rachel: 1a. MANHATTAN ADVANCED INQUIRE REPLY - 06/21/24 (✴ 04a.)</option>
<option value="304217"  >Rachel: 2a. BABY HAS ARRIVED 05/13/24 (✴ 03d.)</option>
<option value="304305"  >Rachel: 2a. MANHATTAN BABY HAS ARRIVED 06/21/24 (✴ 04b.)</option>
<option value="304547"  >2c. TWINS BABY ADVANCED 2/3/25 (✴03l.)</option>
<option value="304360"  >Rachel: 2a. TWINS BABY HAS ARRIVED 05/15/24 (✴ 03l.)</option>
<option value="304306"  >Rachel: 2B. BABY HAS ARRIVED TRAVEL FEE 05/15/24 (✴ 03g.)</option>
<option value="304309"  >Rachel: 3a. OLDER BABY - 05/13/24 (✴ 03h.)</option>
<option value="304311"  >Rachel: 3a. OLDER BABY (TRAVEL FEE) - 05/13/24 (✴ 03i.)</option>
<option value="304378"  >Rachel: 8b. PC BABY HAS ARRIVED 05/14/24 (✴)</option>
<option value="304498"  >Rachel: Z2. REMINDER to Book (✴03c.) 05/23/24</option>
<option value="304501"  >Rachel: Z3. FOLLOW UP L/T LEAD BEFORE ARCHIVE - (HS 03d) 05/21/24</option>
<option value="290577"  >1a. MANHATTAN ADVANCED INQUIRY REPLY - 04/13/25 (HS 04a.)</option>
<option value="290578"  >2a. MANHATTAN BABY HAS ARRIVED - 4/13/25 (HS 04c.)</option>
<option value="270511"  >3a.  MANHATTAN OLDER BABY -  4/13/25 (HS 04e.)</option>
<option value="302973"  >10a  PC ADVANCED INQUIRY REPLY - 4/13/25</option>
<option value="303105"  >10b  PC. ADVANCED (TRAVEL FEE) - 4/13/25</option>
<option value="303106"  >8a  PC. BABY HAS ARRIVED - 4/13/25</option>
<option value="303107"  >8b  PC. BABY HAS ARRIVED TRAVEL FEE - 4/13/25</option>
<option value="270508"  >old MANHATTAN ADVANCED INQUIRY REPLY -  6/9/10</option>
<option value="245669"  >3a.  OLDER BABY - 4/13/25 (HS 03g.)</option>
<option value="245672"  >3a.  OLDER BABY (TRAVEL FEE) - 3/6/25 (HS 03h.)</option>
<option value="303108"  >9a PC. OLDER BABY - 4/13/25</option>
<option value="303109"  >9a PC.OLDER BABY (TRAVEL FEE) - 4/13/25</option>
<option value="255827"  >Z3. FOLLOW UP L/T LEAD BEFORE ARCHIVE</option>
<option value="211704"  >Z3. DID NOT PAY INVOICE FOLLOW UP EMAIL</option>
    				</optgroup>
    				    				<optgroup label="UPGRADES">
    				<option value="308337"  >1a. ADVANCED INQUIRY REPLY - 4/13/25 (✴:03a.)</option>
<option value="290474"  >1b. ADVANCED (TRAVEL FEE) - 4/13/25 (HS 03b.)</option>
<option value="290475"  >2a. BABY HAS ARRIVED - 4/13/25 (HS 03d.)</option>
<option value="290483"  >2b. BABY HAS ARRIVED TRAVEL FEE - 4/13/25</option>
<option value="305136"  >2e. TWINS BABY HAS ARRIVED  2/3/25 (✴03l.) </option>
<option value="305137"  >2f. TWINS BABY HAS ARRIVED  - OLDER TWINS 2/3/25 (✴03l.)  </option>
<option value="306185"  >2d. TRIPLETS BABY ADVANCED 2/3/25 (✴03l.)</option>
<option value="306186"  >2e. TRIPLETS BABY HAS ARRIVED 2/3/25 (✴03l.)</option>
<option value="304389"  >2d. TWINS BABY HAS ARRIVED TRAVEL FEE 2/3/25 (✴03l.)</option>
<option value="304491"  >Rachel: 10a. PC ADVANCED INQUIRE REPLY - 05/21/24 (✴ 03a.)</option>
<option value="304492"  >Rachel: 10b. PC ADVANCED (TRAVEL FEE) - 05/21/24 (✴ 03b.)</option>
<option value="304303"  >Rachel: 1a. ADVANCED INQUIRE REPLY - 05/13/24 (✴ 03a.)</option>
<option value="304304"  >Rachel: 1a. MANHATTAN ADVANCED INQUIRE REPLY - 06/21/24 (✴ 04a.)</option>
<option value="304217"  >Rachel: 2a. BABY HAS ARRIVED 05/13/24 (✴ 03d.)</option>
<option value="304305"  >Rachel: 2a. MANHATTAN BABY HAS ARRIVED 06/21/24 (✴ 04b.)</option>
<option value="304547"  >2c. TWINS BABY ADVANCED 2/3/25 (✴03l.)</option>
<option value="304360"  >Rachel: 2a. TWINS BABY HAS ARRIVED 05/15/24 (✴ 03l.)</option>
<option value="304306"  >Rachel: 2B. BABY HAS ARRIVED TRAVEL FEE 05/15/24 (✴ 03g.)</option>
<option value="304309"  >Rachel: 3a. OLDER BABY - 05/13/24 (✴ 03h.)</option>
<option value="304311"  >Rachel: 3a. OLDER BABY (TRAVEL FEE) - 05/13/24 (✴ 03i.)</option>
<option value="304378"  >Rachel: 8b. PC BABY HAS ARRIVED 05/14/24 (✴)</option>
<option value="304498"  >Rachel: Z2. REMINDER to Book (✴03c.) 05/23/24</option>
<option value="304501"  >Rachel: Z3. FOLLOW UP L/T LEAD BEFORE ARCHIVE - (HS 03d) 05/21/24</option>
<option value="290577"  >1a. MANHATTAN ADVANCED INQUIRY REPLY - 04/13/25 (HS 04a.)</option>
<option value="290578"  >2a. MANHATTAN BABY HAS ARRIVED - 4/13/25 (HS 04c.)</option>
<option value="270511"  >3a.  MANHATTAN OLDER BABY -  4/13/25 (HS 04e.)</option>
<option value="302973"  >10a  PC ADVANCED INQUIRY REPLY - 4/13/25</option>
<option value="303105"  >10b  PC. ADVANCED (TRAVEL FEE) - 4/13/25</option>
<option value="303106"  >8a  PC. BABY HAS ARRIVED - 4/13/25</option>
<option value="303107"  >8b  PC. BABY HAS ARRIVED TRAVEL FEE - 4/13/25</option>
<option value="245669"  >3a.  OLDER BABY - 4/13/25 (HS 03g.)</option>
<option value="245672"  >3a.  OLDER BABY (TRAVEL FEE) - 3/6/25 (HS 03h.)</option>
<option value="303108"  >9a PC. OLDER BABY - 4/13/25</option>
<option value="303109"  >9a PC.OLDER BABY (TRAVEL FEE) - 4/13/25</option>
    				</optgroup>
    				    				<optgroup label="Un-Categoried">
    				<option value="242633"  >** DO NOT USE** FEB 2020 ADVANCED WORKING COPY OF CHANGES</option>
<option value="229918"  >** MODEL FORM RECEIVED** (CHANGE DATES)</option>
<option value="241763"  >** MODEL FORM RECEIVED** (CHANGE DATES) - copy</option>
<option value="243132"  >** MODEL FORM RECEIVED** (CHANGE DATES) - copy</option>
<option value="284917"  >1a.  ADVANCED INQUIRY REPLY - 1/22/21 - copy</option>
<option value="290377"  >1DONT USE CHANGED OVER TO NEW 2/12 / a. ADVANCED INQUIRY REPLY - 2/3/25 (✴:03a.)</option>
<option value="276013"  >1st Lead Follow Up {Wedding}</option>
<option value="299744"  >2a. BABY HAS ARRIVED - 7/2023 - copy</option>
<option value="245662"  >2a. BABY HAS ARRIVED (TRAVEL FEE) - 3/10/20  - copy</option>
<option value="307717"  >2d TWINS BABY ADVANCED travel fee 08/13/24</option>
<option value="307716"  >2e. TWINS BABY ADVANCED TRAVEL FEE 08/13/24</option>
<option value="241764"  >A1 MODEL RESPONSE - AUSTIN - POSSIBLE FIT - CHANGE FOR MKT - copy</option>
<option value="229919"  >A1 MODEL RESPONSE - LA - POSSIBLE FIT - CHANGE FOR MKT</option>
<option value="243133"  >A1 MODEL RESPONSE - SAN JOSE - POSSIBLE FIT - CHANGE FOR MKT  - copy</option>
<option value="242622"  >A1 MODEL RESPONSE - SAN JOSE - POSSIBLE FIT - CHANGE FOR MKT (duplicate)</option>
<option value="229920"  >A2 MODEL RESPONSE - BABY TOO OLD </option>
<option value="241765"  >A2 MODEL RESPONSE - BABY TOO OLD  - copy</option>
<option value="243134"  >A2 MODEL RESPONSE - BABY TOO OLD  - copy</option>
<option value="241766"  >A3 MODEL RESPONSE - AUSTIN - OFFER DISCOUNT TO BOOK PAID - CHANGE MARKET  - copy</option>
<option value="229921"  >A3 MODEL RESPONSE - LA - OFFER DISCOUNT TO BOOK PAID - CHANGE MARKET </option>
<option value="243135"  >A3 MODEL RESPONSE - OFFER DISCOUNT TO BOOK PAID - copy</option>
<option value="243136"  >A4 MODEL RESPONSE  - POSSIBLE FIT POST TRAINING - CHANGE DATE - copy</option>
<option value="241767"  >A4 MODEL RESPONSE - AUSTIN - POSSIBLE FIT POST TRAINING - CHANGE MARKET INFO - copy</option>
<option value="229922"  >A4 MODEL RESPONSE - LA - POSSIBLE FIT POST TRAINING - CHANGE MARKET INFO</option>
<option value="229923"  >A5 MODEL RESPONSE - SLOTS FILLED - POSSIBLE IN-HOME SESSION</option>
<option value="243137"  >A5 MODEL RESPONSE - SLOTS FILLED - POSSIBLE IN-HOME SESSION  - copy</option>
<option value="241768"  >A5 MODEL RESPONSE - SLOTS FILLED - POSSIBLE IN-HOME SESSION - copy</option>
<option value="229924"  >A6 MODEL RESPONSE - SPOTS FILLED</option>
<option value="243138"  >A6 MODEL RESPONSE - SPOTS FILLED  - copy</option>
<option value="241769"  >A6 MODEL RESPONSE - SPOTS FILLED - copy</option>
<option value="259138"  >AUSTIN - POSSIBLE FIT POST TRAINING MODEL - CHANGE MARKET INFO/DATES  - copy - copy</option>
<option value="270148"  >AUSTIN - POSSIBLE FIT POST TRAINING MODEL - CHANGE MARKET INFO/DATES  - copy - copy - copy</option>
<option value="282551"  >Austin GOOD FIT - CHANGE CITY/AREA - ADD CITY SPECIFIC MODEL QUESITONNAIRE    - copy - copy</option>
<option value="259137"  >AUSTIN- AUS28 - GOOD FIT - CHANGE CITY/AREA - ADD CITY SPECIFIC MODEL QUESITONNAIRE   - copy - copy</option>
<option value="229925"  >B1 MODEL SESSION - PROPOSED DATE OFFER </option>
<option value="243139"  >B1 MODEL SESSION - PROPOSED DATE OFFER   - copy</option>
<option value="241770"  >B1 MODEL SESSION - PROPOSED DATE OFFER  - copy</option>
<option value="254068"  >Chicago - GOOD FIT - CHANGE CITY/AREA - ADD CITY SPECIFIC MODEL QUESITONNAIRE   - copy</option>
<option value="254069"  >Chicago - POSSIBLE FIT POST TRAINING MODEL - CHANGE MARKET INFO/DATES  - copy</option>
<option value="308469"  >COPY OF BABY HAS ARRIVED TAKEN OUT 2/20/25 . BABY HAS ARRIVED - 2/12/25 (HS 03d.) - copy</option>
<option value="282550"  >CPAUS31 Video GOOD FIT- CHANGE CITY/AREA - ADD CITY SPECIFIC MODEL QUESITONNAIRE    - copy - copy</option>
<option value="290484"  >DO NOT USE - FOR JH ONLY  OLDER BABY - 1/22/21</option>
<option value="308459"  >do not use - save switched out on 2/18/25 ----  ADVANCED INQUIRY REPLY - 2/12/25 (✴:03a.) - copy</option>
<option value="299745"  >DO NOT USE --- BABY HAS ARRIVED 10/11/23</option>
<option value="290659"  >DO NOT USE FOR JH ADVANCED copy</option>
<option value="304237"  >DO NOT USE THIS EMAIL - WORK IN PROGRESS</option>
<option value="290721"  >don not use FOLLOW UP EMAIL 1 - copy</option>
<option value="295500"  >Family Workshop Good Fit - copy</option>
<option value="270671"  >GIFT CARD - NO TAX NEEDED</option>
<option value="251881"  >INQUIRY RECEIVED - MODEL DUE DATE AFTER CUTOFF </option>
<option value="283536"  >INQUIRY RECEIVED - MODEL DUE DATE AFTER CUTOFF   - copy</option>
<option value="253069"  >INQUIRY RECEIVED - MODEL DUE DATE AFTER CUTOFF  - copy</option>
<option value="254060"  >INQUIRY RECEIVED - MODEL DUE DATE AFTER CUTOFF  - copy</option>
<option value="256888"  >INQUIRY RECEIVED - MODEL DUE DATE AFTER CUTOFF  - copy - copy</option>
<option value="259139"  >INQUIRY RECEIVED - MODEL DUE DATE AFTER CUTOFF  - copy - copy</option>
<option value="264550"  >INQUIRY RECEIVED - MODEL DUE DATE AFTER CUTOFF  - copy - copy - copy</option>
<option value="271350"  >INQUIRY RECEIVED - MODEL DUE DATE AFTER CUTOFF  - copy - copy - copy - copy</option>
<option value="264548"  >KC - GOOD FIT - CHANGE CITY/AREA - ADD CITY SPECIFIC MODEL QUESITONNAIRE   - copy - copy - copy</option>
<option value="264549"  >KC - POSSIBLE FIT POST TRAINING MODEL - CHANGE MARKET INFO/DATES  - copy - copy - copy</option>
<option value="276011"  >Lead - Available {Wedding}</option>
<option value="276014"  >Lead - Unavailable on Date</option>
<option value="276010"  >Lead {Portrait}</option>
<option value="276012"  >Lead {Senior}</option>
<option value="276015"  >Lead {Wedding - went with different photographer}</option>
<option value="276016"  >Lead Follow Up {Portrait}</option>
<option value="251885"  >MINNEAPOLIS - GOOD FIT - CHANGE CITY/AREA - ADD CITY SPECIFIC MODEL QUESITONNAIRE</option>
<option value="229926"  >MODEL - INQUIRY RECEIVED - DUE DATE AFTER CUTOFF </option>
<option value="243140"  >MODEL - INQUIRY RECEIVED - DUE DATE AFTER CUTOFF  - copy</option>
<option value="251880"  >MODEL BABY BORN - OLDER BABY POSSIBILITY  </option>
<option value="254061"  >MODEL BABY BORN - OLDER BABY POSSIBILITY    - copy</option>
<option value="256889"  >MODEL BABY BORN - OLDER BABY POSSIBILITY    - copy - copy</option>
<option value="259140"  >MODEL BABY BORN - OLDER BABY POSSIBILITY    - copy - copy</option>
<option value="264551"  >MODEL BABY BORN - OLDER BABY POSSIBILITY    - copy - copy - copy</option>
<option value="253068"  >MODEL BABY BORN - OLDER BABY POSSIBILITY   - copy</option>
<option value="251883"  >MODEL BABY NOT IN AGE RANGE  </option>
<option value="254062"  >MODEL BABY NOT IN AGE RANGE    - copy</option>
<option value="256890"  >MODEL BABY NOT IN AGE RANGE    - copy - copy</option>
<option value="259141"  >MODEL BABY NOT IN AGE RANGE    - copy - copy</option>
<option value="264552"  >MODEL BABY NOT IN AGE RANGE    - copy - copy - copy</option>
<option value="253071"  >MODEL BABY NOT IN AGE RANGE   - copy</option>
<option value="229927"  >MODEL BACKUP LIST </option>
<option value="251882"  >MODEL BACKUP LIST </option>
<option value="243141"  >MODEL BACKUP LIST   - copy</option>
<option value="241772"  >MODEL BACKUP LIST  - copy</option>
<option value="253070"  >MODEL BACKUP LIST  - copy</option>
<option value="254063"  >MODEL BACKUP LIST  - copy</option>
<option value="256891"  >MODEL BACKUP LIST  - copy - copy</option>
<option value="259142"  >MODEL BACKUP LIST  - copy - copy</option>
<option value="264553"  >MODEL BACKUP LIST  - copy - copy - copy</option>
<option value="251879"  >MODEL FORM RECEIVED</option>
<option value="253067"  >MODEL FORM RECEIVED - copy</option>
<option value="254064"  >MODEL FORM RECEIVED - copy</option>
<option value="256892"  >MODEL FORM RECEIVED - copy - copy</option>
<option value="259143"  >MODEL FORM RECEIVED - copy - copy</option>
<option value="264554"  >MODEL FORM RECEIVED - copy - copy - copy</option>
<option value="229928"  >MODEL INQUIRY RESPONSE - BABY BORN - OLDER BABY POSSIBILITY</option>
<option value="243142"  >MODEL INQUIRY RESPONSE - BABY BORN - OLDER BABY POSSIBILITY  - copy</option>
<option value="235424"  >MODEL INQUIRY RESPONSE - BABY BORN - OLDER BABY POSSIBILITY - copy</option>
<option value="241773"  >MODEL INQUIRY RESPONSE - BABY BORN - OLDER BABY POSSIBILITY - copy</option>
<option value="251878"  >MODEL RESPONSE - SPOTS FILLED </option>
<option value="254065"  >MODEL RESPONSE - SPOTS FILLED   - copy</option>
<option value="256893"  >MODEL RESPONSE - SPOTS FILLED   - copy - copy</option>
<option value="259144"  >MODEL RESPONSE - SPOTS FILLED   - copy - copy</option>
<option value="264555"  >MODEL RESPONSE - SPOTS FILLED   - copy - copy - copy</option>
<option value="253066"  >MODEL RESPONSE - SPOTS FILLED  - copy</option>
<option value="251877"  >MODEL SLOTS FILLED - POSSIBLE IN-HOME SESSION  </option>
<option value="253065"  >MODEL SLOTS FILLED - POSSIBLE IN-HOME SESSION   - copy</option>
<option value="254066"  >MODEL SLOTS FILLED - POSSIBLE IN-HOME SESSION   - copy</option>
<option value="256894"  >MODEL SLOTS FILLED - POSSIBLE IN-HOME SESSION   - copy - copy</option>
<option value="259145"  >MODEL SLOTS FILLED - POSSIBLE IN-HOME SESSION   - copy - copy</option>
<option value="264556"  >MODEL SLOTS FILLED - POSSIBLE IN-HOME SESSION   - copy - copy - copy</option>
<option value="290468"  >New Booking Notification</option>
<option value="270147"  >OC24 GOOD FIT - CHANGE CITY/AREA - ADD CITY SPECIFIC MODEL QUESITONNAIRE   </option>
<option value="251884"  >OFFER MODEL DISCOUNT TO BOOK PAID </option>
<option value="253073"  >OFFER MODEL DISCOUNT TO BOOK PAID  - copy</option>
<option value="254067"  >OFFER MODEL DISCOUNT TO BOOK PAID  - copy</option>
<option value="256895"  >OFFER MODEL DISCOUNT TO BOOK PAID  - copy - copy</option>
<option value="259146"  >OFFER MODEL DISCOUNT TO BOOK PAID  - copy - copy</option>
<option value="264557"  >OFFER MODEL DISCOUNT TO BOOK PAID  - copy - copy - copy</option>
<option value="245663"  >OLD - BABY HAS ARRIVED (TRAVEL FEE) - 1/22/21</option>
<option value="245661"  >OLD BABY HAS ARRIVED - 1/22/21</option>
<option value="270510"  >OLD MANHATTAN BABY HAS ARRIVED -  6/9/10 </option>
<option value="304495"  >OLD: 10a  PC ADVANCED INQUIRY REPLY - 03/18/24  - 05/21/24</option>
<option value="304494"  >OLD: 10b  PC. ADVANCED (TRAVEL FEE) - 3/18/24 - 05/21/24</option>
<option value="304379"  >OLD: 1a. ADVANCED INQUIRY REPLY - 10/13/23 (✴:03a.) - 05/21/24</option>
<option value="304493"  >OLD: 1a. MANHATTAN ADVANCED INQUIRY REPLY - 10/17/23 (HS 04a.) - 05/21/24</option>
<option value="304496"  >OLD: 1b. ADVANCED (TRAVEL FEE) - 10/17/23 (HS 03b.) - 05/21/24</option>
<option value="304359"  >OLD: 2a. BABY HAS ARRIVED - 10/13/23 (HS 03d.) - 5/13/24</option>
<option value="305200"  >OLD: 2a. MANHATTAN BABY HAS ARRIVED - 10/17/23 (HS 04c.) - 06/21/24</option>
<option value="304375"  >OLD: 2b. BABY HAS ARRIVED TRAVEL FEE - 10/17/23 - 05/14/24</option>
<option value="304376"  >OLD: 3a.  OLDER BABY (TRAVEL FEE) - 10/17/23 (HS 03h.) - 05/14/24</option>
<option value="304377"  >OLD: 8a  PC. BABY HAS ARRIVED - 3/18/24 - 05/14/24</option>
<option value="304391"  >OLD: 8b  PC. BABY HAS ARRIVED TRAVEL FEE - 3/18/24; 05/15/24</option>
<option value="304546"  >OLD: Z2. FOLLOW UP EMAIL 1 2022 - 05/23/24</option>
<option value="246116"  >ON WAIT LIST ASK FOR PHONE NUMBER</option>
<option value="303204"  >PC LEAD - PAM - CLIENTS@</option>
<option value="251886"  >POSSIBLE FIT POST TRAINING MODEL - CHANGE MARKET INFO/DATES</option>
<option value="231516"  >POSSIBLE MODEL - LET US KNOW WHEN BABY ARRIVES</option>
<option value="241774"  >POSSIBLE MODEL - LET US KNOW WHEN BABY ARRIVES - copy</option>
<option value="243143"  >POSSIBLE MODEL - LET US KNOW WHEN BABY ARRIVES - copy</option>
<option value="251887"  >PROPOSED DATE OFFER - MODEL</option>
<option value="253074"  >PROPOSED DATE OFFER - MODEL - copy</option>
<option value="254070"  >PROPOSED DATE OFFER - MODEL - copy</option>
<option value="256896"  >PROPOSED DATE OFFER - MODEL - copy - copy</option>
<option value="259147"  >PROPOSED DATE OFFER - MODEL - copy - copy</option>
<option value="264558"  >PROPOSED DATE OFFER - MODEL - copy - copy - copy</option>
<option value="305198"  >RACHEL 8a  PC. OLDER BABY - 06/21/24 - </option>
<option value="304472"  >Rachel: 06a. MANHATTAN INVOICE - ADVANCED (✴06d.)</option>
<option value="304473"  >Rachel: 07c. MANHATTAN INVOICE - BABY HERE (✴07c.)</option>
<option value="304307"  >Rachel: 1a. ADVANCED (TRAVEL FEE) - 05/13/24 (✴ 03b.)</option>
<option value="304308"  >Rachel: 1a. MANHATTAN OLDER BABY - 06/21/24 (✴ 04c.)</option>
<option value="304393"  >Rachel: 2a. PC TWINS BABY HAS ARRIVED 05/15/24 (✴)</option>
<option value="304394"  >Rachel: 2a. PC TWINS BABY HAS ARRIVED 05/15/24 (✴) - copy</option>
<option value="304390"  >Rachel: 8b  PC. BABY HAS ARRIVED TRAVEL FEE 05/15/24 (✴ 03d.)</option>
<option value="308558"  >REMOVED 2/26/25 1a. ADVANCED INQUIRY REPLY - 2/20/25 (✴:03a.) </option>
<option value="308559"  >REMOVED 2/26/25 2a. BABY HAS ARRIVED - 2/20/25 (HS 03d.) </option>
<option value="305147"  >RIV18 GOOD FIT- CHANGE CITY/AREA - ADD CITY SPECIFIC MODEL QUESITONNAIRE    - copy - copy - copy - copy</option>
<option value="271349"  >San Antonio - GOOD FIT - CHANGE CITY/AREA - ADD CITY SPECIFIC MODEL QUESITONNAIRE   - copy - copy - copy - copy</option>
<option value="253072"  >SAN FRANCISCO - GOOD FIT - CHANGE CITY/AREA - ADD CITY SPECIFIC MODEL QUESITONNAIRE </option>
<option value="253064"  >SAN FRANCISCO - POSSIBLE FIT POST TRAINING MODEL - CHANGE MARKET INFO/DATES - copy</option>
<option value="256886"  >SF - GOOD FIT - CHANGE CITY/AREA - ADD CITY SPECIFIC MODEL QUESITONNAIRE   - copy - copy</option>
<option value="256887"  >SF - POSSIBLE FIT POST TRAINING MODEL - CHANGE MARKET INFO/DATES  - copy - copy</option>
<option value="308413"  >test do not use --- 1a. ADVANCED INQUIRY REPLY - 2/12/25 (✴:03a.) - copy</option>
<option value="304251"  >TEST TONY </option>
<option value="308456"  >TRIAL do not use for jh only   ADVANCED INQUIRY REPLY - 2/12/25 (✴:03a.) - copy</option>
<option value="308418"  >TRIAL TEST DO NOT USE   ADVANCED INQUIRY REPLY - 2/12/25 (✴:03a.) - copy</option>
    				</optgroup>
    				    </select>
    </div>
			<div class="clearSmall">&nbsp;</div><br style="clear: both;" />
		</div>									
			<div class="normalThinRowStyle">
		<textarea id="message_lead" name="message_lead" cols="85" rows="15" class="textBlock tinyMCE" resize=""   ></textarea>		<div class="clearSmall">&nbsp;</div><br style="clear: both;" />
	</div>
	
	<div class="normalThinRowStyle">
		<div class="leftTitle">&nbsp;</div>
		<div class="rightTitle smallText">
			<button type="button" class="btn blue btn-sm" onclick="insertTimelineEmailSignature('message_lead','12295');" ><span class="fa fa-pencil"></span> Insert Signature</button><br />
		</div>
		<div class="clearSmall">&nbsp;</div><br style="clear: both;" />
	</div>
	
	<br style="clear: both;" />
	<br style="clear: both;" />
	
	<button type="button" onclick="sendTimeline();" id="sendTimelineBtn" class="btn blue btn-sm" ><i id="timelineSendButtonImg" class="fa fa-envelope-o"></i> Send </button>
	<button type="button" onclick="cancelSendTimeline();" class="btn default btn-sm" > Cancel </button>
	
</div>
	<br style="clear: both;" />
	
	<div id="timelineHeader" class="tableHeaderDIV alternateThinRowStyle">
		<div class="floatHeader" style="width: 250px;">Timeline Name</div>
		<br style="clear: both;" />
	</div>
	<div id="timelineListing">
					<div id="none-timeline" class="noneDIV">No timelines have been added yet.</div>
				</div>
					    </div>
    <!-- Inner Content -->
    	
				</div>
				
				
								<div id="timetrackerTab" class="ui-tabs-hide" >
					    <!-- Inner Content -->
    <div class="tab-content">
    	
					<style type="text/css">
	#timeListingTotals .percentageText { margin-top: -2px; }
	.modalWindowContent {
		max-height: 540px;
		overflow: auto;
		margin-left: -10px;
		margin-right: -10px;
		margin-bottom: -25px;
		padding: 5px;
	}
	.billableIcon {
		font-size: 18px;
		line-height: 18px;
	}
	
	#breakDownByTask-chart, #invoiced-vs-uninvoiced-chart, #billable-vs-nonbillable-chart {
		height: 250px;
		padding-left: 0px;
		padding-right: 0px;
	}
</style>
<div class="leftTitle headerTitle"><i class="icon-timer-2"></i> Time Tracking</div>
<div class="rightTitle">
			<a href="javascript:void(0);" class="btn btn-default btn-sm" onclick="getAddTimeEntryForm('lead','1615775',null);"><span class="fa fa-plus font-green-jungle"></span> Add Time</a>
		<a href="javascript:void(0);" class="btn btn-default btn-sm" onclick="getTimeInvoiceForm('lead','1615775','');"><span class="icon-bill-1"></span> Invoice All Time</a>
	</div>
<br style="clear: both; " />
<br style="clear: both; " />
<div id="timersErrors" class="hidden failure"></div>

<div id="breakDownByTask-chart" class="col-lg-4 col-md-4 col-sm-4 col-xs-4" ></div>
<div id="invoiced-vs-uninvoiced-chart" class="col-lg-4 col-md-4 col-sm-4 col-xs-4"></div>
<div id="billable-vs-nonbillable-chart" class="col-lg-4 col-md-4 col-sm-4 col-xs-4"></div>
<br style="clear: both;" />

<div id="timeListingTotals"></div>
<div id="timersListing"></div>
<script type="text/javascript" src="/admin/js/highcharts/js/highcharts.js"></script>
<script type="text/javascript">
	
	
	
	function getObjectTimeSummaryPie(objectType,objectID) {
		$.ajax({	type: "POST",	url: "/admin/fn/time/getObjectTimeSummaryPie/",
			data: {clientID: '12295', objectType: objectType, objectID: objectID},
			success: function(   data   ){
				var results = 			(data != "" && data != null) ? $.JSON.decode(data) : {categories:[],totalTime:'',colors: [],columns:[]},
					dataArray = 		[],
					chartTitle = 		'(' + results.totalTime + ')';
					
										
					for(var x = 0; x < results.categories.length; x++) {
						dataArray.push([results.categories[x],results.columns[x]['percentage']]);
					}
					
				//////////////////////////////////////////////////
				//////////////////////////////////////////////////
				chart = new Highcharts.Chart({
					chart: {		renderTo: 'breakDownByTask-chart',	defaultSeriesType: 'pie'	},				
					title: {		text: '',	x: -20	},
					subtitle: {		
						text: chartTitle,	
						x: -20
					},					
					colors: 	results.colors,
					plotOptions: {
						pie: {
							allowPointSelect: true,
							cursor: 'pointer',
							showInLegend: true,
							shadow: false,
        					center: ['50%', '50%']
						},
		                 series: {
		                 	size: '90%',
    						innerSize: '60%',
			                dataLabels: {
			                    enabled: false
			                	/*formatter: function () {
				                    // display only if larger than 1
				                    return this.y > 1 ? this.y + ' % <b>' + this.point.name + '</b> (' + results.columns[this.point.x].amount + ')'  : null;
				                }*/
			                }
			            }
					},
					legend: {
		                align: 'right',
		                verticalAlign: 'top',
		                layout: 'vertical',
		                borderWidth: 0,
		                x: 0,
		                y: 100
		            },
							legend: {	
								enabled: false,
								layout: 'vertical',
								align: 'right',
								verticalAlign: 'top',
								x: 10,
								y: 50,
								labelFormatter: function() {
						        	return '<b>' + this.name + '</b> : ' + results.columns[this.x].amount;
								}
							},
					tooltip: {
						positioner: function () {
			                return { x: 0, y: 50 };
			            },
						formatter: function() {
				        	return this.y + ' % <b>' + this.point.name + '</b> (' + results.columns[this.point.x].amount + ')';
						}
					},
					series: [{	type: 'pie', name:'Expenses By Category', data: dataArray }]
				});					
				//////////////////////////////////////////////////
	            //////////////////////////////////////////////////
			}
		});
	}
	function getObjectTimeInvoicedVsUnInvoicedPie(objectType,objectID) {
		$.ajax({	type: "POST",	url: "/admin/fn/time/getObjectTimeInvoicedVsUnInvoicedPie/",
			data: {clientID: '12295', objectType: objectType, objectID: objectID},
			success: function(   data   ){
				var results = 			(data != "" && data != null) ? $.JSON.decode(data) : {categories:[],totalTime:'',colors: [],columns:[]},
					dataArray = 		[],
					chartTitle = 		'(' + results.totalTime + ')';
					
										
					for(var x = 0; x < results.categories.length; x++) {
						dataArray.push([results.categories[x],results.columns[x]['percentage']]);
					}
					
				//////////////////////////////////////////////////
				//////////////////////////////////////////////////
				chart = new Highcharts.Chart({
					chart: {		renderTo: 'invoiced-vs-uninvoiced-chart',	defaultSeriesType: 'pie'	},				
					title: {		text: '',	x: -20	},
					subtitle: {		
						text: chartTitle,	
						x: -20
					},					
					colors: 	results.colors,
					plotOptions: {
						pie: {
							allowPointSelect: true,
							cursor: 'pointer',
							showInLegend: true,
							shadow: false,
        					center: ['50%', '50%']
						},
		                 series: {
		                 	size: '90%',
    						innerSize: '60%',
			                dataLabels: {
			                    enabled: false
			                	/*formatter: function () {
				                    // display only if larger than 1
				                    return this.y > 1 ? this.y + ' % <b>' + this.point.name + '</b> (' + results.columns[this.point.x].amount + ')'  : null;
				                }*/
			                }
			            }
					},
					legend: {
		                align: 'right',
		                verticalAlign: 'top',
		                layout: 'vertical',
		                borderWidth: 0,
		                x: 0,
		                y: 100
		            },
							legend: {	
								enabled: false,
								layout: 'vertical',
								align: 'right',
								verticalAlign: 'top',
								x: 10,
								y: 50,
								labelFormatter: function() {
						        	return '<b>' + this.name + '</b> : ' + results.columns[this.x].amount;
								}
							},
					tooltip: {
						positioner: function () {
			                return { x: 0, y: 50 };
			            },
						formatter: function() {
				        	return this.y + ' % <b>' + this.point.name + '</b> (' + results.columns[this.point.x].amount + ')';
						}
					},
					series: [{	type: 'pie', name:'Expenses By Category', data: dataArray }]
				});					
				//////////////////////////////////////////////////
	            //////////////////////////////////////////////////
			}
		});
	}
	function getObjectTimeBillableVsNonBillablePie(objectType,objectID) {
		$.ajax({	type: "POST",	url: "/admin/fn/time/getObjectTimeBillableVsNonBillablePie/",
			data: {clientID: '12295', objectType: objectType, objectID: objectID},
			success: function(   data   ){
				var results = 			(data != "" && data != null) ? $.JSON.decode(data) : {categories:[],totalTime:'',colors: [],columns:[]},
					dataArray = 		[],
					chartTitle = 		'(' + results.totalTime + ')';
					
										
					for(var x = 0; x < results.categories.length; x++) {
						dataArray.push([results.categories[x],results.columns[x]['percentage']]);
					}
					
				//////////////////////////////////////////////////
				//////////////////////////////////////////////////
				chart = new Highcharts.Chart({
					chart: {		renderTo: 'billable-vs-nonbillable-chart',	defaultSeriesType: 'pie'	},				
					title: {		text: '',	x: -20	},
					subtitle: {		
						text: chartTitle,	
						x: -20
					},					
					colors: 	results.colors,
					plotOptions: {
						pie: {
							allowPointSelect: true,
							cursor: 'pointer',
							showInLegend: true,
							shadow: false,
        					center: ['50%', '50%']
						},
		                 series: {
		                 	size: '90%',
    						innerSize: '60%',
			                dataLabels: {
			                    enabled: false
			                	/*formatter: function () {
				                    // display only if larger than 1
				                    return this.y > 1 ? this.y + ' % <b>' + this.point.name + '</b> (' + results.columns[this.point.x].amount + ')'  : null;
				                }*/
			                }
			            }
					},
					legend: {
		                align: 'right',
		                verticalAlign: 'top',
		                layout: 'vertical',
		                borderWidth: 0,
		                x: 0,
		                y: 100
		            },
							legend: {	
								enabled: false,
								layout: 'vertical',
								align: 'right',
								verticalAlign: 'top',
								x: 10,
								y: 50,
								labelFormatter: function() {
						        	return '<b>' + this.name + '</b> : ' + results.columns[this.x].amount;
								}
							},
					tooltip: {
						positioner: function () {
			                return { x: 0, y: 50 };
			            },
						formatter: function() {
				        	return this.y + ' % <b>' + this.point.name + '</b> (' + results.columns[this.point.x].amount + ')';
						}
					},
					series: [{	type: 'pie', name:'Expenses By Category', data: dataArray }]
				});					
				//////////////////////////////////////////////////
	            //////////////////////////////////////////////////
			}
		});
	}
	


	function updateTotalForAllInOne(amount) {
		var quantity = 			$("#totalTimeDecimal").val();
		formatTheAmount(quantity,amount,'theTotalForAllInOne');
	}
	function formatTheAmount(quantity,amount,divToUpdate) {									
		amount = amount.replace(/[^\d.]/g, "");
		
		if(isNaN(quantity)) {
			
		} else if (isNaN(amount)) {
		
		} else {
			var theAmt = formatToMoney((Math.round((quantity * amount) * 100) / 100), ' $','before');
			$('#'+divToUpdate+'').html(theAmt); 
		}
	}
	function switchTimeInvoicePopulation(which) {
		switch(which) {
			case "allinone":
			case "allinonetax":
				$("#totalInOneView").show();
				$("#itemizedView").hide();
				break;
			case "itemized":
			case "itemizedtax":
				$("#itemizedView").show();
				$("#totalInOneView").hide();
				break;
			default:
				$("#totalInOneView").hide();
				$("#itemizedView").hide();
				break;
		}
	}	
    function updateManualTimeDisplay() {
    	var startTime = 			$("#timerManualStartTime").val(),
    		endTime = 				$("#timerManualEndTime").val(),
    		today = 				moment().format("YYYY-MM-DD"),
    		startTimeM = 			moment(today + " " + startTime, "YYYY-MM-DD hh:mm:A"),
    		endTimeM = 				moment(today + " " + endTime, "YYYY-MM-DD hh:mm:A"),
    		theDiff = 				moment.duration(endTimeM - startTimeM),
        	hours = 				theDiff.hours(),
        	minutes = 				theDiff.minutes(),
        	seconds = 				theDiff.seconds(),        	
        	timeString = 			"";
        	if((hours <= 0) && (minutes <= 0)) {
        		timeString = 		"Start time must be before end time";
        	}
        	if(hours > 0) {			timeString +=  hours + "h ";	}
        	if(minutes > 0) {		timeString +=  minutes + "m ";	}
    		$("#addManualTimeDisplay").html(timeString);
    }
    function updateManualTimeDisplayEditScreen(timeID) {
    	var startTime = 			$("#timerManualStartTime_" + timeID).val(),
    		endTime = 				$("#timerManualEndTime_" + timeID).val(),
    		startDate = 			$("#timerManualStartDate_" + timeID).val(),
    		endDate = 				$("#timerManualEndDate_" + timeID).val(),
    		
    		startTimeM = 			moment(startDate + " " + startTime, "YYYY-MM-DD hh:mm:A"),
    		endTimeM = 				moment(endDate + " " + endTime, "YYYY-MM-DD hh:mm:A"),
    		theDiff = 				moment.duration(endTimeM - startTimeM),
        	days = 					theDiff.days(),
        	hours = 				theDiff.hours(),
        	minutes = 				theDiff.minutes(),
        	seconds = 				theDiff.seconds(),        	
        	timeString = 			"";
        	        	
        	if((hours <= 0) && (minutes <= 0)) {
        		timeString = 		"Start time must be before end time";
        	}
        	//Added on [12.30.2k15]
        	if(days > 0) {			timeString +=  days + "d ";	}
        	if(hours > 0) {			timeString +=  hours + "h ";	}
        	if(minutes > 0) {		timeString +=  minutes + "m ";	}
    		$("#editManualTimeDisplay_" + timeID).html("approx. " + timeString);
    }
    function getAddTimeEntryForm(objectType,objectID,taskID) {
    	$.ajax({	type: "POST",	url: "/admin/fn/time/getAddTimeEntryForm/",
			data: {clientID: '12295', objectType: objectType, objectID: objectID, taskID: taskID },
			success: function(   data   ){
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					
					modalContent = 			'<div class="modalBorderBox" style="width: 650px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-timer-2"></i> Add Time Entry </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="closeAddTimeEntryForm();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
					
					$('#timerManualStartDate').jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					$('input#timerManualStartTime_chooser').timepicker('destroy');
					$('input#timerManualEndTime_chooser').timepicker('destroy');
					$('input#timerManualStartTime_chooser').timepicker({
						interval: 15,
						timeFormat: 'h:mm p',						scrollbar: true,
						change: function(time) {
				            var picker = $(this).timepicker({timeFormat: 'h:mm p'}),
				            	fieldID = 	$(this).attr('id').replace('_chooser','');
				            	$("#" + fieldID).val(formatAMPM(time));
				            	updateManualTimeDisplay();
				        }
					});
					$('input#timerManualEndTime_chooser').timepicker({
						interval: 15,
						timeFormat: 'h:mm p',						scrollbar: true,
						change: function(time) {
				            var picker = $(this).timepicker({timeFormat: 'h:mm p'}),
				            	fieldID = 	$(this).attr('id').replace('_chooser','');
				            	$("#" + fieldID).val(formatAMPM(time));
				            	updateManualTimeDisplay();
				        }
					});
					
					$("input[id=timeIsBillable]:checkbox").iButton();
					
					$('input#timerManualStartTime_chooser').change();
					$('input#timerManualEndTime_chooser').change();
					
					if(objectType == 'event') {
						var index = 			$('#eventsTabs a[href="#timetrackerTab"]').parent().index();
			  									$("#eventsTabs").tabs('option','active',index);
					}
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
    }
    function showAddManualEntryForm() {
    	$("#addTimeEntryFormManual").slideDown();
	}
	function cancelAddManualEntryForm() {
		$("#addTimeEntryFormManual").slideUp();
	}
	function closeAddTimeEntryForm() {
		$("#timeEntryAddForm").slideUp();
		modal.close();
	}
    function addManualTimeEntry(objectType,objectID,taskID) {
    	var staffMemberID = 				$("#timeStaffID").val(),
			subject = 						$("#timeSubject").val(),
			notes = 						$("#timeNotes").val(),
			hourlyRate = 					$("#timeHourlyRate").val(),
			date = 							$("#timerManualStartDate").val(),
			startTime = 					$("#timerManualStartTime").val(),
			endTime = 						$("#timerManualEndTime").val(),
			isBillable = 					$("input[name=timeIsBillable]:checked").val(),
			error = 						"",
			errorField = 					$("#timeEntryError");
			errorField.hide();
			if(taskID == "" || taskID == null || taskID == undefined) {
				taskID = 					$("#timeTaskID").val();
			}
			error += 						(subject == "") ? "Please enter a subject for your time entry <br />" : "";
			if(isBillable == "1") {
				error += 					(hourlyRate == "") ? "Please enter an hourly rate <br />" : "";
			}
			if(error == "") {
				$.ajax({	type: "POST",	url: "/admin/fn/time/addManualTimeEntry/",
					data: {clientID: '12295', userID: staffMemberID,objectType: objectType, objectID: objectID, taskID: taskID, subject: subject, notes: notes, date: date, startTime: startTime, endTime: endTime, isBillable: isBillable, hourlyRate: hourlyRate },
					success: function(   data   ){
						var results = 			data.split("{|}");
						if(results[0] == "SUCCESS") {
							getAllActiveTimers();
							closeAddTimeEntryForm();
							displayObjectTimeEntiresListing(objectType, objectID);
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
			} else {
				swal({
					type: 'error',
					title: 'Error',
					html: error
				});
			}
    }
    function deleteTimeEntry(objectType,objectID,timeID) {
		swal({
		    title: 'Are you sure?',
		    html: 'Are you sure you would like to delete this time entry? <br /> This action can NOT be undone!',
		    type: 'warning',
		    showCancelButton: true,
		    confirmButtonColor: '#3085d6',
		    cancelButtonColor: '#d33',
		    confirmButtonText: 'Yes',
		    cancelButtonText: 'No',
		    confirmButtonClass: 'confirm-class',
		    cancelButtonClass: 'cancel-class',
		    closeOnConfirm: true,
		    closeOnCancel: true
		}, function(isConfirm) {
		    if (isConfirm) {
		    	$.ajax({	type: "POST",	url: "/admin/fn/time/deleteObjectTimeEntry/",
					data: {clientID: '12295', timeID: timeID},
					success: function(   data   ){
						var results = 			data.split("{|}");
						if(results[0] == "SUCCESS") {
							displayObjectTimeEntiresListing(objectType, objectID);
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
		    } 
		});
    }
    
    function updateTaxAmount(which,value) {
		$.ajax({type: 'POST',url: '/admin/data/getTaxProfileRate/',
			data: {clientID: '12295',profileID: value},
			success: function(data) {
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					$("#" + which).val(results[1]);
					
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
    function editAllInOneDescription() {
    	$("#theAllInOneTextEditor").slideDown();
    }
    function cancelEditAllInOneDescription() {
    	$("#theAllInOneTextEditor").slideUp();
    	$("#theAllInOneDescriptionField").val($("#theAllInOneTotalDescription").html());
    }
    function updateTheAllInOneDescription() {
    	$("#theAllInOneTextEditor").slideUp();
    	var newValue = 				$("#theAllInOneDescriptionField").val();
    	$("#theAllInOneTotalDescription").html(newValue);
    }
    function getTimeInvoiceForm(objectType,objectID,taskID) {
    	$.ajax({	type: "POST",	url: "/admin/fn/time/getTimeInvoiceForm/",
			data: {clientID: '12295', objectType: objectType, objectID: objectID, taskID: taskID },
			success: function(   data   ){
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					
					modalContent = 			'<div class="modalBorderBox" style="width: 650px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-bill-1"></i> Invoice Billable Time </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="closeAddTimeEntryForm();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
										
					$("#invIssueDate").jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					$("#invDueDate").jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
    }
    function createNewInvoiceFromTime(objectType,objectID,taskID) {
    	var issue = 				$("#invIssueDate").val(),
			due = 					$("#invDueDate").val(),
			invID = 				$("#invCustomID").val(),
			poNum = 				$("#invPONum").val(),
			
			tax = 					$("#invTax").val(),
			tax1 = 					$("#invTaxRate2").val(),
			tax2 = 					$("#invTaxRate3").val(),
			
			taxProfileID = 			$("#taxRateCombo_1").val(),
			tax1ProfileID = 		$("#taxRateCombo_2").val(),
			tax2ProfileID = 		$("#taxRateCombo_3").val(),
			
			subj = 					$("#invSubject").val(),
			notes = 				$("#invNotes").val(),
			howToPopulate = 		$("#howToPopulate").val(),
			term = 					$("#terms").val(),
			type = 					$("#invObjType").val(), //0 = invoice, 1 = project, 2 = general, 3 = workshop, 4 = RedCart, 5 = ShootProof
			brand = 				$("#invBrandID").val(),
			reminderTemp = 			$("#reminderTemplate").val(),
			allInOneDesc = 			$("#theAllInOneDescriptionField").val(),
			hourlyRateForAll = 		$("#hourlyRateForAll").val(),
			error = 				"",
			errorField = 			$("#invoiceModalError");
			
			errorField.hide();
			
		if(brand == "" || brand == "0") {		error += ("You must choose a brand for this Invoice<br />");		}
		if(howToPopulate==""){	error += ("How to populate the invoice is required. <br />");	}
		if(issue==""){	error += ("Issue Date is required. <br />");	}
		if(due==""){	error += ("Due Date is required<br />");		}
		if(tax==""){	error += ("Tax % is required <br />");			}
		
		if(howToPopulate == "allinone" || howToPopulate == "allinonetax") {
			if(hourlyRateForAll==""){	error += ("Please enter in the hourly rate...<br />");			}
		}
		
		if(error == "") {
			$.ajax({	type: "POST",	url: "/admin/fn/time/addTimeInvoice/",
			   data: { clientID: '12295',objectType: objectType, objectID: objectID, issue: issue,
			   			due: due, invID: invID, poNum: poNum, tax: tax, tax1: tax1, tax2: tax2, taxProfileID: taxProfileID, tax1ProfileID: tax1ProfileID, tax2ProfileID: tax2ProfileID,
			   			subj: subj, notes: notes, howToPopulate: howToPopulate, term: term,
			   			type: type, brand: brand, reminderTemp: reminderTemp, taskID: taskID, allInOneDesc: allInOneDesc, hourlyRateForAll: hourlyRateForAll },
			   success: function(   data   ){
					var results = 			data.split("{|}");
					if(results[0] == "SUCCESS") {
						
						cancelNewInvoiceFromTime();
						displayObjectTimeEntiresListing(objectType,objectID);

						swal({
						    title: 'Success!',
						    html: 'Would you like to edit the new invoice now?',
						    type: 'success',
						    showCancelButton: true,
						    confirmButtonColor: '#3085d6',
						    cancelButtonColor: '#d33',
						    confirmButtonText: 'Yes',
						    cancelButtonText: 'No',
						    confirmButtonClass: 'confirm-class',
						    cancelButtonClass: 'cancel-class',
						    closeOnConfirm: true,
						    closeOnCancel: true
						}, function(isConfirm) {
						    if (isConfirm) {
						    	location.href="/admin/invoices/" + results[1] + "/?autoStart=edit";
						    } 
						});
						
					} else {
						swal({
							type: 'error',
							title: 'Error',
							html: results[1]
						});
					}
				}
			});
		} else {
			swal({
				type: 'error',
				title: 'Error',
				html: error
			});
		}
    }
    function cancelNewInvoiceFromTime(objectType,objectID,taskID) {
    	modal.close();
    }
    
    
    
	function startTimer(objectType,objectID,taskID) {
		var staffMemberID = 				$("#timeStaffID").val(),
			subject = 						$("#timeSubject").val(),
			notes = 						$("#timeNotes").val(),
			isBillable = 					$("input[name=timeIsBillable]:checked").val(),
			hourlyRate = 					$("#timeHourlyRate").val(),
			error = 						"",
			errorField = 					$("#timeEntryError");
			errorField.hide();
			if(taskID == "" || taskID == null || taskID == undefined) {
				taskID = 					$("#timeTaskID").val();
			}
			error += 						(subject == "") ? "Please enter what you want to work on for your time entry <br />" : "";
			if(error == "") {
				$.ajax({	type: "POST",	url: "/admin/fn/time/startTimeEntry/",
					data: {clientID: '12295', userID: staffMemberID,objectType: objectType, objectID: objectID, taskID: taskID, subject: subject, notes: notes, isBillable: isBillable, hourlyRate: hourlyRate },
					success: function(   data   ){
						var results = 			data.split("{|}");
						if(results[0] == "SUCCESS") {
							getAllActiveTimers();
							closeAddTimeEntryForm();
							displayObjectTimeEntiresListing(objectType, objectID);
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
			} else {
				swal({
					type: 'error',
					title: 'Error',
					html: error
				});
			}
	}
	function displayObjectTimeEntiresListing(objectType, objectID) {
		var errorField = 					$("#timersErrors");
			errorField.hide();
		$.ajax({	type: "POST",	url: "/admin/fn/time/displayObjectTimeEntiresListing/",
			data: {clientID: '12295',objectType: objectType, objectID: objectID},
			success: function(   data   ){
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#timersListing").html(results[1]);
					$("#timeListingTotals").html(results[2]);
					$(function () {
						$('.progress-bar[data-toggle="popover"]').popover({
							trigger: 'hover',
					        'placement': 'bottom',
					        'show': true,
					        container: 'body'
						});
						
						$('.billableIcon[data-toggle="popover"]').popover({
							trigger: 'hover',
					        'placement': 'top',
					        'show': true,
					        container: 'body'
						});
						
						getObjectTimeSummaryPie(objectType, objectID);
						getObjectTimeInvoicedVsUnInvoicedPie(objectType,objectID);
						getObjectTimeBillableVsNonBillablePie(objectType,objectID);
						
					});
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	
	function cancelEditTimeEntry() {
		modal.close();
	}
	function editTimeEntry(objectType,objectID,timeID) {
		$.ajax({	type: "POST",	url: "/admin/fn/time/getTimeEntryEditForm/",
			data: {clientID: '12295', objectType: objectType, objectID: objectID, timeID: timeID },
			success: function(   data   ){
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					
					
					modalContent = 			'<div class="modalBorderBox" style="width: 650px;">';
					modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-timer-2"></i> Edit Time Entry </div>';
					modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelEditTimeEntry();" ><span class="icon-cancel"></span></a></div>';
					modalContent += 				'</div>';
					modalContent += 				results[1];
					modalContent += 			'</div>';
					modal.open({content: modalContent});
					
										
					$('#timerManualStartDate_' + timeID).jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					$('#timerManualEndDate_' + timeID).jdPicker({
						date_format: 'mm/dd/YYYY',
						start_of_week: 0					});
					$('input#timerManualStartTime_' + timeID + '_chooser').timepicker('destroy');
					$('input#timerManualEndTime_' + timeID + '_chooser').timepicker('destroy');
					$('input#timerManualStartTime_' + timeID + '_chooser').timepicker({
						interval: 15,
						timeFormat: 'h:mm p',						scrollbar: true,
						change: function(time) {
				            var picker = $(this).timepicker({timeFormat: 'h:mm p'}),
				            	fieldID = 	$(this).attr('id').replace('_chooser','');
				            	$("#" + fieldID).val(formatAMPM(time));
				            	updateManualTimeDisplayEditScreen(timeID);
				        }
					});
					$('input#timerManualEndTime_' + timeID + '_chooser').timepicker({
						interval: 15,
						timeFormat: 'h:mm p',						scrollbar: true,
						change: function(time) {
				            var picker = $(this).timepicker({timeFormat: 'h:mm p'}),
				            	fieldID = 	$(this).attr('id').replace('_chooser','');
				            	$("#" + fieldID).val(formatAMPM(time));
				            	updateManualTimeDisplayEditScreen(timeID);
				        }
					});
					
					$('input#timerManualStartTime_' + timeID + '_chooser').change();
					$('input#timerManualEndTime_' + timeID + '_chooser').change();
					
					$("input[id=timeIsBillable_" + timeID + "]:checkbox").iButton();
					
					updateManualTimeDisplayEditScreen(timeID);
									
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	function updateTimeEntry(objectType,objectID,timeID) {
		var staffMemberID = 				$("#timeStaffID_" + timeID).val(),
			subject = 						$("#timeSubject_" + timeID).val(),
			notes = 						$("#timeNotes_" + timeID).val(),
			taskID = 						$("#timeTaskID_" + timeID).val(),
			isBillable = 					$("input[name=timeIsBillable_" + timeID + "]:checked").val(),
			hourlyRate = 					$("#timeHourlyRate_" + timeID).val(),
			date = 							$("#timerManualStartDate_" + timeID).val(),
			endDate = 						$("#timerManualEndDate_" + timeID).val(),
			startTime = 					$("#timerManualStartTime_" + timeID).val(),
			endTime = 						$("#timerManualEndTime_" + timeID).val(),
			
			error = 						"",
			errorField = 					$("#timeEntryError");
			errorField.hide();
			
			
			
			error += 						(subject == "") ? "Please enter what you want to work on for your time entry <br />" : "";
			if(error == "") {
				$.ajax({	type: "POST",	url: "/admin/fn/time/updateTimeEntry/",
					data: {clientID: '12295', timeID: timeID,taskID: taskID,  userID: staffMemberID,objectType: objectType, objectID: objectID, subject: subject, notes: notes, isBillable: isBillable,
							date: date, endDate: endDate, startTime: startTime,endTime: endTime, hourlyRate: hourlyRate  },
					success: function(   data   ){
						var results = 			data.split("{|}");
						if(results[0] == "SUCCESS") {
							
							
							
							cancelEditTimeEntry();
							displayObjectTimeEntiresListing(objectType, objectID);
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
			} else {
				swal({
					type: 'error',
					title: 'Error',
					html: error
				});
			}
	}
	function getStaffHourlyRate(staffID) {
		$.ajax({	type: "POST",	url: "/admin/data/getStaffHourlyRate/",
			data: {clientID: '12295', staffID: staffID},
			success: function(   data   ){
				var results = 			data.split("{|}");
				if(results[0] == "SUCCESS") {
					$("#timeHourlyRate").val(results[1]);
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: results[1]
					});
				}
			}
		});
	}
	
</script>
					    </div>
    <!-- Inner Content -->
    				</div>
				
				
						
	            <div id="invoicesTab" class="ui-tabs-hide" >
					    <!-- Inner Content -->
    <div class="tab-content">
    	
							<script type="text/javascript">
			$(function() {
									$("#leadsTabs").tabs().on( "tabsactivate", function( event, ui ) {
					  		var tabID = 	$(ui.newPanel).attr('id');
							if(tabID == "invoicesTab") {
								getObjectInvoiceListing();
					  		}
					  	});
									});
			
			function getObjectInvoiceListing() {
				$("#objectInvoicesLoading").show();
				$.ajax({	type: "POST",	url: "/admin/data/getObjectInvoiceListing/",
				   data: { clientID: '12295', objectType: 'lead', objectID: '1615775' },
				   success: function(   data   ){
				   		$("#objectInvoicesLoading").hide();
						var results = 			data.split("{|}");
						if(results[0] == "SUCCESS") {
							$("#invoicesDIV").html(results[1]);
							$("#invoicesArchivedDIV").html(results[2]);
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
			}
		
		
			function toggleEvtProj(value) {
				if(value != "") {
					switch(value) {
						case "0":	$('#project_cbx').hide();	$("#event_cbx").show();		$("#general_cbx").hide();		break;
						case "1":	$('#project_cbx').show();	$("#event_cbx").hide();		$("#general_cbx").hide();		break;
						case "2":	$('#project_cbx').hide();	$("#event_cbx").hide();		$("#general_cbx").show();		break;
					}
				} else {
					$('#project_cbx').hide();	$("#event_cbx").show();		$("#general_cbx").hide();
				}
			}
			
			function managetTemplatesSwitch() {
				
				$("#invoiceTabs").tabs( "option", "active",2);
				
			}
			function toggleAutoPaymentField(value) {
				if(value != "") {
					$('#autopayment').show();
				} else {
					$('#autopayment').hide();
					$("#terms").val("");
				}
			}
			function updateTaxAmount(which,value) {
				$.ajax({type: 'POST',url: '/admin/data/getTaxProfileRate/',
					data: {clientID: '12295',profileID: value},
					success: function(data) {
						var results = 			data.split("{|}");
						if(results[0] == "SUCCESS") {
							
							$("#" + which).val(results[1]);
							
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
			}
			function addQuote() {
				$.ajax({type: 'POST',url: '/admin/data/getAddInvoiceForm/',
					data: {clientID: '12295', quote: 'yes' 
					,leadID: '1615775'					},
					success: function(data) {
						var results = 			data.split("{|}");
						if(results[0] == "SUCCESS") {
							
							
							modalContent = 			'<div class="modalBorderBox" style="width: 750px;">';
							modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-doc"></i> Add Estimate/Quote </div>';
							modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelAddInvoice();" ><span class="icon-cancel"></span></a></div>';
							modalContent += 				'</div>';
							modalContent += 				results[1];
							modalContent += 			'</div>';
							modal.open({content: modalContent});
							
							
							
							toggleEvtProj($('#invObjType').val());
							
							
							$("#invIssueDate").jdPicker({
								date_format: 'mm/dd/YYYY',
								start_of_week: 0							});
							$("#invDueDate").jdPicker({
								date_format: 'mm/dd/YYYY',
								start_of_week: 0							});
							
							$('#modalContent [data-toggle="popover"]').popover({
						        trigger: 'hover',
						        'placement': 'top',
						        'show': true,
						        container: 'body'
						    });
							
													
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
			}
			function addInvoice() {
			
				$.ajax({type: 'POST',url: '/admin/data/getAddInvoiceForm/',
					data: {clientID: '12295'
					,leadID: '1615775'					},
					success: function(data) {
						var results = 			data.split("{|}");
						if(results[0] == "SUCCESS") {
							
							
							modalContent = 			'<div class="modalBorderBox" style="width: 750px;">';
							modalContent += 				'<div class="modalHeader"><div class="leftTitle headerTitle"><i class="icon-doc"></i> Add Invoice </div>';
							modalContent += 				'<div class="rightTitle"><a href="javascript:void(0);" onclick="cancelAddInvoice();" ><span class="icon-cancel"></span></a></div>';
							modalContent += 				'</div>';
							modalContent += 				results[1];
							modalContent += 			'</div>';
							modal.open({content: modalContent});
							
							
							
							toggleEvtProj($('#invObjType').val());
							
							
							$("#invIssueDate").jdPicker({
								date_format: 'mm/dd/YYYY',
								start_of_week: 0							});
							$("#invDueDate").jdPicker({
								date_format: 'mm/dd/YYYY',
								start_of_week: 0							});
							
							$('#modalContent [data-toggle="popover"]').popover({
						        trigger: 'hover',
						        'placement': 'top',
						        'show': true,
						        container: 'body'
						    });
							
						    													
						} else {
							swal({
								type: 'error',
								title: 'Error',
								html: results[1]
							});
						}
					}
				});
			};
			function cancelAddInvoice() {
				
				modal.close();
			}
			
			function saveInvoice() {
				var evtID = 		$("#invEvtID").val(),
					projID = 		$("#invEvtID_proj").val(),
					leadID = 		$("#invEvtID").val(),
					issue = 		$("#invIssueDate").val(),
					due = 			$("#invDueDate").val(),
					invID = 		$("#invCustomID").val(),
					poNum = 		$("#invPONum").val(),
					
					tax = 			$("#invTax").val(),
					tax1 = 			$("#invTaxRate2").val(),
					tax2 = 			$("#invTaxRate3").val(),
					
					taxProfileID = 	$("#taxRateCombo_1").val(),
					tax1ProfileID = $("#taxRateCombo_2").val(),
					tax2ProfileID = $("#taxRateCombo_3").val(),
					
					subj = 			$("#invSubject").val(),
					notes = 		$("#invNotes").val(),
					pkg = 			$("#package").val(),
					pkgOptions = 	$("#packageOptions").val(),
					term = 			$("#terms").val(),
					type = 			$("#invObjType").val(),
					brand = 		$("#invBrandID").val(),
					reminderTemp = 	$("#reminderTemplate").val(),
					generalClient = $("#invGeneralClientText").val(),
					customerID = 	$("#invCustomerID").val(),
					
					isEstimate = 	$("#invEstimateOrInvoice").val(),
					
					error = 		"",
					errorField = 	$("#invoiceError");
					
					errorField.hide();
					
					$("#saveInvoiceBtn").attr('disabled',true);
					
				if(brand == "" || brand == "0") {		error += ("You must choose a brand for this Invoice<br />");		}
				if(type == "" || type == "0") {			
					if(evtID=="") {						error += ("Event is required <br />");					}
				} else if(type == "1"){
					if(projID == "") {					error += ("Project is required <br />");				}
				} else if(type == "6"){
					if(leadID == "") {					error += ("Lead is required <br />");				}
				}
				
				if(issue==""){	error += ("Issue Date is required. <br />");	}
				if(due==""){	error += ("Due Date is required<br />");		}
				if(tax==""){	error += ("Tax % is required <br />");			}
				
				if(generalClient == "Enter a name") {
					generalClient = "";
				}
				
				if(error == "") {
					var eventProjID = 		(type == 0) ? evtID : (type == 6) ? leadID : projID;
					$.ajax({	type: "POST",	url: "/admin/data/addInvoice/",
							   data: { clientID: '12295',eventID: eventProjID, issue: issue,
							   			due: due, invID: invID, poNum: poNum, tax: tax, tax1: tax1, tax2: tax2, taxProfileID: taxProfileID, tax1ProfileID: tax1ProfileID, tax2ProfileID: tax2ProfileID,
							   			subj: subj, notes: notes, pkg: pkg, pkgOptions: pkgOptions, term: term,
							   			type: type, brand: brand, reminderTemp: reminderTemp, generalClient: generalClient, customerID: customerID, isEstimate: isEstimate},
							   success: function(   data   ){
									var results = 			data.split("{|}");
									if(results[0] == "SUCCESS") {
										
										cancelAddInvoice();
										
										$("#invoicesDIV").append(results[1]);
										
										swal({
										    title: 'Success!',
										    html: 'Would you like to edit the new invoice now?',
										    type: 'success',
										    showCancelButton: true,
										    confirmButtonColor: '#3085d6',
										    cancelButtonColor: '#d33',
										    confirmButtonText: 'Yes',
										    cancelButtonText: 'No',
										    confirmButtonClass: 'confirm-class',
										    cancelButtonClass: 'cancel-class',
										    closeOnConfirm: true,
										    closeOnCancel: true
										}, function(isConfirm) {
										    if (isConfirm) {
										    	location.href="/admin/invoices/" + results[2] + "/?autoStart=edit";
										    } 
										});
										
									} else {
										swal({
											type: 'error',
											title: 'Error',
											html: results[1]
										});
										$("#saveInvoiceBtn").attr('disabled',false);
									}
								}
					});
				} else {
					swal({
						type: 'error',
						title: 'Error',
						html: error
					});
					$("#saveInvoiceBtn").attr('disabled',false);
				}
			};
			
			
			function duplicateInvoice(invoiceID) {
				swal({
				    title: 'Are you sure?',
				    html: 'Are you sure you want to duplicate this Invoice?',
				    type: 'warning',
				    showCancelButton: true,
				    confirmButtonColor: '#3085d6',
				    cancelButtonColor: '#d33',
				    confirmButtonText: 'Yes',
				    cancelButtonText: 'No',
				    confirmButtonClass: 'confirm-class',
				    cancelButtonClass: 'cancel-class',
				    closeOnConfirm: false,
				    closeOnCancel: true
				}, function(isConfirm) {
				    if (isConfirm) {
				    	$.ajax({	type: "POST",	url: "/admin/data/duplicateInvoice/",
							data: {clientID: '12295', invoiceID: invoiceID},
							success: function(   data   ){
								var results = data.split("{|}");
								if(results[0] == "SUCCESS") {									
									
									swal({
									    title: 'Success!',
									    html: 'Would you like to go and edit the new Invoice?',
									    type: 'success',
									    showCancelButton: true,
									    confirmButtonColor: '#3085d6',
									    cancelButtonColor: '#d33',
									    confirmButtonText: 'Yes',
									    cancelButtonText: 'No',
									    confirmButtonClass: 'confirm-class',
									    cancelButtonClass: 'cancel-class',
									    closeOnConfirm: true,
									    closeOnCancel: true
									}, function(isConfirm) {
									    if (isConfirm) {
									    	
											location.href="/admin/invoices/" + results[1] + "/?autoStart=edit";
										
									    } 
									});
									
								} else {
									swal({
										type: 'error',
										title: 'Error',
										html: results[1]
									});
								}
							}
						});
				    } 
				});
			}
			
		</script>
		<div class="headerTitle leftTitle"><i class="icon-doc"></i> Estimates/Quotes: </div>
		<div id="objectInvoicesLoading" class="hidden" style="float: left; margin-left: 10px;">
			<div class="dot-container ">
				<div class="dot"></div>
				<div class="dot"></div>
				<div class="dot"></div>
				<div class="dot"></div>
				<div class="dot"></div>
			</div>
		</div>
		<div class="rightTitle">
			<a href="javascript:void(0);" class="btn btn-default btn-sm" onclick="addQuote();"><i class="fa fa-plus font-green-jungle"></i> Create New Estimate/Quote </a>					</div>
		<br style="clear: both;" />
		<br style="clear: both;" />
		
		<div class="tableHeaderDIV alternateThinRowStyle">
			<div class="floatHeader" style="width: 80px;">Status</div>
			<div class="floatHeader">Due In</div>
			<div class="floatHeader">Issue Date</div>
			<div class="floatHeader" style="width: 100px;">ID</div>
			<div class="floatHeader" style="width: 150px;">Event</div>
			<div class="floatHeader" style="width: 150px;">Owner Object</div>
			<div class="floatHeader" style="width: 80px;">Total</div>
			<div class="floatHeader" style="width: 100px;">Balance</div>
			<div id="invoicesArchivedDIV"></div>
			<br />
		</div>
		<div id="invoicesDIV" >
		
		</div>
							    </div>
    <!-- Inner Content -->
    	
				</div>
				
				
			
			</div> <!-- end of tabs -->
			<!-- Create Tabs Here -->
			    </div>
    </div>
    </div>
    		</div>
<!--</div></div>-->
				
				
				
				
	</form>
		</div>   
<div id="navipane" style="position: relative; float: left; width: 280px; margin: 10px; padding: 10px; background-color: #272727; display: none;"></div>
        </div>
      </div>
          </div>
  </div>
  

  <div id="globalDialog"></div>
  <div id="globalSMSDialog"></div>
  <div id="globalFilePickerDialog"></div>
  <div id="globalPackagePreviewDialog"></div>
  <div id="globalTokenChooserDialog"></div>
  <div id="globalCommentsDialog"></div>
  <div id="globalQuestionnaireDialog"></div>
  <div id="globalClientPreviewDialog"></div>
  <div id="globalLocationDialog"></div>
  <div id="globalCategoryDialog"></div>

<!--  <div class="page-footer">-->
<!--    <div class="page-footer-inner">-->
<!--      --><!-- &copy; Pixifi-->
<!--    </div>-->
<!--  </div>-->
<!--  <div class="scroll-to-top">-->
<!--    <i class="icon-arrow-1-circle-up"></i>-->
<!--  </div>-->
</div>


<!--
///////////////////////////////////////////////////////////////////
//////////     MODAL Favorites     //////////
///////////////////////////////////////////////////////////////
-->
<div id="addFavoritesDialog" class="modal fade md-slideUp" tabindex="-1" data-width="650"  data-header-color="theme-inverse">
		<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
				<h4 class="modal-title"><i class="fa fa-star-o fa-2x"></i> Add Favorites</h4>
		</div>
		<!-- //modal-header-->
		<div class="modal-body" style="padding:0">
			<div class="widget-im">

					<div class="note note-info note-bordered">You can edit these favorites anytime by going to your profile in the Staff module and editing them there...</div>

					<br style="clear: both;" />
		    		<br style="clear: both;" />



					<div class="normalThinRowStyle" >
		            	<div class='leftTitle' ><strong>Top 5 Favorite/Most Used Modules:</strong></div>
		                <div class='rightTitle' >    <select id="favoriteModulesAdd" name="favoriteModulesAdd" style="width: 250px;"  multiple="multiple" data-role="none"  class="">
    	<option value="leads"   >Leads</option>
<option value="leadsadd"   >Add Lead</option>
<option value="clients"   >Clients</option>
<option value="clientsadd"   >Add Client</option>
<option value="vendors"   >Vendors</option>
<option value="events"   >Events</option>
<option value="eventslisting"   >Events Listing</option>
<option value="eventsadd"   >Add Event</option>
<option value="projects"   >Projects</option>
<option value="projectsadd"   >Add Project</option>
<option value="tasks"   >Tasks</option>
<option value="workshops"   >Workshops</option>
<option value="contracts"   >Contracts</option>
<option value="proposals"   >Proposals</option>
<option value="money"   >Money</option>
<option value="invoices"   >Invoices</option>
<option value="mileage"   >Mileage</option>
<option value="communication"   >Communication</option>
<option value="locations"   >Locations</option>
<option value="products"   >Products</option>
<option value="packages"   >Packages</option>
<option value="pricing"   >Pricing Pages</option>
<option value="productions"   >Productions</option>
<option value="bookingpages"   >Booking Pages</option>
<option value="appsettings"   >Application Settings</option>
<option value="account"   >Account</option>
<option value="subscription"   >Subscription</option>
<option value="brands"   >Brands</option>
<option value="types"   >Lists/Types</option>
<option value="merchant"   >Merchant</option>
<option value="external"   >External</option>
<option value="sharing"   >Sharing</option>
<option value="staff"   >Staff</option>
<option value="referrals"   >Referrals</option>
<option value="giftcards"   >Gift Cards</option>
<option value="giftcardpages"   >Gift Card Pages</option>
    </select>
    </div><br />
		                <div class="clearSmall" ></div><br style="clear: both;" />
		    		</div>

		    		<br style="clear: both;" />
		    		<br style="clear: both;" />

					<br style="clear: both;" />
		    		<br style="clear: both;" />
					<div class="btn-group save-cancel-group">
						<button type="button" class="btn blue btn-sm" onclick="saveFavorites();"><span class="fa fa-check"></span> Save</button>
						<button type="button" class="btn default btn-sm" data-dismiss="modal" aria-hidden="true" > Cancel</button>
					</div>
			</div>
		</div>
		<!-- //modal-body-->
</div>
<!-- //modal-->


<!--
///////////////////////////////////////////////////////////////
//////////     MODAL DASHBOARD     ////////////////////////////
///////////////////////////////////////////////////////////////
-->
<div id="dashboardSettingsDialog" class="modal fade md-slideUp" tabindex="-1" data-width="650"  data-header-color="theme-inverse">
		<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
				<h4 class="modal-title" style="width: 280px;"><i class="fa fa-dashboard fa-2x"></i> Dashboard Widgets</h4>
		</div>
		<!-- //modal-header-->
		<div class="modal-body" style="padding:0">
			<div class="widget-im" style="padding-top: 5px;">

					<style type="text/css">
					.widgetContainer { float: left; }
					#availableDashboardItems, #currentDashboardItems { list-style-type: none; margin: 0; padding: 0 0 2.5em; padding-top: 5px; float: left; margin-right: 10px; min-width: 220px; }
					#availableDashboardItems li, #currentDashboardItems li { margin: 0 5px 2px 5px; padding: 2px; font-size: 0.9em; }
					#availableDashboardItems li img , #currentDashboardItems li img { width: 20px; }
					</style>

					<div class="note note-info note-bordered">
					To change the layout of your dashboard just drag a widget from your Available Widgets section to the Dashboard Widgets section.
					Then you can drag and drop the Dashboard widgets section to specify which order you want them to appear.
					</div>

					<script>


					function openDashboardSettingsDialog() {
						$("#dashboardSettingsDialog").modal('show');

						$(function() {
							$( "#availableDashboardItems, #currentDashboardItems" ).sortable({
								placeholder: "dragPlaceHolder",
								forcePlaceholderSize: true,
								forceHelperSize: true,
								opacity: 0.01,
								helper: "clone",
								connectWith: ".connectedSortable"
							}).disableSelection();
						});

					}
					function saveDashboardLayout() {
						var arrayItems = 			$('#currentDashboardItems').sortable("toArray"),
							items = 				$.JSON.encode(arrayItems);

						$.ajax({	type: "POST",	url: "/admin/data/updateDashboardItems/",
							data: {clientID: '12295',userID: '26818', items: items},
							success: function(   data   ){
								var results = data.split("{|}");
								if(results[0] == "SUCCESS") {
									$("#dashboardSettingsDialog").modal('hide');
									location.href='/admin/';
								} else {
									alert("ERROR:" + results[1]);
								}
							}
						});
					}
					</script>

					
				  	<div class="widgetContainer">
					  	<div class="headerTitle">Available Widgets:</div>
					  	<br style="clear: both; " />
						<ul id="availableDashboardItems" class="greenBorderBox connectedSortable">
							<li id="financial.outlook" class="ui-state-default"><span class="fa fa-bar-chart"></span> Financial Outlook</li><li id="event.pipeline" class="ui-state-default"><span class="icon-speedometer"></span> Event Pipeline</li><li id="recent.events" class="ui-state-default"><span class="icon-calendar"></span> Recent Events</li><li id="lead.pipeline" class="ui-state-default"><span class="icon-speedometer"></span> Lead Pipeline</li><li id="calendar" class="ui-state-default"><span class="icon-calendar"></span> Calendars</li><li id="product.pipeline" class="ui-state-default"><span class="icon-speedometer"></span> Pipeline</li><li id="projects" class="ui-state-default"><span class="icon-notebook"></span> Projects</li><li id="project.pipeline" class="ui-state-default"><span class="icon-speedometer"></span> Project Pipeline</li><li id="communication" class="ui-state-default"><span class="icon-phone-message-3"></span> Scheduled Communication</li><li id="weather" class="ui-state-default"><span class="fa fa-sun-o"></span> Weather</li><li id="thisweek" class="ui-state-default"><span class="icon-calendar"></span> This Week</li><li id="workflow.visualizer" class="ui-state-default"><span class="fa fa-sliders"></span> Workflow Visualizer</li><li id="money.payments.chart" class="ui-state-default"><span class="fa fa-bar-chart"></span> Payments Received Chart</li><li id="weekly.income" class="ui-state-default"><span class="fa fa-bar-chart"></span> Weekly Income Chart</li><li id="events.monthly" class="ui-state-default"><span class="fa fa-bar-chart"></span> Events by Month Chart</li><li id="events.bookings" class="ui-state-default"><span class="fa fa-bar-chart"></span> Bookings by Month Chart</li><li id="money.expenses.chart" class="ui-state-default"><span class="fa fa-pie-chart"></span> Expenses by Year Chart</li><li id="recent.clients" class="ui-state-default"><span class="icon-user"></span> Recent Clients</li><li id="notes" class="ui-state-default"><span class="icon-note"></span> General Notes</li><li id="special.dates" class="ui-state-default"><span class="fa fa-birthday-cake"></span> Special Dates</li><li id="booking.orders" class="ui-state-default"><span class="icon-hand-bill-2"></span> Pending Booking Orders</li><li id="todo.list" class="ui-state-default"><span class="icon-clipboard-check"></span> TODO List</li>						</ul>
					</div>
					<div class="widgetContainer">
						<div class="headerTitle">Dashboard Widgets:</div><br style="clear: both; " />
						<ul id="currentDashboardItems" class="greenBorderBox connectedSortable">
							<li id="goals" class="ui-state-default"><span class="icon-trophy-1 font-yellow-crusta"></span> Goals</li><li id="heartbeat" class="ui-state-default"><span class="icon-pulse"></span> Pulse (snapshot)</li><li id="events" class="ui-state-default"><span class="icon-calendar"></span> Upcoming Events</li><li id="leads" class="ui-state-default"><span class="icon-user"></span> Latest Leads</li><li id="tasks" class="ui-state-default"><span class="fa fa-list-alt"></span> Latest Tasks</li><li id="money" class="ui-state-default"><span class="fa fa-credit-card"></span> Upcoming Payments</li><li id="events.calendar" class="ui-state-default"><span class="icon-calendar"></span> Full Events Calendar</li>						</ul>
					</div>

					<br style="clear: both; " />
					<br style="clear: both; " />
					<div class="btn-group save-cancel-group">
						<button type="button" class="btn blue btn-sm" onclick="saveDashboardLayout();"><span class="fa fa-check"></span> Save</button>
						<button type="button" class="btn default btn-sm" data-dismiss="modal" aria-hidden="true" > Cancel</button>
					</div>


			</div>
		</div>
		<!-- //modal-body-->
</div>
<!-- //modal-->


<style type="text/css">
.center {
	text-align: center;
	margin-left: auto;
	margin-right: auto;
}
.sticky-controls {
	position: fixed;
	left: 0;
	right: 0;
	bottom: 0;
	height: 70px;
	padding: 15px 0;
	background-color: rgba(255, 255, 255, 0.79);
	border-top: 1px solid #dadada;
	z-index: 500;
}

#globalFilePickerDialog .popover.top {
	margin-top: -30px;
}
.quickbooks_icon {
	background-image: url(/admin/images/quickbooks_logo.png);
	background-size: cover;
	width: 16px;
	height: 16px;
	display: inline-block;
}


.checkerDIV:not(#foo) > span > input[type='radio'],
.checkerDIV:not(#foo) > span > input[type='checkbox'] {

    /* Hide the input, but have it still be clickable */
    opacity: 0;
	cursor: pointer;
    float: left;
    width: 18px;
    height: 18px;
}

.checkerDIV:not(#foo) > span > input[type='radio'] + label,
.checkerDIV:not(#foo) > span > input[type='checkbox'] + label {
    margin: 0;
    clear: none;

    /* Left padding makes room for image */
    padding: 5px 0 4px 24px;

    /* Make look clickable because they are */
    cursor: pointer;
    /* width: 18px; */
    /* height: 18px; */
    background: url(/admin/icons/interface_elements/off.png) left center no-repeat;
    margin-left: -20px;
}

/*
    Change from unchecked to checked graphic
*/
.checkerDIV:not(#foo) > span > input[type='radio']:checked + label {
    background-image: url(/admin/icons/interface_elements/check.png);
    cursor: pointer;
}
.checkerDIV:not(#foo) > span > input[type='checkbox']:checked + label {
    background-image: url(/admin/icons/interface_elements/check.png);
    cursor: pointer;
}

.helpTip {
	border-bottom: 1px dotted #00ABFF;

}
.helpTip i {
	font-size: 16px !important;
	color: #00ABFF;
}
/*
.qtip-pixifi {
	font-size: 14px !important;
	line-height: 16px !important;
	min-width: 400px !important;
}
.qtip-pixifi .qtip-content a {
	color: #FFFFFF !important;
	border-bottom: 1px dotted #FFFFFF !important;
	font-size: 15px;
}
.qtip-content h2 {
	border-bottom: 1px solid #CCCCCC;
	padding-bottom: 5px;
}
*/

.eventNotes a {
	color: #428bca !important;
	text-decoration: underline !important;
}

.textBlock:disabled {
	background: #DADADA !important;
}

.easy-autocomplete-container {
	z-index: 5;
}
.easy-autocomplete-container ul {
	max-height: 400px;
	overflow: auto;
}
.ui-combobox {
	float: left;
	display: block;
	width: 312px;
	height: 30px;
	margin-right: 5px;
	border: 1px solid #DDDDDD;
	-webkit-border-radius: 3px;
	-moz-border-radius: 3px;
	border-radius: 3px;
	position: relative;
	background: #FFFFFF url('/admin/images/combobox_thumb_new.png') center right no-repeat;
}
.overflowGrid { overflow: hidden;
	text-overflow: ellipsis;
	height: 20px;
}
.ui-tabs-nav .ui-state-default a .contractNotSigned span {
	font: normal normal normal 14px/1 FontAwesome !important;
	color: #FFFFFF !important;
	font-size: 10px !important;
}
.contractNotSigned.btn.red-flamingo {
    background: linear-gradient(296deg,#f54654,#fd8966)!important;
    color: #FFFFFF !important;
}

/* new modal style [03.14.2k17] : TH */
.modalHeader {clear: both;margin-bottom: 15px;width: calc(100% + 20px);height: 42px;position: relative;margin-left: -10px;margin-right: -10px;margin-top: -10px;background-color: #3cd3ad;color: #ffffff ;padding-top: 10px;padding-left: 10px;padding-right: 10px;border-top-left-radius: 6px;border-top-right-radius: 6px; box-shadow: inset 0px 1px 0px rgba(255,255,255,.45),0 1px 2px rgba(0,0,0,.2); border-top: 1px solid #3cd3ad; background: linear-gradient(45deg, #3cd3ad, #4CB8C4);}
.modalHeader:after {position: absolute;top: 41px;left: 50%;margin-left: -45%;content: '';width: 0;height: 0;border-left: solid 6px transparent;border-right: solid 6px transparent;border-top: solid 8px #3dd1ae;}
.modalHeader .icon-cancel {color: #fff ;font-size: 12px ;}
.modalHeader .minimizeBtn, .modalHeader .maximizeBtn {color: #fff ;}
.modalHeader .helpTip i { color: #FFF ;font-size: 16px ;}
.modalBorderBox .btn.blue {background: linear-gradient(45deg, #3cd3ad, #4CB8C4) !important; height: 34px ;}
.modalBorderBox .btn.default {background-color: #f5f5f5; font-size: 11px;color: #797979;}
.modalBorderBox {overflow:unset ;margin: 10px; padding: 10px;background-color: #fff;border: 0px solid ;text-align: left;height: auto;-moz-border-radius: .6em;-webkit-border-radius: .6em;border-radius: .6em;-webkit-box-shadow: 0px 2px 26px 2px rgba(0,0,0,0.47);-moz-box-shadow: 0px 2px 26px 2px rgba(0,0,0,0.47);box-shadow: 0px 2px 26px 2px rgba(0,0,0,0.47);}
/* new modal style for tours [03.31.2k17] : TH */
.popover-title {
    background-color: #3cd3ad !important;
    color: #ffffff !important;
    background: linear-gradient(45deg, #3cd3ad, #4CB8C4);
}
.popover-navigation *[data-role="next"] {
    background-color: #3cd3ad !important;
    color: #ffffff !important;
    background: linear-gradient(45deg, #3cd3ad, #4CB8C4);
}

#attachmentListing .popover { z-index: 999999999 !important; }

.footer-updates { float: right; margin-left: 30px; }
.footer-updates-text { float: left; }
.footer-updates-badge { float: left; margin-left: 5px;}

    .footer-updates-badge {
        float: left;
        margin-left: 5px;
    }

    .flowCompleteBtn {
        background-color: #3cd3ad;
        background: linear-gradient(45deg, #3cd3ad, #4CB8C4) !important;
    }

    .flowCompleteBtn:hover {
        background-color: #3cd3ad;
        background: linear-gradient(45deg, #3cd3ad, #4CB8C4) !important;
    }


.fileIcons li {
    height: 75px; /* fixed on [11.29.2k17] : TH */
}

/* new delete slide out button */
.small-text-w, .smallx10-text-w, .medium-text-w, .mediumx10-text-w {
    width: 0px;
    opacity: 0;
    float: right;
    transition-property: all!important;
    transition-duration: 0.9s!important;
    transition-timing-function: cubic-bezier(.25,.91,.12,1);
}
.animated-fade-in {
    -webkit-transition: opacity 0.5s cubic-bezier(0.165, 0.84, 0.44, 1);
    -moz-transition: opacity 0.5s cubic-bezier(0.165, 0.84, 0.44, 1);
    -o-transition: opacity 0.5s cubic-bezier(0.165, 0.84, 0.44, 1);
    transition: opacity 0.5s cubic-bezier(0.165, 0.84, 0.44, 1);
}
.animated-btn {
    transition-property: width, height, top, left, background-color;
    transition-duration: 0.8s;
    transition-timing-function: cubic-bezier(.25,.91,.12,1);
    overflow: hidden;
}
/*.animated-btn.btn-xs {
	width: 25px;
    height: 25px;
}*/
.animated-btn.btn-xs:hover {
    width: auto;
}
.animated-btn.btn-sm:hover {
    width: auto;
}
.animated-btn.btn-sm.medium-btn-w:hover {
    width: auto;
}
.animated-btn.btn-xs.medium-btn-w:hover {
    width: auto;
}
.animated-btn:hover .small-text-w, .animated-btn:hover .smallx10-text-w, .animated-btn:hover .medium-text-w, .animated-btn:hover .mediumx10-text-w {
    opacity: 1;
}
.animated-btn.btn-xs:hover .small-text-w {
    width: 45px;
    margin-left: 5px;
}
.animated-btn.btn-xs:hover .smallx10-text-w {
    width: 55px;
    margin-left: 5px;
}
.animated-btn.btn-sm:hover .small-text-w {
    width: 50px;
    margin-left: 5px;
}
.animated-btn.btn-xs:hover .medium-text-w {
    width: 90px;
    margin-left: 5px;
}
.animated-btn.btn-xs:hover .mediumx10-text-w {
    width: 100px;
    margin-left: 5px;
}
.animated-btn.btn-sm:hover .medium-text-w {
    width: 100px;
    margin-left: 5px;
}

.mce-branding-powered-by {
    display: none !important;
}
.mce-branding {
    display: none !important;
}


/* fix for workflow progress bar text [12.05.2k17] : TH */
.workflowProgressBar {
	position: relative;
}
.percentageText {
	margin-top: 5px;
    width: 100%;
    color: #FFFFFF !important;
    text-align: center;
    position: absolute;
    top: 2px;
    text-shadow: 0px 0px 5px rgba(0, 0, 0, 0.9);
}
.progress {position: relative;}
.progress-bar {position: relative;}
#percentageUnpaid .percentageText, #percentageOverdue .percentageText, #percentagePaid  .percentageText {
	margin-top: 0px !important;
}
#fileUploadStats .progress-bar {
    position: initial !important;
}

/* new timeout dialog styles [01.09.2k18] : TH */
.ui-dialog.ui-widget.ui-widget-content {
    background: #FFF !important;
    padding: 0px;
}

.ui-dialog-titlebar {
    background: linear-gradient(45deg, #3cd3ad, #4CB8C4);
    border: 0px solid !important;
}
.ui-dialog .ui-dialog-buttonpane button {
    background: linear-gradient(45deg, #3cd3ad, #4CB8C4);
    color: #FFF !important;
    border-radius: 5px;
    border:  0px solid !important;
}
#countdownDisplay {
    font-size: 24px;
}

    .badge-pro {
        font-size: 0.6em !important;
        padding: 2px 4px 2px 4px;
    }

    /*i.actionsIcon { font-size: 26px !important; color: #3597dc;}*/
    .actionsBtn {
        background: none !important;
        padding-top: 7px;
    }

    .btn-group.open .actionsBtn {
        -webkit-box-shadow: inset 0 0px 0px rgba(0, 0, 0, 0) !important;
        box-shadow: inset 0 0px 0px rgba(0, 0, 0, 0) !important;
    }

    .tinyXIcon {
        font-size: 14px !important;
        font-weight: bold;
        margin-left: 5px;
        color: #FFFFFF !important;
        box-shadow: 1px 1px 7px 1px rgba(0, 0, 0, 0.53);
    }

    .messenger_icon {
        background: url('/admin/icons/social/facebook-messenger.svg');
        background-size: cover;
    }

/* emoji fixes */
.rightTitle {
    display: block;
    float: right;
    clear: right;
    position: relative;
}
input.form-control.emoji {
	display: none !important;
	position: relative;
	top: 0px;
	right: 0px;
	width: 100%;
	visibility: hidden;
}
.rightTitle input.form-control.emoji {
	display: block !important;
	position: relative;
	top: 0px;
	right: 0px;
	width: 100%;
	visibility: hidden;
}
.form-control.emoji:focus, .emojionearea.focused {
    border: 1px solid #6CC3A0;
    outline: 0;
    -webkit-box-shadow: inset 0 0px 0px rgba(0,0,0,.0), 0 0 0px rgba(0,0,0,.0);
    box-shadow: inset 0 0px 0px rgba(0,0,0,.0), 0 0 8px rgba(0,0,0,.0);
}
.emojionearea, .emojionearea.form-control {
    display: block;
    position: relative !important;
    top: 0px;
    right: 0px;
    width: 100%;
}
.rightTitle .emojionearea, .rightTitle .emojionearea.form-control {
    display: block;
    position: absolute !important;
    top: 0px;
    right: 0px;
    width: 100%;
}
.hidden {
    display: none;
}
/* end of emoji fixes */


.opt-out { float: right;margin-left: 5px;color: #ffffff;background-color: #FF512F;background: linear-gradient(45deg, #FF512F, #DD2476); }
.opt-out-inline {display: inline-block;margin-left: 5px;color: #ffffff;background-color: #FF512F;background: linear-gradient(45deg, #FF512F, #DD2476);}
.autopay-inline {display: inline-block;margin-left: 5px;color: #ffffff;background-color: #bb71ff;background: linear-gradient(45deg, #05d1ff, #9521ff);}

.auditLog {
	max-height: 450px;
    overflow: auto;
    margin-right: -10px;
}


/* fix for non-fa icons */
.input-icon > i {
    margin: 2px 2px 4px 10px;
}

.commentsBox {
    border: 1px solid #fff!important;
    box-shadow: 0 3px 12px 0 rgba(0,0,0,.2);
    background-color: #FFF !important;
    -moz-border-radius: .4em;
    -webkit-border-radius: .4em;
    border-radius: .4em;
    margin: 5px;
    padding: 20px;
}
.commentsBtn {
    position: relative;
    margin-right: 15px;
    margin-left: -3px !important;
}
.commentsBtn .badge {
	position: absolute;
	left: 18px;
	margin-top: -10px;
}
.commentsBtn .badge-danger {
    background-color: #F3565D !important;
    text-decoration: none !important;
}

.commentBubble {
    background: #FFF;
    border-radius: .6em;
    padding: 12px;
    margin: 2px;
    position: relative;
    border: 1px solid #fff!important;
    box-shadow: 0 3px 12px 0 rgba(0,0,0,.2);
}
.commentBubble .previewImageSmallContainer {
    -webkit-box-shadow: 0px 2px 15px rgba(0, 0, 0, 0.3);
    -moz-box-shadow: 0px 2px 15px rgba(0, 0, 0, 0.3);
    box-shadow: 0px 2px 15px rgba(0, 0, 0, 0.3);
    border: 1px solid #FFFFFF !important;
}

.commentBubble.pull-right {
    margin-right: 60px;
}
.commentBubble.pull-right:after {
    content: '';
    position: absolute;
    right: 0;
    top: 50%;
    width: 0;
    height: 0;
    border: 8px solid transparent;
    border-left-color: #ffffff;
    border-right: 0;
    margin-top: -8px;
    margin-right: -8px;
}
.commentBubble.pull-right .previewImageSmallContainer {
    position: absolute;
    right: -70px;
}

.commentBubble.pull-left {
    margin-left: 60px;
}
.commentBubble.pull-left:after {
	content: '';
	position: absolute;
	left: 0;
	top: 50%;
	width: 0;
	height: 0;
	border: 8px solid transparent;
	border-right-color: #ffffff;
	border-left: 0;
	margin-top: -8px;
	margin-left: -8px;
}
.commentBubble.pull-left .previewImageSmallContainer {
    position: absolute;
    left: -70px;
}
.commentBubble .timeago {
    font-family: "Gotham Rounded Book","Open Sans",Helvetica,sans-serif!important;
    font-size: 9px;
    color: #9a9a9a;
    float: left;
}
.commentBubble .normalTime {
    font-family: "Gotham Rounded Book","Open Sans",Helvetica,sans-serif!important;
    font-size: 9px;
    color: #9a9a9a;
    float: left;
    margin-left: 5px;
}
.commentBubble .deleteComment {
	position: absolute;
	top:0px;
	right: 0px;
}
.commentBubble .deleteComment button i {
    font-size: 11px !important;
}
.commentEditScreen {
    min-width: 350px;
    clear: both;
}
.workflowComments {
    position: absolute;
    top: 0px;
    right: 0px;
}
.completedItem .workflowComments span {
    text-decoration: none !important;
    color: #ffffff !important;
}
.workflowComments a.commentsBtn i {
    display: none;
}
.workflowComments .commentsBtn .badge {
    left: 0px;
}





/* Questionnaire conditional Decision fields : [06.07.2k18] : TH */
.guestionnaireDragModule {
    margin: 4px;
    flex-grow: 1;
    overflow: hidden;
    flex-basis: 0;
    position: relative;
}

.questionnaireDecisionZone:hover {
    border: 1px solid #CECECE;
}
.questionnaireDecisionZone {
    width: 100%;
    border: 1px solid #FFF;
    height: 100%;
    border-radius: 5px;
    display: flex;
    flex-wrap: nowrap;
    margin-top: 10px;
    padding:  10px;
    position: relative;
}
.guestionnaireDragModule h1 {
    text-align: center;
}
.questionnaireDragZone {
    background: #ffffff;
    border: 1px solid #fff!important;
    box-shadow: 0 3px 12px 0 rgba(0,0,0,.07);
    padding-bottom: 20px;
    min-height: 80px;
}
.questionnaireDragZone .textBlock {
    width: 100% !important;
}
.questionnaireDragZone .cmf-skinned-select {
    width: 90% !important;
}
.questionnaireRightBtn {
	position: absolute;
    top: 0px;
    right: 10px;
}

.previewImageSmallContainer {
    border: 1px solid #FFF !important;
    box-shadow: inset 0 1px 0 rgba(255,255,255,.35), 0 1px 3px rgba(0,0,0,.2) !important;
}



	#globalFilePickerDialog .portlet-title {
	    box-shadow: inset 0px 1px 0px rgba(255,255,255,.45),0 1px 2px rgba(0,0,0,.2);
	    border-top: 1px solid #3cd3ad;
	    background: linear-gradient(45deg, #3cd3ad, #4CB8C4);
	    margin-left: -21px !important;
	    margin-right: -21px !important;
	    margin-top: -21px !important;
	    padding: 10px !important;
	}
	#globalFilePickerDialog .caption, #globalFilePickerDialog .caption i {
	    color: #FFF;
	}
	#globalFilePickerDialog #search_query_uploads {
	    background: rgba(255,255,255,0.15);
	    color: #FFF;
	    border: 1px solid transparent;
	}
	#globalFilePickerDialog #search_query_uploads::placeholder {
		color: #FFF;
	}
	#globalFilePickerDialog #search_query_uploads_loading {
	    color: #FFF;
	}
	#globalFilePickerDialog .uploadsCloseBtn .icon-cancel {
	    color: #fff;
	    font-size: 12px !important;
	    margin-left: 15px;
	}
	#globalFilePickerDialog #object-upload-btn {
	    background: rgba(255,255,255,0.12);
	    color: #FFF;
	    border: 1px solid transparent;
	}
	#globalFilePickerDialog .dot-container .dot {
	    border: 2px solid #FFF;
	}




/* fix the overrides that get applied to the typeahead search textfield : [08.31.2k18] : TH */
.easy-autocomplete-container ul li, .easy-autocomplete-container ul .eac-category {
    margin-left: 0px;
    margin-right: 0px;
    width: 100%;
}



.leadRibbon {
  position: absolute;
  right: 10px;
  top: -5px;
  z-index: 1;
  overflow: hidden;
  width: 75px;
  height: 75px;
  text-align: right;
}
.leadRibbon span {
  font-size: 9.2px;
  font-weight: bold;
  color: #FFF;
  text-transform: uppercase;
  text-align: center;
  line-height: 20px;
  transform: rotate(45deg);
  -webkit-transform: rotate(45deg);
  width: 100px;
  display: block;
  background: #79A70A;
  background: linear-gradient(#00c4a1 0%, #47bfbd 100%);
  box-shadow: 0 3px 10px -5px rgba(0, 0, 0, 1);
  position: absolute;
  top: 19px;
  right: -21px;
}
.leadRibbon span::before {
  content: "";
  position: absolute;
  left: 0px;
  top: 100%;
  z-index: -1;
  border-left: 3px solid #00907b;
  border-right: 3px solid transparent;
  border-bottom: 3px solid transparent;
  border-top: 3px solid #00907b;
}
.leadRibbon span::after {
  content: "";
  position: absolute;
  right: 0px;
  top: 100%;
  z-index: -1;
  border-left: 3px solid transparent;
  border-right: 3px solid #00907b;
  border-bottom: 3px solid transparent;
  border-top: 3px solid #00907b;
}


.selected {	border: 1px solid #48d4b9;border-radius: 10px;}
.microDetail { text-align: right;font-size: 10px;margin: 5px;padding: 2px 5px 2px 5px; }

    .microDetail {
        text-align: right;
        font-size: 10px;
        margin: 5px;
        padding: 2px 5px 2px 5px;
    }


/* new profile badge to show how long they've been a customer */
.badge-years {
    position: absolute;
    left: -1px;
    width: 24px;
    right: unset !important;
    top: 12px !important;
    font-weight: bold !important;
    font-family: "Gotham Rounded Book",Helvetica,sans-serif !important;
    border-radius: 23% 77% 46% 54% / 21% 35% 65% 79% !important;
}
.badge-12 {
    background: linear-gradient(to right, #ff5f6d, #ffc371);
    color: #000000 !important;
}
.badge-11 {
    background: linear-gradient(to right, #3494e6, #ec6ead);
}
.badge-10 {
    background-image: linear-gradient(-225deg, #A445B2 0%, #D41872 52%, #FF0066 100%);
}
.badge-9 {
    background-image: linear-gradient(-225deg, #22E1FF 0%, #1D8FE1 48%, #625EB1 100%);
}
.badge-8 {
    background-image: linear-gradient(-225deg, #B6CEE8 0%, #F578DC 100%);
    color: #000000 !important;
}
.badge-7 {
    background-image: linear-gradient(-225deg, #FFE29F 0%, #FFA99F 48%, #FF719A 100%);
    color: #000000 !important;
}
.badge-6 {
    background-image: linear-gradient(to top, #e14fad 0%, #f9d423 100%);
    color: #000000 !important;
}
.badge-5 {
    background-image: linear-gradient(to top, #d5dee7 0%, #ffafbd 0%, #c9ffbf 100%);
    color: #000000 !important;
}
.badge-4 {
    background-image: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%);
    color: #000000 !important;
}
.badge-3 {
    background-image: linear-gradient(to right, #fa709a 0%, #fee140 100%);
}
.badge-2 {
    background-image: linear-gradient(to right, #4facfe 0%, #00f2fe 100%);
}
.badge-1 {
    background-image: linear-gradient(to right, #b8cbb8 0%, #b8cbb8 0%, #b465da 0%, #cf6cc9 33%, #ee609c 66%, #ee609c 100%);
}

/* fix for multi-select checkbox dropdowns */
.ui-multiselect-checkboxes label input {
    margin-right: 8px;
}
.ui-multiselect-checkboxes label.ui-state-hover {
    /*background-color: #48d4ba59 !important;
    background-image: none !important;*/
}


.roundedTagMed {	padding: 4px;font-size: 11px; }

.noNotificationsLeft {	visibility: hidden !important; }




/* custom Headway app notification : added on [02.18.2k19] : TH */
.pixifi-updates {
    position: absolute;
    right: 0;
    top: 50px;
    padding: 10px 0;
    overflow: hidden;
}
.pixifi-updates #HW_badge {
    background: #58efcf;
    height: 24px;
    width: 40px;
    padding: 0 7px;
    font-size: 0;
    line-height: 0;
    font-weight: 800;
    right: 0;
    text-align: left;
    top: 7px;
    border-radius: 20px 0 0 20px;
    -webkit-transform: scale(1) translateX(24px);
    -ms-transform: scale(1) translateX(24px);
    transform: scale(1) translateX(24px);
}
.pixifi-updates #HW_badge:after {
    content: "\f0a1";
    font-size: 14px;
    line-height: 24px;
    font-family: 'FontAwesome';
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    color: #ffffff;
}
.pixifi-updates #HW_badge:hover {
    background: #3ef1cb;
    -webkit-transform: scale(1) translateX(-6px);
    -ms-transform: scale(1) translateX(-6px);
    transform: scale(1) translateX(-6px)
}
.pixifi-updates #HW_badge.HW_softHidden {
    background: #46464654;
    -webkit-transform: scale(1) translateX(5px);
    -ms-transform: scale(1) translateX(5px);
    transform: scale(1) translateX(5px);
}
.pixifi-updates #HW_badge.HW_softHidden:after {
    color: #ffffff;
}
.pixifi-updates #HW_badge.HW_softHidden:hover {
    background: #3ef1cb;
    -webkit-transform: scale(1) translateX(-6px);
    -ms-transform: scale(1) translateX(-6px);
    transform: scale(1) translateX(-6px);
}
.pixifi-updates #HW_badge.HW_softHidden:hover:after {
    color: #ffffff
}
.pixifi-updates #HW_badge_cont {
	width: 42px;
}

#HW_frame_cont {
    -webkit-box-shadow: 0 0 0 6px rgba(0,0,0,0.12);
    box-shadow: 0 0 0 6px rgba(0,0,0,0.12);
    border-radius: 0
}
#HW_frame_cont:after {
    content: "";
    background: -webkit-gradient(linear, left top, right top, from(#3cd3ad), to(#4CB8C4));
    background: -webkit-linear-gradient(45deg, #3cd3ad, #4CB8C4);
    background: linear-gradient(45deg, #3cd3ad, #4CB8C4);
    position: absolute;
    top: 0;
    width: 100%;
    height: 100%;
    display: block;
    -webkit-box-shadow: 0 0 0 0 transparent;
    box-shadow: 0 0 0 0 transparent;
    -webkit-transform: translate(0, 0);
    -ms-transform: translate(0, 0);
    transform: translate(0, 0);
    -webkit-transition: all .3s .3s ease;
    transition: all .3s .3s ease;
    border-radius: 5px;
}
#HW_frame_cont.HW_visible {
    border-radius: 0;
    -webkit-transform: translate(-36px, 0);
    -ms-transform: translate(-36px, 0);
    transform: translate(-36px, 0);
    top: 20px !important;
    z-index: 99999;
}
#HW_frame_cont.HW_visible:after {
    -webkit-transform: translate(-18px, 18px);
    -ms-transform: translate(-18px, 18px);
    transform: translate(-18px, 18px);
    -webkit-box-shadow: -6px 6px 24px 0 rgba(0,0,0,0.2);
    box-shadow: -6px 6px 24px 0 rgba(0,0,0,0.2)
}

/* set a max height for email address auto-complete dropdown */
ul.textboxlist-autocomplete-results {
    max-height: 350px;
    overflow: auto;
}

.dateDisplay {
	display: inline-block;
    float: left;
    margin-right: 10px;
    margin-bottom: 10px;
    width: 42px;
    height: auto;
    background: #ffffff;
    border-radius: 3px;
    text-align: center;
    text-transform: uppercase;
    font-size: 10px;
    min-height: 50px;
    box-shadow: 0 1px 5px rgba(50,50,93,.25),0 1px 0 rgba(0,0,0,.02)!important;
}
.dateDisplay.dateClear {
	background: transparent !important;
}
.dateDisplay .day {
    width: 100%;
    height: 62%;
    padding: 2px 0 0 0;
    color: #000;
    font-size: 1.8em;
    line-height: 1em;
    font-weight: 600;
}
.dateDisplay .month {
    width: 100%;
    height: 38%;
    padding: 8px 0 0 0;
    color: rgba(0,0,0,0.6);
    font-size: 1em;
    line-height: 1em;
    font-weight: 600;
}
.dateDisplay .year {
    border-top: 1px solid #ccc;
    margin-top: 5px;
}
.dateDisplay.dateClear .year {	border-top: 0px solid #ccc;	}
.dateDisplay.inPast {
    background: linear-gradient(45deg,#e0e0e0,#FFFFFF);
    box-shadow: 0 4px 10px rgba(50,50,93,.28),0 1px 3px rgba(0,0,0,.18)!important;
}
.dateDisplay.archived {
    background: linear-gradient(45deg,#b5b5b5,#dedede);
    box-shadow: 0 4px 10px rgba(50,50,93,.28),0 1px 3px rgba(0,0,0,.18)!important;
}
.roundedTag {
    box-shadow: 0 1px 5px rgba(50,50,93,.25),0 1px 0 rgba(0,0,0,.02)!important;
}


.page-sidebar-menu.page-sidebar-menu-hover-submenu li .sub-menu {
	z-index: 99999 !important;
}
.page-sidebar-closed .page-sidebar .page-sidebar-menu.page-sidebar-menu-closed > li:hover > .sub-menu {
	z-index: 99999 !important;
}


/* to fix the menu-bar sub-menus in old layout */
@media (min-width: 992px) {
	.page-sidebar-menu.page-sidebar-menu-hover-submenu>li:hover>.sub-menu>li .sub-menu {
	    margin-left: 194px;
	    margin-top: -20%!important;
	}
}
@media (min-width: 992px) {
	.page-sidebar-menu.page-sidebar-menu-hover-submenu>li:hover>.sub-menu>li .sub-menu.listsTypesMenu {
        margin-top: -100% !important;
		width: 450px !important;
	}
	.sub-menu.listsTypesMenu li {
	    float: left;
	    width: 50% !important;
	}


	/*.page-sidebar-menu.page-sidebar-menu-hover-submenu li .sub-menu.newSubMenu {*/
	/*	width: 580px !important;*/
	/*	margin-top: -200px;*/
	/*}*/

	/*.page-sidebar-menu.page-sidebar-menu-hover-submenu > li#settingsNav:hover > .sub-menu {*/
	/*	margin-top:-450px !important;*/
	/*}*/
	/*.page-sidebar-menu.page-sidebar-menu-hover-submenu > li#templates-sidebar:hover > .sub-menu {*/
	/*	margin-top:-300px !important;*/
	/*}*/

}

/** fix the extra padding-top 25px when there is no <h2> header **/
.qtip-noheader .qtip-content {
    padding-top: 5px !important;
}


/** slide out events picker **/
.mini-calendar-loading { display: none; }

.pac-container { z-index: 9999999999; }	 /*google type ahead */

    /*google type ahead */

.scroll-to-top > i { color: #000 !important; }

.percentage-paid { z-index: 5 !important; }


.tox-statusbar__branding {
    display: none !important;
}
.tox-menu {
    z-index: 2555555 !important;
}
.tox-tiered-menu {
    z-index: 2555555 !important;
}
.tox-tinymce-aux {
    z-index: 2555555 !important;
}

.tiktok_icon { background-image: url('/admin/icons/tiktok.png'); background-size: contain; }


.complete {
    background: rgba(0,0,0,0.05);
    padding: 15px;
    border-radius: 10px;
}
.completedItem > .portlet.light.bordered {
    background: rgba(0,0,0,0.0);
    margin-left: 20px !important;
    margin-right: 20px !important;
    border: 1px solid rgba(0,0,0,0) !important;
    box-shadow: 0 3px 12px 0 rgba(0,0,0,.30) !important;
}

.pageBreak {
	width: 100%;
	height: 25px;
	border: 2px dotted #CECECE;
	text-align: center;
	border-radius: 24px;
	position:relative;
}
.pageBreak:after {
	content: ' -- Page Break -- ';
	position: relative;
	top:-20px;
	color: #999;
	text-align: center;
}


.ui-pnotify-container.alert-error {
	color: #721c24 !important;
	background-color: #f8d7da !important;
	border-color: #f5c6cb !important;
}
.ui-pnotify-container.alert-error > .ui-pnotify-title ,
.ui-pnotify-container.alert-error > .ui-pnotify-title a {
	color: #721c24 !important;
}
.ui-pnotify-container.alert-error > .ui-pnotify-text ,
.ui-pnotify-container.alert-error > .ui-pnotify-text a {
	color: #721c24 !important;
}

.icon-tiktok {
	background: url("data:image/svg+xml,%3Csvg fill='%23000000' width='16' height='16' viewBox='0 0 64 64' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M55.619 1H8.38095C4.3111 1 1 4.3111 1 8.38095V55.619C1 59.6889 4.3111 63 8.38095 63H55.619C59.6889 63 63 59.6889 63 55.619V8.38095C63 4.3111 59.6889 1 55.619 1ZM49.7231 28.0482C49.3846 28.0811 49.0447 28.0984 48.7046 28.0999C46.8681 28.1002 45.0604 27.6431 43.4448 26.7699C41.8291 25.8968 40.4563 24.635 39.4503 23.0986V40.1294C39.4503 42.6189 38.7121 45.0526 37.329 47.1226C35.9458 49.1926 33.9799 50.806 31.6799 51.7587C29.3798 52.7114 26.8489 52.9607 24.4072 52.475C21.9654 51.9893 19.7226 50.7905 17.9622 49.0301C16.2018 47.2697 15.0029 45.0268 14.5172 42.5851C14.0316 40.1433 14.2808 37.6124 15.2335 35.3124C16.1863 33.0123 17.7996 31.0464 19.8696 29.6633C21.9396 28.2801 24.3733 27.5419 26.8629 27.5419C27.1256 27.5419 27.3825 27.5655 27.6408 27.5818V33.7847C27.3825 33.7537 27.1286 33.7065 26.8629 33.7065C25.159 33.7065 23.5249 34.3833 22.3201 35.5881C21.1153 36.7929 20.4385 38.427 20.4385 40.1309C20.4385 41.8347 21.1153 43.4688 22.3201 44.6736C23.5249 45.8784 25.159 46.5552 26.8629 46.5552C30.4116 46.5552 33.5456 43.7593 33.5456 40.2106L33.6076 11.2861H39.5419C39.813 13.8645 40.9818 16.2656 42.844 18.0696C44.7062 19.8735 47.1433 20.9654 49.729 21.1544V28.0482' fill='black'/%3E%3C/svg%3E") center center no-repeat;
	width: 16px;
	height: 16px;
}






.btn-group.save-cancel-group:not(.btn-group.btn-group-sm) {
	position:relative;
	display:flex;
	flex-direction: row-reverse;
	padding:6px 8px;
	border-radius:20px;
	/*background:#F4F4F4;*/
	transition:background 0.2s;
	/*box-shadow: inset 0px 1px 10px rgba(150,150,150,0.25);*/
}
.save-cancel-group .btn.default, .save-cancel-group .btn.btn-default, .save-cancel-group .btn.blue {
	display: flex;
	justify-content: center;
	align-items: center;
	flex: 1;
	height: 35px;
	margin: 2px;
	margin-left: 2px;
	border-radius: 16px !important;
	border-top-left-radius: 16px;
	border-bottom-left-radius: 16px;
	font-size: 15px;
	transition: background 0.2s, box-shadow 0.2s, color 0.2s;
	background: none transparent !important;
	border: 0 solid #FFF !important;
	box-shadow: 0 0 0 #000 !important;
}
.save-cancel-group .btn.blue {
	color: #FFF !important;
	flex: 3;
	background: linear-gradient(45deg, #3cd3ad, #4CB8C4) !important;
	box-shadow: 0 4px 8px -4px rgba(0, 0, 0, 0.25), inset 0 -1px 1px rgba(0, 0, 0, 0.04), inset 0 2px 0 rgba(255, 255, 255, 0.25) !important;
}
.save-cancel-group .btn.default:hover,.save-cancel-group .btn.btn-default:hover {
	background: none transparent !important;
	background-image: none;
	border: 0 solid !important;
	outline: none !important;
	background-image: none !important;
	filter: none !important;
	text-shadow: none !important;
	-webkit-box-shadow: none !important;
	-moz-box-shadow: none !important;
	box-shadow: none !important;
}

.btn-group.save-cancel-group .btn{
	transition: 0.3s cubic-bezier(.53,0,.15,1.3) !important;
}
.btn-group.save-cancel-group > .btn:last-child {
	flex: 1;
}
.btn-group.save-cancel-group > .btn:first-child {
	flex: 3;
}
.btn-group.save-cancel-group > .btn:hover {
	flex: 3;
}
.btn-group.save-cancel-group  .btn:not(first-child):hover {
	flex:  9 !important;
}

.save-cancel-group .btn.blue > span.fa.fa-check {
	margin-right: 5px !important;
}
.save-cancel-group.three-buttons .btn.blue {
	flex: 0 0 calc(38% - 4px) !important
}
#intercom-form {
    max-width: 566px;
    margin: 0 auto;
}
#intercom-form label {
	color: black;
	display: block;
	margin-bottom: 5px;
}
#intercom-form span {
	color: red;
}
#intercom-form input, #intercom-form textarea {
	width: 100%;
	margin-bottom: 15px;
	padding: 8px;
	box-sizing: border-box;
	height: 40px;
	background-color: #f5f8fa !important;
	border: 1px solid #cbd6e2 !important;
}
#intercom-form input:focus, #intercom-form textarea:focus {
	border: 1px solid rgba(82, 168, 236, 0.8) !important;
}
#intercom-form textarea {
	height: 66px;
	margin-bottom: 0px;
}
#intercom-form div {
	margin-top: 18px;
    margin-bottom: 18px;
    padding: 17px 0px;
}
#intercom-form button {
	width: 130px;
	height: 38px;
	background-color: #ff7a59;
    border-color: #ff7a59;
    color: #ffffff;
    font-size: 13px;
    line-height: 12px;
	font-weight: 700 !important;
	text-align: center;
	border-radius: 3px;
    border-style: solid;
    border-width: 1px;
	padding: 12px 16px;
}
</style>
<script type="text/javascript">
	var HW_config = {
		selector: ".pixifi-updates", // CSS selector where to inject the badge
		account: "xW4lN7" // your account ID
	};

	/*var checkExist = setInterval(function() {
	   if ($('#HW_badge_cont').length && $("#HW_badge").length) {
	      $("#HW_badge.HW_visible").click();		//auto-popup on new changes //added on [03.29.2k19] : TH
	      console.log("exists");
	      clearInterval(checkExist);
	   }
	}, 1000);*/

var onElementReady = function($element) {
  return new Promise((resolve) => {
    var waitForElement = function() {
      if ($element) {
        resolve($element);
      } else {
        window.requestAnimationFrame(waitForElement);
      }
    };
    waitForElement();
  })
};

var someElement = $('#HW_badge.HW_visible');
onElementReady(someElement).then(() => {
    // your element is ready
    console.log("exists");
    setTimeout(function(){
		console.log("ready!");
   	 	$("#HW_badge.HW_visible").click();		//auto-popup on new changes //added on [03.29.2k19] : TH

    }, 15000);

  });



</script>
	<script id="profitwell-js" data-pw-auth="5b0d2972dc76bb4cc057ef3d8573e94d">
	(function(i,s,o,g,r,a,m){i[o]=i[o]||function(){(i[o].q=i[o].q||[]).push(arguments)};
		a=s.createElement(g);m=s.getElementsByTagName(g)[0];a.async=1;a.src=r+'?auth='+
			s.getElementById(o+'-js').getAttribute('data-pw-auth');m.parentNode.insertBefore(a,m);
	})(window,document,'profitwell','script','https://public.profitwell.com/js/profitwell.js');

	profitwell('start', { 'user_email': 'info@sweetmephotography.com' });
</script>
</body>
</html>
